<!DOCTYPE html><html><head><title>semantic.js</title><meta http-equiv="Content-Type" content="text/html" charset="UTF-8"><link rel="stylesheet" media="all" href="../../../../docco.css"></head><body><div id="container"><div id="background"></div><div id="jump_to">Jump To &hellip;<div id="jump_wrapper"><div id="jump_page"><a href="../../../../index.html" class="source"><span class="file_name">README</span></a><a href="../../../../app/recSession.js.html" class="source "><span class="base_path">app / </span><span class="file_name">recSession.js</span></a><a href="../../../../app/routes.js.html" class="source "><span class="base_path">app / </span><span class="file_name">routes.js</span></a><a href="../../../../app/recSessions.js.html" class="source "><span class="base_path">app / </span><span class="file_name">recSessions.js</span></a><a href="../../../../app/utils.js.html" class="source "><span class="base_path">app / </span><span class="file_name">utils.js</span></a><a href="../../../../app/yelpApi.js.html" class="source "><span class="base_path">app / </span><span class="file_name">yelpApi.js</span></a><a href="../../../../app/scraper.js.html" class="source "><span class="base_path">app / </span><span class="file_name">scraper.js</span></a><a href="../../../../public/libs/semantic/examples/feed.js.html" class="source "><span class="base_path">public / libs / semantic / examples / </span><span class="file_name">feed.js</span></a><a href="../../../../public/libs/semantic/examples/homepage.js.html" class="source "><span class="base_path">public / libs / semantic / examples / </span><span class="file_name">homepage.js</span></a><a href="../../../../public/libs/semantic/src/definitions/modules/checkbox.js.html" class="source "><span class="base_path">public / libs / semantic / src / definitions / modules / </span><span class="file_name">checkbox.js</span></a><a href="../../../../public/libs/semantic/src/definitions/modules/dimmer.js.html" class="source "><span class="base_path">public / libs / semantic / src / definitions / modules / </span><span class="file_name">dimmer.js</span></a><a href="../../../../public/libs/semantic/src/definitions/modules/dropdown.js.html" class="source "><span class="base_path">public / libs / semantic / src / definitions / modules / </span><span class="file_name">dropdown.js</span></a><a href="../../../../public/libs/semantic/src/definitions/modules/search.js.html" class="source "><span class="base_path">public / libs / semantic / src / definitions / modules / </span><span class="file_name">search.js</span></a><a href="../../../../public/libs/semantic/src/definitions/modules/progress.js.html" class="source "><span class="base_path">public / libs / semantic / src / definitions / modules / </span><span class="file_name">progress.js</span></a><a href="../../../../public/libs/semantic/src/definitions/modules/tab.js.html" class="source "><span class="base_path">public / libs / semantic / src / definitions / modules / </span><span class="file_name">tab.js</span></a><a href="../../../../public/libs/semantic/src/definitions/modules/modal.js.html" class="source "><span class="base_path">public / libs / semantic / src / definitions / modules / </span><span class="file_name">modal.js</span></a><a href="../../../../public/libs/semantic/src/definitions/modules/sticky.js.html" class="source "><span class="base_path">public / libs / semantic / src / definitions / modules / </span><span class="file_name">sticky.js</span></a><a href="../../../../public/libs/semantic/src/definitions/modules/rating.js.html" class="source "><span class="base_path">public / libs / semantic / src / definitions / modules / </span><span class="file_name">rating.js</span></a><a href="../../../../public/libs/semantic/src/definitions/modules/sidebar.js.html" class="source "><span class="base_path">public / libs / semantic / src / definitions / modules / </span><span class="file_name">sidebar.js</span></a><a href="../../../../public/libs/semantic/src/definitions/modules/popup.js.html" class="source "><span class="base_path">public / libs / semantic / src / definitions / modules / </span><span class="file_name">popup.js</span></a><a href="../../../../public/libs/semantic/src/definitions/modules/nag.js.html" class="source "><span class="base_path">public / libs / semantic / src / definitions / modules / </span><span class="file_name">nag.js</span></a><a href="../../../../public/libs/semantic/src/definitions/modules/accordion.js.html" class="source "><span class="base_path">public / libs / semantic / src / definitions / modules / </span><span class="file_name">accordion.js</span></a><a href="../../../../public/libs/semantic/src/definitions/modules/video.js.html" class="source "><span class="base_path">public / libs / semantic / src / definitions / modules / </span><span class="file_name">video.js</span></a><a href="../../../../public/libs/semantic/src/definitions/modules/shape.js.html" class="source "><span class="base_path">public / libs / semantic / src / definitions / modules / </span><span class="file_name">shape.js</span></a><a href="../../../../public/libs/semantic/src/definitions/modules/transition.js.html" class="source "><span class="base_path">public / libs / semantic / src / definitions / modules / </span><span class="file_name">transition.js</span></a><a href="../../../../public/libs/semantic/src/definitions/globals/site.js.html" class="source "><span class="base_path">public / libs / semantic / src / definitions / globals / </span><span class="file_name">site.js</span></a><a href="../../../../public/libs/semantic/src/definitions/behaviors/colorize.js.html" class="source "><span class="base_path">public / libs / semantic / src / definitions / behaviors / </span><span class="file_name">colorize.js</span></a><a href="../../../../public/libs/semantic/src/definitions/behaviors/form.js.html" class="source "><span class="base_path">public / libs / semantic / src / definitions / behaviors / </span><span class="file_name">form.js</span></a><a href="../../../../public/libs/semantic/src/definitions/behaviors/visit.js.html" class="source "><span class="base_path">public / libs / semantic / src / definitions / behaviors / </span><span class="file_name">visit.js</span></a><a href="../../../../public/libs/semantic/src/definitions/behaviors/visibility.js.html" class="source "><span class="base_path">public / libs / semantic / src / definitions / behaviors / </span><span class="file_name">visibility.js</span></a><a href="../../../../public/libs/semantic/src/definitions/behaviors/api.js.html" class="source "><span class="base_path">public / libs / semantic / src / definitions / behaviors / </span><span class="file_name">api.js</span></a><a href="../../../../public/libs/semantic/src/definitions/behaviors/state.js.html" class="source "><span class="base_path">public / libs / semantic / src / definitions / behaviors / </span><span class="file_name">state.js</span></a><a href="../../../../public/libs/semantic/dist/semantic.js.html" class="source selected"><span class="base_path">public / libs / semantic / dist / </span><span class="file_name">semantic.js</span></a><a href="../../../../public/libs/semantic/dist/semantic.min.js.html" class="source "><span class="base_path">public / libs / semantic / dist / </span><span class="file_name">semantic.min.js</span></a><a href="../../../../public/libs/semantic/dist/components/dropdown.min.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">dropdown.min.js</span></a><a href="../../../../public/libs/semantic/dist/components/visibility.min.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">visibility.min.js</span></a><a href="../../../../public/libs/semantic/dist/components/dimmer.min.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">dimmer.min.js</span></a><a href="../../../../public/libs/semantic/dist/components/video.min.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">video.min.js</span></a><a href="../../../../public/libs/semantic/dist/components/modal.min.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">modal.min.js</span></a><a href="../../../../public/libs/semantic/dist/components/checkbox.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">checkbox.js</span></a><a href="../../../../public/libs/semantic/dist/components/dimmer.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">dimmer.js</span></a><a href="../../../../public/libs/semantic/dist/components/dropdown.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">dropdown.js</span></a><a href="../../../../public/libs/semantic/dist/components/accordion.min.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">accordion.min.js</span></a><a href="../../../../public/libs/semantic/dist/components/colorize.min.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">colorize.min.js</span></a><a href="../../../../public/libs/semantic/dist/components/state.min.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">state.min.js</span></a><a href="../../../../public/libs/semantic/dist/components/site.min.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">site.min.js</span></a><a href="../../../../public/libs/semantic/dist/components/search.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">search.js</span></a><a href="../../../../public/libs/semantic/dist/components/popup.min.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">popup.min.js</span></a><a href="../../../../public/libs/semantic/dist/components/transition.min.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">transition.min.js</span></a><a href="../../../../public/libs/semantic/dist/components/form.min.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">form.min.js</span></a><a href="../../../../public/libs/semantic/dist/components/colorize.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">colorize.js</span></a><a href="../../../../public/libs/semantic/dist/components/progress.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">progress.js</span></a><a href="../../../../public/libs/semantic/dist/components/site.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">site.js</span></a><a href="../../../../public/libs/semantic/dist/components/form.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">form.js</span></a><a href="../../../../public/libs/semantic/dist/components/sticky.min.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">sticky.min.js</span></a><a href="../../../../public/libs/semantic/dist/components/visit.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">visit.js</span></a><a href="../../../../public/libs/semantic/dist/components/tab.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">tab.js</span></a><a href="../../../../public/libs/semantic/dist/components/modal.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">modal.js</span></a><a href="../../../../public/libs/semantic/dist/components/search.min.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">search.min.js</span></a><a href="../../../../public/libs/semantic/dist/components/sticky.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">sticky.js</span></a><a href="../../../../public/libs/semantic/dist/components/progress.min.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">progress.min.js</span></a><a href="../../../../public/libs/semantic/dist/components/rating.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">rating.js</span></a><a href="../../../../public/libs/semantic/dist/components/sidebar.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">sidebar.js</span></a><a href="../../../../public/libs/semantic/dist/components/visibility.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">visibility.js</span></a><a href="../../../../public/libs/semantic/dist/components/api.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">api.js</span></a><a href="../../../../public/libs/semantic/dist/components/popup.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">popup.js</span></a><a href="../../../../public/libs/semantic/dist/components/rating.min.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">rating.min.js</span></a><a href="../../../../public/libs/semantic/dist/components/nag.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">nag.js</span></a><a href="../../../../public/libs/semantic/dist/components/accordion.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">accordion.js</span></a><a href="../../../../public/libs/semantic/dist/components/checkbox.min.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">checkbox.min.js</span></a><a href="../../../../public/libs/semantic/dist/components/nag.min.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">nag.min.js</span></a><a href="../../../../public/libs/semantic/dist/components/video.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">video.js</span></a><a href="../../../../public/libs/semantic/dist/components/tab.min.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">tab.min.js</span></a><a href="../../../../public/libs/semantic/dist/components/shape.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">shape.js</span></a><a href="../../../../public/libs/semantic/dist/components/state.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">state.js</span></a><a href="../../../../public/libs/semantic/dist/components/visit.min.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">visit.min.js</span></a><a href="../../../../public/libs/semantic/dist/components/api.min.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">api.min.js</span></a><a href="../../../../public/libs/semantic/dist/components/sidebar.min.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">sidebar.min.js</span></a><a href="../../../../public/libs/semantic/dist/components/shape.min.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">shape.min.js</span></a><a href="../../../../public/libs/semantic/dist/components/transition.js.html" class="source "><span class="base_path">public / libs / semantic / dist / components / </span><span class="file_name">transition.js</span></a><a href="../../../../public/libs/semantic/tasks/banner.js.html" class="source "><span class="base_path">public / libs / semantic / tasks / </span><span class="file_name">banner.js</span></a><a href="../../../../public/libs/semantic/tasks/log.js.html" class="source "><span class="base_path">public / libs / semantic / tasks / </span><span class="file_name">log.js</span></a><a href="../../../../public/libs/semantic/tasks/defaults.js.html" class="source "><span class="base_path">public / libs / semantic / tasks / </span><span class="file_name">defaults.js</span></a><a href="../../../../public/libs/semantic/tasks/comments.js.html" class="source "><span class="base_path">public / libs / semantic / tasks / </span><span class="file_name">comments.js</span></a><a href="../../../../public/libs/semantic/tasks/gulp-settings.js.html" class="source "><span class="base_path">public / libs / semantic / tasks / </span><span class="file_name">gulp-settings.js</span></a><a href="../../../../public/libs/semantic/tasks/admin/oauth.example.js.html" class="source "><span class="base_path">public / libs / semantic / tasks / admin / </span><span class="file_name">oauth.example.js</span></a><a href="../../../../public/libs/semantic/tasks/admin/release.js.html" class="source "><span class="base_path">public / libs / semantic / tasks / admin / </span><span class="file_name">release.js</span></a><a href="../../../../public/libs/semantic/tasks/admin/questions.js.html" class="source "><span class="base_path">public / libs / semantic / tasks / admin / </span><span class="file_name">questions.js</span></a><a href="../../../../public/libs/semantic/tasks/questions.js.html" class="source "><span class="base_path">public / libs / semantic / tasks / </span><span class="file_name">questions.js</span></a><a href="../../../../public/libs/semantic/karma.conf.js.html" class="source "><span class="base_path">public / libs / semantic / </span><span class="file_name">karma.conf.js</span></a><a href="../../../../public/libs/semantic/gulpfile.js.html" class="source "><span class="base_path">public / libs / semantic / </span><span class="file_name">gulpfile.js</span></a><a href="../../../../public/libs/jquery/src/dimensions.js.html" class="source "><span class="base_path">public / libs / jquery / src / </span><span class="file_name">dimensions.js</span></a><a href="../../../../public/libs/jquery/src/data/Data.js.html" class="source "><span class="base_path">public / libs / jquery / src / data / </span><span class="file_name">Data.js</span></a><a href="../../../../public/libs/jquery/src/data/var/data_user.js.html" class="source "><span class="base_path">public / libs / jquery / src / data / var / </span><span class="file_name">data_user.js</span></a><a href="../../../../public/libs/jquery/src/data/var/data_priv.js.html" class="source "><span class="base_path">public / libs / jquery / src / data / var / </span><span class="file_name">data_priv.js</span></a><a href="../../../../public/libs/jquery/src/data/accepts.js.html" class="source "><span class="base_path">public / libs / jquery / src / data / </span><span class="file_name">accepts.js</span></a><a href="../../../../public/libs/jquery/src/outro.js.html" class="source "><span class="base_path">public / libs / jquery / src / </span><span class="file_name">outro.js</span></a><a href="../../../../public/libs/jquery/src/wrap.js.html" class="source "><span class="base_path">public / libs / jquery / src / </span><span class="file_name">wrap.js</span></a><a href="../../../../public/libs/jquery/src/ajax/xhr.js.html" class="source "><span class="base_path">public / libs / jquery / src / ajax / </span><span class="file_name">xhr.js</span></a><a href="../../../../public/libs/jquery/src/ajax/parseJSON.js.html" class="source "><span class="base_path">public / libs / jquery / src / ajax / </span><span class="file_name">parseJSON.js</span></a><a href="../../../../public/libs/jquery/src/ajax/parseXML.js.html" class="source "><span class="base_path">public / libs / jquery / src / ajax / </span><span class="file_name">parseXML.js</span></a><a href="../../../../public/libs/jquery/src/ajax/script.js.html" class="source "><span class="base_path">public / libs / jquery / src / ajax / </span><span class="file_name">script.js</span></a><a href="../../../../public/libs/jquery/src/ajax/load.js.html" class="source "><span class="base_path">public / libs / jquery / src / ajax / </span><span class="file_name">load.js</span></a><a href="../../../../public/libs/jquery/src/ajax/var/rquery.js.html" class="source "><span class="base_path">public / libs / jquery / src / ajax / var / </span><span class="file_name">rquery.js</span></a><a href="../../../../public/libs/jquery/src/ajax/var/nonce.js.html" class="source "><span class="base_path">public / libs / jquery / src / ajax / var / </span><span class="file_name">nonce.js</span></a><a href="../../../../public/libs/jquery/src/ajax/jsonp.js.html" class="source "><span class="base_path">public / libs / jquery / src / ajax / </span><span class="file_name">jsonp.js</span></a><a href="../../../../public/libs/jquery/src/effects/animatedSelector.js.html" class="source "><span class="base_path">public / libs / jquery / src / effects / </span><span class="file_name">animatedSelector.js</span></a><a href="../../../../public/libs/jquery/src/effects/Tween.js.html" class="source "><span class="base_path">public / libs / jquery / src / effects / </span><span class="file_name">Tween.js</span></a><a href="../../../../public/libs/jquery/src/selector-sizzle.js.html" class="source "><span class="base_path">public / libs / jquery / src / </span><span class="file_name">selector-sizzle.js</span></a><a href="../../../../public/libs/jquery/src/effects.js.html" class="source "><span class="base_path">public / libs / jquery / src / </span><span class="file_name">effects.js</span></a><a href="../../../../public/libs/jquery/src/selector-native.js.html" class="source "><span class="base_path">public / libs / jquery / src / </span><span class="file_name">selector-native.js</span></a><a href="../../../../public/libs/jquery/src/attributes.js.html" class="source "><span class="base_path">public / libs / jquery / src / </span><span class="file_name">attributes.js</span></a><a href="../../../../public/libs/jquery/src/core.js.html" class="source "><span class="base_path">public / libs / jquery / src / </span><span class="file_name">core.js</span></a><a href="../../../../public/libs/jquery/src/serialize.js.html" class="source "><span class="base_path">public / libs / jquery / src / </span><span class="file_name">serialize.js</span></a><a href="../../../../public/libs/jquery/src/selector.js.html" class="source "><span class="base_path">public / libs / jquery / src / </span><span class="file_name">selector.js</span></a><a href="../../../../public/libs/jquery/src/deprecated.js.html" class="source "><span class="base_path">public / libs / jquery / src / </span><span class="file_name">deprecated.js</span></a><a href="../../../../public/libs/jquery/src/event.js.html" class="source "><span class="base_path">public / libs / jquery / src / </span><span class="file_name">event.js</span></a><a href="../../../../public/libs/jquery/src/manipulation/_evalUrl.js.html" class="source "><span class="base_path">public / libs / jquery / src / manipulation / </span><span class="file_name">_evalUrl.js</span></a><a href="../../../../public/libs/jquery/src/manipulation/var/rcheckableType.js.html" class="source "><span class="base_path">public / libs / jquery / src / manipulation / var / </span><span class="file_name">rcheckableType.js</span></a><a href="../../../../public/libs/jquery/src/manipulation/support.js.html" class="source "><span class="base_path">public / libs / jquery / src / manipulation / </span><span class="file_name">support.js</span></a><a href="../../../../public/libs/jquery/src/offset.js.html" class="source "><span class="base_path">public / libs / jquery / src / </span><span class="file_name">offset.js</span></a><a href="../../../../public/libs/jquery/src/exports/global.js.html" class="source "><span class="base_path">public / libs / jquery / src / exports / </span><span class="file_name">global.js</span></a><a href="../../../../public/libs/jquery/src/exports/amd.js.html" class="source "><span class="base_path">public / libs / jquery / src / exports / </span><span class="file_name">amd.js</span></a><a href="../../../../public/libs/jquery/src/var/hasOwn.js.html" class="source "><span class="base_path">public / libs / jquery / src / var / </span><span class="file_name">hasOwn.js</span></a><a href="../../../../public/libs/jquery/src/var/concat.js.html" class="source "><span class="base_path">public / libs / jquery / src / var / </span><span class="file_name">concat.js</span></a><a href="../../../../public/libs/jquery/src/var/slice.js.html" class="source "><span class="base_path">public / libs / jquery / src / var / </span><span class="file_name">slice.js</span></a><a href="../../../../public/libs/jquery/src/var/rnotwhite.js.html" class="source "><span class="base_path">public / libs / jquery / src / var / </span><span class="file_name">rnotwhite.js</span></a><a href="../../../../public/libs/jquery/src/var/arr.js.html" class="source "><span class="base_path">public / libs / jquery / src / var / </span><span class="file_name">arr.js</span></a><a href="../../../../public/libs/jquery/src/var/indexOf.js.html" class="source "><span class="base_path">public / libs / jquery / src / var / </span><span class="file_name">indexOf.js</span></a><a href="../../../../public/libs/jquery/src/var/class2type.js.html" class="source "><span class="base_path">public / libs / jquery / src / var / </span><span class="file_name">class2type.js</span></a><a href="../../../../public/libs/jquery/src/var/pnum.js.html" class="source "><span class="base_path">public / libs / jquery / src / var / </span><span class="file_name">pnum.js</span></a><a href="../../../../public/libs/jquery/src/var/strundefined.js.html" class="source "><span class="base_path">public / libs / jquery / src / var / </span><span class="file_name">strundefined.js</span></a><a href="../../../../public/libs/jquery/src/var/support.js.html" class="source "><span class="base_path">public / libs / jquery / src / var / </span><span class="file_name">support.js</span></a><a href="../../../../public/libs/jquery/src/var/push.js.html" class="source "><span class="base_path">public / libs / jquery / src / var / </span><span class="file_name">push.js</span></a><a href="../../../../public/libs/jquery/src/var/toString.js.html" class="source "><span class="base_path">public / libs / jquery / src / var / </span><span class="file_name">toString.js</span></a><a href="../../../../public/libs/jquery/src/traversing.js.html" class="source "><span class="base_path">public / libs / jquery / src / </span><span class="file_name">traversing.js</span></a><a href="../../../../public/libs/jquery/src/queue.js.html" class="source "><span class="base_path">public / libs / jquery / src / </span><span class="file_name">queue.js</span></a><a href="../../../../public/libs/jquery/src/attributes/prop.js.html" class="source "><span class="base_path">public / libs / jquery / src / attributes / </span><span class="file_name">prop.js</span></a><a href="../../../../public/libs/jquery/src/attributes/attr.js.html" class="source "><span class="base_path">public / libs / jquery / src / attributes / </span><span class="file_name">attr.js</span></a><a href="../../../../public/libs/jquery/src/attributes/support.js.html" class="source "><span class="base_path">public / libs / jquery / src / attributes / </span><span class="file_name">support.js</span></a><a href="../../../../public/libs/jquery/src/attributes/val.js.html" class="source "><span class="base_path">public / libs / jquery / src / attributes / </span><span class="file_name">val.js</span></a><a href="../../../../public/libs/jquery/src/attributes/classes.js.html" class="source "><span class="base_path">public / libs / jquery / src / attributes / </span><span class="file_name">classes.js</span></a><a href="../../../../public/libs/jquery/src/intro.js.html" class="source "><span class="base_path">public / libs / jquery / src / </span><span class="file_name">intro.js</span></a><a href="../../../../public/libs/jquery/src/callbacks.js.html" class="source "><span class="base_path">public / libs / jquery / src / </span><span class="file_name">callbacks.js</span></a><a href="../../../../public/libs/jquery/src/sizzle/dist/sizzle.min.js.html" class="source "><span class="base_path">public / libs / jquery / src / sizzle / dist / </span><span class="file_name">sizzle.min.js</span></a><a href="../../../../public/libs/jquery/src/sizzle/dist/sizzle.js.html" class="source "><span class="base_path">public / libs / jquery / src / sizzle / dist / </span><span class="file_name">sizzle.js</span></a><a href="../../../../public/libs/jquery/src/data.js.html" class="source "><span class="base_path">public / libs / jquery / src / </span><span class="file_name">data.js</span></a><a href="../../../../public/libs/jquery/src/manipulation.js.html" class="source "><span class="base_path">public / libs / jquery / src / </span><span class="file_name">manipulation.js</span></a><a href="../../../../public/libs/jquery/src/deferred.js.html" class="source "><span class="base_path">public / libs / jquery / src / </span><span class="file_name">deferred.js</span></a><a href="../../../../public/libs/jquery/src/core/access.js.html" class="source "><span class="base_path">public / libs / jquery / src / core / </span><span class="file_name">access.js</span></a><a href="../../../../public/libs/jquery/src/core/parseHTML.js.html" class="source "><span class="base_path">public / libs / jquery / src / core / </span><span class="file_name">parseHTML.js</span></a><a href="../../../../public/libs/jquery/src/core/ready.js.html" class="source "><span class="base_path">public / libs / jquery / src / core / </span><span class="file_name">ready.js</span></a><a href="../../../../public/libs/jquery/src/core/var/rsingleTag.js.html" class="source "><span class="base_path">public / libs / jquery / src / core / var / </span><span class="file_name">rsingleTag.js</span></a><a href="../../../../public/libs/jquery/src/core/init.js.html" class="source "><span class="base_path">public / libs / jquery / src / core / </span><span class="file_name">init.js</span></a><a href="../../../../public/libs/jquery/src/css.js.html" class="source "><span class="base_path">public / libs / jquery / src / </span><span class="file_name">css.js</span></a><a href="../../../../public/libs/jquery/src/ajax.js.html" class="source "><span class="base_path">public / libs / jquery / src / </span><span class="file_name">ajax.js</span></a><a href="../../../../public/libs/jquery/src/jquery.js.html" class="source "><span class="base_path">public / libs / jquery / src / </span><span class="file_name">jquery.js</span></a><a href="../../../../public/libs/jquery/src/queue/delay.js.html" class="source "><span class="base_path">public / libs / jquery / src / queue / </span><span class="file_name">delay.js</span></a><a href="../../../../public/libs/jquery/src/css/addGetHookIf.js.html" class="source "><span class="base_path">public / libs / jquery / src / css / </span><span class="file_name">addGetHookIf.js</span></a><a href="../../../../public/libs/jquery/src/css/hiddenVisibleSelectors.js.html" class="source "><span class="base_path">public / libs / jquery / src / css / </span><span class="file_name">hiddenVisibleSelectors.js</span></a><a href="../../../../public/libs/jquery/src/css/swap.js.html" class="source "><span class="base_path">public / libs / jquery / src / css / </span><span class="file_name">swap.js</span></a><a href="../../../../public/libs/jquery/src/css/var/cssExpand.js.html" class="source "><span class="base_path">public / libs / jquery / src / css / var / </span><span class="file_name">cssExpand.js</span></a><a href="../../../../public/libs/jquery/src/css/var/rnumnonpx.js.html" class="source "><span class="base_path">public / libs / jquery / src / css / var / </span><span class="file_name">rnumnonpx.js</span></a><a href="../../../../public/libs/jquery/src/css/var/rmargin.js.html" class="source "><span class="base_path">public / libs / jquery / src / css / var / </span><span class="file_name">rmargin.js</span></a><a href="../../../../public/libs/jquery/src/css/var/getStyles.js.html" class="source "><span class="base_path">public / libs / jquery / src / css / var / </span><span class="file_name">getStyles.js</span></a><a href="../../../../public/libs/jquery/src/css/var/isHidden.js.html" class="source "><span class="base_path">public / libs / jquery / src / css / var / </span><span class="file_name">isHidden.js</span></a><a href="../../../../public/libs/jquery/src/css/defaultDisplay.js.html" class="source "><span class="base_path">public / libs / jquery / src / css / </span><span class="file_name">defaultDisplay.js</span></a><a href="../../../../public/libs/jquery/src/css/support.js.html" class="source "><span class="base_path">public / libs / jquery / src / css / </span><span class="file_name">support.js</span></a><a href="../../../../public/libs/jquery/src/css/curCSS.js.html" class="source "><span class="base_path">public / libs / jquery / src / css / </span><span class="file_name">curCSS.js</span></a><a href="../../../../public/libs/jquery/src/event/alias.js.html" class="source "><span class="base_path">public / libs / jquery / src / event / </span><span class="file_name">alias.js</span></a><a href="../../../../public/libs/jquery/src/event/support.js.html" class="source "><span class="base_path">public / libs / jquery / src / event / </span><span class="file_name">support.js</span></a><a href="../../../../public/libs/jquery/src/traversing/findFilter.js.html" class="source "><span class="base_path">public / libs / jquery / src / traversing / </span><span class="file_name">findFilter.js</span></a><a href="../../../../public/libs/jquery/src/traversing/var/rneedsContext.js.html" class="source "><span class="base_path">public / libs / jquery / src / traversing / var / </span><span class="file_name">rneedsContext.js</span></a><a href="../../../../public/libs/jquery/dist/jquery.min.js.html" class="source "><span class="base_path">public / libs / jquery / dist / </span><span class="file_name">jquery.min.js</span></a><a href="../../../../public/libs/jquery/dist/jquery.js.html" class="source "><span class="base_path">public / libs / jquery / dist / </span><span class="file_name">jquery.js</span></a><a href="../../../../public/libs/ngAutocomplete/examples/advanced.js.html" class="source "><span class="base_path">public / libs / ngAutocomplete / examples / </span><span class="file_name">advanced.js</span></a><a href="../../../../public/libs/ngAutocomplete/src/ngAutocomplete.js.html" class="source "><span class="base_path">public / libs / ngAutocomplete / src / </span><span class="file_name">ngAutocomplete.js</span></a><a href="../../../../public/libs/angular-animate/angular-animate.js.html" class="source "><span class="base_path">public / libs / angular-animate / </span><span class="file_name">angular-animate.js</span></a><a href="../../../../public/libs/angular-animate/angular-animate.min.js.html" class="source "><span class="base_path">public / libs / angular-animate / </span><span class="file_name">angular-animate.min.js</span></a><a href="../../../../public/libs/angular/angular.js.html" class="source "><span class="base_path">public / libs / angular / </span><span class="file_name">angular.js</span></a><a href="../../../../public/libs/angular/angular.min.js.html" class="source "><span class="base_path">public / libs / angular / </span><span class="file_name">angular.min.js</span></a><a href="../../../../public/js/app.js.html" class="source "><span class="base_path">public / js / </span><span class="file_name">app.js</span></a><a href="../../../../public/js/services/recs.js.html" class="source "><span class="base_path">public / js / services / </span><span class="file_name">recs.js</span></a><a href="../../../../public/js/controllers/main.js.html" class="source "><span class="base_path">public / js / controllers / </span><span class="file_name">main.js</span></a></div></div></div><table cellpadding="0" cellspacing="0"><thead><tr><th class="docs"><h1>semantic.js</h1><div class="filepath">public/libs/semantic/dist/</div></th><th class="code"></th></tr></thead><tbody><tr id="section-1"><td class="docs"><div class="pilwrap"><a href="#section-1" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><h1>Semantic UI</h1>

<p><a href='https://github.com/Semantic-Org/Semantic-UI'>https://github.com/Semantic-Org/Semantic-UI</a><br /><a href='http://www.semantic-ui.com/'>http://www.semantic-ui.com/</a></p></div><div class="body"><p>Copyright 2014 Contributors<br />Released under the MIT license<br /><a href='http://opensource.org/licenses/MIT'>http://opensource.org/licenses/MIT</a></p></div></div><div class="dox"><div class="summary"><h1>Semantic - Accordion</h1>

<p><a href='http://github.com/semantic-org/semantic-ui/'>http://github.com/semantic-org/semantic-ui/</a></p></div><div class="body"><p>Copyright 2014 Contributor<br />Released under the MIT license<br /><a href='http://opensource.org/licenses/MIT'>http://opensource.org/licenses/MIT</a></p></div></div>
</td><td class="code"><div class="highlight"><pre><span class="p">;(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">$</span><span class="p">,</span> <span class="nb">window</span><span class="p">,</span> <span class="nb">document</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>

<span class="s2">&quot;use strict&quot;</span><span class="p">;</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">accordion</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span>
    <span class="nx">$allModules</span>     <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>

    <span class="nx">time</span>            <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">(),</span>
    <span class="nx">performance</span>     <span class="o">=</span> <span class="p">[],</span>

    <span class="nx">query</span>           <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="nx">methodInvoked</span>   <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">),</span>
    <span class="nx">queryArguments</span>  <span class="o">=</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>

    <span class="nx">requestAnimationFrame</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">requestAnimationFrame</span>
      <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">mozRequestAnimationFrame</span>
      <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">webkitRequestAnimationFrame</span>
      <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">msRequestAnimationFrame</span>
      <span class="o">||</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="p">},</span>

    <span class="nx">returnedValue</span>
  <span class="p">;</span>
  <span class="nx">$allModules</span>
    <span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span>
        <span class="nx">settings</span>        <span class="o">=</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span> <span class="p">)</span>
          <span class="o">?</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">accordion</span><span class="p">.</span><span class="nx">settings</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">)</span>
          <span class="o">:</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">accordion</span><span class="p">.</span><span class="nx">settings</span><span class="p">),</span>

        <span class="nx">className</span>       <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">className</span><span class="p">,</span>
        <span class="nx">namespace</span>       <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">namespace</span><span class="p">,</span>
        <span class="nx">selector</span>        <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">selector</span><span class="p">,</span>
        <span class="nx">error</span>           <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span>

        <span class="nx">eventNamespace</span>  <span class="o">=</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">,</span>
        <span class="nx">moduleNamespace</span> <span class="o">=</span> <span class="s1">&#39;module-&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">,</span>
        <span class="nx">moduleSelector</span>  <span class="o">=</span> <span class="nx">$allModules</span><span class="p">.</span><span class="nx">selector</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>

        <span class="nx">$module</span>  <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
        <span class="nx">$title</span>   <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">title</span><span class="p">),</span>
        <span class="nx">$content</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">content</span><span class="p">),</span>

        <span class="nx">element</span>  <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
        <span class="nx">instance</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">),</span>
        <span class="nx">observer</span><span class="p">,</span>
        <span class="nx">module</span>
      <span class="p">;</span>

      <span class="nx">module</span> <span class="o">=</span> <span class="p">{</span>

        <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Initializing accordion with bound events&#39;</span><span class="p">,</span> <span class="nx">$module</span><span class="p">);</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">title</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">click</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">observeChanges</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">instantiate</span><span class="p">();</span>
        <span class="p">},</span>

        <span class="nx">instantiate</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">instance</span> <span class="o">=</span> <span class="nx">module</span><span class="p">;</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">destroy</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Destroying previous accordion for&#39;</span><span class="p">,</span> <span class="nx">$module</span><span class="p">);</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">removeData</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$title</span>
            <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">eventNamespace</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">refresh</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">$title</span>   <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">title</span><span class="p">);</span>
          <span class="nx">$content</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">content</span><span class="p">);</span>
        <span class="p">},</span>

        <span class="nx">observeChanges</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="s1">&#39;MutationObserver&#39;</span> <span class="k">in</span> <span class="nb">window</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">observer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MutationObserver</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">mutations</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;DOM tree modified, updating selector cache&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">refresh</span><span class="p">();</span>
            <span class="p">});</span>
            <span class="nx">observer</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="p">{</span>
              <span class="nx">childList</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
              <span class="nx">subtree</span>   <span class="o">:</span> <span class="kc">true</span>
            <span class="p">});</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Setting up mutation observer&#39;</span><span class="p">,</span> <span class="nx">observer</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>


        <span class="nx">event</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">click</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">toggle</span><span class="p">,</span> <span class="k">this</span><span class="p">)();</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">toggle</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">query</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">$activeTitle</span> <span class="o">=</span> <span class="p">(</span><span class="nx">query</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
              <span class="o">?</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">===</span> <span class="s1">&#39;number&#39;</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">$title</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span><span class="nx">query</span><span class="p">)</span>
                <span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="nx">query</span><span class="p">)</span>
              <span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
            <span class="nx">$activeContent</span> <span class="o">=</span> <span class="nx">$activeTitle</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="nx">$content</span><span class="p">),</span>
            <span class="nx">contentIsOpen</span>  <span class="o">=</span> <span class="nx">$activeContent</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;:visible&#39;</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Toggling visibility of content&#39;</span><span class="p">,</span> <span class="nx">$activeTitle</span><span class="p">);</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">contentIsOpen</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">collapsible</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">close</span><span class="p">,</span> <span class="nx">$activeTitle</span><span class="p">)();</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Cannot close accordion content collapsing is disabled&#39;</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">open</span><span class="p">,</span> <span class="nx">$activeTitle</span><span class="p">)();</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">open</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">query</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">$activeTitle</span> <span class="o">=</span> <span class="p">(</span><span class="nx">query</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
              <span class="o">?</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">===</span> <span class="s1">&#39;number&#39;</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">$title</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span><span class="nx">query</span><span class="p">)</span>
                <span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="nx">query</span><span class="p">)</span>
              <span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
            <span class="nx">$activeContent</span>     <span class="o">=</span> <span class="nx">$activeTitle</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="nx">$content</span><span class="p">),</span>
            <span class="nx">currentlyAnimating</span> <span class="o">=</span> <span class="nx">$activeContent</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;:animated&#39;</span><span class="p">),</span>
            <span class="nx">currentlyActive</span>    <span class="o">=</span> <span class="nx">$activeContent</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">currentlyAnimating</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">currentlyActive</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Opening accordion content&#39;</span><span class="p">,</span> <span class="nx">$activeTitle</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">exclusive</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">closeOthers</span><span class="p">,</span> <span class="nx">$activeTitle</span><span class="p">)();</span>
            <span class="p">}</span>
            <span class="nx">$activeTitle</span>
              <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="nx">$activeContent</span>
              <span class="p">.</span><span class="nx">stop</span><span class="p">()</span>
              <span class="p">.</span><span class="nx">children</span><span class="p">()</span>
                <span class="p">.</span><span class="nx">stop</span><span class="p">()</span>
                <span class="p">.</span><span class="nx">animate</span><span class="p">({</span>
                  <span class="nx">opacity</span><span class="o">:</span> <span class="mi">1</span>
                <span class="p">},</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">reset</span><span class="p">.</span><span class="nx">display</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">end</span><span class="p">()</span>
              <span class="p">.</span><span class="nx">slideDown</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">easing</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">$activeContent</span>
                  <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span>
                <span class="p">;</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">reset</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span> <span class="k">this</span><span class="p">)();</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onOpen</span><span class="p">,</span> <span class="k">this</span><span class="p">)();</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onChange</span><span class="p">,</span> <span class="k">this</span><span class="p">)();</span>
              <span class="p">})</span>
            <span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">close</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">query</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">$activeTitle</span> <span class="o">=</span> <span class="p">(</span><span class="nx">query</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
              <span class="o">?</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">===</span> <span class="s1">&#39;number&#39;</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">$title</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span><span class="nx">query</span><span class="p">)</span>
                <span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="nx">query</span><span class="p">)</span>
              <span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
            <span class="nx">$activeContent</span> <span class="o">=</span> <span class="nx">$activeTitle</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="nx">$content</span><span class="p">),</span>
            <span class="nx">isActive</span>       <span class="o">=</span> <span class="nx">$activeContent</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">isActive</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Closing accordion content&#39;</span><span class="p">,</span> <span class="nx">$activeContent</span><span class="p">);</span>
            <span class="nx">$activeTitle</span>
              <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="nx">$activeContent</span>
              <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">show</span><span class="p">()</span>
              <span class="p">.</span><span class="nx">stop</span><span class="p">()</span>
              <span class="p">.</span><span class="nx">children</span><span class="p">()</span>
                <span class="p">.</span><span class="nx">stop</span><span class="p">()</span>
                <span class="p">.</span><span class="nx">animate</span><span class="p">({</span>
                  <span class="nx">opacity</span><span class="o">:</span> <span class="mi">0</span>
                <span class="p">},</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">reset</span><span class="p">.</span><span class="nx">opacity</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">end</span><span class="p">()</span>
              <span class="p">.</span><span class="nx">slideUp</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">easing</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">reset</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span> <span class="k">this</span><span class="p">)();</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onClose</span><span class="p">,</span> <span class="k">this</span><span class="p">)();</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onChange</span><span class="p">,</span> <span class="k">this</span><span class="p">)();</span>
              <span class="p">})</span>
            <span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">closeOthers</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">$activeTitle</span> <span class="o">=</span> <span class="p">(</span><span class="nx">index</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
              <span class="o">?</span> <span class="nx">$title</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span><span class="nx">index</span><span class="p">)</span>
              <span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
            <span class="nx">$parentTitles</span>    <span class="o">=</span> <span class="nx">$activeTitle</span><span class="p">.</span><span class="nx">parents</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">content</span><span class="p">).</span><span class="nx">prev</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">title</span><span class="p">),</span>
            <span class="nx">$activeAccordion</span> <span class="o">=</span> <span class="nx">$activeTitle</span><span class="p">.</span><span class="nx">closest</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">accordion</span><span class="p">),</span>
            <span class="nx">activeSelector</span>   <span class="o">=</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">title</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">className</span><span class="p">.</span><span class="nx">active</span> <span class="o">+</span> <span class="s1">&#39;:visible&#39;</span><span class="p">,</span>
            <span class="nx">activeContent</span>    <span class="o">=</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">content</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">className</span><span class="p">.</span><span class="nx">active</span> <span class="o">+</span> <span class="s1">&#39;:visible&#39;</span><span class="p">,</span>
            <span class="nx">$openTitles</span><span class="p">,</span>
            <span class="nx">$nestedTitles</span><span class="p">,</span>
            <span class="nx">$openContents</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">closeNested</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$openTitles</span>   <span class="o">=</span> <span class="nx">$activeAccordion</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">activeSelector</span><span class="p">).</span><span class="nx">not</span><span class="p">(</span><span class="nx">$parentTitles</span><span class="p">);</span>
            <span class="nx">$openContents</span> <span class="o">=</span> <span class="nx">$openTitles</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="nx">$content</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">$openTitles</span>   <span class="o">=</span> <span class="nx">$activeAccordion</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">activeSelector</span><span class="p">).</span><span class="nx">not</span><span class="p">(</span><span class="nx">$parentTitles</span><span class="p">);</span>
            <span class="nx">$nestedTitles</span> <span class="o">=</span> <span class="nx">$activeAccordion</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">activeContent</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="nx">activeSelector</span><span class="p">).</span><span class="nx">not</span><span class="p">(</span><span class="nx">$parentTitles</span><span class="p">);</span>
            <span class="nx">$openTitles</span> <span class="o">=</span> <span class="nx">$openTitles</span><span class="p">.</span><span class="nx">not</span><span class="p">(</span><span class="nx">$nestedTitles</span><span class="p">);</span>
            <span class="nx">$openContents</span> <span class="o">=</span> <span class="nx">$openTitles</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="nx">$content</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span> <span class="p">(</span><span class="nx">$openTitles</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Exclusive enabled, closing other content&#39;</span><span class="p">,</span> <span class="nx">$openTitles</span><span class="p">);</span>
            <span class="nx">$openTitles</span>
              <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="nx">$openContents</span>
              <span class="p">.</span><span class="nx">stop</span><span class="p">()</span>
              <span class="p">.</span><span class="nx">children</span><span class="p">()</span>
                <span class="p">.</span><span class="nx">stop</span><span class="p">()</span>
                <span class="p">.</span><span class="nx">animate</span><span class="p">({</span>
                  <span class="nx">opacity</span><span class="o">:</span> <span class="mi">0</span>
                <span class="p">},</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">resetOpacity</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">end</span><span class="p">()</span>
              <span class="p">.</span><span class="nx">slideUp</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span> <span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">easing</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">);</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">reset</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span> <span class="k">this</span><span class="p">)();</span>
              <span class="p">})</span>
            <span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">reset</span><span class="o">:</span> <span class="p">{</span>

          <span class="nx">display</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Removing inline display from element&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;display&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;style&#39;</span><span class="p">)</span> <span class="o">===</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;style&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">removeAttr</span><span class="p">(</span><span class="s1">&#39;style&#39;</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
          <span class="p">},</span>

          <span class="nx">opacity</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Removing inline opacity from element&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;opacity&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;style&#39;</span><span class="p">)</span> <span class="o">===</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;style&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">removeAttr</span><span class="p">(</span><span class="s1">&#39;style&#39;</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
          <span class="p">},</span>

        <span class="p">},</span>

        <span class="nx">setting</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Changing setting&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">settings</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">internal</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Changing internal&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">module</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">debug</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">verbose</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">&amp;&amp;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">performance</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">log</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">currentTime</span><span class="p">,</span>
              <span class="nx">executionTime</span><span class="p">,</span>
              <span class="nx">previousTime</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">currentTime</span>   <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>
              <span class="nx">previousTime</span>  <span class="o">=</span> <span class="nx">time</span> <span class="o">||</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">executionTime</span> <span class="o">=</span> <span class="nx">currentTime</span> <span class="o">-</span> <span class="nx">previousTime</span><span class="p">;</span>
              <span class="nx">time</span>          <span class="o">=</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">performance</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
                <span class="s1">&#39;Name&#39;</span>           <span class="o">:</span> <span class="nx">message</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="s1">&#39;Arguments&#39;</span>      <span class="o">:</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Element&#39;</span>        <span class="o">:</span> <span class="nx">element</span><span class="p">,</span>
                <span class="s1">&#39;Execution Time&#39;</span> <span class="o">:</span> <span class="nx">executionTime</span>
              <span class="p">});</span>
            <span class="p">}</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">display</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">title</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span>
              <span class="nx">totalTime</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="p">;</span>
            <span class="nx">time</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">totalTime</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">];</span>
            <span class="p">});</span>
            <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">totalTime</span> <span class="o">+</span> <span class="s1">&#39;ms&#39;</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">moduleSelector</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; \&#39;&#39;</span> <span class="o">+</span> <span class="nx">moduleSelector</span> <span class="o">+</span> <span class="s1">&#39;\&#39;&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span> <span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">group</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">console</span><span class="p">.</span><span class="nx">table</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">performance</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupCollapsed</span><span class="p">(</span><span class="nx">title</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">performance</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;ms&#39;</span><span class="p">);</span>
                <span class="p">});</span>
              <span class="p">}</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupEnd</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">performance</span> <span class="o">=</span> <span class="p">[];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">invoke</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">object</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">,</span>
            <span class="nx">maxDepth</span><span class="p">,</span>
            <span class="nx">found</span><span class="p">,</span>
            <span class="nx">response</span>
          <span class="p">;</span>
          <span class="nx">passedArguments</span> <span class="o">=</span> <span class="nx">passedArguments</span> <span class="o">||</span> <span class="nx">queryArguments</span><span class="p">;</span>
          <span class="nx">context</span>         <span class="o">=</span> <span class="nx">element</span>         <span class="o">||</span> <span class="nx">context</span><span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">object</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">query</span>    <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/[\. ]/</span><span class="p">);</span>
            <span class="nx">maxDepth</span> <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">depth</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span> <span class="nx">camelCaseValue</span> <span class="o">=</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">value</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="o">:</span> <span class="nx">query</span>
              <span class="p">;</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">});</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">found</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">found</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">returnedValue</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">returnedValue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="p">[</span><span class="nx">returnedValue</span><span class="p">,</span> <span class="nx">response</span><span class="p">];</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">response</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="nx">found</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">methodInvoked</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="nx">query</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">})</span>
  <span class="p">;</span>
  <span class="k">return</span> <span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
    <span class="o">?</span> <span class="nx">returnedValue</span>
    <span class="o">:</span> <span class="k">this</span>
  <span class="p">;</span>
<span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">accordion</span><span class="p">.</span><span class="nx">settings</span> <span class="o">=</span> <span class="p">{</span>

  <span class="nx">name</span>        <span class="o">:</span> <span class="s1">&#39;Accordion&#39;</span><span class="p">,</span>
  <span class="nx">namespace</span>   <span class="o">:</span> <span class="s1">&#39;accordion&#39;</span><span class="p">,</span>

  <span class="nx">debug</span>       <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">verbose</span>     <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">performance</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="nx">exclusive</span>   <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">collapsible</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">closeNested</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>

  <span class="nx">duration</span>    <span class="o">:</span> <span class="mi">500</span><span class="p">,</span>
  <span class="nx">easing</span>      <span class="o">:</span> <span class="s1">&#39;easeInOutQuint&#39;</span><span class="p">,</span>

  <span class="nx">onOpen</span>      <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>
  <span class="nx">onClose</span>     <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>
  <span class="nx">onChange</span>    <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>

  <span class="nx">error</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">method</span>    <span class="o">:</span> <span class="s1">&#39;The method you called is not defined&#39;</span>
  <span class="p">},</span>

  <span class="nx">className</span>   <span class="o">:</span> <span class="p">{</span>
    <span class="nx">active</span> <span class="o">:</span> <span class="s1">&#39;active&#39;</span>
  <span class="p">},</span>

  <span class="nx">selector</span>    <span class="o">:</span> <span class="p">{</span>
    <span class="nx">accordion</span> <span class="o">:</span> <span class="s1">&#39;.accordion&#39;</span><span class="p">,</span>
    <span class="nx">title</span>     <span class="o">:</span> <span class="s1">&#39;.title&#39;</span><span class="p">,</span>
    <span class="nx">content</span>   <span class="o">:</span> <span class="s1">&#39;.content&#39;</span>
  <span class="p">}</span>

<span class="p">};</span></pre></div></td></tr><tr id="section-2"><td class="docs"><div class="pilwrap"><a href="#section-2" class="pilcrow">&#182;</a></div><p>Adds easing</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">easing</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">easeInOutQuint</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">t</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">((</span><span class="nx">t</span><span class="o">/=</span><span class="nx">d</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="nx">c</span><span class="o">/</span><span class="mi">2</span><span class="o">*</span><span class="nx">t</span><span class="o">*</span><span class="nx">t</span><span class="o">*</span><span class="nx">t</span><span class="o">*</span><span class="nx">t</span><span class="o">*</span><span class="nx">t</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">c</span><span class="o">/</span><span class="mi">2</span><span class="o">*</span><span class="p">((</span><span class="nx">t</span><span class="o">-=</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="nx">t</span><span class="o">*</span><span class="nx">t</span><span class="o">*</span><span class="nx">t</span><span class="o">*</span><span class="nx">t</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="p">})(</span> <span class="nx">jQuery</span><span class="p">,</span> <span class="nb">window</span> <span class="p">,</span> <span class="nb">document</span> <span class="p">);</span></pre></div></td></tr><tr id="section-3"><td class="docs"><div class="pilwrap"><a href="#section-3" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><h1>Semantic - API</h1>

<p><a href='http://github.com/semantic-org/semantic-ui/'>http://github.com/semantic-org/semantic-ui/</a></p></div><div class="body"><p>Copyright 2014 Contributor<br />Released under the MIT license<br /><a href='http://opensource.org/licenses/MIT'>http://opensource.org/licenses/MIT</a></p></div></div>
</td><td class="code"><div class="highlight"><pre><span class="p">;(</span><span class="kd">function</span> <span class="p">(</span> <span class="nx">$</span><span class="p">,</span> <span class="nb">window</span><span class="p">,</span> <span class="nb">document</span><span class="p">,</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">api</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">api</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span> <span class="p">{</span>

  <span class="kd">var</span></pre></div></td></tr><tr id="section-4"><td class="docs"><div class="pilwrap"><a href="#section-4" class="pilcrow">&#182;</a></div><p>use window context if none specified</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">$allModules</span>     <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
        <span class="o">?</span> <span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">)</span>
        <span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
    <span class="nx">moduleSelector</span> <span class="o">=</span> <span class="nx">$allModules</span><span class="p">.</span><span class="nx">selector</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="nx">time</span>           <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">(),</span>
    <span class="nx">performance</span>    <span class="o">=</span> <span class="p">[],</span>

    <span class="nx">query</span>          <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="nx">methodInvoked</span>  <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">),</span>
    <span class="nx">queryArguments</span> <span class="o">=</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>

    <span class="nx">returnedValue</span>
  <span class="p">;</span>

  <span class="nx">$allModules</span>
    <span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span>
        <span class="nx">settings</span>          <span class="o">=</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span> <span class="p">)</span>
          <span class="o">?</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">settings</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">)</span>
          <span class="o">:</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">settings</span><span class="p">),</span></pre></div></td></tr><tr id="section-5"><td class="docs"><div class="pilwrap"><a href="#section-5" class="pilcrow">&#182;</a></div><p>internal aliases</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">namespace</span>       <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">namespace</span><span class="p">,</span>
        <span class="nx">metadata</span>        <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">metadata</span><span class="p">,</span>
        <span class="nx">selector</span>        <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">selector</span><span class="p">,</span>
        <span class="nx">error</span>           <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span>
        <span class="nx">className</span>       <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">className</span><span class="p">,</span></pre></div></td></tr><tr id="section-6"><td class="docs"><div class="pilwrap"><a href="#section-6" class="pilcrow">&#182;</a></div><p>define namespaces for modules</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">eventNamespace</span>  <span class="o">=</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">,</span>
        <span class="nx">moduleNamespace</span> <span class="o">=</span> <span class="s1">&#39;module-&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">,</span></pre></div></td></tr><tr id="section-7"><td class="docs"><div class="pilwrap"><a href="#section-7" class="pilcrow">&#182;</a></div><p>element that creates request</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">$module</span>         <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
        <span class="nx">$form</span>           <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">closest</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">form</span><span class="p">),</span></pre></div></td></tr><tr id="section-8"><td class="docs"><div class="pilwrap"><a href="#section-8" class="pilcrow">&#182;</a></div><p>context used for state</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">$context</span>        <span class="o">=</span> <span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">stateContext</span><span class="p">)</span>
          <span class="o">?</span> <span class="nx">$</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">stateContext</span><span class="p">)</span>
          <span class="o">:</span> <span class="nx">$module</span><span class="p">,</span></pre></div></td></tr><tr id="section-9"><td class="docs"><div class="pilwrap"><a href="#section-9" class="pilcrow">&#182;</a></div><p>request details</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">ajaxSettings</span><span class="p">,</span>
        <span class="nx">requestSettings</span><span class="p">,</span>
        <span class="nx">url</span><span class="p">,</span>
        <span class="nx">data</span><span class="p">,</span></pre></div></td></tr><tr id="section-10"><td class="docs"><div class="pilwrap"><a href="#section-10" class="pilcrow">&#182;</a></div><p>standard module</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">element</span>         <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
        <span class="nx">context</span>         <span class="o">=</span> <span class="nx">$context</span><span class="p">.</span><span class="nx">get</span><span class="p">(),</span>
        <span class="nx">instance</span>        <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">),</span>
        <span class="nx">module</span>
      <span class="p">;</span>

      <span class="nx">module</span> <span class="o">=</span> <span class="p">{</span>

        <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">triggerEvent</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">event</span><span class="p">()</span>
          <span class="p">;</span></pre></div></td></tr><tr id="section-11"><td class="docs"><div class="pilwrap"><a href="#section-11" class="pilcrow">&#182;</a></div><p>bind events</p>
</td><td class="code"><div class="highlight"><pre>          <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">methodInvoked</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">triggerEvent</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Attaching API events to element&#39;</span><span class="p">,</span> <span class="nx">triggerEvent</span><span class="p">);</span>
              <span class="nx">$module</span>
                <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">triggerEvent</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">trigger</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">query</span><span class="p">();</span>
            <span class="p">}</span>
          <span class="p">}</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">instantiate</span><span class="p">();</span>
        <span class="p">},</span>

        <span class="nx">instantiate</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Storing instance of module&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">);</span>
          <span class="nx">instance</span> <span class="o">=</span> <span class="nx">module</span><span class="p">;</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">,</span> <span class="nx">instance</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">destroy</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Destroying previous module for&#39;</span><span class="p">,</span> <span class="nx">element</span><span class="p">);</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">removeData</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">eventNamespace</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">query</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

          <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">disabled</span><span class="p">())</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Element is disabled API request aborted&#39;</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
          <span class="p">}</span></pre></div></td></tr><tr id="section-12"><td class="docs"><div class="pilwrap"><a href="#section-12" class="pilcrow">&#182;</a></div><p>determine if an api event already occurred</p>
</td><td class="code"><div class="highlight"><pre>          <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">loading</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">throttle</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Cancelling request, previous request is still pending&#39;</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
          <span class="p">}</span></pre></div></td></tr><tr id="section-13"><td class="docs"><div class="pilwrap"><a href="#section-13" class="pilcrow">&#182;</a></div><p>pass element metadata to url (value, text)</p>
</td><td class="code"><div class="highlight"><pre>          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">defaultData</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">urlData</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">defaultData</span><span class="p">());</span>
          <span class="p">}</span></pre></div></td></tr><tr id="section-14"><td class="docs"><div class="pilwrap"><a href="#section-14" class="pilcrow">&#182;</a></div><p>Add form content</p>
</td><td class="code"><div class="highlight"><pre>          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">serializeForm</span> <span class="o">!==</span> <span class="kc">false</span> <span class="o">||</span> <span class="nx">$context</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;form&#39;</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">serializeForm</span> <span class="o">==</span> <span class="s1">&#39;json&#39;</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">data</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">formData</span><span class="p">());</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">settings</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">formData</span><span class="p">();</span>
            <span class="p">}</span>
          <span class="p">}</span></pre></div></td></tr><tr id="section-15"><td class="docs"><div class="pilwrap"><a href="#section-15" class="pilcrow">&#182;</a></div><p>call beforesend and get any settings changes</p>
</td><td class="code"><div class="highlight"><pre>          <span class="nx">requestSettings</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">settings</span><span class="p">();</span></pre></div></td></tr><tr id="section-16"><td class="docs"><div class="pilwrap"><a href="#section-16" class="pilcrow">&#182;</a></div><p>check if beforesend cancelled request</p>
</td><td class="code"><div class="highlight"><pre>          <span class="k">if</span><span class="p">(</span><span class="nx">requestSettings</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">beforeSend</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
          <span class="p">}</span>

          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">url</span><span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-17"><td class="docs"><div class="pilwrap"><a href="#section-17" class="pilcrow">&#182;</a></div><p>override with url if specified</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Using specified url&#39;</span><span class="p">,</span> <span class="nx">url</span><span class="p">);</span>
            <span class="nx">url</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">urlData</span><span class="p">(</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">url</span> <span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span></pre></div></td></tr><tr id="section-18"><td class="docs"><div class="pilwrap"><a href="#section-18" class="pilcrow">&#182;</a></div><p>otherwise find url from api endpoints</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">url</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">urlData</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">templateURL</span><span class="p">()</span> <span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Added URL Data to url&#39;</span><span class="p">,</span> <span class="nx">url</span><span class="p">);</span>
          <span class="p">}</span></pre></div></td></tr><tr id="section-19"><td class="docs"><div class="pilwrap"><a href="#section-19" class="pilcrow">&#182;</a></div><p>exit conditions reached, missing url parameters</p>
</td><td class="code"><div class="highlight"><pre>          <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="nx">url</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">$module</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;form&#39;</span><span class="p">))</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;No url or action specified, defaulting to form action&#39;</span><span class="p">);</span>
              <span class="nx">url</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;action&#39;</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">missingURL</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">action</span><span class="p">);</span>
              <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span></pre></div></td></tr><tr id="section-20"><td class="docs"><div class="pilwrap"><a href="#section-20" class="pilcrow">&#182;</a></div><p>add loading state</p>
</td><td class="code"><div class="highlight"><pre>          <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">loading</span><span class="p">();</span></pre></div></td></tr><tr id="section-21"><td class="docs"><div class="pilwrap"><a href="#section-21" class="pilcrow">&#182;</a></div><p>look for jQuery ajax parameters in settings</p>
</td><td class="code"><div class="highlight"><pre>          <span class="nx">ajaxSettings</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">settings</span><span class="p">,</span> <span class="p">{</span>
            <span class="nx">type</span>       <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">method</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
            <span class="nx">data</span>       <span class="o">:</span> <span class="nx">data</span><span class="p">,</span>
            <span class="nx">url</span>        <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">base</span> <span class="o">+</span> <span class="nx">url</span><span class="p">,</span>
            <span class="nx">beforeSend</span> <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">beforeXHR</span><span class="p">,</span>
            <span class="nx">success</span>    <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{},</span>
            <span class="nx">failure</span>    <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{},</span>
            <span class="nx">complete</span>   <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{}</span>
          <span class="p">});</span>

          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Creating AJAX request with settings&#39;</span><span class="p">,</span> <span class="nx">ajaxSettings</span><span class="p">);</span>

          <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">loading</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">request</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">create</span><span class="p">.</span><span class="nx">request</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">xhr</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">create</span><span class="p">.</span><span class="nx">xhr</span><span class="p">();</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span></pre></div></td></tr><tr id="section-22"><td class="docs"><div class="pilwrap"><a href="#section-22" class="pilcrow">&#182;</a></div><p>throttle additional requests</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">module</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">request</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">create</span><span class="p">.</span><span class="nx">request</span><span class="p">();</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">xhr</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">create</span><span class="p">.</span><span class="nx">xhr</span><span class="p">();</span>
            <span class="p">},</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">throttle</span><span class="p">);</span>
          <span class="p">}</span>

        <span class="p">},</span>


        <span class="nx">is</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">disabled</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span><span class="nx">$module</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">filter</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">loading</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">request</span> <span class="o">&amp;&amp;</span> <span class="nx">module</span><span class="p">.</span><span class="nx">request</span><span class="p">.</span><span class="nx">state</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;pending&#39;</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">was</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">succesful</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">request</span> <span class="o">&amp;&amp;</span> <span class="nx">module</span><span class="p">.</span><span class="nx">request</span><span class="p">.</span><span class="nx">state</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;resolved&#39;</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">failure</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">request</span> <span class="o">&amp;&amp;</span> <span class="nx">module</span><span class="p">.</span><span class="nx">request</span><span class="p">.</span><span class="nx">state</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;rejected&#39;</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">complete</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">request</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">request</span><span class="p">.</span><span class="nx">state</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;resolved&#39;</span> <span class="o">||</span> <span class="nx">module</span><span class="p">.</span><span class="nx">request</span><span class="p">.</span><span class="nx">state</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;rejected&#39;</span><span class="p">)</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">add</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">urlData</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">urlData</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">requiredVariables</span><span class="p">,</span>
              <span class="nx">optionalVariables</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">requiredVariables</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">regExp</span><span class="p">.</span><span class="nx">required</span><span class="p">);</span>
              <span class="nx">optionalVariables</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">regExp</span><span class="p">.</span><span class="nx">optional</span><span class="p">);</span>
              <span class="nx">urlData</span>           <span class="o">=</span> <span class="nx">urlData</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">urlData</span><span class="p">;</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">requiredVariables</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Looking for required URL variables&#39;</span><span class="p">,</span> <span class="nx">requiredVariables</span><span class="p">);</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">requiredVariables</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">templatedString</span><span class="p">)</span> <span class="p">{</span>
                  <span class="kd">var</span></pre></div></td></tr><tr id="section-23"><td class="docs"><div class="pilwrap"><a href="#section-23" class="pilcrow">&#182;</a></div><p>allow legacy {$var} style</p>
</td><td class="code"><div class="highlight"><pre>                    <span class="nx">variable</span> <span class="o">=</span> <span class="p">(</span><span class="nx">templatedString</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;$&#39;</span><span class="p">)</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                      <span class="o">?</span> <span class="nx">templatedString</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nx">templatedString</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">3</span><span class="p">)</span>
                      <span class="o">:</span> <span class="nx">templatedString</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nx">templatedString</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">2</span><span class="p">),</span>
                    <span class="nx">value</span>   <span class="o">=</span> <span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">urlData</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">urlData</span><span class="p">[</span><span class="nx">variable</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
                      <span class="o">?</span> <span class="nx">urlData</span><span class="p">[</span><span class="nx">variable</span><span class="p">]</span>
                      <span class="o">:</span> <span class="p">(</span><span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">variable</span><span class="p">)</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
                        <span class="o">?</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">variable</span><span class="p">)</span>
                        <span class="o">:</span> <span class="p">(</span><span class="nx">$context</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">variable</span><span class="p">)</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
                          <span class="o">?</span> <span class="nx">$context</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">variable</span><span class="p">)</span>
                          <span class="o">:</span> <span class="nx">urlData</span><span class="p">[</span><span class="nx">variable</span><span class="p">]</span>
                  <span class="p">;</span></pre></div></td></tr><tr id="section-24"><td class="docs"><div class="pilwrap"><a href="#section-24" class="pilcrow">&#182;</a></div><p>remove value</p>
</td><td class="code"><div class="highlight"><pre>                  <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">requiredParameter</span><span class="p">,</span> <span class="nx">variable</span><span class="p">,</span> <span class="nx">url</span><span class="p">);</span>
                    <span class="nx">url</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
                  <span class="p">}</span>
                  <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Found required variable&#39;</span><span class="p">,</span> <span class="nx">variable</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
                    <span class="nx">url</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">templatedString</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
                  <span class="p">}</span>
                <span class="p">});</span>
              <span class="p">}</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">optionalVariables</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Looking for optional URL variables&#39;</span><span class="p">,</span> <span class="nx">requiredVariables</span><span class="p">);</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">optionalVariables</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">templatedString</span><span class="p">)</span> <span class="p">{</span>
                  <span class="kd">var</span></pre></div></td></tr><tr id="section-25"><td class="docs"><div class="pilwrap"><a href="#section-25" class="pilcrow">&#182;</a></div><p>allow legacy {/$var} style</p>
</td><td class="code"><div class="highlight"><pre>                    <span class="nx">variable</span> <span class="o">=</span> <span class="p">(</span><span class="nx">templatedString</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;$&#39;</span><span class="p">)</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                      <span class="o">?</span> <span class="nx">templatedString</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="nx">templatedString</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">4</span><span class="p">)</span>
                      <span class="o">:</span> <span class="nx">templatedString</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nx">templatedString</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">3</span><span class="p">),</span>
                    <span class="nx">value</span>   <span class="o">=</span> <span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">urlData</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">urlData</span><span class="p">[</span><span class="nx">variable</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
                      <span class="o">?</span> <span class="nx">urlData</span><span class="p">[</span><span class="nx">variable</span><span class="p">]</span>
                      <span class="o">:</span> <span class="p">(</span><span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">variable</span><span class="p">)</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
                        <span class="o">?</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">variable</span><span class="p">)</span>
                        <span class="o">:</span> <span class="p">(</span><span class="nx">$context</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">variable</span><span class="p">)</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
                          <span class="o">?</span> <span class="nx">$context</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">variable</span><span class="p">)</span>
                          <span class="o">:</span> <span class="nx">urlData</span><span class="p">[</span><span class="nx">variable</span><span class="p">]</span>
                  <span class="p">;</span></pre></div></td></tr><tr id="section-26"><td class="docs"><div class="pilwrap"><a href="#section-26" class="pilcrow">&#182;</a></div><p>optional replacement</p>
</td><td class="code"><div class="highlight"><pre>                  <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Optional variable Found&#39;</span><span class="p">,</span> <span class="nx">variable</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
                    <span class="nx">url</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">templatedString</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
                  <span class="p">}</span>
                  <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Optional variable not found&#39;</span><span class="p">,</span> <span class="nx">variable</span><span class="p">);</span></pre></div></td></tr><tr id="section-27"><td class="docs"><div class="pilwrap"><a href="#section-27" class="pilcrow">&#182;</a></div><p>remove preceding slash if set</p>
</td><td class="code"><div class="highlight"><pre>                    <span class="k">if</span><span class="p">(</span><span class="nx">url</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="nx">templatedString</span><span class="p">)</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                      <span class="nx">url</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="nx">templatedString</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
                    <span class="p">}</span>
                    <span class="k">else</span> <span class="p">{</span>
                      <span class="nx">url</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">templatedString</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
                    <span class="p">}</span>
                  <span class="p">}</span>
                <span class="p">});</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">url</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">event</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">trigger</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">query</span><span class="p">();</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s1">&#39;submit&#39;</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s1">&#39;click&#39;</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">xhr</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">always</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span></pre></div></td></tr><tr id="section-28"><td class="docs"><div class="pilwrap"><a href="#section-28" class="pilcrow">&#182;</a></div><p>calculate if loading time was below minimum threshold</p>
</td><td class="code"><div class="highlight"><pre>            <span class="p">},</span>
            <span class="nx">done</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span>
                <span class="nx">context</span>      <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
                <span class="nx">elapsedTime</span>  <span class="o">=</span> <span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">-</span> <span class="nx">time</span><span class="p">),</span>
                <span class="nx">timeLeft</span>     <span class="o">=</span> <span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">loadingDuration</span> <span class="o">-</span> <span class="nx">elapsedTime</span><span class="p">)</span>
              <span class="p">;</span>
              <span class="nx">timeLeft</span> <span class="o">=</span> <span class="p">(</span><span class="nx">timeLeft</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">timeLeft</span>
                <span class="o">:</span> <span class="mi">0</span>
              <span class="p">;</span>
              <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">request</span><span class="p">.</span><span class="nx">resolveWith</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="p">[</span><span class="nx">response</span><span class="p">]);</span>
              <span class="p">},</span> <span class="nx">timeLeft</span><span class="p">);</span>
            <span class="p">},</span>
            <span class="nx">fail</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">xhr</span><span class="p">,</span> <span class="nx">status</span><span class="p">,</span> <span class="nx">httpMessage</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span>
                <span class="nx">context</span>     <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
                <span class="nx">elapsedTime</span> <span class="o">=</span> <span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">-</span> <span class="nx">time</span><span class="p">),</span>
                <span class="nx">timeLeft</span>    <span class="o">=</span> <span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">loadingDuration</span> <span class="o">-</span> <span class="nx">elapsedTime</span><span class="p">)</span>
              <span class="p">;</span>
              <span class="nx">timeLeft</span> <span class="o">=</span> <span class="p">(</span><span class="nx">timeLeft</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">timeLeft</span>
                <span class="o">:</span> <span class="mi">0</span>
              <span class="p">;</span></pre></div></td></tr><tr id="section-29"><td class="docs"><div class="pilwrap"><a href="#section-29" class="pilcrow">&#182;</a></div><p>page triggers abort on navigation, dont show error</p>
</td><td class="code"><div class="highlight"><pre>              <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">status</span> <span class="o">!==</span> <span class="s1">&#39;abort&#39;</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">request</span><span class="p">.</span><span class="nx">rejectWith</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="p">[</span><span class="nx">xhr</span><span class="p">,</span> <span class="nx">status</span><span class="p">,</span> <span class="nx">httpMessage</span><span class="p">]);</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>
                <span class="p">}</span>
              <span class="p">},</span> <span class="nx">timeLeft</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">request</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">complete</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">loading</span><span class="p">();</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onComplete</span><span class="p">,</span> <span class="nx">context</span><span class="p">)(</span><span class="nx">response</span><span class="p">,</span> <span class="nx">$module</span><span class="p">);</span>
            <span class="p">},</span>
            <span class="nx">done</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;API Response Received&#39;</span><span class="p">,</span> <span class="nx">response</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">dataType</span> <span class="o">==</span> <span class="s1">&#39;json&#39;</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">successTest</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Checking JSON returned success&#39;</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">successTest</span><span class="p">,</span> <span class="nx">response</span><span class="p">);</span>
                  <span class="k">if</span><span class="p">(</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">successTest</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onSuccess</span><span class="p">,</span> <span class="nx">context</span><span class="p">)(</span><span class="nx">response</span><span class="p">,</span> <span class="nx">$module</span><span class="p">);</span>
                  <span class="p">}</span>
                  <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;JSON test specified by user and response failed&#39;</span><span class="p">,</span> <span class="nx">response</span><span class="p">);</span>
                    <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onFailure</span><span class="p">,</span> <span class="nx">context</span><span class="p">)(</span><span class="nx">response</span><span class="p">,</span> <span class="nx">$module</span><span class="p">);</span>
                  <span class="p">}</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="p">{</span>
                  <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onSuccess</span><span class="p">,</span> <span class="nx">context</span><span class="p">)(</span><span class="nx">response</span><span class="p">,</span> <span class="nx">$module</span><span class="p">);</span>
                <span class="p">}</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onSuccess</span><span class="p">,</span> <span class="nx">context</span><span class="p">)(</span><span class="nx">response</span><span class="p">,</span> <span class="nx">$module</span><span class="p">);</span>
              <span class="p">}</span>
            <span class="p">},</span>
            <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">xhr</span><span class="p">,</span> <span class="nx">status</span><span class="p">,</span> <span class="nx">httpMessage</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span>
                <span class="nx">errorMessage</span> <span class="o">=</span> <span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">error</span><span class="p">[</span><span class="nx">status</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
                  <span class="o">?</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">error</span><span class="p">[</span><span class="nx">status</span><span class="p">]</span>
                  <span class="o">:</span> <span class="nx">httpMessage</span><span class="p">,</span>
                <span class="nx">response</span>
              <span class="p">;</span></pre></div></td></tr><tr id="section-30"><td class="docs"><div class="pilwrap"><a href="#section-30" class="pilcrow">&#182;</a></div><p>let em know unless request aborted</p>
</td><td class="code"><div class="highlight"><pre>              <span class="k">if</span><span class="p">(</span><span class="nx">xhr</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-31"><td class="docs"><div class="pilwrap"><a href="#section-31" class="pilcrow">&#182;</a></div><p>readyState 4 = done, anything less is not really sent</p>
</td><td class="code"><div class="highlight"><pre>                <span class="k">if</span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">==</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-32"><td class="docs"><div class="pilwrap"><a href="#section-32" class="pilcrow">&#182;</a></div><p>if http status code returned and json returned error, look for it</p>
</td><td class="code"><div class="highlight"><pre>                  <span class="k">if</span><span class="p">(</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">status</span> <span class="o">!=</span> <span class="mi">200</span> <span class="o">&amp;&amp;</span> <span class="nx">httpMessage</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">httpMessage</span> <span class="o">!==</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">statusMessage</span> <span class="o">+</span> <span class="nx">httpMessage</span><span class="p">);</span>
                  <span class="p">}</span>
                  <span class="k">else</span> <span class="p">{</span>
                    <span class="k">if</span><span class="p">(</span><span class="nx">status</span> <span class="o">==</span> <span class="s1">&#39;error&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">dataType</span> <span class="o">==</span> <span class="s1">&#39;json&#39;</span><span class="p">)</span> <span class="p">{</span>
                      <span class="k">try</span> <span class="p">{</span>
                        <span class="nx">response</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">parseJSON</span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
                        <span class="k">if</span><span class="p">(</span><span class="nx">response</span> <span class="o">&amp;&amp;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">error</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
                          <span class="nx">errorMessage</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">error</span><span class="p">;</span>
                        <span class="p">}</span>
                      <span class="p">}</span>
                      <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">JSONParse</span><span class="p">);</span>
                      <span class="p">}</span>
                    <span class="p">}</span>
                  <span class="p">}</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">loading</span><span class="p">();</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">error</span><span class="p">();</span></pre></div></td></tr><tr id="section-33"><td class="docs"><div class="pilwrap"><a href="#section-33" class="pilcrow">&#182;</a></div><p>show error state only for duration specified in settings</p>
</td><td class="code"><div class="highlight"><pre>                  <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">errorDuration</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">errorDuration</span><span class="p">);</span>
                  <span class="p">}</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;API Request error:&#39;</span><span class="p">,</span> <span class="nx">errorMessage</span><span class="p">);</span>
                  <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onError</span><span class="p">,</span> <span class="nx">context</span><span class="p">)(</span><span class="nx">errorMessage</span><span class="p">,</span> <span class="nx">context</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="p">{</span>
                  <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onAbort</span><span class="p">,</span> <span class="nx">context</span><span class="p">)(</span><span class="nx">errorMessage</span><span class="p">,</span> <span class="nx">context</span><span class="p">);</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Request Aborted (Most likely caused by page change or CORS Policy)&#39;</span><span class="p">,</span> <span class="nx">status</span><span class="p">,</span> <span class="nx">httpMessage</span><span class="p">);</span>
                <span class="p">}</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">create</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">request</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">Deferred</span><span class="p">()</span>
              <span class="p">.</span><span class="nx">always</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">request</span><span class="p">.</span><span class="nx">complete</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">request</span><span class="p">.</span><span class="nx">done</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">request</span><span class="p">.</span><span class="nx">error</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">xhr</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">(</span><span class="nx">ajaxSettings</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">always</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">always</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">done</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">fail</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">set</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Adding error state to element&#39;</span><span class="p">,</span> <span class="nx">$context</span><span class="p">);</span>
            <span class="nx">$context</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">loading</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Adding loading state to element&#39;</span><span class="p">,</span> <span class="nx">$context</span><span class="p">);</span>
            <span class="nx">$context</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">loading</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">remove</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Removing error state from element&#39;</span><span class="p">,</span> <span class="nx">$context</span><span class="p">);</span>
            <span class="nx">$context</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">loading</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Removing loading state from element&#39;</span><span class="p">,</span> <span class="nx">$context</span><span class="p">);</span>
            <span class="nx">$context</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">loading</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">get</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">request</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">module</span><span class="p">.</span><span class="nx">request</span> <span class="o">||</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">xhr</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">module</span><span class="p">.</span><span class="nx">xhr</span> <span class="o">||</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">settings</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">runSettings</span>
            <span class="p">;</span>
            <span class="nx">runSettings</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">beforeSend</span><span class="p">,</span> <span class="nx">$module</span><span class="p">)(</span><span class="nx">settings</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">runSettings</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">runSettings</span><span class="p">.</span><span class="nx">success</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Legacy success callback detected&#39;</span><span class="p">,</span> <span class="nx">runSettings</span><span class="p">);</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">legacyParameters</span><span class="p">,</span> <span class="nx">runSettings</span><span class="p">.</span><span class="nx">success</span><span class="p">);</span>
                <span class="nx">runSettings</span><span class="p">.</span><span class="nx">onSuccess</span> <span class="o">=</span> <span class="nx">runSettings</span><span class="p">.</span><span class="nx">success</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">runSettings</span><span class="p">.</span><span class="nx">failure</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Legacy failure callback detected&#39;</span><span class="p">,</span> <span class="nx">runSettings</span><span class="p">);</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">legacyParameters</span><span class="p">,</span> <span class="nx">runSettings</span><span class="p">.</span><span class="nx">failure</span><span class="p">);</span>
                <span class="nx">runSettings</span><span class="p">.</span><span class="nx">onFailure</span> <span class="o">=</span> <span class="nx">runSettings</span><span class="p">.</span><span class="nx">failure</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">runSettings</span><span class="p">.</span><span class="nx">complete</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Legacy complete callback detected&#39;</span><span class="p">,</span> <span class="nx">runSettings</span><span class="p">);</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">legacyParameters</span><span class="p">,</span> <span class="nx">runSettings</span><span class="p">.</span><span class="nx">complete</span><span class="p">);</span>
                <span class="nx">runSettings</span><span class="p">.</span><span class="nx">onComplete</span> <span class="o">=</span> <span class="nx">runSettings</span><span class="p">.</span><span class="nx">complete</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">runSettings</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">noReturnedValue</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="p">(</span><span class="nx">runSettings</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
              <span class="o">?</span> <span class="nx">runSettings</span>
              <span class="o">:</span> <span class="nx">settings</span>
            <span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">defaultData</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">data</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="nx">$</span><span class="p">.</span><span class="nx">isWindow</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;input&#39;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">data</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">val</span><span class="p">();</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;form&#39;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">data</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">text</span><span class="p">();</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">data</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">event</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isWindow</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">on</span> <span class="o">==</span> <span class="s1">&#39;now&#39;</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;API called without element, no events attached&#39;</span><span class="p">);</span>
              <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">on</span> <span class="o">==</span> <span class="s1">&#39;auto&#39;</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;input&#39;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">oninput</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
                  <span class="o">?</span> <span class="s1">&#39;input&#39;</span>
                  <span class="o">:</span> <span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">onpropertychange</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
                    <span class="o">?</span> <span class="s1">&#39;propertychange&#39;</span>
                    <span class="o">:</span> <span class="s1">&#39;keyup&#39;</span>
                <span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;form&#39;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="s1">&#39;submit&#39;</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="k">return</span> <span class="s1">&#39;click&#39;</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">on</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">formData</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">formData</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">serializeObject</span><span class="p">()</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">formData</span> <span class="o">=</span> <span class="nx">$form</span><span class="p">.</span><span class="nx">serializeObject</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">missingSerialize</span><span class="p">);</span>
              <span class="nx">formData</span> <span class="o">=</span> <span class="nx">$form</span><span class="p">.</span><span class="nx">serialize</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Retrieved form data&#39;</span><span class="p">,</span> <span class="nx">formData</span><span class="p">);</span>
            <span class="k">return</span> <span class="nx">formData</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">templateURL</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">action</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">url</span>
            <span class="p">;</span>
            <span class="nx">action</span> <span class="o">=</span> <span class="nx">action</span> <span class="o">||</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">action</span><span class="p">)</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">action</span> <span class="o">||</span> <span class="kc">false</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">action</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Looking up url for action&#39;</span><span class="p">,</span> <span class="nx">action</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">api</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">api</span><span class="p">[</span><span class="nx">action</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">url</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">api</span><span class="p">[</span><span class="nx">action</span><span class="p">];</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Found template url&#39;</span><span class="p">,</span> <span class="nx">url</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">missingAction</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">action</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">api</span><span class="p">);</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">url</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span></pre></div></td></tr><tr id="section-34"><td class="docs"><div class="pilwrap"><a href="#section-34" class="pilcrow">&#182;</a></div><p>reset state</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">reset</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">error</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">loading</span><span class="p">();</span>
        <span class="p">},</span>

        <span class="nx">setting</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Changing setting&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">settings</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">internal</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">module</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">debug</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">verbose</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">&amp;&amp;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">performance</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">log</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">currentTime</span><span class="p">,</span>
              <span class="nx">executionTime</span><span class="p">,</span>
              <span class="nx">previousTime</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">currentTime</span>   <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>
              <span class="nx">previousTime</span>  <span class="o">=</span> <span class="nx">time</span> <span class="o">||</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">executionTime</span> <span class="o">=</span> <span class="nx">currentTime</span> <span class="o">-</span> <span class="nx">previousTime</span><span class="p">;</span>
              <span class="nx">time</span>          <span class="o">=</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">performance</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
                <span class="s1">&#39;Name&#39;</span>           <span class="o">:</span> <span class="nx">message</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="s1">&#39;Arguments&#39;</span>      <span class="o">:</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span></pre></div></td></tr><tr id="section-35"><td class="docs"><div class="pilwrap"><a href="#section-35" class="pilcrow">&#182;</a></div><p>'Element'        : element,</p>
</td><td class="code"><div class="highlight"><pre>                <span class="s1">&#39;Execution Time&#39;</span> <span class="o">:</span> <span class="nx">executionTime</span>
              <span class="p">});</span>
            <span class="p">}</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">display</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">title</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span>
              <span class="nx">totalTime</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="p">;</span>
            <span class="nx">time</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">totalTime</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">];</span>
            <span class="p">});</span>
            <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">totalTime</span> <span class="o">+</span> <span class="s1">&#39;ms&#39;</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">moduleSelector</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; \&#39;&#39;</span> <span class="o">+</span> <span class="nx">moduleSelector</span> <span class="o">+</span> <span class="s1">&#39;\&#39;&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span> <span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">group</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">console</span><span class="p">.</span><span class="nx">table</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">performance</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupCollapsed</span><span class="p">(</span><span class="nx">title</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">performance</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;ms&#39;</span><span class="p">);</span>
                <span class="p">});</span>
              <span class="p">}</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupEnd</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">performance</span> <span class="o">=</span> <span class="p">[];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">invoke</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">object</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">,</span>
            <span class="nx">maxDepth</span><span class="p">,</span>
            <span class="nx">found</span><span class="p">,</span>
            <span class="nx">response</span>
          <span class="p">;</span>
          <span class="nx">passedArguments</span> <span class="o">=</span> <span class="nx">passedArguments</span> <span class="o">||</span> <span class="nx">queryArguments</span><span class="p">;</span>
          <span class="nx">context</span>         <span class="o">=</span> <span class="nx">element</span>         <span class="o">||</span> <span class="nx">context</span><span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">object</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">query</span>    <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/[\. ]/</span><span class="p">);</span>
            <span class="nx">maxDepth</span> <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">depth</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span> <span class="nx">camelCaseValue</span> <span class="o">=</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">value</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="o">:</span> <span class="nx">query</span>
              <span class="p">;</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">method</span><span class="p">,</span> <span class="nx">query</span><span class="p">);</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">});</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">found</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">found</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">returnedValue</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">returnedValue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="p">[</span><span class="nx">returnedValue</span><span class="p">,</span> <span class="nx">response</span><span class="p">];</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">response</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="nx">found</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>

      <span class="k">if</span><span class="p">(</span><span class="nx">methodInvoked</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="nx">query</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">})</span>
  <span class="p">;</span>

  <span class="k">return</span> <span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
    <span class="o">?</span> <span class="nx">returnedValue</span>
    <span class="o">:</span> <span class="k">this</span>
  <span class="p">;</span>
<span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">settings</span> <span class="o">=</span> <span class="p">{</span>

  <span class="nx">name</span>            <span class="o">:</span> <span class="s1">&#39;API&#39;</span><span class="p">,</span>
  <span class="nx">namespace</span>       <span class="o">:</span> <span class="s1">&#39;api&#39;</span><span class="p">,</span>

  <span class="nx">debug</span>           <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">verbose</span>         <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">performance</span>     <span class="o">:</span> <span class="kc">true</span><span class="p">,</span></pre></div></td></tr><tr id="section-36"><td class="docs"><div class="pilwrap"><a href="#section-36" class="pilcrow">&#182;</a></div><p>event binding</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">on</span>              <span class="o">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span>
  <span class="nx">filter</span>          <span class="o">:</span> <span class="s1">&#39;.disabled&#39;</span><span class="p">,</span>
  <span class="nx">stateContext</span>    <span class="o">:</span> <span class="kc">false</span><span class="p">,</span></pre></div></td></tr><tr id="section-37"><td class="docs"><div class="pilwrap"><a href="#section-37" class="pilcrow">&#182;</a></div><p>state</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">loadingDuration</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="nx">errorDuration</span>   <span class="o">:</span> <span class="mi">2000</span><span class="p">,</span></pre></div></td></tr><tr id="section-38"><td class="docs"><div class="pilwrap"><a href="#section-38" class="pilcrow">&#182;</a></div><p>templating</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">action</span>          <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">url</span>             <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">base</span>            <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span></pre></div></td></tr><tr id="section-39"><td class="docs"><div class="pilwrap"><a href="#section-39" class="pilcrow">&#182;</a></div><p>data</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">urlData</span>         <span class="o">:</span> <span class="p">{},</span></pre></div></td></tr><tr id="section-40"><td class="docs"><div class="pilwrap"><a href="#section-40" class="pilcrow">&#182;</a></div><p>ui</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">defaultData</span>     <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">serializeForm</span>   <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">throttle</span>        <span class="o">:</span> <span class="mi">0</span><span class="p">,</span></pre></div></td></tr><tr id="section-41"><td class="docs"><div class="pilwrap"><a href="#section-41" class="pilcrow">&#182;</a></div><p>jQ ajax</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">method</span>          <span class="o">:</span> <span class="s1">&#39;get&#39;</span><span class="p">,</span>
  <span class="nx">data</span>            <span class="o">:</span> <span class="p">{},</span>
  <span class="nx">dataType</span>        <span class="o">:</span> <span class="s1">&#39;json&#39;</span><span class="p">,</span></pre></div></td></tr><tr id="section-42"><td class="docs"><div class="pilwrap"><a href="#section-42" class="pilcrow">&#182;</a></div><p>callbacks</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">beforeSend</span>  <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">settings</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">settings</span><span class="p">;</span> <span class="p">},</span>
  <span class="nx">beforeXHR</span>   <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">xhr</span><span class="p">)</span> <span class="p">{},</span>

  <span class="nx">onSuccess</span>   <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">,</span> <span class="nx">$module</span><span class="p">)</span> <span class="p">{},</span>
  <span class="nx">onComplete</span>  <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">,</span> <span class="nx">$module</span><span class="p">)</span> <span class="p">{},</span>
  <span class="nx">onFailure</span>   <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">errorMessage</span><span class="p">,</span> <span class="nx">$module</span><span class="p">)</span> <span class="p">{},</span>
  <span class="nx">onError</span>     <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">errorMessage</span><span class="p">,</span> <span class="nx">$module</span><span class="p">)</span> <span class="p">{},</span>
  <span class="nx">onAbort</span>     <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">errorMessage</span><span class="p">,</span> <span class="nx">$module</span><span class="p">)</span> <span class="p">{},</span>

  <span class="nx">successTest</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span></pre></div></td></tr><tr id="section-43"><td class="docs"><div class="pilwrap"><a href="#section-43" class="pilcrow">&#182;</a></div><p>errors</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">error</span> <span class="o">:</span> <span class="p">{</span>
    <span class="nx">beforeSend</span>        <span class="o">:</span> <span class="s1">&#39;The before send function has aborted the request&#39;</span><span class="p">,</span>
    <span class="nx">error</span>             <span class="o">:</span> <span class="s1">&#39;There was an error with your request&#39;</span><span class="p">,</span>
    <span class="nx">exitConditions</span>    <span class="o">:</span> <span class="s1">&#39;API Request Aborted. Exit conditions met&#39;</span><span class="p">,</span>
    <span class="nx">JSONParse</span>         <span class="o">:</span> <span class="s1">&#39;JSON could not be parsed during error handling&#39;</span><span class="p">,</span>
    <span class="nx">legacyParameters</span>  <span class="o">:</span> <span class="s1">&#39;You are using legacy API success callback names&#39;</span><span class="p">,</span>
    <span class="nx">missingAction</span>     <span class="o">:</span> <span class="s1">&#39;API action used but no url was defined&#39;</span><span class="p">,</span>
    <span class="nx">missingSerialize</span>  <span class="o">:</span> <span class="s1">&#39;Required dependency jquery-serialize-object missing, using basic serialize&#39;</span><span class="p">,</span>
    <span class="nx">missingURL</span>        <span class="o">:</span> <span class="s1">&#39;No URL specified for api event&#39;</span><span class="p">,</span>
    <span class="nx">noReturnedValue</span>   <span class="o">:</span> <span class="s1">&#39;The beforeSend callback must return a settings object, beforeSend ignored.&#39;</span><span class="p">,</span>
    <span class="nx">parseError</span>        <span class="o">:</span> <span class="s1">&#39;There was an error parsing your request&#39;</span><span class="p">,</span>
    <span class="nx">requiredParameter</span> <span class="o">:</span> <span class="s1">&#39;Missing a required URL parameter: &#39;</span><span class="p">,</span>
    <span class="nx">statusMessage</span>     <span class="o">:</span> <span class="s1">&#39;Server gave an error: &#39;</span><span class="p">,</span>
    <span class="nx">timeout</span>           <span class="o">:</span> <span class="s1">&#39;Your request timed out&#39;</span>
  <span class="p">},</span>

  <span class="nx">regExp</span>  <span class="o">:</span> <span class="p">{</span>
    <span class="nx">required</span><span class="o">:</span> <span class="sr">/\{\$*[A-z0-9]+\}/g</span><span class="p">,</span>
    <span class="nx">optional</span><span class="o">:</span> <span class="sr">/\{\/\$*[A-z0-9]+\}/g</span><span class="p">,</span>
  <span class="p">},</span>

  <span class="nx">className</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">loading</span> <span class="o">:</span> <span class="s1">&#39;loading&#39;</span><span class="p">,</span>
    <span class="nx">error</span>   <span class="o">:</span> <span class="s1">&#39;error&#39;</span>
  <span class="p">},</span>

  <span class="nx">selector</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">form</span><span class="o">:</span> <span class="s1">&#39;form&#39;</span>
  <span class="p">},</span>

  <span class="nx">metadata</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">action</span>  <span class="o">:</span> <span class="s1">&#39;action&#39;</span><span class="p">,</span>
    <span class="nx">request</span> <span class="o">:</span> <span class="s1">&#39;request&#39;</span><span class="p">,</span>
    <span class="nx">xhr</span>     <span class="o">:</span> <span class="s1">&#39;xhr&#39;</span>
  <span class="p">}</span>
<span class="p">};</span>


<span class="nx">$</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">api</span> <span class="o">=</span> <span class="p">{};</span>


<span class="p">})(</span> <span class="nx">jQuery</span><span class="p">,</span> <span class="nb">window</span> <span class="p">,</span> <span class="nb">document</span> <span class="p">);</span></pre></div></td></tr><tr id="section-44"><td class="docs"><div class="pilwrap"><a href="#section-44" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><h1>Semantic - Checkbox</h1>

<p><a href='http://github.com/semantic-org/semantic-ui/'>http://github.com/semantic-org/semantic-ui/</a></p></div><div class="body"><p>Copyright 2014 Contributor<br />Released under the MIT license<br /><a href='http://opensource.org/licenses/MIT'>http://opensource.org/licenses/MIT</a></p></div></div>
</td><td class="code"><div class="highlight"><pre><span class="p">;(</span><span class="kd">function</span> <span class="p">(</span> <span class="nx">$</span><span class="p">,</span> <span class="nb">window</span><span class="p">,</span> <span class="nb">document</span><span class="p">,</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>

<span class="s2">&quot;use strict&quot;</span><span class="p">;</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">checkbox</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span>
    <span class="nx">$allModules</span>    <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
    <span class="nx">moduleSelector</span> <span class="o">=</span> <span class="nx">$allModules</span><span class="p">.</span><span class="nx">selector</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>

    <span class="nx">time</span>           <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">(),</span>
    <span class="nx">performance</span>    <span class="o">=</span> <span class="p">[],</span>

    <span class="nx">query</span>          <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="nx">methodInvoked</span>  <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">),</span>
    <span class="nx">queryArguments</span> <span class="o">=</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="nx">returnedValue</span>
  <span class="p">;</span>

  <span class="nx">$allModules</span>
    <span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span>
        <span class="nx">settings</span>        <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">checkbox</span><span class="p">.</span><span class="nx">settings</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">),</span>

        <span class="nx">className</span>       <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">className</span><span class="p">,</span>
        <span class="nx">namespace</span>       <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">namespace</span><span class="p">,</span>
        <span class="nx">selector</span>        <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">selector</span><span class="p">,</span>
        <span class="nx">error</span>           <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span>

        <span class="nx">eventNamespace</span>  <span class="o">=</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">,</span>
        <span class="nx">moduleNamespace</span> <span class="o">=</span> <span class="s1">&#39;module-&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">,</span>

        <span class="nx">$module</span>         <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
        <span class="nx">$label</span>          <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">next</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">label</span><span class="p">).</span><span class="nx">first</span><span class="p">(),</span>
        <span class="nx">$input</span>          <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">input</span><span class="p">),</span>

        <span class="nx">instance</span>        <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">),</span>

        <span class="nx">observer</span><span class="p">,</span>
        <span class="nx">element</span>         <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
        <span class="nx">module</span>
      <span class="p">;</span>

      <span class="nx">module</span>      <span class="o">=</span> <span class="p">{</span>

        <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Initializing checkbox&#39;</span><span class="p">,</span> <span class="nx">settings</span><span class="p">);</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span>   <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">toggle</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;keydown&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">input</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">keydown</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">checked</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">checked</span><span class="p">();</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">fireOnInit</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onChecked</span><span class="p">,</span> <span class="nx">$input</span><span class="p">.</span><span class="nx">get</span><span class="p">())();</span>
            <span class="p">}</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">checked</span><span class="p">();</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">fireOnInit</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onUnchecked</span><span class="p">,</span> <span class="nx">$input</span><span class="p">.</span><span class="nx">get</span><span class="p">())();</span>
            <span class="p">}</span>
          <span class="p">}</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">observeChanges</span><span class="p">();</span>

          <span class="nx">module</span><span class="p">.</span><span class="nx">instantiate</span><span class="p">();</span>
        <span class="p">},</span>

        <span class="nx">instantiate</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Storing instance of module&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">);</span>
          <span class="nx">instance</span> <span class="o">=</span> <span class="nx">module</span><span class="p">;</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">destroy</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Destroying previous module&#39;</span><span class="p">);</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">eventNamespace</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">removeData</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$input</span>
            <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">keydown</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$label</span>
            <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">eventNamespace</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">refresh</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">$module</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
          <span class="nx">$label</span>  <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">next</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">label</span><span class="p">).</span><span class="nx">first</span><span class="p">();</span>
          <span class="nx">$input</span>  <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">input</span><span class="p">);</span>
        <span class="p">},</span>

        <span class="nx">observeChanges</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="s1">&#39;MutationObserver&#39;</span> <span class="k">in</span> <span class="nb">window</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">observer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MutationObserver</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">mutations</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;DOM tree modified, updating selector cache&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">refresh</span><span class="p">();</span>
            <span class="p">});</span>
            <span class="nx">observer</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="p">{</span>
              <span class="nx">childList</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
              <span class="nx">subtree</span>   <span class="o">:</span> <span class="kc">true</span>
            <span class="p">});</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Setting up mutation observer&#39;</span><span class="p">,</span> <span class="nx">observer</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">attachEvents</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">selector</span><span class="p">,</span> <span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">$toggle</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">selector</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">event</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">module</span><span class="p">[</span><span class="nx">event</span><span class="p">])</span>
            <span class="o">?</span> <span class="nx">module</span><span class="p">[</span><span class="nx">event</span><span class="p">]</span>
            <span class="o">:</span> <span class="nx">module</span><span class="p">.</span><span class="nx">toggle</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">$toggle</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Attaching checkbox events to element&#39;</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">event</span><span class="p">);</span>
            <span class="nx">$toggle</span>
              <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">event</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">notFound</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">event</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">keydown</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">key</span>     <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">which</span><span class="p">,</span>
              <span class="nx">keyCode</span> <span class="o">=</span> <span class="p">{</span>
                <span class="nx">enter</span>  <span class="o">:</span> <span class="mi">13</span><span class="p">,</span>
                <span class="nx">escape</span> <span class="o">:</span> <span class="mi">27</span>
              <span class="p">}</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">key</span> <span class="o">==</span> <span class="nx">keyCode</span><span class="p">.</span><span class="nx">escape</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Escape key pressed blurring field&#39;</span><span class="p">);</span>
              <span class="nx">$module</span>
                <span class="p">.</span><span class="nx">blur</span><span class="p">()</span>
              <span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">ctrlKey</span> <span class="o">&amp;&amp;</span> <span class="nx">key</span> <span class="o">==</span> <span class="nx">keyCode</span><span class="p">.</span><span class="nx">enter</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Enter key pressed, toggling checkbox&#39;</span><span class="p">);</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">toggle</span><span class="p">,</span> <span class="k">this</span><span class="p">)();</span>
              <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">is</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">radio</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">radio</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">checked</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$input</span><span class="p">.</span><span class="nx">prop</span><span class="p">(</span><span class="s1">&#39;checked&#39;</span><span class="p">)</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">$input</span><span class="p">.</span><span class="nx">prop</span><span class="p">(</span><span class="s1">&#39;checked&#39;</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">unchecked</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">checked</span><span class="p">();</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">can</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">change</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="o">!</span><span class="p">(</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">disabled</span><span class="p">)</span> <span class="o">||</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">readOnly</span><span class="p">)</span> <span class="o">||</span> <span class="nx">$input</span><span class="p">.</span><span class="nx">prop</span><span class="p">(</span><span class="s1">&#39;disabled&#39;</span><span class="p">)</span> <span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">uncheck</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">uncheckable</span> <span class="o">===</span> <span class="s1">&#39;boolean&#39;</span><span class="p">)</span>
              <span class="o">?</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">uncheckable</span>
              <span class="o">:</span> <span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">radio</span><span class="p">()</span>
            <span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">set</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">checked</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">checked</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">tab</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">$input</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;tabindex&#39;</span><span class="p">)</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$input</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;tabindex&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">remove</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">checked</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">checked</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">enable</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Enabling checkbox functionality&#39;</span><span class="p">);</span>
          <span class="nx">$module</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">disabled</span><span class="p">);</span>
          <span class="nx">$input</span><span class="p">.</span><span class="nx">prop</span><span class="p">(</span><span class="s1">&#39;disabled&#39;</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
          <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onEnabled</span><span class="p">,</span> <span class="nx">$input</span><span class="p">.</span><span class="nx">get</span><span class="p">())();</span>
        <span class="p">},</span>

        <span class="nx">disable</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Disabling checkbox functionality&#39;</span><span class="p">);</span>
          <span class="nx">$module</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">disabled</span><span class="p">);</span>
          <span class="nx">$input</span><span class="p">.</span><span class="nx">prop</span><span class="p">(</span><span class="s1">&#39;disabled&#39;</span><span class="p">,</span> <span class="s1">&#39;disabled&#39;</span><span class="p">);</span>
          <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onDisabled</span><span class="p">,</span> <span class="nx">$input</span><span class="p">.</span><span class="nx">get</span><span class="p">())();</span>
        <span class="p">},</span>

        <span class="nx">check</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Enabling checkbox&#39;</span><span class="p">,</span> <span class="nx">$input</span><span class="p">);</span>
          <span class="nx">$input</span>
            <span class="p">.</span><span class="nx">prop</span><span class="p">(</span><span class="s1">&#39;checked&#39;</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;change&#39;</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">checked</span><span class="p">();</span>
          <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onChange</span><span class="p">,</span> <span class="nx">$input</span><span class="p">.</span><span class="nx">get</span><span class="p">())();</span>
          <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onChecked</span><span class="p">,</span> <span class="nx">$input</span><span class="p">.</span><span class="nx">get</span><span class="p">())();</span>
        <span class="p">},</span>

        <span class="nx">uncheck</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Disabling checkbox&#39;</span><span class="p">);</span>
          <span class="nx">$input</span>
            <span class="p">.</span><span class="nx">prop</span><span class="p">(</span><span class="s1">&#39;checked&#39;</span><span class="p">,</span> <span class="kc">false</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;change&#39;</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">checked</span><span class="p">();</span>
          <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onChange</span><span class="p">,</span> <span class="nx">$input</span><span class="p">.</span><span class="nx">get</span><span class="p">())();</span>
          <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onUnchecked</span><span class="p">,</span> <span class="nx">$input</span><span class="p">.</span><span class="nx">get</span><span class="p">())();</span>
        <span class="p">},</span>

        <span class="nx">toggle</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">can</span><span class="p">.</span><span class="nx">change</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">can</span><span class="p">.</span><span class="nx">change</span><span class="p">());</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Checkbox is read-only or disabled, ignoring toggle&#39;</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Determining new checkbox state&#39;</span><span class="p">);</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">unchecked</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">check</span><span class="p">();</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">checked</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nx">module</span><span class="p">.</span><span class="nx">can</span><span class="p">.</span><span class="nx">uncheck</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">uncheck</span><span class="p">();</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">setting</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Changing setting&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">settings</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">internal</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">module</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">debug</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">verbose</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">&amp;&amp;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">performance</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">log</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">currentTime</span><span class="p">,</span>
              <span class="nx">executionTime</span><span class="p">,</span>
              <span class="nx">previousTime</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">currentTime</span>   <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>
              <span class="nx">previousTime</span>  <span class="o">=</span> <span class="nx">time</span> <span class="o">||</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">executionTime</span> <span class="o">=</span> <span class="nx">currentTime</span> <span class="o">-</span> <span class="nx">previousTime</span><span class="p">;</span>
              <span class="nx">time</span>          <span class="o">=</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">performance</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
                <span class="s1">&#39;Name&#39;</span>           <span class="o">:</span> <span class="nx">message</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="s1">&#39;Arguments&#39;</span>      <span class="o">:</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Element&#39;</span>        <span class="o">:</span> <span class="nx">element</span><span class="p">,</span>
                <span class="s1">&#39;Execution Time&#39;</span> <span class="o">:</span> <span class="nx">executionTime</span>
              <span class="p">});</span>
            <span class="p">}</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">display</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">title</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span>
              <span class="nx">totalTime</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="p">;</span>
            <span class="nx">time</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">totalTime</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">];</span>
            <span class="p">});</span>
            <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">totalTime</span> <span class="o">+</span> <span class="s1">&#39;ms&#39;</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">moduleSelector</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; \&#39;&#39;</span> <span class="o">+</span> <span class="nx">moduleSelector</span> <span class="o">+</span> <span class="s1">&#39;\&#39;&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span> <span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">group</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">console</span><span class="p">.</span><span class="nx">table</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">performance</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupCollapsed</span><span class="p">(</span><span class="nx">title</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">performance</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;ms&#39;</span><span class="p">);</span>
                <span class="p">});</span>
              <span class="p">}</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupEnd</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">performance</span> <span class="o">=</span> <span class="p">[];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">invoke</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">object</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">,</span>
            <span class="nx">maxDepth</span><span class="p">,</span>
            <span class="nx">found</span><span class="p">,</span>
            <span class="nx">response</span>
          <span class="p">;</span>
          <span class="nx">passedArguments</span> <span class="o">=</span> <span class="nx">passedArguments</span> <span class="o">||</span> <span class="nx">queryArguments</span><span class="p">;</span>
          <span class="nx">context</span>         <span class="o">=</span> <span class="nx">element</span>         <span class="o">||</span> <span class="nx">context</span><span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">object</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">query</span>    <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/[\. ]/</span><span class="p">);</span>
            <span class="nx">maxDepth</span> <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">depth</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span> <span class="nx">camelCaseValue</span> <span class="o">=</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">value</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="o">:</span> <span class="nx">query</span>
              <span class="p">;</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">});</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">found</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">found</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">returnedValue</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">returnedValue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="p">[</span><span class="nx">returnedValue</span><span class="p">,</span> <span class="nx">response</span><span class="p">];</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">response</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="nx">found</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>

      <span class="k">if</span><span class="p">(</span><span class="nx">methodInvoked</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="nx">query</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">})</span>
  <span class="p">;</span>

  <span class="k">return</span> <span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
    <span class="o">?</span> <span class="nx">returnedValue</span>
    <span class="o">:</span> <span class="k">this</span>
  <span class="p">;</span>
<span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">checkbox</span><span class="p">.</span><span class="nx">settings</span> <span class="o">=</span> <span class="p">{</span>

  <span class="nx">name</span>        <span class="o">:</span> <span class="s1">&#39;Checkbox&#39;</span><span class="p">,</span>
  <span class="nx">namespace</span>   <span class="o">:</span> <span class="s1">&#39;checkbox&#39;</span><span class="p">,</span>

  <span class="nx">debug</span>       <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">verbose</span>     <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">performance</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span></pre></div></td></tr><tr id="section-45"><td class="docs"><div class="pilwrap"><a href="#section-45" class="pilcrow">&#182;</a></div><p>delegated event context</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">uncheckable</span> <span class="o">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span>
  <span class="nx">fireOnInit</span>  <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="nx">onChange</span>    <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>
  <span class="nx">onChecked</span>   <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>
  <span class="nx">onUnchecked</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>
  <span class="nx">onEnabled</span>   <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>
  <span class="nx">onDisabled</span>  <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>

  <span class="nx">className</span>   <span class="o">:</span> <span class="p">{</span>
    <span class="nx">checked</span>  <span class="o">:</span> <span class="s1">&#39;checked&#39;</span><span class="p">,</span>
    <span class="nx">disabled</span> <span class="o">:</span> <span class="s1">&#39;disabled&#39;</span><span class="p">,</span>
    <span class="nx">radio</span>    <span class="o">:</span> <span class="s1">&#39;radio&#39;</span><span class="p">,</span>
    <span class="nx">readOnly</span> <span class="o">:</span> <span class="s1">&#39;read-only&#39;</span>
  <span class="p">},</span>

  <span class="nx">error</span>     <span class="o">:</span> <span class="p">{</span>
    <span class="nx">method</span>   <span class="o">:</span> <span class="s1">&#39;The method you called is not defined.&#39;</span>
  <span class="p">},</span>

  <span class="nx">selector</span> <span class="o">:</span> <span class="p">{</span>
    <span class="nx">input</span>  <span class="o">:</span> <span class="s1">&#39;input[type=checkbox], input[type=radio]&#39;</span><span class="p">,</span>
    <span class="nx">label</span>  <span class="o">:</span> <span class="s1">&#39;label&#39;</span>
  <span class="p">}</span>

<span class="p">};</span>

<span class="p">})(</span> <span class="nx">jQuery</span><span class="p">,</span> <span class="nb">window</span> <span class="p">,</span> <span class="nb">document</span> <span class="p">);</span></pre></div></td></tr><tr id="section-46"><td class="docs"><div class="pilwrap"><a href="#section-46" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><h1>Semantic - Colorize</h1>

<p><a href='http://github.com/semantic-org/semantic-ui/'>http://github.com/semantic-org/semantic-ui/</a></p></div><div class="body"><p>Copyright 2014 Contributor<br />Released under the MIT license<br /><a href='http://opensource.org/licenses/MIT'>http://opensource.org/licenses/MIT</a></p></div></div>
</td><td class="code"><div class="highlight"><pre><span class="p">;(</span><span class="kd">function</span> <span class="p">(</span> <span class="nx">$</span><span class="p">,</span> <span class="nb">window</span><span class="p">,</span> <span class="nb">document</span><span class="p">,</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>

  <span class="s2">&quot;use strict&quot;</span><span class="p">;</span>

  <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">colorize</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span>
      <span class="nx">settings</span>        <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">colorize</span><span class="p">.</span><span class="nx">settings</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">),</span></pre></div></td></tr><tr id="section-47"><td class="docs"><div class="pilwrap"><a href="#section-47" class="pilcrow">&#182;</a></div><p>hoist arguments</p>
</td><td class="code"><div class="highlight"><pre>      <span class="nx">moduleArguments</span> <span class="o">=</span> <span class="nx">arguments</span> <span class="o">||</span> <span class="kc">false</span>
    <span class="p">;</span>
    <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">instanceIndex</span><span class="p">)</span> <span class="p">{</span>

        <span class="kd">var</span>
          <span class="nx">$module</span>         <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>

          <span class="nx">mainCanvas</span>      <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;&lt;canvas /&gt;&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>
          <span class="nx">imageCanvas</span>     <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;&lt;canvas /&gt;&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>
          <span class="nx">overlayCanvas</span>   <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;&lt;canvas /&gt;&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>

          <span class="nx">backgroundImage</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Image</span><span class="p">(),</span></pre></div></td></tr><tr id="section-48"><td class="docs"><div class="pilwrap"><a href="#section-48" class="pilcrow">&#182;</a></div><p>defs</p>
</td><td class="code"><div class="highlight"><pre>          <span class="nx">mainContext</span><span class="p">,</span>
          <span class="nx">imageContext</span><span class="p">,</span>
          <span class="nx">overlayContext</span><span class="p">,</span>

          <span class="nx">image</span><span class="p">,</span>
          <span class="nx">imageName</span><span class="p">,</span>

          <span class="nx">width</span><span class="p">,</span>
          <span class="nx">height</span><span class="p">,</span></pre></div></td></tr><tr id="section-49"><td class="docs"><div class="pilwrap"><a href="#section-49" class="pilcrow">&#182;</a></div><p>shortucts</p>
</td><td class="code"><div class="highlight"><pre>          <span class="nx">colors</span>    <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">colors</span><span class="p">,</span>
          <span class="nx">paths</span>     <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">paths</span><span class="p">,</span>
          <span class="nx">namespace</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">namespace</span><span class="p">,</span>
          <span class="nx">error</span>     <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span></pre></div></td></tr><tr id="section-50"><td class="docs"><div class="pilwrap"><a href="#section-50" class="pilcrow">&#182;</a></div><p>boilerplate</p>
</td><td class="code"><div class="highlight"><pre>          <span class="nx">instance</span>   <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;module-&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">),</span>
          <span class="nx">module</span>
        <span class="p">;</span>

        <span class="nx">module</span> <span class="o">=</span> <span class="p">{</span>

          <span class="nx">checkPreconditions</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Checking pre-conditions&#39;</span><span class="p">);</span>

            <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">colors</span><span class="p">)</span> <span class="o">||</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isEmptyObject</span><span class="p">(</span><span class="nx">colors</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">undefinedColors</span><span class="p">);</span>
              <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
          <span class="p">},</span>

          <span class="nx">async</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">async</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">callback</span><span class="p">();</span>
            <span class="p">}</span>
          <span class="p">},</span>

          <span class="nx">getMetadata</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Grabbing metadata&#39;</span><span class="p">);</span>
            <span class="nx">image</span>     <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;image&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">image</span> <span class="o">||</span> <span class="kc">undefined</span><span class="p">;</span>
            <span class="nx">imageName</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>  <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span>  <span class="o">||</span> <span class="nx">instanceIndex</span><span class="p">;</span>
            <span class="nx">width</span>     <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">width</span>        <span class="o">||</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">width</span><span class="p">();</span>
            <span class="nx">height</span>    <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">height</span>       <span class="o">||</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">height</span><span class="p">();</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">width</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">height</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">undefinedSize</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">},</span>

          <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Initializing with colors&#39;</span><span class="p">,</span> <span class="nx">colors</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">checkPreconditions</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>

              <span class="nx">module</span><span class="p">.</span><span class="nx">async</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">getMetadata</span><span class="p">();</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span>

                <span class="nx">module</span><span class="p">.</span><span class="nx">draw</span><span class="p">.</span><span class="nx">image</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">draw</span><span class="p">.</span><span class="nx">colors</span><span class="p">();</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">merge</span><span class="p">();</span>
                <span class="p">});</span>
                <span class="nx">$module</span>
                  <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;module-&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">)</span>
                <span class="p">;</span>
              <span class="p">});</span>
            <span class="p">}</span>
          <span class="p">},</span>

          <span class="nx">redraw</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Redrawing image&#39;</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">async</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">draw</span><span class="p">.</span><span class="nx">colors</span><span class="p">();</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">merge</span><span class="p">();</span>
            <span class="p">});</span>
          <span class="p">},</span>

          <span class="nx">change</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">color</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">colorName</span><span class="p">,</span> <span class="nx">color</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Changing color&#39;</span><span class="p">,</span> <span class="nx">colorName</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">colors</span><span class="p">[</span><span class="nx">colorName</span><span class="p">]</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">missingColor</span><span class="p">);</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="nx">colors</span><span class="p">[</span><span class="nx">colorName</span><span class="p">]</span> <span class="o">=</span> <span class="nx">color</span><span class="p">;</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">redraw</span><span class="p">();</span>
            <span class="p">}</span>
          <span class="p">},</span>

          <span class="nx">canvas</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">create</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Creating canvases&#39;</span><span class="p">);</span>

              <span class="nx">mainCanvas</span><span class="p">.</span><span class="nx">width</span>     <span class="o">=</span> <span class="nx">width</span><span class="p">;</span>
              <span class="nx">mainCanvas</span><span class="p">.</span><span class="nx">height</span>    <span class="o">=</span> <span class="nx">height</span><span class="p">;</span>
              <span class="nx">imageCanvas</span><span class="p">.</span><span class="nx">width</span>    <span class="o">=</span> <span class="nx">width</span><span class="p">;</span>
              <span class="nx">imageCanvas</span><span class="p">.</span><span class="nx">height</span>   <span class="o">=</span> <span class="nx">height</span><span class="p">;</span>
              <span class="nx">overlayCanvas</span><span class="p">.</span><span class="nx">width</span>  <span class="o">=</span> <span class="nx">width</span><span class="p">;</span>
              <span class="nx">overlayCanvas</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">height</span><span class="p">;</span>

              <span class="nx">mainContext</span>    <span class="o">=</span> <span class="nx">mainCanvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;2d&#39;</span><span class="p">);</span>
              <span class="nx">imageContext</span>   <span class="o">=</span> <span class="nx">imageCanvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;2d&#39;</span><span class="p">);</span>
              <span class="nx">overlayContext</span> <span class="o">=</span> <span class="nx">overlayCanvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;2d&#39;</span><span class="p">);</span>

              <span class="nx">$module</span>
                <span class="p">.</span><span class="nx">append</span><span class="p">(</span> <span class="nx">mainCanvas</span> <span class="p">)</span>
              <span class="p">;</span>
              <span class="nx">mainContext</span>    <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">children</span><span class="p">(</span><span class="s1">&#39;canvas&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;2d&#39;</span><span class="p">);</span>
            <span class="p">},</span>
            <span class="nx">clear</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Clearing canvas&#39;</span><span class="p">);</span>
              <span class="nx">overlayContext</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s1">&#39;#FFFFFF&#39;</span><span class="p">;</span>
              <span class="nx">overlayContext</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">);</span>
            <span class="p">},</span>
            <span class="nx">merge</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">mainContext</span><span class="p">.</span><span class="nx">blendOnto</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">missingPlugin</span><span class="p">);</span>
                <span class="k">return</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="nx">mainContext</span><span class="p">.</span><span class="nx">putImageData</span><span class="p">(</span> <span class="nx">imageContext</span><span class="p">.</span><span class="nx">getImageData</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
              <span class="nx">overlayContext</span><span class="p">.</span><span class="nx">blendOnto</span><span class="p">(</span><span class="nx">mainContext</span><span class="p">,</span> <span class="s1">&#39;multiply&#39;</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">},</span>

          <span class="nx">draw</span><span class="o">:</span> <span class="p">{</span>

            <span class="nx">image</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Drawing image&#39;</span><span class="p">);</span>
              <span class="nx">callback</span> <span class="o">=</span> <span class="nx">callback</span> <span class="o">||</span> <span class="kd">function</span><span class="p">(){};</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">image</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">backgroundImage</span><span class="p">.</span><span class="nx">src</span>    <span class="o">=</span> <span class="nx">image</span><span class="p">;</span>
                <span class="nx">backgroundImage</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                  <span class="nx">imageContext</span><span class="p">.</span><span class="nx">drawImage</span><span class="p">(</span><span class="nx">backgroundImage</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
                  <span class="nx">callback</span><span class="p">();</span>
                <span class="p">};</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">noImage</span><span class="p">);</span>
                <span class="nx">callback</span><span class="p">();</span>
              <span class="p">}</span>
            <span class="p">},</span>

            <span class="nx">colors</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Drawing color overlays&#39;</span><span class="p">,</span> <span class="nx">colors</span><span class="p">);</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">colors</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">colorName</span><span class="p">,</span> <span class="nx">color</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">settings</span><span class="p">.</span><span class="nx">onDraw</span><span class="p">(</span><span class="nx">overlayContext</span><span class="p">,</span> <span class="nx">imageName</span><span class="p">,</span> <span class="nx">colorName</span><span class="p">,</span> <span class="nx">color</span><span class="p">);</span>
              <span class="p">});</span>
            <span class="p">}</span>

          <span class="p">},</span>

          <span class="nx">debug</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span> <span class="nx">variableName</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">variableName</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nx">message</span><span class="p">,</span> <span class="nx">variableName</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nx">message</span><span class="p">);</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">errorMessage</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nx">errorMessage</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">invoke</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">methodName</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">methodArguments</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">method</span>
            <span class="p">;</span>
            <span class="nx">methodArguments</span> <span class="o">=</span> <span class="nx">methodArguments</span> <span class="o">||</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">arguments</span><span class="p">,</span> <span class="mi">2</span> <span class="p">);</span>

            <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">methodName</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">instance</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">methodName</span> <span class="o">=</span> <span class="nx">methodName</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">);</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">methodName</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">instance</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                  <span class="nx">instance</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
                  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">instance</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                  <span class="nx">method</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
                  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">error</span><span class="p">.</span><span class="nx">method</span><span class="p">);</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">});</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">method</span> <span class="p">)</span> <span class="p">)</span>
              <span class="o">?</span> <span class="nx">method</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">methodArguments</span><span class="p">)</span>
              <span class="o">:</span> <span class="kc">false</span>
            <span class="p">;</span>
          <span class="p">}</span>

        <span class="p">};</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">moduleArguments</span><span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-51"><td class="docs"><div class="pilwrap"><a href="#section-51" class="pilcrow">&#182;</a></div><p>simpler than invoke realizing to invoke itself (and losing scope due prototype.call()</p>
</td><td class="code"><div class="highlight"><pre>          <span class="k">if</span><span class="p">(</span><span class="nx">moduleArguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;invoke&#39;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">moduleArguments</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">moduleArguments</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="nx">module</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="nx">moduleArguments</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="k">this</span><span class="p">,</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">moduleArguments</span><span class="p">,</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">);</span>
        <span class="p">}</span></pre></div></td></tr><tr id="section-52"><td class="docs"><div class="pilwrap"><a href="#section-52" class="pilcrow">&#182;</a></div><p>initializing</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
      <span class="p">})</span>
    <span class="p">;</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">colorize</span><span class="p">.</span><span class="nx">settings</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">name</span>      <span class="o">:</span> <span class="s1">&#39;Image Colorizer&#39;</span><span class="p">,</span>
    <span class="nx">debug</span>     <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">namespace</span> <span class="o">:</span> <span class="s1">&#39;colorize&#39;</span><span class="p">,</span>

    <span class="nx">onDraw</span>    <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">overlayContext</span><span class="p">,</span> <span class="nx">imageName</span><span class="p">,</span> <span class="nx">colorName</span><span class="p">,</span> <span class="nx">color</span><span class="p">)</span> <span class="p">{},</span></pre></div></td></tr><tr id="section-53"><td class="docs"><div class="pilwrap"><a href="#section-53" class="pilcrow">&#182;</a></div><p>whether to block execution while updating canvas</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">async</span>     <span class="o">:</span> <span class="kc">true</span><span class="p">,</span></pre></div></td></tr><tr id="section-54"><td class="docs"><div class="pilwrap"><a href="#section-54" class="pilcrow">&#182;</a></div><p>object containing names and default values of color regions</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">colors</span>    <span class="o">:</span> <span class="p">{},</span>

    <span class="nx">metadata</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">image</span> <span class="o">:</span> <span class="s1">&#39;image&#39;</span><span class="p">,</span>
      <span class="nx">name</span>  <span class="o">:</span> <span class="s1">&#39;name&#39;</span>
    <span class="p">},</span>

    <span class="nx">error</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">noImage</span>         <span class="o">:</span> <span class="s1">&#39;No tracing image specified&#39;</span><span class="p">,</span>
      <span class="nx">undefinedColors</span> <span class="o">:</span> <span class="s1">&#39;No default colors specified.&#39;</span><span class="p">,</span>
      <span class="nx">missingColor</span>    <span class="o">:</span> <span class="s1">&#39;Attempted to change color that does not exist&#39;</span><span class="p">,</span>
      <span class="nx">missingPlugin</span>   <span class="o">:</span> <span class="s1">&#39;Blend onto plug-in must be included&#39;</span><span class="p">,</span>
      <span class="nx">undefinedHeight</span> <span class="o">:</span> <span class="s1">&#39;The width or height of image canvas could not be automatically determined. Please specify a height.&#39;</span>
    <span class="p">}</span>

  <span class="p">};</span>

<span class="p">})(</span> <span class="nx">jQuery</span><span class="p">,</span> <span class="nb">window</span> <span class="p">,</span> <span class="nb">document</span> <span class="p">);</span></pre></div></td></tr><tr id="section-55"><td class="docs"><div class="pilwrap"><a href="#section-55" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><h1>Semantic - Dimmer</h1>

<p><a href='http://github.com/semantic-org/semantic-ui/'>http://github.com/semantic-org/semantic-ui/</a></p></div><div class="body"><p>Copyright 2014 Contributor<br />Released under the MIT license<br /><a href='http://opensource.org/licenses/MIT'>http://opensource.org/licenses/MIT</a></p></div></div>
</td><td class="code"><div class="highlight"><pre><span class="p">;(</span><span class="kd">function</span> <span class="p">(</span> <span class="nx">$</span><span class="p">,</span> <span class="nb">window</span><span class="p">,</span> <span class="nb">document</span><span class="p">,</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">dimmer</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span>
    <span class="nx">$allModules</span>     <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>

    <span class="nx">time</span>            <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">(),</span>
    <span class="nx">performance</span>     <span class="o">=</span> <span class="p">[],</span>

    <span class="nx">query</span>           <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="nx">methodInvoked</span>   <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">),</span>
    <span class="nx">queryArguments</span>  <span class="o">=</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>

    <span class="nx">returnedValue</span>
  <span class="p">;</span>

  <span class="nx">$allModules</span>
    <span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span>
        <span class="nx">settings</span>        <span class="o">=</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span> <span class="p">)</span>
          <span class="o">?</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">dimmer</span><span class="p">.</span><span class="nx">settings</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">)</span>
          <span class="o">:</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">dimmer</span><span class="p">.</span><span class="nx">settings</span><span class="p">),</span>

        <span class="nx">selector</span>        <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">selector</span><span class="p">,</span>
        <span class="nx">namespace</span>       <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">namespace</span><span class="p">,</span>
        <span class="nx">className</span>       <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">className</span><span class="p">,</span>
        <span class="nx">error</span>           <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span>

        <span class="nx">eventNamespace</span>  <span class="o">=</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">,</span>
        <span class="nx">moduleNamespace</span> <span class="o">=</span> <span class="s1">&#39;module-&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">,</span>
        <span class="nx">moduleSelector</span>  <span class="o">=</span> <span class="nx">$allModules</span><span class="p">.</span><span class="nx">selector</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>

        <span class="nx">clickEvent</span>      <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;ontouchstart&#39;</span> <span class="k">in</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">)</span>
          <span class="o">?</span> <span class="s1">&#39;touchstart&#39;</span>
          <span class="o">:</span> <span class="s1">&#39;click&#39;</span><span class="p">,</span>

        <span class="nx">$module</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
        <span class="nx">$dimmer</span><span class="p">,</span>
        <span class="nx">$dimmable</span><span class="p">,</span>

        <span class="nx">element</span>   <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
        <span class="nx">instance</span>  <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">),</span>
        <span class="nx">module</span>
      <span class="p">;</span>

      <span class="nx">module</span> <span class="o">=</span> <span class="p">{</span>

        <span class="nx">preinitialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">dimmer</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$dimmable</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">parent</span><span class="p">();</span>
            <span class="nx">$dimmer</span>   <span class="o">=</span> <span class="nx">$module</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">$dimmable</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">has</span><span class="p">.</span><span class="nx">dimmer</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">dimmerName</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">$dimmer</span> <span class="o">=</span> <span class="nx">$dimmable</span><span class="p">.</span><span class="nx">children</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">dimmer</span><span class="p">).</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">dimmerName</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">$dimmer</span> <span class="o">=</span> <span class="nx">$dimmable</span><span class="p">.</span><span class="nx">children</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">dimmer</span><span class="p">);</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">$dimmer</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Initializing dimmer&#39;</span><span class="p">,</span> <span class="nx">settings</span><span class="p">);</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">on</span> <span class="o">==</span> <span class="s1">&#39;hover&#39;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$dimmable</span>
              <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;mouseenter&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">show</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;mouseleave&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">hide</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">on</span> <span class="o">==</span> <span class="s1">&#39;click&#39;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$dimmable</span>
              <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">clickEvent</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">toggle</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">page</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Setting as a page dimmer&#39;</span><span class="p">,</span> <span class="nx">$dimmable</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">pageDimmer</span><span class="p">();</span>
          <span class="p">}</span>

          <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">closable</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Adding dimmer close event&#39;</span><span class="p">,</span> <span class="nx">$dimmer</span><span class="p">);</span>
            <span class="nx">$dimmer</span>
              <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">clickEvent</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">click</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">}</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">dimmable</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">instantiate</span><span class="p">();</span>
        <span class="p">},</span>

        <span class="nx">instantiate</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Storing instance of module&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">);</span>
          <span class="nx">instance</span> <span class="o">=</span> <span class="nx">module</span><span class="p">;</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">,</span> <span class="nx">instance</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">destroy</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Destroying previous module&#39;</span><span class="p">,</span> <span class="nx">$dimmer</span><span class="p">);</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">removeData</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$dimmable</span>
            <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">eventNamespace</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$dimmer</span>
            <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">eventNamespace</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">event</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">click</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Determining if event occured on dimmer&#39;</span><span class="p">,</span> <span class="nx">event</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">$dimmer</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">$</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">).</span><span class="nx">is</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">content</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
              <span class="nx">event</span><span class="p">.</span><span class="nx">stopImmediatePropagation</span><span class="p">();</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">addContent</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">$content</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Add content to dimmer&#39;</span><span class="p">,</span> <span class="nx">$content</span><span class="p">);</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">$content</span><span class="p">.</span><span class="nx">parent</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!==</span> <span class="nx">$dimmer</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">{</span>
            <span class="nx">$content</span><span class="p">.</span><span class="nx">detach</span><span class="p">().</span><span class="nx">appendTo</span><span class="p">(</span><span class="nx">$dimmer</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">create</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">$element</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">template</span><span class="p">.</span><span class="nx">dimmer</span><span class="p">()</span> <span class="p">)</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">variation</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Creating dimmer with variation&#39;</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">variation</span><span class="p">);</span>
            <span class="nx">$element</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">variation</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">dimmerName</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Creating named dimmer&#39;</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">dimmerName</span><span class="p">);</span>
            <span class="nx">$element</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">dimmerName</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="nx">$element</span>
            <span class="p">.</span><span class="nx">appendTo</span><span class="p">(</span><span class="nx">$dimmable</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="k">return</span> <span class="nx">$element</span><span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">show</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">callback</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span>
            <span class="o">?</span> <span class="nx">callback</span>
            <span class="o">:</span> <span class="kd">function</span><span class="p">(){}</span>
          <span class="p">;</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Showing dimmer&#39;</span><span class="p">,</span> <span class="nx">$dimmer</span><span class="p">,</span> <span class="nx">settings</span><span class="p">);</span>
          <span class="k">if</span><span class="p">(</span> <span class="p">(</span><span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">dimmed</span><span class="p">()</span> <span class="o">||</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">animating</span><span class="p">())</span> <span class="o">&amp;&amp;</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">enabled</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">animate</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="nx">callback</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onShow</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onChange</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Dimmer is already shown or disabled&#39;</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">hide</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">callback</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span>
            <span class="o">?</span> <span class="nx">callback</span>
            <span class="o">:</span> <span class="kd">function</span><span class="p">(){}</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">dimmed</span><span class="p">()</span> <span class="o">||</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">animating</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Hiding dimmer&#39;</span><span class="p">,</span> <span class="nx">$dimmer</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">animate</span><span class="p">.</span><span class="nx">hide</span><span class="p">(</span><span class="nx">callback</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onHide</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onChange</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Dimmer is not visible&#39;</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">toggle</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Toggling dimmer visibility&#39;</span><span class="p">,</span> <span class="nx">$dimmer</span><span class="p">);</span>
          <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">dimmed</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">animate</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">show</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">callback</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span>
              <span class="o">?</span> <span class="nx">callback</span>
              <span class="o">:</span> <span class="kd">function</span><span class="p">(){}</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">useCSS</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">transition</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">$dimmer</span><span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s1">&#39;is supported&#39;</span><span class="p">))</span> <span class="p">{</span>
              <span class="nx">$dimmer</span>
                <span class="p">.</span><span class="nx">transition</span><span class="p">({</span>
                  <span class="nx">animation</span> <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span> <span class="o">+</span> <span class="s1">&#39; in&#39;</span><span class="p">,</span>
                  <span class="nx">queue</span>       <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                  <span class="nx">duration</span>  <span class="o">:</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">duration</span><span class="p">(),</span>
                  <span class="nx">onStart</span>   <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                    <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">dimmed</span><span class="p">();</span>
                  <span class="p">},</span>
                  <span class="nx">onComplete</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                    <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">active</span><span class="p">();</span>
                    <span class="nx">callback</span><span class="p">();</span>
                  <span class="p">}</span>
                <span class="p">})</span>
              <span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Showing dimmer animation with javascript&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">dimmed</span><span class="p">();</span>
              <span class="nx">$dimmer</span>
                <span class="p">.</span><span class="nx">stop</span><span class="p">()</span>
                <span class="p">.</span><span class="nx">css</span><span class="p">({</span>
                  <span class="nx">opacity</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
                  <span class="nx">width</span>   <span class="o">:</span> <span class="s1">&#39;100%&#39;</span><span class="p">,</span>
                  <span class="nx">height</span>  <span class="o">:</span> <span class="s1">&#39;100%&#39;</span>
                <span class="p">})</span>
                <span class="p">.</span><span class="nx">fadeTo</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">duration</span><span class="p">(),</span> <span class="mi">1</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                  <span class="nx">$dimmer</span><span class="p">.</span><span class="nx">removeAttr</span><span class="p">(</span><span class="s1">&#39;style&#39;</span><span class="p">);</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">active</span><span class="p">();</span>
                  <span class="nx">callback</span><span class="p">();</span>
                <span class="p">})</span>
              <span class="p">;</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">hide</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">callback</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span>
              <span class="o">?</span> <span class="nx">callback</span>
              <span class="o">:</span> <span class="kd">function</span><span class="p">(){}</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">useCSS</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">transition</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">$dimmer</span><span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s1">&#39;is supported&#39;</span><span class="p">))</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Hiding dimmer with css&#39;</span><span class="p">);</span>
              <span class="nx">$dimmer</span>
                <span class="p">.</span><span class="nx">transition</span><span class="p">({</span>
                  <span class="nx">animation</span>  <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span> <span class="o">+</span> <span class="s1">&#39; out&#39;</span><span class="p">,</span>
                  <span class="nx">queue</span>      <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                  <span class="nx">duration</span>   <span class="o">:</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">duration</span><span class="p">(),</span>
                  <span class="nx">onStart</span>    <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                    <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">dimmed</span><span class="p">();</span>
                  <span class="p">},</span>
                  <span class="nx">onComplete</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                    <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">active</span><span class="p">();</span>
                    <span class="nx">callback</span><span class="p">();</span>
                  <span class="p">}</span>
                <span class="p">})</span>
              <span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Hiding dimmer with javascript&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">dimmed</span><span class="p">();</span>
              <span class="nx">$dimmer</span>
                <span class="p">.</span><span class="nx">stop</span><span class="p">()</span>
                <span class="p">.</span><span class="nx">fadeOut</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">duration</span><span class="p">(),</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">active</span><span class="p">();</span>
                  <span class="nx">$dimmer</span><span class="p">.</span><span class="nx">removeAttr</span><span class="p">(</span><span class="s1">&#39;style&#39;</span><span class="p">);</span>
                  <span class="nx">callback</span><span class="p">();</span>
                <span class="p">})</span>
              <span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">get</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">dimmer</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$dimmer</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">duration</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span> <span class="o">==</span> <span class="s1">&#39;object&#39;</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">active</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">.</span><span class="nx">hide</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">.</span><span class="nx">show</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">has</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">dimmer</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">dimmerName</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="p">(</span><span class="nx">$module</span><span class="p">.</span><span class="nx">children</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">dimmer</span><span class="p">).</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">dimmerName</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="k">return</span> <span class="p">(</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">children</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">dimmer</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">is</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">active</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$dimmer</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">animating</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span> <span class="nx">$dimmer</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;:animated&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="nx">$dimmer</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">animating</span><span class="p">)</span> <span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">closable</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">closable</span> <span class="o">==</span> <span class="s1">&#39;auto&#39;</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">on</span> <span class="o">==</span> <span class="s1">&#39;hover&#39;</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">closable</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">dimmer</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">dimmer</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">dimmable</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">dimmable</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">dimmed</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$dimmable</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">dimmed</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">disabled</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$dimmable</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">disabled</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">enabled</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">disabled</span><span class="p">();</span>
          <span class="p">},</span>
          <span class="nx">page</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$dimmable</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">pageDimmer</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$dimmer</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">pageDimmer</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">can</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">show</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="o">!</span><span class="nx">$dimmer</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">disabled</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">set</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">active</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$dimmer</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">dimmable</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$dimmable</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">dimmable</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">dimmed</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$dimmable</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">dimmed</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">pageDimmer</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$dimmer</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">pageDimmer</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">disabled</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$dimmer</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">disabled</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">remove</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">active</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$dimmer</span>
              <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">dimmed</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$dimmable</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">dimmed</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">disabled</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$dimmer</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">disabled</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">setting</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Changing setting&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">settings</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">internal</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">module</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">debug</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">verbose</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">&amp;&amp;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">performance</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">log</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">currentTime</span><span class="p">,</span>
              <span class="nx">executionTime</span><span class="p">,</span>
              <span class="nx">previousTime</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">currentTime</span>   <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>
              <span class="nx">previousTime</span>  <span class="o">=</span> <span class="nx">time</span> <span class="o">||</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">executionTime</span> <span class="o">=</span> <span class="nx">currentTime</span> <span class="o">-</span> <span class="nx">previousTime</span><span class="p">;</span>
              <span class="nx">time</span>          <span class="o">=</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">performance</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
                <span class="s1">&#39;Name&#39;</span>           <span class="o">:</span> <span class="nx">message</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="s1">&#39;Arguments&#39;</span>      <span class="o">:</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Element&#39;</span>        <span class="o">:</span> <span class="nx">element</span><span class="p">,</span>
                <span class="s1">&#39;Execution Time&#39;</span> <span class="o">:</span> <span class="nx">executionTime</span>
              <span class="p">});</span>
            <span class="p">}</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">display</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">title</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span>
              <span class="nx">totalTime</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="p">;</span>
            <span class="nx">time</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">totalTime</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">];</span>
            <span class="p">});</span>
            <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">totalTime</span> <span class="o">+</span> <span class="s1">&#39;ms&#39;</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">moduleSelector</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; \&#39;&#39;</span> <span class="o">+</span> <span class="nx">moduleSelector</span> <span class="o">+</span> <span class="s1">&#39;\&#39;&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">$allModules</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="s1">&#39;(&#39;</span> <span class="o">+</span> <span class="nx">$allModules</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span> <span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">group</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">console</span><span class="p">.</span><span class="nx">table</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">performance</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupCollapsed</span><span class="p">(</span><span class="nx">title</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">performance</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;ms&#39;</span><span class="p">);</span>
                <span class="p">});</span>
              <span class="p">}</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupEnd</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">performance</span> <span class="o">=</span> <span class="p">[];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">invoke</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">object</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">,</span>
            <span class="nx">maxDepth</span><span class="p">,</span>
            <span class="nx">found</span><span class="p">,</span>
            <span class="nx">response</span>
          <span class="p">;</span>
          <span class="nx">passedArguments</span> <span class="o">=</span> <span class="nx">passedArguments</span> <span class="o">||</span> <span class="nx">queryArguments</span><span class="p">;</span>
          <span class="nx">context</span>         <span class="o">=</span> <span class="nx">element</span>         <span class="o">||</span> <span class="nx">context</span><span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">object</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">query</span>    <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/[\. ]/</span><span class="p">);</span>
            <span class="nx">maxDepth</span> <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">depth</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span> <span class="nx">camelCaseValue</span> <span class="o">=</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">value</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="o">:</span> <span class="nx">query</span>
              <span class="p">;</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">});</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">found</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">found</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">returnedValue</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">returnedValue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="p">[</span><span class="nx">returnedValue</span><span class="p">,</span> <span class="nx">response</span><span class="p">];</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">response</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="nx">found</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>

      <span class="nx">module</span><span class="p">.</span><span class="nx">preinitialize</span><span class="p">();</span>

      <span class="k">if</span><span class="p">(</span><span class="nx">methodInvoked</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="nx">query</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">})</span>
  <span class="p">;</span>

  <span class="k">return</span> <span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
    <span class="o">?</span> <span class="nx">returnedValue</span>
    <span class="o">:</span> <span class="k">this</span>
  <span class="p">;</span>
<span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">dimmer</span><span class="p">.</span><span class="nx">settings</span> <span class="o">=</span> <span class="p">{</span>

  <span class="nx">name</span>        <span class="o">:</span> <span class="s1">&#39;Dimmer&#39;</span><span class="p">,</span>
  <span class="nx">namespace</span>   <span class="o">:</span> <span class="s1">&#39;dimmer&#39;</span><span class="p">,</span>

  <span class="nx">debug</span>       <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">verbose</span>     <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">performance</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="nx">dimmerName</span>  <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">variation</span>   <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">closable</span>    <span class="o">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span>
  <span class="nx">transition</span>  <span class="o">:</span> <span class="s1">&#39;fade&#39;</span><span class="p">,</span>
  <span class="nx">useCSS</span>      <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">on</span>          <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>

  <span class="nx">duration</span>    <span class="o">:</span> <span class="p">{</span>
    <span class="nx">show</span> <span class="o">:</span> <span class="mi">500</span><span class="p">,</span>
    <span class="nx">hide</span> <span class="o">:</span> <span class="mi">500</span>
  <span class="p">},</span>

  <span class="nx">onChange</span>    <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>
  <span class="nx">onShow</span>      <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>
  <span class="nx">onHide</span>      <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>

  <span class="nx">error</span>   <span class="o">:</span> <span class="p">{</span>
    <span class="nx">method</span>   <span class="o">:</span> <span class="s1">&#39;The method you called is not defined.&#39;</span>
  <span class="p">},</span>

  <span class="nx">selector</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">dimmable</span> <span class="o">:</span> <span class="s1">&#39;.dimmable&#39;</span><span class="p">,</span>
    <span class="nx">dimmer</span>   <span class="o">:</span> <span class="s1">&#39;.ui.dimmer&#39;</span><span class="p">,</span>
    <span class="nx">content</span>  <span class="o">:</span> <span class="s1">&#39;.ui.dimmer &gt; .content, .ui.dimmer &gt; .content &gt; .center&#39;</span>
  <span class="p">},</span>

  <span class="nx">template</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">dimmer</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">return</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;&lt;div /&gt;&#39;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">,</span> <span class="s1">&#39;ui dimmer&#39;</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">className</span> <span class="o">:</span> <span class="p">{</span>
    <span class="nx">active</span>     <span class="o">:</span> <span class="s1">&#39;active&#39;</span><span class="p">,</span>
    <span class="nx">animating</span>  <span class="o">:</span> <span class="s1">&#39;animating&#39;</span><span class="p">,</span>
    <span class="nx">dimmable</span>   <span class="o">:</span> <span class="s1">&#39;dimmable&#39;</span><span class="p">,</span>
    <span class="nx">dimmed</span>     <span class="o">:</span> <span class="s1">&#39;dimmed&#39;</span><span class="p">,</span>
    <span class="nx">disabled</span>   <span class="o">:</span> <span class="s1">&#39;disabled&#39;</span><span class="p">,</span>
    <span class="nx">hide</span>       <span class="o">:</span> <span class="s1">&#39;hide&#39;</span><span class="p">,</span>
    <span class="nx">pageDimmer</span> <span class="o">:</span> <span class="s1">&#39;page&#39;</span><span class="p">,</span>
    <span class="nx">show</span>       <span class="o">:</span> <span class="s1">&#39;show&#39;</span>
  <span class="p">}</span>

<span class="p">};</span>

<span class="p">})(</span> <span class="nx">jQuery</span><span class="p">,</span> <span class="nb">window</span> <span class="p">,</span> <span class="nb">document</span> <span class="p">);</span></pre></div></td></tr><tr id="section-56"><td class="docs"><div class="pilwrap"><a href="#section-56" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><h1>Semantic - Dropdown</h1>

<p><a href='http://github.com/semantic-org/semantic-ui/'>http://github.com/semantic-org/semantic-ui/</a></p></div><div class="body"><p>Copyright 2014 Contributor<br />Released under the MIT license<br /><a href='http://opensource.org/licenses/MIT'>http://opensource.org/licenses/MIT</a></p></div></div>
</td><td class="code"><div class="highlight"><pre><span class="p">;(</span><span class="kd">function</span> <span class="p">(</span> <span class="nx">$</span><span class="p">,</span> <span class="nb">window</span><span class="p">,</span> <span class="nb">document</span><span class="p">,</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>

<span class="s2">&quot;use strict&quot;</span><span class="p">;</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">dropdown</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span>
    <span class="nx">$allModules</span>    <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
    <span class="nx">$document</span>      <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">),</span>

    <span class="nx">moduleSelector</span> <span class="o">=</span> <span class="nx">$allModules</span><span class="p">.</span><span class="nx">selector</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>

    <span class="nx">hasTouch</span>       <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;ontouchstart&#39;</span> <span class="k">in</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">),</span>
    <span class="nx">time</span>           <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">(),</span>
    <span class="nx">performance</span>    <span class="o">=</span> <span class="p">[],</span>

    <span class="nx">query</span>          <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="nx">methodInvoked</span>  <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">),</span>
    <span class="nx">queryArguments</span> <span class="o">=</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="nx">returnedValue</span>
  <span class="p">;</span>

  <span class="nx">$allModules</span>
    <span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span>
        <span class="nx">settings</span>          <span class="o">=</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span> <span class="p">)</span>
          <span class="o">?</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">dropdown</span><span class="p">.</span><span class="nx">settings</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">)</span>
          <span class="o">:</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">dropdown</span><span class="p">.</span><span class="nx">settings</span><span class="p">),</span>

        <span class="nx">className</span>       <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">className</span><span class="p">,</span>
        <span class="nx">metadata</span>        <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">metadata</span><span class="p">,</span>
        <span class="nx">namespace</span>       <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">namespace</span><span class="p">,</span>
        <span class="nx">selector</span>        <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">selector</span><span class="p">,</span>
        <span class="nx">error</span>           <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span>

        <span class="nx">eventNamespace</span>  <span class="o">=</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">,</span>
        <span class="nx">moduleNamespace</span> <span class="o">=</span> <span class="s1">&#39;module-&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">,</span>

        <span class="nx">$module</span>         <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
        <span class="nx">$text</span>           <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">text</span><span class="p">),</span>
        <span class="nx">$search</span>         <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">search</span><span class="p">),</span>
        <span class="nx">$input</span>          <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">input</span><span class="p">),</span>

        <span class="nx">$combo</span> <span class="o">=</span> <span class="p">(</span><span class="nx">$module</span><span class="p">.</span><span class="nx">prev</span><span class="p">().</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">text</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
          <span class="o">?</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">prev</span><span class="p">().</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">text</span><span class="p">)</span>
          <span class="o">:</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">prev</span><span class="p">(),</span>

        <span class="nx">$menu</span>           <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">children</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">menu</span><span class="p">),</span>
        <span class="nx">$item</span>           <span class="o">=</span> <span class="nx">$menu</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">item</span><span class="p">),</span>

        <span class="nx">activated</span>       <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nx">itemActivated</span>   <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>

        <span class="nx">element</span>         <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
        <span class="nx">instance</span>        <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">),</span>
        <span class="nx">observer</span><span class="p">,</span>
        <span class="nx">module</span>
      <span class="p">;</span>

      <span class="nx">module</span> <span class="o">=</span> <span class="p">{</span>

        <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Initializing dropdown&#39;</span><span class="p">,</span> <span class="nx">settings</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">setup</span><span class="p">.</span><span class="nx">layout</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">save</span><span class="p">.</span><span class="nx">defaults</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">selected</span><span class="p">();</span>

          <span class="k">if</span><span class="p">(</span><span class="nx">hasTouch</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">touchEvents</span><span class="p">();</span>
          <span class="p">}</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">mouseEvents</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">keyboardEvents</span><span class="p">();</span>

          <span class="nx">module</span><span class="p">.</span><span class="nx">observeChanges</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">instantiate</span><span class="p">();</span>
        <span class="p">},</span>

        <span class="nx">instantiate</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Storing instance of dropdown&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">);</span>
          <span class="nx">instance</span> <span class="o">=</span> <span class="nx">module</span><span class="p">;</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">destroy</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Destroying previous dropdown for&#39;</span><span class="p">,</span> <span class="nx">$module</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">tabbable</span><span class="p">();</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">eventNamespace</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">removeData</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">observeChanges</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="s1">&#39;MutationObserver&#39;</span> <span class="k">in</span> <span class="nb">window</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">observer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MutationObserver</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">mutations</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;DOM tree modified, updating selector cache&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">refresh</span><span class="p">();</span>
            <span class="p">});</span>
            <span class="nx">observer</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="p">{</span>
              <span class="nx">childList</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
              <span class="nx">subtree</span>   <span class="o">:</span> <span class="kc">true</span>
            <span class="p">});</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Setting up mutation observer&#39;</span><span class="p">,</span> <span class="nx">observer</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">setup</span><span class="o">:</span> <span class="p">{</span>

          <span class="nx">layout</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;select&#39;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">setup</span><span class="p">.</span><span class="nx">select</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">search</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">searchable</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">$search</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;&lt;input /&gt;&#39;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">search</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">$text</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">allowTab</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">tabbable</span><span class="p">();</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">select</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">selectValues</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">selectValues</span><span class="p">()</span>
            <span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Dropdown initialized on a select&#39;</span><span class="p">,</span> <span class="nx">selectValues</span><span class="p">);</span></pre></div></td></tr><tr id="section-57"><td class="docs"><div class="pilwrap"><a href="#section-57" class="pilcrow">&#182;</a></div><p>see if select exists inside a dropdown</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">$input</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">$input</span><span class="p">.</span><span class="nx">parents</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">dropdown</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Creating dropdown menu only from template&#39;</span><span class="p">);</span>
              <span class="nx">$module</span> <span class="o">=</span> <span class="nx">$input</span><span class="p">.</span><span class="nx">closest</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">dropdown</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">$module</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">className</span><span class="p">.</span><span class="nx">dropdown</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;&lt;div /&gt;&#39;</span><span class="p">)</span>
                  <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">menu</span><span class="p">)</span>
                  <span class="p">.</span><span class="nx">html</span><span class="p">(</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">templates</span><span class="p">.</span><span class="nx">menu</span><span class="p">(</span> <span class="nx">selectValues</span> <span class="p">))</span>
                  <span class="p">.</span><span class="nx">appendTo</span><span class="p">(</span><span class="nx">$module</span><span class="p">)</span>
                <span class="p">;</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Creating entire dropdown from template&#39;</span><span class="p">);</span>
              <span class="nx">$module</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;&lt;div /&gt;&#39;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">,</span> <span class="nx">$input</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">)</span> <span class="p">)</span>
                <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">selection</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">dropdown</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">html</span><span class="p">(</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">templates</span><span class="p">.</span><span class="nx">dropdown</span><span class="p">(</span><span class="nx">selectValues</span><span class="p">)</span> <span class="p">)</span>
                <span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">$input</span><span class="p">)</span>
              <span class="p">;</span>
              <span class="nx">$input</span>
                <span class="p">.</span><span class="nx">removeAttr</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">prependTo</span><span class="p">(</span><span class="nx">$module</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">refresh</span><span class="p">();</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">refresh</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">$text</span>   <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">text</span><span class="p">);</span>
          <span class="nx">$search</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">search</span><span class="p">);</span>
          <span class="nx">$input</span>  <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">input</span><span class="p">);</span>
          <span class="nx">$menu</span>   <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">children</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">menu</span><span class="p">);</span>
          <span class="nx">$item</span>   <span class="o">=</span> <span class="nx">$menu</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">item</span><span class="p">);</span>
        <span class="p">},</span>

        <span class="nx">toggle</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Toggling menu visibility&#39;</span><span class="p">);</span>
          <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">active</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">show</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Checking if dropdown can show&#39;</span><span class="p">);</span>
          <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">active</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">animate</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">can</span><span class="p">.</span><span class="nx">click</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">intent</span><span class="p">();</span>
              <span class="p">}</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">visible</span><span class="p">();</span>
            <span class="p">});</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onShow</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">hide</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">active</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Hiding dropdown&#39;</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">animate</span><span class="p">.</span><span class="nx">hide</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">visible</span><span class="p">();</span>
            <span class="p">});</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onHide</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">hideOthers</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Finding other dropdowns to hide&#39;</span><span class="p">);</span>
          <span class="nx">$allModules</span>
            <span class="p">.</span><span class="nx">not</span><span class="p">(</span><span class="nx">$module</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">menu</span> <span class="o">+</span> <span class="s1">&#39;:visible:not(.&#39;</span> <span class="o">+</span> <span class="nx">className</span><span class="p">.</span><span class="nx">animating</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">dropdown</span><span class="p">(</span><span class="s1">&#39;hide&#39;</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">hideSubMenus</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">$subMenus</span> <span class="o">=</span> <span class="nx">$menu</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">menu</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$subMenus</span><span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s1">&#39;hide&#39;</span><span class="p">);</span>
        <span class="p">},</span>

        <span class="nx">bind</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">keyboardEvents</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Binding keyboard events&#39;</span><span class="p">);</span>
            <span class="nx">$module</span>
              <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;keydown&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">keydown</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">searchable</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">$module</span>
                <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">inputEvent</span><span class="p">(),</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">search</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">input</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">touchEvents</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Touch device detected binding additional touch events&#39;</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">searchSelection</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-58"><td class="docs"><div class="pilwrap"><a href="#section-58" class="pilcrow">&#182;</a></div><p>do nothing special yet</p>
</td><td class="code"><div class="highlight"><pre>            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">$module</span>
                <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;touchstart&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">test</span><span class="p">.</span><span class="nx">toggle</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">$menu</span>
              <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;touchstart&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">item</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">item</span><span class="p">.</span><span class="nx">mouseenter</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">mouseEvents</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Mouse detected binding mouse events&#39;</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">searchSelection</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">$module</span>
                <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;mousedown&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">menu</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">menu</span><span class="p">.</span><span class="nx">activate</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;mouseup&#39;</span>   <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">menu</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">menu</span><span class="p">.</span><span class="nx">deactivate</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;focus&#39;</span>     <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">search</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">searchFocus</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span>     <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">search</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">show</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;blur&#39;</span>      <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">search</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">searchBlur</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">on</span> <span class="o">==</span> <span class="s1">&#39;click&#39;</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">$module</span>
                  <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">test</span><span class="p">.</span><span class="nx">toggle</span><span class="p">)</span>
                <span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">on</span> <span class="o">==</span> <span class="s1">&#39;hover&#39;</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">$module</span>
                  <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;mouseenter&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">delay</span><span class="p">.</span><span class="nx">show</span><span class="p">)</span>
                  <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;mouseleave&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">delay</span><span class="p">.</span><span class="nx">hide</span><span class="p">)</span>
                <span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">$module</span>
                  <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">on</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">toggle</span><span class="p">)</span>
                <span class="p">;</span>
              <span class="p">}</span>
              <span class="nx">$module</span>
                <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;mousedown&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">mousedown</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;mouseup&#39;</span>   <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">mouseup</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;focus&#39;</span>     <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">focus</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;blur&#39;</span>      <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">blur</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">$menu</span>
              <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;mouseenter&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">item</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">item</span><span class="p">.</span><span class="nx">mouseenter</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;mouseleave&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">item</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">item</span><span class="p">.</span><span class="nx">mouseleave</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span>      <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">item</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">item</span><span class="p">.</span><span class="nx">click</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">intent</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Binding hide intent event to document&#39;</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">hasTouch</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$document</span>
                <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;touchstart&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">test</span><span class="p">.</span><span class="nx">touch</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;touchmove&#39;</span>  <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">test</span><span class="p">.</span><span class="nx">touch</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">$document</span>
              <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">test</span><span class="p">.</span><span class="nx">hide</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">unbind</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">intent</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Removing hide intent event from document&#39;</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">hasTouch</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$document</span>
                <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="s1">&#39;touchstart&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="s1">&#39;touchmove&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">$document</span>
              <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="s1">&#39;click&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">filter</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">searchTerm</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">$results</span>       <span class="o">=</span> <span class="nx">$</span><span class="p">(),</span>
            <span class="nx">exactRegExp</span>    <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s1">&#39;(?:\s|^)&#39;</span> <span class="o">+</span> <span class="nx">searchTerm</span><span class="p">,</span> <span class="s1">&#39;i&#39;</span><span class="p">),</span>
            <span class="nx">fullTextRegExp</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="nx">searchTerm</span><span class="p">,</span> <span class="s1">&#39;i&#39;</span><span class="p">),</span>
            <span class="nx">allItemsFiltered</span><span class="p">,</span>
            <span class="nx">$filteredItems</span>
          <span class="p">;</span>
          <span class="nx">$item</span>
            <span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
              <span class="kd">var</span>
                <span class="nx">$choice</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
                <span class="nx">text</span>    <span class="o">=</span> <span class="p">(</span> <span class="nx">$choice</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">text</span><span class="p">)</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span>
                  <span class="o">?</span> <span class="nx">$choice</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">text</span><span class="p">)</span>
                  <span class="o">:</span> <span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">preserveHTML</span><span class="p">)</span>
                    <span class="o">?</span> <span class="nx">$choice</span><span class="p">.</span><span class="nx">html</span><span class="p">()</span>
                    <span class="o">:</span> <span class="nx">$choice</span><span class="p">.</span><span class="nx">text</span><span class="p">(),</span>
                <span class="nx">value</span>   <span class="o">=</span> <span class="p">(</span> <span class="nx">$choice</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
                  <span class="o">?</span> <span class="nx">$choice</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span>
                  <span class="o">:</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">text</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span>
                      <span class="o">?</span> <span class="nx">text</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span>
                      <span class="o">:</span> <span class="nx">text</span>
              <span class="p">;</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">exactRegExp</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">text</span> <span class="p">)</span> <span class="o">||</span> <span class="nx">exactRegExp</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">$results</span> <span class="o">=</span> <span class="nx">$results</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">$choice</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">fullTextSearch</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span> <span class="nx">fullTextRegExp</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">text</span> <span class="p">)</span> <span class="o">||</span> <span class="nx">fullTextRegExp</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                  <span class="nx">$results</span> <span class="o">=</span> <span class="nx">$results</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">$choice</span><span class="p">);</span>
                <span class="p">}</span>
              <span class="p">}</span>
            <span class="p">})</span>
          <span class="p">;</span>
          <span class="nx">$filteredItems</span>   <span class="o">=</span> <span class="nx">$item</span><span class="p">.</span><span class="nx">not</span><span class="p">(</span><span class="nx">$results</span><span class="p">);</span>
          <span class="nx">allItemsFiltered</span> <span class="o">=</span> <span class="p">(</span><span class="nx">$filteredItems</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">==</span> <span class="nx">$item</span><span class="p">.</span><span class="nx">size</span><span class="p">());</span>

          <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">filteredItem</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">selectedItem</span><span class="p">();</span>
          <span class="nx">$filteredItems</span>
            <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">filtered</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$item</span>
            <span class="p">.</span><span class="nx">not</span><span class="p">(</span><span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">className</span><span class="p">.</span><span class="nx">filtered</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">selected</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">allItemsFiltered</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">focusSearch</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">search</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$search</span>
              <span class="p">.</span><span class="nx">focus</span><span class="p">()</span>
            <span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">event</span><span class="o">:</span> <span class="p">{</span></pre></div></td></tr><tr id="section-59"><td class="docs"><div class="pilwrap"><a href="#section-59" class="pilcrow">&#182;</a></div><p>prevents focus callback from occuring on mousedown</p>
</td><td class="code"><div class="highlight"><pre>          <span class="nx">mousedown</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">activated</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">mouseup</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">activated</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">focus</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">activated</span> <span class="o">&amp;&amp;</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">hidden</span><span class="p">())</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">blur</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">activated</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">searchFocus</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">activated</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span>
          <span class="p">},</span>
          <span class="nx">searchBlur</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">itemActivated</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">input</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">query</span> <span class="o">=</span> <span class="nx">$search</span><span class="p">.</span><span class="nx">val</span><span class="p">()</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">searchSelection</span><span class="p">())</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">can</span><span class="p">.</span><span class="nx">show</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span>
              <span class="p">}</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">filtered</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">query</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">keydown</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">$selectedItem</span> <span class="o">=</span> <span class="nx">$item</span><span class="p">.</span><span class="nx">not</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">filtered</span><span class="p">).</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">className</span><span class="p">.</span><span class="nx">selected</span><span class="p">).</span><span class="nx">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
              <span class="nx">$visibleItems</span> <span class="o">=</span> <span class="nx">$item</span><span class="p">.</span><span class="nx">not</span><span class="p">(</span><span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">className</span><span class="p">.</span><span class="nx">filtered</span><span class="p">),</span>
              <span class="nx">pressedKey</span>    <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">which</span><span class="p">,</span>
              <span class="nx">keys</span>          <span class="o">=</span> <span class="p">{</span>
                <span class="nx">enter</span>     <span class="o">:</span> <span class="mi">13</span><span class="p">,</span>
                <span class="nx">escape</span>    <span class="o">:</span> <span class="mi">27</span><span class="p">,</span>
                <span class="nx">upArrow</span>   <span class="o">:</span> <span class="mi">38</span><span class="p">,</span>
                <span class="nx">downArrow</span> <span class="o">:</span> <span class="mi">40</span>
              <span class="p">},</span>
              <span class="nx">selectedClass</span>   <span class="o">=</span> <span class="nx">className</span><span class="p">.</span><span class="nx">selected</span><span class="p">,</span>
              <span class="nx">currentIndex</span>    <span class="o">=</span> <span class="nx">$visibleItems</span><span class="p">.</span><span class="nx">index</span><span class="p">(</span> <span class="nx">$selectedItem</span> <span class="p">),</span>
              <span class="nx">hasSelectedItem</span> <span class="o">=</span> <span class="p">(</span><span class="nx">$selectedItem</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">),</span>
              <span class="nx">$nextItem</span><span class="p">,</span>
              <span class="nx">newIndex</span>
            <span class="p">;</span></pre></div></td></tr><tr id="section-60"><td class="docs"><div class="pilwrap"><a href="#section-60" class="pilcrow">&#182;</a></div><p>default to activated choice if no selection present</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">hasSelectedItem</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$selectedItem</span>   <span class="o">=</span> <span class="nx">$item</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">).</span><span class="nx">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
              <span class="nx">hasSelectedItem</span> <span class="o">=</span> <span class="p">(</span><span class="nx">$selectedItem</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span>
            <span class="p">}</span></pre></div></td></tr><tr id="section-61"><td class="docs"><div class="pilwrap"><a href="#section-61" class="pilcrow">&#182;</a></div><p>close shortcuts</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">if</span><span class="p">(</span><span class="nx">pressedKey</span> <span class="o">==</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">escape</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Escape key pressed, closing dropdown&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
            <span class="p">}</span></pre></div></td></tr><tr id="section-62"><td class="docs"><div class="pilwrap"><a href="#section-62" class="pilcrow">&#182;</a></div><p>result shortcuts</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">visible</span><span class="p">())</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">pressedKey</span> <span class="o">==</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">enter</span> <span class="o">&amp;&amp;</span> <span class="nx">hasSelectedItem</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Enter key pressed, choosing selected item&#39;</span><span class="p">);</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">item</span><span class="p">.</span><span class="nx">click</span><span class="p">,</span> <span class="nx">$selectedItem</span><span class="p">)(</span><span class="nx">event</span><span class="p">);</span>
                <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">pressedKey</span> <span class="o">==</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">upArrow</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">hasSelectedItem</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">$nextItem</span> <span class="o">=</span> <span class="nx">$visibleItems</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="p">{</span>
                  <span class="nx">$nextItem</span> <span class="o">=</span> <span class="nx">$selectedItem</span><span class="p">.</span><span class="nx">prevAll</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">item</span> <span class="o">+</span> <span class="s1">&#39;:not(.&#39;</span> <span class="o">+</span> <span class="nx">className</span><span class="p">.</span><span class="nx">filtered</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">).</span><span class="nx">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">currentIndex</span> <span class="o">!==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Up key pressed, changing active item&#39;</span><span class="p">);</span>
                  <span class="nx">$item</span>
                    <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">selectedClass</span><span class="p">)</span>
                  <span class="p">;</span>
                  <span class="nx">$nextItem</span>
                    <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">selectedClass</span><span class="p">)</span>
                  <span class="p">;</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">scrollPosition</span><span class="p">(</span><span class="nx">$nextItem</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">pressedKey</span> <span class="o">==</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">downArrow</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">hasSelectedItem</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">$nextItem</span> <span class="o">=</span> <span class="nx">$visibleItems</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="p">{</span>
                  <span class="nx">$nextItem</span> <span class="o">=</span> <span class="nx">$selectedItem</span><span class="p">.</span><span class="nx">nextAll</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">item</span> <span class="o">+</span> <span class="s1">&#39;:not(.&#39;</span> <span class="o">+</span> <span class="nx">className</span><span class="p">.</span><span class="nx">filtered</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">).</span><span class="nx">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">currentIndex</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="nx">$visibleItems</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Down key pressed, changing active item&#39;</span><span class="p">);</span>
                  <span class="nx">$item</span>
                    <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">selectedClass</span><span class="p">)</span>
                  <span class="p">;</span>
                  <span class="nx">$nextItem</span>
                    <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">selectedClass</span><span class="p">)</span>
                  <span class="p">;</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">scrollPosition</span><span class="p">(</span><span class="nx">$nextItem</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">pressedKey</span> <span class="o">==</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">enter</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">test</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">toggle</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">determine</span><span class="p">.</span><span class="nx">eventInMenu</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">toggle</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
              <span class="p">}</span>
            <span class="p">},</span>
            <span class="nx">touch</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">determine</span><span class="p">.</span><span class="nx">eventInMenu</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s1">&#39;touchstart&#39;</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">hide</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">delay</span><span class="p">.</span><span class="nx">touch</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s1">&#39;touchmove&#39;</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
                <span class="p">}</span>
              <span class="p">});</span>
              <span class="nx">event</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">();</span>
            <span class="p">},</span>
            <span class="nx">hide</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">determine</span><span class="p">.</span><span class="nx">eventInModule</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">hide</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">},</span>

          <span class="nx">menu</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">activate</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
              <span class="nx">itemActivated</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">},</span>
            <span class="nx">deactivate</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
              <span class="nx">itemActivated</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">item</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">mouseenter</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span>
                <span class="nx">$currentMenu</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">children</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">menu</span><span class="p">),</span>
                <span class="nx">$otherMenus</span>  <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">siblings</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">item</span><span class="p">).</span><span class="nx">children</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">menu</span><span class="p">)</span>
              <span class="p">;</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">$currentMenu</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">itemTimer</span><span class="p">);</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">itemTimer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                  <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">$otherMenus</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                    <span class="nx">module</span><span class="p">.</span><span class="nx">animate</span><span class="p">.</span><span class="nx">hide</span><span class="p">(</span><span class="kc">false</span><span class="p">,</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>
                  <span class="p">});</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Showing sub-menu&#39;</span><span class="p">,</span> <span class="nx">$currentMenu</span><span class="p">);</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">animate</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="kc">false</span><span class="p">,</span>  <span class="nx">$currentMenu</span><span class="p">);</span>
                <span class="p">},</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">delay</span><span class="p">.</span><span class="nx">show</span><span class="p">);</span>
                <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
              <span class="p">}</span>
            <span class="p">},</span>

            <span class="nx">mouseleave</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span>
                <span class="nx">$currentMenu</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">children</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">menu</span><span class="p">)</span>
              <span class="p">;</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">$currentMenu</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">itemTimer</span><span class="p">);</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">itemTimer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Hiding sub-menu&#39;</span><span class="p">,</span> <span class="nx">$currentMenu</span><span class="p">);</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">animate</span><span class="p">.</span><span class="nx">hide</span><span class="p">(</span><span class="kc">false</span><span class="p">,</span>  <span class="nx">$currentMenu</span><span class="p">);</span>
                <span class="p">},</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">delay</span><span class="p">.</span><span class="nx">hide</span><span class="p">);</span>
              <span class="p">}</span>
            <span class="p">},</span>

            <span class="nx">click</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span>
                <span class="nx">$choice</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
                <span class="nx">text</span>    <span class="o">=</span> <span class="p">(</span> <span class="nx">$choice</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">text</span><span class="p">)</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span>
                  <span class="o">?</span> <span class="nx">$choice</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">text</span><span class="p">)</span>
                  <span class="o">:</span> <span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">preserveHTML</span><span class="p">)</span>
                    <span class="o">?</span> <span class="nx">$choice</span><span class="p">.</span><span class="nx">html</span><span class="p">()</span>
                    <span class="o">:</span> <span class="nx">$choice</span><span class="p">.</span><span class="nx">text</span><span class="p">(),</span>
                <span class="nx">value</span>   <span class="o">=</span> <span class="p">(</span> <span class="nx">$choice</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
                  <span class="o">?</span> <span class="nx">$choice</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span>
                  <span class="o">:</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">text</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span>
                      <span class="o">?</span> <span class="nx">text</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span>
                      <span class="o">:</span> <span class="nx">text</span><span class="p">,</span>
                <span class="nx">callback</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">searchTerm</span><span class="p">();</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">filteredItem</span><span class="p">();</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">determine</span><span class="p">.</span><span class="nx">selectAction</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
                <span class="p">},</span>
                <span class="nx">openingSubMenu</span> <span class="o">=</span> <span class="p">(</span><span class="nx">$choice</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">menu</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
              <span class="p">;</span>
              <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="nx">openingSubMenu</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">callback</span><span class="p">();</span>
              <span class="p">}</span>
            <span class="p">}</span>

          <span class="p">},</span>

          <span class="nx">resetStyle</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">removeAttr</span><span class="p">(</span><span class="s1">&#39;style&#39;</span><span class="p">);</span>
          <span class="p">}</span>

        <span class="p">},</span>

        <span class="nx">determine</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">selectAction</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Determining action&#39;</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">action</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">action</span><span class="p">[</span><span class="nx">settings</span><span class="p">.</span><span class="nx">action</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Triggering preset action&#39;</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">action</span><span class="p">,</span> <span class="nx">text</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">action</span><span class="p">[</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">action</span> <span class="p">](</span><span class="nx">text</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">action</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Triggering user action&#39;</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">action</span><span class="p">,</span> <span class="nx">text</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
              <span class="nx">settings</span><span class="p">.</span><span class="nx">action</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">action</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">action</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">eventInModule</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">callback</span> <span class="o">=</span> <span class="nx">callback</span> <span class="o">||</span> <span class="kd">function</span><span class="p">(){};</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">).</span><span class="nx">closest</span><span class="p">(</span><span class="nx">$module</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Triggering event&#39;</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
              <span class="nx">callback</span><span class="p">();</span>
              <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Event occurred in dropdown, canceling callback&#39;</span><span class="p">);</span>
              <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">eventInMenu</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">callback</span> <span class="o">=</span> <span class="nx">callback</span> <span class="o">||</span> <span class="kd">function</span><span class="p">(){};</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">).</span><span class="nx">closest</span><span class="p">(</span><span class="nx">$menu</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Triggering event&#39;</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
              <span class="nx">callback</span><span class="p">();</span>
              <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Event occurred in dropdown menu, canceling callback&#39;</span><span class="p">);</span>
              <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">action</span><span class="o">:</span> <span class="p">{</span>

          <span class="nx">nothing</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{},</span>

          <span class="nx">hide</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
          <span class="p">},</span>

          <span class="nx">select</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">value</span> <span class="o">=</span> <span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
              <span class="o">?</span> <span class="nx">value</span>
              <span class="o">:</span> <span class="nx">text</span>
            <span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">selected</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">value</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
          <span class="p">},</span>

          <span class="nx">activate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">value</span> <span class="o">=</span> <span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
              <span class="o">?</span> <span class="nx">value</span>
              <span class="o">:</span> <span class="nx">text</span>
            <span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">selected</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">value</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
          <span class="p">},</span>

          <span class="nx">combo</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">value</span> <span class="o">=</span> <span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
              <span class="o">?</span> <span class="nx">value</span>
              <span class="o">:</span> <span class="nx">text</span>
            <span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">selected</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">value</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
          <span class="p">}</span>

        <span class="p">},</span>

        <span class="nx">get</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">text</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$text</span><span class="p">.</span><span class="nx">text</span><span class="p">();</span>
          <span class="p">},</span>
          <span class="nx">value</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span><span class="nx">$input</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
              <span class="o">?</span> <span class="nx">$input</span><span class="p">.</span><span class="nx">val</span><span class="p">()</span>
              <span class="o">:</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">inputEvent</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">input</span> <span class="o">=</span> <span class="nx">$search</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">input</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="p">(</span><span class="nx">input</span><span class="p">.</span><span class="nx">oninput</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
                <span class="o">?</span> <span class="s1">&#39;input&#39;</span>
                <span class="o">:</span> <span class="p">(</span><span class="nx">input</span><span class="p">.</span><span class="nx">onpropertychange</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
                  <span class="o">?</span> <span class="s1">&#39;propertychange&#39;</span>
                  <span class="o">:</span> <span class="s1">&#39;keyup&#39;</span>
              <span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">selectValues</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">select</span> <span class="o">=</span> <span class="p">{</span>
                <span class="nx">values</span> <span class="o">:</span> <span class="p">{}</span>
              <span class="p">}</span>
            <span class="p">;</span>
            <span class="nx">$module</span>
              <span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;option&#39;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                  <span class="kd">var</span>
                    <span class="nx">name</span>  <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">html</span><span class="p">(),</span>
                    <span class="nx">value</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span>
                      <span class="o">?</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span>
                      <span class="o">:</span> <span class="nx">name</span>
                  <span class="p">;</span>
                  <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">===</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">select</span><span class="p">.</span><span class="nx">placeholder</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
                  <span class="p">}</span>
                  <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">select</span><span class="p">.</span><span class="nx">values</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
                  <span class="p">}</span>
                <span class="p">})</span>
            <span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Retrieved values from select&#39;</span><span class="p">,</span> <span class="nx">select</span><span class="p">);</span>
            <span class="k">return</span> <span class="nx">select</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">item</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">strict</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">$selectedItem</span> <span class="o">=</span> <span class="kc">false</span>
            <span class="p">;</span>
            <span class="nx">value</span> <span class="o">=</span> <span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
              <span class="o">?</span> <span class="nx">value</span>
              <span class="o">:</span> <span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">value</span><span class="p">()</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">value</span><span class="p">()</span>
                <span class="o">:</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">text</span><span class="p">()</span>
            <span class="p">;</span>
            <span class="nx">strict</span> <span class="o">=</span> <span class="p">(</span><span class="nx">value</span> <span class="o">===</span> <span class="s1">&#39;&#39;</span> <span class="o">||</span> <span class="nx">value</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span>
              <span class="o">?</span> <span class="kc">true</span>
              <span class="o">:</span> <span class="nx">strict</span> <span class="o">||</span> <span class="kc">false</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$item</span>
                <span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                  <span class="kd">var</span>
                    <span class="nx">$choice</span>       <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
                    <span class="nx">optionText</span>    <span class="o">=</span> <span class="p">(</span> <span class="nx">$choice</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">text</span><span class="p">)</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span>
                      <span class="o">?</span> <span class="nx">$choice</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">text</span><span class="p">)</span>
                      <span class="o">:</span> <span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">preserveHTML</span><span class="p">)</span>
                        <span class="o">?</span> <span class="nx">$choice</span><span class="p">.</span><span class="nx">html</span><span class="p">()</span>
                        <span class="o">:</span> <span class="nx">$choice</span><span class="p">.</span><span class="nx">text</span><span class="p">(),</span>
                    <span class="nx">optionValue</span>   <span class="o">=</span> <span class="p">(</span> <span class="nx">$choice</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span>
                      <span class="o">?</span> <span class="nx">$choice</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span>
                      <span class="o">:</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">optionText</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span>
                        <span class="o">?</span> <span class="nx">optionText</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span>
                        <span class="o">:</span> <span class="nx">optionText</span>
                  <span class="p">;</span>
                  <span class="k">if</span><span class="p">(</span><span class="nx">strict</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Ambiguous dropdown value using strict type check&#39;</span><span class="p">,</span> <span class="nx">$choice</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
                    <span class="k">if</span><span class="p">(</span> <span class="nx">optionValue</span> <span class="o">===</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
                      <span class="nx">$selectedItem</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
                    <span class="p">}</span>
                    <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="nx">$selectedItem</span> <span class="o">&amp;&amp;</span> <span class="nx">optionText</span> <span class="o">===</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
                      <span class="nx">$selectedItem</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
                    <span class="p">}</span>
                  <span class="p">}</span>
                  <span class="k">else</span> <span class="p">{</span>
                    <span class="k">if</span><span class="p">(</span> <span class="nx">optionValue</span> <span class="o">==</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
                      <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Found select item by value&#39;</span><span class="p">,</span> <span class="nx">optionValue</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
                      <span class="nx">$selectedItem</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
                    <span class="p">}</span>
                    <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="nx">$selectedItem</span> <span class="o">&amp;&amp;</span> <span class="nx">optionText</span> <span class="o">==</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
                      <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Found select item by text&#39;</span><span class="p">,</span> <span class="nx">optionText</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
                      <span class="nx">$selectedItem</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
                    <span class="p">}</span>
                  <span class="p">}</span>
                <span class="p">})</span>
              <span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">value</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">text</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">$selectedItem</span> <span class="o">||</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">restore</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">defaults</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">restore</span><span class="p">.</span><span class="nx">defaultText</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">restore</span><span class="p">.</span><span class="nx">defaultValue</span><span class="p">();</span>
          <span class="p">},</span>
          <span class="nx">defaultText</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">defaultText</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">defaultText</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Restoring default text&#39;</span><span class="p">,</span> <span class="nx">defaultText</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">defaultText</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">defaultValue</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">defaultValue</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">defaultValue</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">defaultValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Restoring default value&#39;</span><span class="p">,</span> <span class="nx">defaultValue</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">selected</span><span class="p">(</span><span class="nx">defaultValue</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">value</span><span class="p">(</span><span class="nx">defaultValue</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">save</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">defaults</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">save</span><span class="p">.</span><span class="nx">defaultText</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">save</span><span class="p">.</span><span class="nx">defaultValue</span><span class="p">();</span>
          <span class="p">},</span>
          <span class="nx">defaultValue</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">defaultValue</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">value</span><span class="p">()</span> <span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">defaultText</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">defaultText</span><span class="p">,</span> <span class="nx">$text</span><span class="p">.</span><span class="nx">text</span><span class="p">()</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">set</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">filtered</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$text</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">filtered</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">tabbable</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">searchable</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Searchable dropdown initialized&#39;</span><span class="p">);</span>
              <span class="nx">$search</span>
                <span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;tabindex&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
              <span class="p">;</span>
              <span class="nx">$menu</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;tabindex&#39;</span><span class="p">,</span> <span class="s1">&#39;-1&#39;</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Simple selection dropdown initialized&#39;</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">$module</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;tabindex&#39;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">$module</span>
                  <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;tabindex&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                <span class="p">;</span>
                <span class="nx">$menu</span>
                  <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;tabindex&#39;</span><span class="p">,</span> <span class="s1">&#39;-1&#39;</span><span class="p">)</span>
                <span class="p">;</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">scrollPosition</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$item</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">$item</span>         <span class="o">=</span> <span class="nx">$item</span> <span class="o">||</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">item</span><span class="p">(),</span>
              <span class="nx">hasActive</span>     <span class="o">=</span> <span class="p">(</span><span class="nx">$item</span> <span class="o">&amp;&amp;</span> <span class="nx">$item</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">),</span>
              <span class="nx">edgeTolerance</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
              <span class="nx">offset</span><span class="p">,</span>
              <span class="nx">itemHeight</span><span class="p">,</span>
              <span class="nx">itemOffset</span><span class="p">,</span>
              <span class="nx">menuOffset</span><span class="p">,</span>
              <span class="nx">menuScroll</span><span class="p">,</span>
              <span class="nx">menuHeight</span><span class="p">,</span>
              <span class="nx">abovePage</span><span class="p">,</span>
              <span class="nx">belowPage</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">$item</span> <span class="o">&amp;&amp;</span> <span class="nx">hasActive</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">menuHeight</span> <span class="o">=</span> <span class="nx">$menu</span><span class="p">.</span><span class="nx">height</span><span class="p">();</span>
              <span class="nx">itemHeight</span> <span class="o">=</span> <span class="nx">$item</span><span class="p">.</span><span class="nx">height</span><span class="p">();</span>
              <span class="nx">menuScroll</span> <span class="o">=</span> <span class="nx">$menu</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">();</span>
              <span class="nx">menuOffset</span> <span class="o">=</span> <span class="nx">$menu</span><span class="p">.</span><span class="nx">offset</span><span class="p">().</span><span class="nx">top</span><span class="p">;</span>
              <span class="nx">itemOffset</span> <span class="o">=</span> <span class="nx">$item</span><span class="p">.</span><span class="nx">offset</span><span class="p">().</span><span class="nx">top</span><span class="p">;</span>
              <span class="nx">offset</span>     <span class="o">=</span> <span class="nx">menuScroll</span> <span class="o">-</span> <span class="nx">menuOffset</span> <span class="o">+</span> <span class="nx">itemOffset</span><span class="p">;</span>
              <span class="nx">belowPage</span>  <span class="o">=</span> <span class="nx">menuScroll</span> <span class="o">+</span> <span class="nx">menuHeight</span> <span class="o">&lt;</span> <span class="p">(</span><span class="nx">offset</span> <span class="o">+</span> <span class="nx">edgeTolerance</span><span class="p">);</span>
              <span class="nx">abovePage</span>  <span class="o">=</span> <span class="p">((</span><span class="nx">offset</span> <span class="o">-</span> <span class="nx">edgeTolerance</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nx">menuScroll</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">abovePage</span> <span class="o">||</span> <span class="nx">belowPage</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Scrolling to active item&#39;</span><span class="p">);</span>
                <span class="nx">$menu</span>
                  <span class="p">.</span><span class="nx">scrollTop</span><span class="p">(</span><span class="nx">offset</span><span class="p">)</span>
                <span class="p">;</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">text</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">action</span> <span class="o">==</span> <span class="s1">&#39;combo&#39;</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Changing combo button text&#39;</span><span class="p">,</span> <span class="nx">text</span><span class="p">,</span> <span class="nx">$combo</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">preserveHTML</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">$combo</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">$combo</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">action</span> <span class="o">!==</span> <span class="s1">&#39;select&#39;</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Changing text&#39;</span><span class="p">,</span> <span class="nx">text</span><span class="p">,</span> <span class="nx">$text</span><span class="p">);</span>
              <span class="nx">$text</span>
                <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">filtered</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">placeholder</span><span class="p">)</span>
              <span class="p">;</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">preserveHTML</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">$text</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">$text</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">value</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Adding selected value to hidden input&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">$input</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">$input</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$input</span>
                <span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;change&#39;</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">active</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$module</span>
              <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">visible</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">visible</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">selected</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">$selectedItem</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">item</span><span class="p">(</span><span class="nx">value</span><span class="p">),</span>
              <span class="nx">selectedText</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">$selectedItem</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Setting selected menu item to&#39;</span><span class="p">,</span> <span class="nx">$selectedItem</span><span class="p">);</span>
              <span class="nx">selectedText</span> <span class="o">=</span> <span class="p">(</span><span class="nx">$selectedItem</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">text</span><span class="p">)</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">$selectedItem</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">text</span><span class="p">)</span>
                <span class="o">:</span> <span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">preserveHTML</span><span class="p">)</span>
                  <span class="o">?</span> <span class="nx">$selectedItem</span><span class="p">.</span><span class="nx">html</span><span class="p">()</span>
                  <span class="o">:</span> <span class="nx">$selectedItem</span><span class="p">.</span><span class="nx">text</span><span class="p">()</span>
              <span class="p">;</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">activeItem</span><span class="p">();</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">selectedItem</span><span class="p">();</span>
              <span class="nx">$selectedItem</span>
                <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">selected</span><span class="p">)</span>
              <span class="p">;</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">selectedText</span><span class="p">);</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onChange</span><span class="p">,</span> <span class="nx">element</span><span class="p">)(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">selectedText</span><span class="p">,</span> <span class="nx">$selectedItem</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">remove</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">active</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">visible</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">visible</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">activeItem</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$item</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">filteredItem</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$item</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">filtered</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">searchTerm</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$search</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">selectedItem</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$item</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">selected</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">tabbable</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">searchable</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Searchable dropdown initialized&#39;</span><span class="p">);</span>
              <span class="nx">$search</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;tabindex&#39;</span><span class="p">,</span> <span class="s1">&#39;-1&#39;</span><span class="p">)</span>
              <span class="p">;</span>
              <span class="nx">$menu</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;tabindex&#39;</span><span class="p">,</span> <span class="s1">&#39;-1&#39;</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Simple selection dropdown initialized&#39;</span><span class="p">);</span>
              <span class="nx">$module</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;tabindex&#39;</span><span class="p">,</span> <span class="s1">&#39;-1&#39;</span><span class="p">)</span>
              <span class="p">;</span>
              <span class="nx">$menu</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;tabindex&#39;</span><span class="p">,</span> <span class="s1">&#39;-1&#39;</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">is</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">search</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">search</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">searchable</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span><span class="nx">$search</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">searchSelection</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">searchable</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nx">$search</span><span class="p">.</span><span class="nx">parent</span><span class="p">().</span><span class="nx">is</span><span class="p">(</span><span class="nx">$module</span><span class="p">)</span> <span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">selection</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">selection</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">animating</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$subMenu</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span><span class="nx">$subMenu</span><span class="p">)</span>
              <span class="o">?</span> <span class="nx">$subMenu</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;:animated&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="nx">$subMenu</span><span class="p">.</span><span class="nx">transition</span> <span class="o">&amp;&amp;</span> <span class="nx">$subMenu</span><span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s1">&#39;is animating&#39;</span><span class="p">)</span>
              <span class="o">:</span> <span class="nx">$menu</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;:animated&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="nx">$menu</span><span class="p">.</span><span class="nx">transition</span> <span class="o">&amp;&amp;</span> <span class="nx">$menu</span><span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s1">&#39;is animating&#39;</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">active</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">visible</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$subMenu</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span><span class="nx">$subMenu</span><span class="p">)</span>
              <span class="o">?</span> <span class="nx">$subMenu</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;:visible&#39;</span><span class="p">)</span>
              <span class="o">:</span> <span class="nx">$menu</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;:visible&#39;</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">hidden</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$subMenu</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span><span class="nx">$subMenu</span><span class="p">)</span>
              <span class="o">?</span> <span class="nx">$subMenu</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;:hidden&#39;</span><span class="p">)</span>
              <span class="o">:</span> <span class="nx">$menu</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;:hidden&#39;</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">can</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">click</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span><span class="nx">hasTouch</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">on</span> <span class="o">==</span> <span class="s1">&#39;click&#39;</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">show</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="o">!</span><span class="nx">$module</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">disabled</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">animate</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">show</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">$subMenu</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">$currentMenu</span> <span class="o">=</span> <span class="nx">$subMenu</span> <span class="o">||</span> <span class="nx">$menu</span><span class="p">,</span>
              <span class="nx">start</span> <span class="o">=</span> <span class="p">(</span><span class="nx">$subMenu</span><span class="p">)</span>
                <span class="o">?</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{}</span>
                <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">hideSubMenus</span><span class="p">();</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">hideOthers</span><span class="p">();</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">active</span><span class="p">();</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">scrollPosition</span><span class="p">();</span>
                <span class="p">}</span>
            <span class="p">;</span>
            <span class="nx">callback</span> <span class="o">=</span> <span class="nx">callback</span> <span class="o">||</span> <span class="kd">function</span><span class="p">(){};</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Doing menu show animation&#39;</span><span class="p">,</span> <span class="nx">$currentMenu</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">hidden</span><span class="p">(</span><span class="nx">$currentMenu</span><span class="p">)</span> <span class="o">||</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">animating</span><span class="p">(</span><span class="nx">$currentMenu</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span> <span class="o">==</span> <span class="s1">&#39;none&#39;</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">transition</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s1">&#39;is supported&#39;</span><span class="p">))</span> <span class="p">{</span>
                <span class="nx">$currentMenu</span>
                  <span class="p">.</span><span class="nx">transition</span><span class="p">({</span>
                    <span class="nx">animation</span>  <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span> <span class="o">+</span> <span class="s1">&#39; in&#39;</span><span class="p">,</span>
                    <span class="nx">debug</span>      <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">,</span>
                    <span class="nx">verbose</span>    <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">verbose</span><span class="p">,</span>
                    <span class="nx">duration</span>   <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">,</span>
                    <span class="nx">queue</span>      <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                    <span class="nx">onStart</span>    <span class="o">:</span> <span class="nx">start</span><span class="p">,</span>
                    <span class="nx">onComplete</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                      <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
                    <span class="p">}</span>
                  <span class="p">})</span>
                <span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span> <span class="o">==</span> <span class="s1">&#39;slide down&#39;</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">start</span><span class="p">();</span>
                <span class="nx">$currentMenu</span>
                  <span class="p">.</span><span class="nx">hide</span><span class="p">()</span>
                  <span class="p">.</span><span class="nx">clearQueue</span><span class="p">()</span>
                  <span class="p">.</span><span class="nx">children</span><span class="p">()</span>
                    <span class="p">.</span><span class="nx">clearQueue</span><span class="p">()</span>
                    <span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;opacity&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                    <span class="p">.</span><span class="nx">delay</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
                    <span class="p">.</span><span class="nx">animate</span><span class="p">({</span>
                      <span class="nx">opacity</span> <span class="o">:</span> <span class="mi">1</span>
                    <span class="p">},</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">,</span> <span class="s1">&#39;easeOutQuad&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">resetStyle</span><span class="p">)</span>
                    <span class="p">.</span><span class="nx">end</span><span class="p">()</span>
                  <span class="p">.</span><span class="nx">slideDown</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;easeOutQuad&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">resetStyle</span><span class="p">,</span> <span class="k">this</span><span class="p">)();</span>
                    <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
                  <span class="p">})</span>
                <span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span> <span class="o">==</span> <span class="s1">&#39;fade&#39;</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">start</span><span class="p">();</span>
                <span class="nx">$currentMenu</span>
                  <span class="p">.</span><span class="nx">hide</span><span class="p">()</span>
                  <span class="p">.</span><span class="nx">clearQueue</span><span class="p">()</span>
                  <span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">resetStyle</span><span class="p">,</span> <span class="k">this</span><span class="p">)();</span>
                    <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
                  <span class="p">})</span>
                <span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">transition</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span><span class="p">);</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">hide</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">$subMenu</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">$currentMenu</span> <span class="o">=</span> <span class="nx">$subMenu</span> <span class="o">||</span> <span class="nx">$menu</span><span class="p">,</span>
              <span class="nx">duration</span> <span class="o">=</span> <span class="p">(</span><span class="nx">$subMenu</span><span class="p">)</span>
                <span class="o">?</span> <span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span> <span class="o">*</span> <span class="mf">0.9</span><span class="p">)</span>
                <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">,</span>
              <span class="nx">start</span> <span class="o">=</span> <span class="p">(</span><span class="nx">$subMenu</span><span class="p">)</span>
                <span class="o">?</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{}</span>
                <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                  <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">can</span><span class="p">.</span><span class="nx">click</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
                    <span class="nx">module</span><span class="p">.</span><span class="nx">unbind</span><span class="p">.</span><span class="nx">intent</span><span class="p">();</span>
                  <span class="p">}</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">focusSearch</span><span class="p">();</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">active</span><span class="p">();</span>
                <span class="p">}</span>
            <span class="p">;</span>
            <span class="nx">callback</span> <span class="o">=</span> <span class="nx">callback</span> <span class="o">||</span> <span class="kd">function</span><span class="p">(){};</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">visible</span><span class="p">(</span><span class="nx">$currentMenu</span><span class="p">)</span> <span class="o">||</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">animating</span><span class="p">(</span><span class="nx">$currentMenu</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Doing menu hide animation&#39;</span><span class="p">,</span> <span class="nx">$currentMenu</span><span class="p">);</span>

              <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span> <span class="o">==</span> <span class="s1">&#39;none&#39;</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">transition</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s1">&#39;is supported&#39;</span><span class="p">))</span> <span class="p">{</span>
                <span class="nx">$currentMenu</span>
                  <span class="p">.</span><span class="nx">transition</span><span class="p">({</span>
                    <span class="nx">animation</span>  <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span> <span class="o">+</span> <span class="s1">&#39; out&#39;</span><span class="p">,</span>
                    <span class="nx">duration</span>   <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">,</span>
                    <span class="nx">debug</span>      <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">,</span>
                    <span class="nx">verbose</span>    <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">verbose</span><span class="p">,</span>
                    <span class="nx">queue</span>      <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                    <span class="nx">onStart</span>    <span class="o">:</span> <span class="nx">start</span><span class="p">,</span>
                    <span class="nx">onComplete</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                      <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
                    <span class="p">}</span>
                  <span class="p">})</span>
                <span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span> <span class="o">==</span> <span class="s1">&#39;slide down&#39;</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">start</span><span class="p">();</span>
                <span class="nx">$currentMenu</span>
                  <span class="p">.</span><span class="nx">show</span><span class="p">()</span>
                  <span class="p">.</span><span class="nx">clearQueue</span><span class="p">()</span>
                  <span class="p">.</span><span class="nx">children</span><span class="p">()</span>
                    <span class="p">.</span><span class="nx">clearQueue</span><span class="p">()</span>
                    <span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;opacity&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                    <span class="p">.</span><span class="nx">animate</span><span class="p">({</span>
                      <span class="nx">opacity</span> <span class="o">:</span> <span class="mi">0</span>
                    <span class="p">},</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;easeOutQuad&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">resetStyle</span><span class="p">)</span>
                    <span class="p">.</span><span class="nx">end</span><span class="p">()</span>
                  <span class="p">.</span><span class="nx">delay</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
                  <span class="p">.</span><span class="nx">slideUp</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;easeOutQuad&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">resetStyle</span><span class="p">,</span> <span class="k">this</span><span class="p">)();</span>
                    <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
                  <span class="p">})</span>
                <span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span> <span class="o">==</span> <span class="s1">&#39;fade&#39;</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">start</span><span class="p">();</span>
                <span class="nx">$currentMenu</span>
                  <span class="p">.</span><span class="nx">show</span><span class="p">()</span>
                  <span class="p">.</span><span class="nx">clearQueue</span><span class="p">()</span>
                  <span class="p">.</span><span class="nx">fadeOut</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">resetStyle</span><span class="p">,</span> <span class="k">this</span><span class="p">)();</span>
                    <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
                  <span class="p">})</span>
                <span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">transition</span><span class="p">);</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">delay</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">show</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Delaying show event to ensure user intent&#39;</span><span class="p">);</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">show</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">delay</span><span class="p">.</span><span class="nx">show</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">hide</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Delaying hide event to ensure user intent&#39;</span><span class="p">);</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">hide</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">delay</span><span class="p">.</span><span class="nx">hide</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">setting</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Changing setting&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">settings</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">internal</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">module</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">debug</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">verbose</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">&amp;&amp;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">performance</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">log</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">currentTime</span><span class="p">,</span>
              <span class="nx">executionTime</span><span class="p">,</span>
              <span class="nx">previousTime</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">currentTime</span>   <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>
              <span class="nx">previousTime</span>  <span class="o">=</span> <span class="nx">time</span> <span class="o">||</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">executionTime</span> <span class="o">=</span> <span class="nx">currentTime</span> <span class="o">-</span> <span class="nx">previousTime</span><span class="p">;</span>
              <span class="nx">time</span>          <span class="o">=</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">performance</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
                <span class="s1">&#39;Name&#39;</span>           <span class="o">:</span> <span class="nx">message</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="s1">&#39;Arguments&#39;</span>      <span class="o">:</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Element&#39;</span>        <span class="o">:</span> <span class="nx">element</span><span class="p">,</span>
                <span class="s1">&#39;Execution Time&#39;</span> <span class="o">:</span> <span class="nx">executionTime</span>
              <span class="p">});</span>
            <span class="p">}</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">display</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">title</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span>
              <span class="nx">totalTime</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="p">;</span>
            <span class="nx">time</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">totalTime</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">];</span>
            <span class="p">});</span>
            <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">totalTime</span> <span class="o">+</span> <span class="s1">&#39;ms&#39;</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">moduleSelector</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; \&#39;&#39;</span> <span class="o">+</span> <span class="nx">moduleSelector</span> <span class="o">+</span> <span class="s1">&#39;\&#39;&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span> <span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">group</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">console</span><span class="p">.</span><span class="nx">table</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">performance</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupCollapsed</span><span class="p">(</span><span class="nx">title</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">performance</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;ms&#39;</span><span class="p">);</span>
                <span class="p">});</span>
              <span class="p">}</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupEnd</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">performance</span> <span class="o">=</span> <span class="p">[];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">invoke</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">object</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">,</span>
            <span class="nx">maxDepth</span><span class="p">,</span>
            <span class="nx">found</span><span class="p">,</span>
            <span class="nx">response</span>
          <span class="p">;</span>
          <span class="nx">passedArguments</span> <span class="o">=</span> <span class="nx">passedArguments</span> <span class="o">||</span> <span class="nx">queryArguments</span><span class="p">;</span>
          <span class="nx">context</span>         <span class="o">=</span> <span class="nx">element</span>         <span class="o">||</span> <span class="nx">context</span><span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">object</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">query</span>    <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/[\. ]/</span><span class="p">);</span>
            <span class="nx">maxDepth</span> <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">depth</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span> <span class="nx">camelCaseValue</span> <span class="o">=</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">value</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="o">:</span> <span class="nx">query</span>
              <span class="p">;</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">method</span><span class="p">,</span> <span class="nx">query</span><span class="p">);</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">});</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">found</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">found</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">returnedValue</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">returnedValue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="p">[</span><span class="nx">returnedValue</span><span class="p">,</span> <span class="nx">response</span><span class="p">];</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">response</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="nx">found</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>

      <span class="k">if</span><span class="p">(</span><span class="nx">methodInvoked</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="nx">query</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">})</span>
  <span class="p">;</span>

  <span class="k">return</span> <span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
    <span class="o">?</span> <span class="nx">returnedValue</span>
    <span class="o">:</span> <span class="k">this</span>
  <span class="p">;</span>
<span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">dropdown</span><span class="p">.</span><span class="nx">settings</span> <span class="o">=</span> <span class="p">{</span>

  <span class="nx">debug</span>          <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">verbose</span>        <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">performance</span>    <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="nx">on</span>             <span class="o">:</span> <span class="s1">&#39;click&#39;</span><span class="p">,</span>
  <span class="nx">action</span>         <span class="o">:</span> <span class="s1">&#39;activate&#39;</span><span class="p">,</span>

  <span class="nx">allowTab</span>       <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">fullTextSearch</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">preserveHTML</span>   <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="nx">delay</span>          <span class="o">:</span> <span class="p">{</span>
    <span class="nx">show</span>  <span class="o">:</span> <span class="mi">200</span><span class="p">,</span>
    <span class="nx">hide</span>  <span class="o">:</span> <span class="mi">300</span><span class="p">,</span>
    <span class="nx">touch</span> <span class="o">:</span> <span class="mi">50</span>
  <span class="p">},</span>

  <span class="nx">transition</span> <span class="o">:</span> <span class="s1">&#39;slide down&#39;</span><span class="p">,</span>
  <span class="nx">duration</span>   <span class="o">:</span> <span class="mi">250</span><span class="p">,</span></pre></div></td></tr><tr id="section-63"><td class="docs"><div class="pilwrap"><a href="#section-63" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Callbacks</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">onChange</span>   <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">text</span><span class="p">){},</span>
  <span class="nx">onShow</span>     <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>
  <span class="nx">onHide</span>     <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span></pre></div></td></tr><tr id="section-64"><td class="docs"><div class="pilwrap"><a href="#section-64" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Component</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">name</span>           <span class="o">:</span> <span class="s1">&#39;Dropdown&#39;</span><span class="p">,</span>
  <span class="nx">namespace</span>      <span class="o">:</span> <span class="s1">&#39;dropdown&#39;</span><span class="p">,</span>

  <span class="nx">error</span>   <span class="o">:</span> <span class="p">{</span>
    <span class="nx">action</span>     <span class="o">:</span> <span class="s1">&#39;You called a dropdown action that was not defined&#39;</span><span class="p">,</span>
    <span class="nx">method</span>     <span class="o">:</span> <span class="s1">&#39;The method you called is not defined.&#39;</span><span class="p">,</span>
    <span class="nx">transition</span> <span class="o">:</span> <span class="s1">&#39;The requested transition was not found&#39;</span>
  <span class="p">},</span>

  <span class="nx">metadata</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">defaultText</span>  <span class="o">:</span> <span class="s1">&#39;defaultText&#39;</span><span class="p">,</span>
    <span class="nx">defaultValue</span> <span class="o">:</span> <span class="s1">&#39;defaultValue&#39;</span><span class="p">,</span>
    <span class="nx">text</span>         <span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span>
    <span class="nx">value</span>        <span class="o">:</span> <span class="s1">&#39;value&#39;</span>
  <span class="p">},</span>

  <span class="nx">selector</span> <span class="o">:</span> <span class="p">{</span>
    <span class="nx">dropdown</span> <span class="o">:</span> <span class="s1">&#39;.ui.dropdown&#39;</span><span class="p">,</span>
    <span class="nx">text</span>     <span class="o">:</span> <span class="s1">&#39;&gt; .text:not(.icon)&#39;</span><span class="p">,</span>
    <span class="nx">input</span>    <span class="o">:</span> <span class="s1">&#39;&gt; input[type=&quot;hidden&quot;], &gt; select&#39;</span><span class="p">,</span>
    <span class="nx">search</span>   <span class="o">:</span> <span class="s1">&#39;&gt; input.search, .menu &gt; .search &gt; input, .menu &gt; input.search&#39;</span><span class="p">,</span>
    <span class="nx">menu</span>     <span class="o">:</span> <span class="s1">&#39;.menu&#39;</span><span class="p">,</span>
    <span class="nx">item</span>     <span class="o">:</span> <span class="s1">&#39;.item&#39;</span>
  <span class="p">},</span>

  <span class="nx">className</span> <span class="o">:</span> <span class="p">{</span>
    <span class="nx">active</span>      <span class="o">:</span> <span class="s1">&#39;active&#39;</span><span class="p">,</span>
    <span class="nx">animating</span>   <span class="o">:</span> <span class="s1">&#39;animating&#39;</span><span class="p">,</span>
    <span class="nx">disabled</span>    <span class="o">:</span> <span class="s1">&#39;disabled&#39;</span><span class="p">,</span>
    <span class="nx">dropdown</span>    <span class="o">:</span> <span class="s1">&#39;ui dropdown&#39;</span><span class="p">,</span>
    <span class="nx">filtered</span>    <span class="o">:</span> <span class="s1">&#39;filtered&#39;</span><span class="p">,</span>
    <span class="nx">menu</span>        <span class="o">:</span> <span class="s1">&#39;menu&#39;</span><span class="p">,</span>
    <span class="nx">placeholder</span> <span class="o">:</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span>
    <span class="nx">search</span>      <span class="o">:</span> <span class="s1">&#39;search&#39;</span><span class="p">,</span>
    <span class="nx">selected</span>    <span class="o">:</span> <span class="s1">&#39;selected&#39;</span><span class="p">,</span>
    <span class="nx">selection</span>   <span class="o">:</span> <span class="s1">&#39;selection&#39;</span><span class="p">,</span>
    <span class="nx">visible</span>     <span class="o">:</span> <span class="s1">&#39;visible&#39;</span>
  <span class="p">}</span>

<span class="p">};</span></pre></div></td></tr><tr id="section-65"><td class="docs"><div class="pilwrap"><a href="#section-65" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Templates</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">dropdown</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">templates</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">menu</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">select</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span>
      <span class="nx">placeholder</span> <span class="o">=</span> <span class="nx">select</span><span class="p">.</span><span class="nx">placeholder</span> <span class="o">||</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">values</span>      <span class="o">=</span> <span class="nx">select</span><span class="p">.</span><span class="nx">values</span> <span class="o">||</span> <span class="p">{},</span>
      <span class="nx">html</span>        <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="p">;</span>
    <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">select</span><span class="p">.</span><span class="nx">values</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">===</span> <span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;div class=&quot;item&quot;&gt;&#39;</span> <span class="o">+</span> <span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
        <span class="nx">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;div class=&quot;item&quot; data-value=&quot;&#39;</span> <span class="o">+</span> <span class="nx">value</span> <span class="o">+</span> <span class="s1">&#39;&quot;&gt;&#39;</span> <span class="o">+</span> <span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">});</span>
    <span class="k">return</span> <span class="nx">html</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">dropdown</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">select</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span>
      <span class="nx">placeholder</span> <span class="o">=</span> <span class="nx">select</span><span class="p">.</span><span class="nx">placeholder</span> <span class="o">||</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">values</span>      <span class="o">=</span> <span class="nx">select</span><span class="p">.</span><span class="nx">values</span> <span class="o">||</span> <span class="p">{},</span>
      <span class="nx">html</span>        <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="p">;</span>
    <span class="nx">html</span> <span class="o">+=</span>  <span class="s1">&#39;&lt;i class=&quot;dropdown icon&quot;&gt;&lt;/i&gt;&#39;</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">select</span><span class="p">.</span><span class="nx">placeholder</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;div class=&quot;default text&quot;&gt;&#39;</span> <span class="o">+</span> <span class="nx">placeholder</span> <span class="o">+</span> <span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
      <span class="nx">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;div class=&quot;text&quot;&gt;&lt;/div&gt;&#39;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;div class=&quot;menu&quot;&gt;&#39;</span><span class="p">;</span>
    <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">select</span><span class="p">.</span><span class="nx">values</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">===</span> <span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;div class=&quot;item&quot;&gt;&#39;</span> <span class="o">+</span> <span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
        <span class="nx">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;div class=&quot;item&quot; data-value=&quot;&#39;</span> <span class="o">+</span> <span class="nx">value</span> <span class="o">+</span> <span class="s1">&#39;&quot;&gt;&#39;</span> <span class="o">+</span> <span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">});</span>
    <span class="nx">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">html</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-66"><td class="docs"><div class="pilwrap"><a href="#section-66" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Dependencies</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">easing</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">easeOutQuad</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">t</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">-</span><span class="nx">c</span> <span class="o">*</span><span class="p">(</span><span class="nx">t</span><span class="o">/=</span><span class="nx">d</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="nx">t</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
  <span class="p">},</span>
<span class="p">});</span>


<span class="p">})(</span> <span class="nx">jQuery</span><span class="p">,</span> <span class="nb">window</span> <span class="p">,</span> <span class="nb">document</span> <span class="p">);</span></pre></div></td></tr><tr id="section-67"><td class="docs"><div class="pilwrap"><a href="#section-67" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><h1>Semantic - Form Validation</h1>

<p><a href='http://github.com/semantic-org/semantic-ui/'>http://github.com/semantic-org/semantic-ui/</a></p></div><div class="body"><p>Copyright 2014 Contributor<br />Released under the MIT license<br /><a href='http://opensource.org/licenses/MIT'>http://opensource.org/licenses/MIT</a></p></div></div>
</td><td class="code"><div class="highlight"><pre><span class="p">;(</span><span class="kd">function</span> <span class="p">(</span> <span class="nx">$</span><span class="p">,</span> <span class="nb">window</span><span class="p">,</span> <span class="nb">document</span><span class="p">,</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">form</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fields</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span>
    <span class="nx">$allModules</span>     <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>

    <span class="nx">settings</span>        <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">settings</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">),</span>
    <span class="nx">validation</span>      <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">defaults</span><span class="p">,</span> <span class="nx">fields</span><span class="p">),</span>

    <span class="nx">namespace</span>       <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">namespace</span><span class="p">,</span>
    <span class="nx">metadata</span>        <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">metadata</span><span class="p">,</span>
    <span class="nx">selector</span>        <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">selector</span><span class="p">,</span>
    <span class="nx">className</span>       <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">className</span><span class="p">,</span>
    <span class="nx">error</span>           <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span>

    <span class="nx">eventNamespace</span>  <span class="o">=</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">,</span>
    <span class="nx">moduleNamespace</span> <span class="o">=</span> <span class="s1">&#39;module-&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">,</span>

    <span class="nx">moduleSelector</span>  <span class="o">=</span> <span class="nx">$allModules</span><span class="p">.</span><span class="nx">selector</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>

    <span class="nx">time</span>            <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">(),</span>
    <span class="nx">performance</span>     <span class="o">=</span> <span class="p">[],</span>

    <span class="nx">query</span>           <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="nx">methodInvoked</span>   <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">),</span>
    <span class="nx">queryArguments</span>  <span class="o">=</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="nx">returnedValue</span>
  <span class="p">;</span>
  <span class="nx">$allModules</span>
    <span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span>
        <span class="nx">$module</span>    <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
        <span class="nx">$field</span>     <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">field</span><span class="p">),</span>
        <span class="nx">$group</span>     <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">group</span><span class="p">),</span>
        <span class="nx">$message</span>   <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">message</span><span class="p">),</span>
        <span class="nx">$prompt</span>    <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">prompt</span><span class="p">),</span>
        <span class="nx">$submit</span>    <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">submit</span><span class="p">),</span>

        <span class="nx">formErrors</span> <span class="o">=</span> <span class="p">[],</span>

        <span class="nx">element</span>    <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
        <span class="nx">instance</span>   <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">),</span>
        <span class="nx">module</span>
      <span class="p">;</span>

      <span class="nx">module</span>      <span class="o">=</span> <span class="p">{</span>

        <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Initializing form validation&#39;</span><span class="p">,</span> <span class="nx">$module</span><span class="p">,</span> <span class="nx">validation</span><span class="p">,</span> <span class="nx">settings</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">bindEvents</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">instantiate</span><span class="p">();</span>
        <span class="p">},</span>

        <span class="nx">instantiate</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Storing instance of module&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">);</span>
          <span class="nx">instance</span> <span class="o">=</span> <span class="nx">module</span><span class="p">;</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">destroy</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Destroying previous module&#39;</span><span class="p">,</span> <span class="nx">instance</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">removeEvents</span><span class="p">();</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">removeData</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">refresh</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Refreshing selector cache&#39;</span><span class="p">);</span>
          <span class="nx">$field</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">field</span><span class="p">);</span>
        <span class="p">},</span>

        <span class="nx">submit</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Submitting form&#39;</span><span class="p">,</span> <span class="nx">$module</span><span class="p">);</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">submit</span><span class="p">()</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">attachEvents</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">selector</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">action</span> <span class="o">=</span> <span class="nx">action</span> <span class="o">||</span> <span class="s1">&#39;submit&#39;</span><span class="p">;</span>
          <span class="nx">$</span><span class="p">(</span><span class="nx">selector</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">[</span><span class="nx">action</span><span class="p">]();</span>
              <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
            <span class="p">})</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">bindEvents</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">keyboardShortcuts</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$field</span>
              <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;keydown&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">field</span><span class="p">.</span><span class="nx">keydown</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">}</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;submit&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">validate</span><span class="p">.</span><span class="nx">form</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$field</span>
            <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;blur&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">field</span><span class="p">.</span><span class="nx">blur</span><span class="p">)</span>
          <span class="p">;</span></pre></div></td></tr><tr id="section-68"><td class="docs"><div class="pilwrap"><a href="#section-68" class="pilcrow">&#182;</a></div><p>attach submit events</p>
</td><td class="code"><div class="highlight"><pre>          <span class="nx">module</span><span class="p">.</span><span class="nx">attachEvents</span><span class="p">(</span><span class="nx">$submit</span><span class="p">,</span> <span class="s1">&#39;submit&#39;</span><span class="p">);</span>

          <span class="nx">$field</span>
            <span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
              <span class="kd">var</span>
                <span class="nx">type</span>       <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">),</span>
                <span class="nx">inputEvent</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">changeEvent</span><span class="p">(</span><span class="nx">type</span><span class="p">)</span>
              <span class="p">;</span>
              <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">inputEvent</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">field</span><span class="p">.</span><span class="nx">change</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">})</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">removeEvents</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">eventNamespace</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$field</span>
            <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">eventNamespace</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$submit</span>
            <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">eventNamespace</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$field</span>
            <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">eventNamespace</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">event</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">field</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">keydown</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span>
                <span class="nx">$field</span>  <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
                <span class="nx">key</span>     <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">which</span><span class="p">,</span>
                <span class="nx">keyCode</span> <span class="o">=</span> <span class="p">{</span>
                  <span class="nx">enter</span>  <span class="o">:</span> <span class="mi">13</span><span class="p">,</span>
                  <span class="nx">escape</span> <span class="o">:</span> <span class="mi">27</span>
                <span class="p">}</span>
              <span class="p">;</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">key</span> <span class="o">==</span> <span class="nx">keyCode</span><span class="p">.</span><span class="nx">escape</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Escape key pressed blurring field&#39;</span><span class="p">);</span>
                <span class="nx">$field</span>
                  <span class="p">.</span><span class="nx">blur</span><span class="p">()</span>
                <span class="p">;</span>
              <span class="p">}</span>
              <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">ctrlKey</span> <span class="o">&amp;&amp;</span> <span class="nx">key</span> <span class="o">==</span> <span class="nx">keyCode</span><span class="p">.</span><span class="nx">enter</span> <span class="o">&amp;&amp;</span> <span class="nx">$field</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">input</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">$field</span><span class="p">.</span><span class="nx">not</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">checkbox</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Enter key pressed, submitting form&#39;</span><span class="p">);</span>
                <span class="nx">$submit</span>
                  <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">down</span><span class="p">)</span>
                <span class="p">;</span>
                <span class="nx">$field</span>
                  <span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="s1">&#39;keyup&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">field</span><span class="p">.</span><span class="nx">keyup</span><span class="p">)</span>
                <span class="p">;</span>
              <span class="p">}</span>
            <span class="p">},</span>
            <span class="nx">keyup</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Doing keyboard shortcut form submit&#39;</span><span class="p">);</span>
              <span class="nx">$submit</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">down</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">submit</span><span class="p">();</span>
            <span class="p">},</span>
            <span class="nx">blur</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
              <span class="kd">var</span>
                <span class="nx">$field</span>      <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
                <span class="nx">$fieldGroup</span> <span class="o">=</span> <span class="nx">$field</span><span class="p">.</span><span class="nx">closest</span><span class="p">(</span><span class="nx">$group</span><span class="p">)</span>
              <span class="p">;</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">$fieldGroup</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">error</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Revalidating field&#39;</span><span class="p">,</span> <span class="nx">$field</span><span class="p">,</span>  <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">validation</span><span class="p">(</span><span class="nx">$field</span><span class="p">));</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">validate</span><span class="p">.</span><span class="nx">field</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">validation</span><span class="p">(</span><span class="nx">$field</span><span class="p">)</span> <span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">on</span> <span class="o">==</span> <span class="s1">&#39;blur&#39;</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">on</span> <span class="o">==</span> <span class="s1">&#39;change&#39;</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">validate</span><span class="p">.</span><span class="nx">field</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">validation</span><span class="p">(</span><span class="nx">$field</span><span class="p">)</span> <span class="p">);</span>
              <span class="p">}</span>
            <span class="p">},</span>
            <span class="nx">change</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
              <span class="kd">var</span>
                <span class="nx">$field</span>      <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
                <span class="nx">$fieldGroup</span> <span class="o">=</span> <span class="nx">$field</span><span class="p">.</span><span class="nx">closest</span><span class="p">(</span><span class="nx">$group</span><span class="p">)</span>
              <span class="p">;</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">on</span> <span class="o">==</span> <span class="s1">&#39;change&#39;</span> <span class="o">||</span> <span class="p">(</span> <span class="nx">$fieldGroup</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">error</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">revalidate</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Revalidating field&#39;</span><span class="p">,</span> <span class="nx">$field</span><span class="p">,</span>  <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">validation</span><span class="p">(</span><span class="nx">$field</span><span class="p">));</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">validate</span><span class="p">.</span><span class="nx">field</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">validation</span><span class="p">(</span><span class="nx">$field</span><span class="p">)</span> <span class="p">);</span>
                <span class="p">},</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">delay</span><span class="p">);</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>

        <span class="p">},</span>

        <span class="nx">get</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">changeEvent</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">type</span> <span class="o">==</span> <span class="s1">&#39;checkbox&#39;</span> <span class="o">||</span> <span class="nx">type</span> <span class="o">==</span> <span class="s1">&#39;radio&#39;</span> <span class="o">||</span> <span class="nx">type</span> <span class="o">==</span> <span class="s1">&#39;hidden&#39;</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="s1">&#39;change&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="k">return</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;input&#39;</span><span class="p">).</span><span class="nx">oninput</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
                <span class="o">?</span> <span class="s1">&#39;input&#39;</span>
                <span class="o">:</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;input&#39;</span><span class="p">).</span><span class="nx">onpropertychange</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
                  <span class="o">?</span> <span class="s1">&#39;propertychange&#39;</span>
                  <span class="o">:</span> <span class="s1">&#39;keyup&#39;</span>
              <span class="p">;</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">field</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">identifier</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Finding field with identifier&#39;</span><span class="p">,</span> <span class="nx">identifier</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">$field</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;#&#39;</span> <span class="o">+</span> <span class="nx">identifier</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">$field</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;#&#39;</span> <span class="o">+</span> <span class="nx">identifier</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">$field</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;[name=&quot;&#39;</span> <span class="o">+</span> <span class="nx">identifier</span> <span class="o">+</span><span class="s1">&#39;&quot;]&#39;</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">$field</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;[name=&quot;&#39;</span> <span class="o">+</span> <span class="nx">identifier</span> <span class="o">+</span><span class="s1">&#39;&quot;]&#39;</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">$field</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;[data-&#39;</span> <span class="o">+</span> <span class="nx">metadata</span><span class="p">.</span><span class="nx">validate</span> <span class="o">+</span> <span class="s1">&#39;=&quot;&#39;</span><span class="o">+</span> <span class="nx">identifier</span> <span class="o">+</span><span class="s1">&#39;&quot;]&#39;</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">$field</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;[data-&#39;</span> <span class="o">+</span> <span class="nx">metadata</span><span class="p">.</span><span class="nx">validate</span> <span class="o">+</span> <span class="s1">&#39;=&quot;&#39;</span><span class="o">+</span> <span class="nx">identifier</span> <span class="o">+</span><span class="s1">&#39;&quot;]&#39;</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;&lt;input/&gt;&#39;</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">validation</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$field</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">rules</span>
            <span class="p">;</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">validation</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fieldName</span><span class="p">,</span> <span class="nx">field</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">field</span><span class="p">(</span><span class="nx">field</span><span class="p">.</span><span class="nx">identifier</span><span class="p">).</span><span class="nx">get</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="nx">$field</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">rules</span> <span class="o">=</span> <span class="nx">field</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">});</span>
            <span class="k">return</span> <span class="nx">rules</span> <span class="o">||</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">has</span><span class="o">:</span> <span class="p">{</span>

          <span class="nx">field</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">identifier</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Checking for existence of a field with identifier&#39;</span><span class="p">,</span> <span class="nx">identifier</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">$field</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;#&#39;</span> <span class="o">+</span> <span class="nx">identifier</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">$field</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;[name=&quot;&#39;</span> <span class="o">+</span> <span class="nx">identifier</span> <span class="o">+</span><span class="s1">&#39;&quot;]&#39;</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">$field</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;[data-&#39;</span> <span class="o">+</span> <span class="nx">metadata</span><span class="p">.</span><span class="nx">validate</span> <span class="o">+</span> <span class="s1">&#39;=&quot;&#39;</span><span class="o">+</span> <span class="nx">identifier</span> <span class="o">+</span><span class="s1">&#39;&quot;]&#39;</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">}</span>

        <span class="p">},</span>

        <span class="nx">add</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">prompt</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">identifier</span><span class="p">,</span> <span class="nx">errors</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">$field</span>       <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">field</span><span class="p">(</span><span class="nx">identifier</span><span class="p">),</span>
              <span class="nx">$fieldGroup</span>  <span class="o">=</span> <span class="nx">$field</span><span class="p">.</span><span class="nx">closest</span><span class="p">(</span><span class="nx">$group</span><span class="p">),</span>
              <span class="nx">$prompt</span>      <span class="o">=</span> <span class="nx">$fieldGroup</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">prompt</span><span class="p">),</span>
              <span class="nx">promptExists</span> <span class="o">=</span> <span class="p">(</span><span class="nx">$prompt</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">!==</span> <span class="mi">0</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="nx">errors</span> <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">errors</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span>
              <span class="o">?</span> <span class="p">[</span><span class="nx">errors</span><span class="p">]</span>
              <span class="o">:</span> <span class="nx">errors</span>
            <span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Adding field error state&#39;</span><span class="p">,</span> <span class="nx">identifier</span><span class="p">);</span>
            <span class="nx">$fieldGroup</span>
              <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">error</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">inline</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">promptExists</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">$prompt</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">templates</span><span class="p">.</span><span class="nx">prompt</span><span class="p">(</span><span class="nx">errors</span><span class="p">);</span>
                <span class="nx">$prompt</span>
                  <span class="p">.</span><span class="nx">appendTo</span><span class="p">(</span><span class="nx">$fieldGroup</span><span class="p">)</span>
                <span class="p">;</span>
              <span class="p">}</span>
              <span class="nx">$prompt</span>
                <span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">errors</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
              <span class="p">;</span>
              <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">promptExists</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">transition</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s1">&#39;is supported&#39;</span><span class="p">))</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Displaying error with css transition&#39;</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span><span class="p">);</span>
                  <span class="nx">$prompt</span><span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span> <span class="o">+</span> <span class="s1">&#39; in&#39;</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Displaying error with fallback javascript animation&#39;</span><span class="p">);</span>
                  <span class="nx">$prompt</span>
                    <span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">)</span>
                  <span class="p">;</span>
                <span class="p">}</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Inline errors are disabled, no inline error added&#39;</span><span class="p">,</span> <span class="nx">identifier</span><span class="p">);</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">errors</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">errors</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Adding form error messages&#39;</span><span class="p">,</span> <span class="nx">errors</span><span class="p">);</span>
            <span class="nx">$message</span>
              <span class="p">.</span><span class="nx">html</span><span class="p">(</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">templates</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">errors</span><span class="p">)</span> <span class="p">)</span>
            <span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">remove</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">prompt</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">field</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">$field</span>      <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">field</span><span class="p">(</span><span class="nx">field</span><span class="p">.</span><span class="nx">identifier</span><span class="p">),</span>
              <span class="nx">$fieldGroup</span> <span class="o">=</span> <span class="nx">$field</span><span class="p">.</span><span class="nx">closest</span><span class="p">(</span><span class="nx">$group</span><span class="p">),</span>
              <span class="nx">$prompt</span>     <span class="o">=</span> <span class="nx">$fieldGroup</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">prompt</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="nx">$fieldGroup</span>
              <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">error</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">inline</span> <span class="o">&amp;&amp;</span> <span class="nx">$prompt</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;:visible&#39;</span><span class="p">))</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Removing prompt for field&#39;</span><span class="p">,</span> <span class="nx">field</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">transition</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s1">&#39;is supported&#39;</span><span class="p">))</span> <span class="p">{</span>
                <span class="nx">$prompt</span><span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span> <span class="o">+</span> <span class="s1">&#39; out&#39;</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                  <span class="nx">$prompt</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
                <span class="p">});</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">$prompt</span>
                  <span class="p">.</span><span class="nx">fadeOut</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
                    <span class="nx">$prompt</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
                  <span class="p">})</span>
                <span class="p">;</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">set</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">success</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$module</span>
              <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">error</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">success</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$module</span>
              <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">success</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">error</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">validate</span><span class="o">:</span> <span class="p">{</span>

          <span class="nx">form</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">allValid</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
              <span class="nx">apiRequest</span>
            <span class="p">;</span></pre></div></td></tr><tr id="section-69"><td class="docs"><div class="pilwrap"><a href="#section-69" class="pilcrow">&#182;</a></div><p>reset errors</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">formErrors</span> <span class="o">=</span> <span class="p">[];</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">validation</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fieldName</span><span class="p">,</span> <span class="nx">field</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">validate</span><span class="p">.</span><span class="nx">field</span><span class="p">(</span><span class="nx">field</span><span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">allValid</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">});</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">allValid</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Form has no validation errors, submitting&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">success</span><span class="p">();</span>
              <span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onSuccess</span><span class="p">,</span> <span class="k">this</span><span class="p">)(</span><span class="nx">event</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Form has errors&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">error</span><span class="p">();</span>
              <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">settings</span><span class="p">.</span><span class="nx">inline</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">errors</span><span class="p">(</span><span class="nx">formErrors</span><span class="p">);</span>
              <span class="p">}</span></pre></div></td></tr><tr id="section-70"><td class="docs"><div class="pilwrap"><a href="#section-70" class="pilcrow">&#182;</a></div><p>prevent ajax submit</p>
</td><td class="code"><div class="highlight"><pre>              <span class="k">if</span><span class="p">(</span><span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;moduleApi&#39;</span><span class="p">)</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">event</span><span class="p">.</span><span class="nx">stopImmediatePropagation</span><span class="p">();</span>
              <span class="p">}</span>
              <span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onFailure</span><span class="p">,</span> <span class="k">this</span><span class="p">)(</span><span class="nx">formErrors</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">},</span></pre></div></td></tr><tr id="section-71"><td class="docs"><div class="pilwrap"><a href="#section-71" class="pilcrow">&#182;</a></div><p>takes a validation object and returns whether field passes validation</p>
</td><td class="code"><div class="highlight"><pre>          <span class="nx">field</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">field</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">$field</span>      <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">field</span><span class="p">(</span><span class="nx">field</span><span class="p">.</span><span class="nx">identifier</span><span class="p">),</span>
              <span class="nx">fieldValid</span>  <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
              <span class="nx">fieldErrors</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">field</span><span class="p">.</span><span class="nx">rules</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">field</span><span class="p">.</span><span class="nx">rules</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">rule</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">has</span><span class="p">.</span><span class="nx">field</span><span class="p">(</span><span class="nx">field</span><span class="p">.</span><span class="nx">identifier</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">validate</span><span class="p">.</span><span class="nx">rule</span><span class="p">(</span><span class="nx">field</span><span class="p">,</span> <span class="nx">rule</span><span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Field is invalid&#39;</span><span class="p">,</span> <span class="nx">field</span><span class="p">.</span><span class="nx">identifier</span><span class="p">,</span> <span class="nx">rule</span><span class="p">.</span><span class="nx">type</span><span class="p">);</span>
                  <span class="nx">fieldErrors</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">rule</span><span class="p">.</span><span class="nx">prompt</span><span class="p">);</span>
                  <span class="nx">fieldValid</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                <span class="p">}</span>
              <span class="p">});</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">fieldValid</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">prompt</span><span class="p">(</span><span class="nx">field</span><span class="p">,</span> <span class="nx">fieldErrors</span><span class="p">);</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onValid</span><span class="p">,</span> <span class="nx">$field</span><span class="p">)();</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">formErrors</span> <span class="o">=</span> <span class="nx">formErrors</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">fieldErrors</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">prompt</span><span class="p">(</span><span class="nx">field</span><span class="p">.</span><span class="nx">identifier</span><span class="p">,</span> <span class="nx">fieldErrors</span><span class="p">);</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onInvalid</span><span class="p">,</span> <span class="nx">$field</span><span class="p">)(</span><span class="nx">fieldErrors</span><span class="p">);</span>
              <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
          <span class="p">},</span></pre></div></td></tr><tr id="section-72"><td class="docs"><div class="pilwrap"><a href="#section-72" class="pilcrow">&#182;</a></div><p>takes validation rule and returns whether field passes rule</p>
</td><td class="code"><div class="highlight"><pre>          <span class="nx">rule</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">field</span><span class="p">,</span> <span class="nx">validation</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">$field</span>        <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">field</span><span class="p">(</span><span class="nx">field</span><span class="p">.</span><span class="nx">identifier</span><span class="p">),</span>
              <span class="nx">type</span>          <span class="o">=</span> <span class="nx">validation</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
              <span class="nx">value</span>         <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span><span class="nx">$field</span><span class="p">.</span><span class="nx">val</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>

              <span class="nx">bracketRegExp</span> <span class="o">=</span> <span class="sr">/\[(.*)\]/i</span><span class="p">,</span>
              <span class="nx">bracket</span>       <span class="o">=</span> <span class="nx">bracketRegExp</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">type</span><span class="p">),</span>
              <span class="nx">isValid</span>       <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
              <span class="nx">ancillary</span><span class="p">,</span>
              <span class="nx">functionType</span>
            <span class="p">;</span></pre></div></td></tr><tr id="section-73"><td class="docs"><div class="pilwrap"><a href="#section-73" class="pilcrow">&#182;</a></div><p>if bracket notation is used, pass in extra parameters</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">if</span><span class="p">(</span><span class="nx">bracket</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">bracket</span> <span class="o">!==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">ancillary</span>    <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="o">+</span> <span class="nx">bracket</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
              <span class="nx">functionType</span> <span class="o">=</span> <span class="nx">type</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">bracket</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
              <span class="nx">isValid</span>      <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">rules</span><span class="p">[</span><span class="nx">functionType</span><span class="p">],</span> <span class="nx">$module</span><span class="p">)(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">ancillary</span><span class="p">);</span>
            <span class="p">}</span></pre></div></td></tr><tr id="section-74"><td class="docs"><div class="pilwrap"><a href="#section-74" class="pilcrow">&#182;</a></div><p>normal notation</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">isValid</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">rules</span><span class="p">[</span><span class="nx">type</span><span class="p">],</span> <span class="nx">$field</span><span class="p">)(</span><span class="nx">value</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">isValid</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">setting</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">settings</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">internal</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">module</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">debug</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">verbose</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">&amp;&amp;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">performance</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">log</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">currentTime</span><span class="p">,</span>
              <span class="nx">executionTime</span><span class="p">,</span>
              <span class="nx">previousTime</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">currentTime</span>   <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>
              <span class="nx">previousTime</span>  <span class="o">=</span> <span class="nx">time</span> <span class="o">||</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">executionTime</span> <span class="o">=</span> <span class="nx">currentTime</span> <span class="o">-</span> <span class="nx">previousTime</span><span class="p">;</span>
              <span class="nx">time</span>          <span class="o">=</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">performance</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
                <span class="s1">&#39;Name&#39;</span>           <span class="o">:</span> <span class="nx">message</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="s1">&#39;Arguments&#39;</span>      <span class="o">:</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Element&#39;</span>        <span class="o">:</span> <span class="nx">element</span><span class="p">,</span>
                <span class="s1">&#39;Execution Time&#39;</span> <span class="o">:</span> <span class="nx">executionTime</span>
              <span class="p">});</span>
            <span class="p">}</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">display</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">title</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span>
              <span class="nx">totalTime</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="p">;</span>
            <span class="nx">time</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">totalTime</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">];</span>
            <span class="p">});</span>
            <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">totalTime</span> <span class="o">+</span> <span class="s1">&#39;ms&#39;</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">moduleSelector</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; \&#39;&#39;</span> <span class="o">+</span> <span class="nx">moduleSelector</span> <span class="o">+</span> <span class="s1">&#39;\&#39;&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">$allModules</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="s1">&#39;(&#39;</span> <span class="o">+</span> <span class="nx">$allModules</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span> <span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">group</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">console</span><span class="p">.</span><span class="nx">table</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">performance</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupCollapsed</span><span class="p">(</span><span class="nx">title</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">performance</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;ms&#39;</span><span class="p">);</span>
                <span class="p">});</span>
              <span class="p">}</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupEnd</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">performance</span> <span class="o">=</span> <span class="p">[];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">invoke</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">object</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">,</span>
            <span class="nx">maxDepth</span><span class="p">,</span>
            <span class="nx">found</span><span class="p">,</span>
            <span class="nx">response</span>
          <span class="p">;</span>
          <span class="nx">passedArguments</span> <span class="o">=</span> <span class="nx">passedArguments</span> <span class="o">||</span> <span class="nx">queryArguments</span><span class="p">;</span>
          <span class="nx">context</span>         <span class="o">=</span> <span class="nx">element</span>         <span class="o">||</span> <span class="nx">context</span><span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">object</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">query</span>    <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/[\. ]/</span><span class="p">);</span>
            <span class="nx">maxDepth</span> <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">depth</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span> <span class="nx">camelCaseValue</span> <span class="o">=</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">value</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="o">:</span> <span class="nx">query</span>
              <span class="p">;</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">});</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">found</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">found</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">returnedValue</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">returnedValue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="p">[</span><span class="nx">returnedValue</span><span class="p">,</span> <span class="nx">response</span><span class="p">];</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">response</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="nx">found</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">methodInvoked</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="nx">query</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
      <span class="p">}</span>

    <span class="p">})</span>
  <span class="p">;</span>

  <span class="k">return</span> <span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
    <span class="o">?</span> <span class="nx">returnedValue</span>
    <span class="o">:</span> <span class="k">this</span>
  <span class="p">;</span>
<span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">settings</span> <span class="o">=</span> <span class="p">{</span>

  <span class="nx">name</span>              <span class="o">:</span> <span class="s1">&#39;Form&#39;</span><span class="p">,</span>
  <span class="nx">namespace</span>         <span class="o">:</span> <span class="s1">&#39;form&#39;</span><span class="p">,</span>

  <span class="nx">debug</span>             <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">verbose</span>           <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">performance</span>       <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>


  <span class="nx">keyboardShortcuts</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">on</span>                <span class="o">:</span> <span class="s1">&#39;submit&#39;</span><span class="p">,</span>
  <span class="nx">inline</span>            <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>

  <span class="nx">delay</span>             <span class="o">:</span> <span class="mi">200</span><span class="p">,</span>
  <span class="nx">revalidate</span>        <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="nx">transition</span>        <span class="o">:</span> <span class="s1">&#39;scale&#39;</span><span class="p">,</span>
  <span class="nx">duration</span>          <span class="o">:</span> <span class="mi">150</span><span class="p">,</span>


  <span class="nx">onValid</span>           <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{},</span>
  <span class="nx">onInvalid</span>         <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{},</span>
  <span class="nx">onSuccess</span>         <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span> <span class="p">},</span>
  <span class="nx">onFailure</span>         <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span> <span class="p">},</span>

  <span class="nx">metadata</span> <span class="o">:</span> <span class="p">{</span>
    <span class="nx">validate</span><span class="o">:</span> <span class="s1">&#39;validate&#39;</span>
  <span class="p">},</span>

  <span class="nx">selector</span> <span class="o">:</span> <span class="p">{</span>
    <span class="nx">message</span> <span class="o">:</span> <span class="s1">&#39;.error.message&#39;</span><span class="p">,</span>
    <span class="nx">field</span>   <span class="o">:</span> <span class="s1">&#39;input, textarea, select&#39;</span><span class="p">,</span>
    <span class="nx">group</span>   <span class="o">:</span> <span class="s1">&#39;.field&#39;</span><span class="p">,</span>
    <span class="nx">checkbox</span><span class="o">:</span> <span class="s1">&#39;input[type=&quot;checkbox&quot;], input[type=&quot;radio&quot;]&#39;</span><span class="p">,</span>
    <span class="nx">input</span>   <span class="o">:</span> <span class="s1">&#39;input&#39;</span><span class="p">,</span>
    <span class="nx">prompt</span>  <span class="o">:</span> <span class="s1">&#39;.prompt&#39;</span><span class="p">,</span>
    <span class="nx">submit</span>  <span class="o">:</span> <span class="s1">&#39;.submit&#39;</span>
  <span class="p">},</span>

  <span class="nx">className</span> <span class="o">:</span> <span class="p">{</span>
    <span class="nx">error</span>   <span class="o">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span>
    <span class="nx">success</span> <span class="o">:</span> <span class="s1">&#39;success&#39;</span><span class="p">,</span>
    <span class="nx">down</span>    <span class="o">:</span> <span class="s1">&#39;down&#39;</span><span class="p">,</span>
    <span class="nx">label</span>   <span class="o">:</span> <span class="s1">&#39;ui label prompt&#39;</span>
  <span class="p">},</span></pre></div></td></tr><tr id="section-75"><td class="docs"><div class="pilwrap"><a href="#section-75" class="pilcrow">&#182;</a></div><p>errors</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">error</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">method</span>   <span class="o">:</span> <span class="s1">&#39;The method you called is not defined.&#39;</span>
  <span class="p">},</span>


  <span class="nx">templates</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">errors</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span>
        <span class="nx">html</span> <span class="o">=</span> <span class="s1">&#39;&lt;ul class=&quot;list&quot;&gt;&#39;</span>
      <span class="p">;</span>
      <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">errors</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;li&gt;&#39;</span> <span class="o">+</span> <span class="nx">value</span> <span class="o">+</span> <span class="s1">&#39;&lt;/li&gt;&#39;</span><span class="p">;</span>
      <span class="p">});</span>
      <span class="nx">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/ul&gt;&#39;</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">$</span><span class="p">(</span><span class="nx">html</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">prompt</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">errors</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;&lt;div/&gt;&#39;</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">&#39;ui red pointing prompt label&#39;</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">errors</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
      <span class="p">;</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">rules</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">checked</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;:checked&#39;</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">empty</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="o">!</span><span class="p">(</span><span class="nx">value</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span> <span class="o">===</span> <span class="nx">value</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">email</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span>
      <span class="kd">var</span>
        <span class="nx">emailRegExp</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s2">&quot;[a-z0-9!#$%&amp;&#39;*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&amp;&#39;*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?&quot;</span><span class="p">,</span> <span class="s2">&quot;i&quot;</span><span class="p">)</span>
      <span class="p">;</span>
      <span class="k">return</span> <span class="nx">emailRegExp</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">length</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">requiredLength</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
        <span class="o">?</span> <span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;=</span> <span class="nx">requiredLength</span><span class="p">)</span>
        <span class="o">:</span> <span class="kc">false</span>
      <span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">not</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">notValue</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span><span class="nx">value</span> <span class="o">!=</span> <span class="nx">notValue</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">contains</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">text</span> <span class="o">=</span> <span class="nx">text</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g</span><span class="p">,</span> <span class="s2">&quot;\\$&amp;&quot;</span><span class="p">);</span>
      <span class="k">return</span> <span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">search</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">is</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span><span class="nx">value</span> <span class="o">==</span> <span class="nx">text</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">maxLength</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">maxLength</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
        <span class="o">?</span> <span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;=</span> <span class="nx">maxLength</span><span class="p">)</span>
        <span class="o">:</span> <span class="kc">false</span>
      <span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">match</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">fieldIdentifier</span><span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-76"><td class="docs"><div class="pilwrap"><a href="#section-76" class="pilcrow">&#182;</a></div><p>use either id or name of field</p>
</td><td class="code"><div class="highlight"><pre>      <span class="kd">var</span>
        <span class="nx">$form</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
        <span class="nx">matchingValue</span>
      <span class="p">;</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">$form</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;#&#39;</span> <span class="o">+</span> <span class="nx">fieldIdentifier</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">matchingValue</span> <span class="o">=</span> <span class="nx">$form</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;#&#39;</span> <span class="o">+</span> <span class="nx">fieldIdentifier</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">$form</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;[name=&quot;&#39;</span> <span class="o">+</span> <span class="nx">fieldIdentifier</span> <span class="o">+</span><span class="s1">&#39;&quot;]&#39;</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">matchingValue</span> <span class="o">=</span> <span class="nx">$form</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;[name=&quot;&#39;</span> <span class="o">+</span> <span class="nx">fieldIdentifier</span> <span class="o">+</span> <span class="s1">&#39;&quot;]&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">$form</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;[data-validate=&quot;&#39;</span><span class="o">+</span> <span class="nx">fieldIdentifier</span> <span class="o">+</span><span class="s1">&#39;&quot;]&#39;</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">matchingValue</span> <span class="o">=</span> <span class="nx">$form</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;[data-validate=&quot;&#39;</span><span class="o">+</span> <span class="nx">fieldIdentifier</span> <span class="o">+</span><span class="s1">&#39;&quot;]&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="p">(</span><span class="nx">matchingValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
        <span class="o">?</span> <span class="p">(</span> <span class="nx">value</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span> <span class="o">==</span> <span class="nx">matchingValue</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span> <span class="p">)</span>
        <span class="o">:</span> <span class="kc">false</span>
      <span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">url</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span>
        <span class="nx">urlRegExp</span> <span class="o">=</span> <span class="sr">/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&amp;%@!\-\/]))?/</span>
      <span class="p">;</span>
      <span class="k">return</span> <span class="nx">urlRegExp</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">integer</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">range</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span>
        <span class="nx">intRegExp</span> <span class="o">=</span> <span class="sr">/^\-?\d+$/</span><span class="p">,</span>
        <span class="nx">min</span><span class="p">,</span>
        <span class="nx">max</span><span class="p">,</span>
        <span class="nx">parts</span>
      <span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">range</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">range</span> <span class="o">===</span> <span class="s1">&#39;&#39;</span> <span class="o">||</span> <span class="nx">range</span> <span class="o">===</span> <span class="s1">&#39;..&#39;</span><span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-77"><td class="docs"><div class="pilwrap"><a href="#section-77" class="pilcrow">&#182;</a></div><p>do nothing</p>
</td><td class="code"><div class="highlight"><pre>      <span class="p">}</span>
      <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">range</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;..&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">intRegExp</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">range</span><span class="p">))</span> <span class="p">{</span>
          <span class="nx">min</span> <span class="o">=</span> <span class="nx">max</span> <span class="o">=</span> <span class="nx">range</span> <span class="o">-</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
        <span class="nx">parts</span> <span class="o">=</span> <span class="nx">range</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;..&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">intRegExp</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="p">{</span>
          <span class="nx">min</span> <span class="o">=</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">intRegExp</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span> <span class="p">{</span>
          <span class="nx">max</span> <span class="o">=</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="p">(</span>
        <span class="nx">intRegExp</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
        <span class="p">(</span><span class="nx">min</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">value</span> <span class="o">&gt;=</span> <span class="nx">min</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
        <span class="p">(</span><span class="nx">max</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">value</span> <span class="o">&lt;=</span> <span class="nx">max</span><span class="p">)</span>
      <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

<span class="p">};</span>

<span class="p">})(</span> <span class="nx">jQuery</span><span class="p">,</span> <span class="nb">window</span> <span class="p">,</span> <span class="nb">document</span> <span class="p">);</span></pre></div></td></tr><tr id="section-78"><td class="docs"><div class="pilwrap"><a href="#section-78" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><h1>Semantic - Modal</h1>

<p><a href='http://github.com/semantic-org/semantic-ui/'>http://github.com/semantic-org/semantic-ui/</a></p></div><div class="body"><p>Copyright 2014 Contributor<br />Released under the MIT license<br /><a href='http://opensource.org/licenses/MIT'>http://opensource.org/licenses/MIT</a></p></div></div>
</td><td class="code"><div class="highlight"><pre><span class="p">;(</span><span class="kd">function</span> <span class="p">(</span> <span class="nx">$</span><span class="p">,</span> <span class="nb">window</span><span class="p">,</span> <span class="nb">document</span><span class="p">,</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>

<span class="s2">&quot;use strict&quot;</span><span class="p">;</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">modal</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span>
    <span class="nx">$allModules</span>    <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
    <span class="nx">$window</span>        <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">),</span>
    <span class="nx">$document</span>      <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">),</span>
    <span class="nx">$body</span>          <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">),</span>

    <span class="nx">moduleSelector</span> <span class="o">=</span> <span class="nx">$allModules</span><span class="p">.</span><span class="nx">selector</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>

    <span class="nx">time</span>           <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">(),</span>
    <span class="nx">performance</span>    <span class="o">=</span> <span class="p">[],</span>

    <span class="nx">query</span>          <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="nx">methodInvoked</span>  <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">),</span>
    <span class="nx">queryArguments</span> <span class="o">=</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>

    <span class="nx">requestAnimationFrame</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">requestAnimationFrame</span>
      <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">mozRequestAnimationFrame</span>
      <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">webkitRequestAnimationFrame</span>
      <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">msRequestAnimationFrame</span>
      <span class="o">||</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="p">},</span>

    <span class="nx">returnedValue</span>
  <span class="p">;</span>

  <span class="nx">$allModules</span>
    <span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span>
        <span class="nx">settings</span>    <span class="o">=</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span> <span class="p">)</span>
          <span class="o">?</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">modal</span><span class="p">.</span><span class="nx">settings</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">)</span>
          <span class="o">:</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">modal</span><span class="p">.</span><span class="nx">settings</span><span class="p">),</span>

        <span class="nx">selector</span>        <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">selector</span><span class="p">,</span>
        <span class="nx">className</span>       <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">className</span><span class="p">,</span>
        <span class="nx">namespace</span>       <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">namespace</span><span class="p">,</span>
        <span class="nx">error</span>           <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span>

        <span class="nx">eventNamespace</span>  <span class="o">=</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">,</span>
        <span class="nx">moduleNamespace</span> <span class="o">=</span> <span class="s1">&#39;module-&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">,</span>

        <span class="nx">$module</span>      <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
        <span class="nx">$context</span>     <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">context</span><span class="p">),</span>
        <span class="nx">$close</span>       <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">close</span><span class="p">),</span>

        <span class="nx">$allModals</span><span class="p">,</span>
        <span class="nx">$otherModals</span><span class="p">,</span>
        <span class="nx">$focusedElement</span><span class="p">,</span>
        <span class="nx">$dimmable</span><span class="p">,</span>
        <span class="nx">$dimmer</span><span class="p">,</span>

        <span class="nx">element</span>      <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
        <span class="nx">instance</span>     <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">),</span>
        <span class="nx">observer</span><span class="p">,</span>
        <span class="nx">module</span>
      <span class="p">;</span>
      <span class="nx">module</span>  <span class="o">=</span> <span class="p">{</span>

        <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Initializing dimmer&#39;</span><span class="p">,</span> <span class="nx">$context</span><span class="p">);</span>

          <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">dimmer</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">dimmer</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
          <span class="p">}</span>

          <span class="nx">$dimmable</span> <span class="o">=</span> <span class="nx">$context</span>
            <span class="p">.</span><span class="nx">dimmer</span><span class="p">({</span>
              <span class="nx">debug</span>      <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">,</span>
              <span class="nx">dimmerName</span> <span class="o">:</span> <span class="s1">&#39;modals&#39;</span><span class="p">,</span>
              <span class="nx">closable</span>   <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
              <span class="nx">useCSS</span>     <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
              <span class="nx">duration</span>   <span class="o">:</span> <span class="p">{</span>
                <span class="nx">show</span>     <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span> <span class="o">*</span> <span class="mf">0.9</span><span class="p">,</span>
                <span class="nx">hide</span>     <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span> <span class="o">*</span> <span class="mf">1.1</span>
              <span class="p">}</span>
            <span class="p">})</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">detachable</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$dimmable</span><span class="p">.</span><span class="nx">dimmer</span><span class="p">(</span><span class="s1">&#39;add content&#39;</span><span class="p">,</span> <span class="nx">$module</span><span class="p">);</span>
          <span class="p">}</span>

          <span class="nx">$dimmer</span> <span class="o">=</span> <span class="nx">$dimmable</span><span class="p">.</span><span class="nx">dimmer</span><span class="p">(</span><span class="s1">&#39;get dimmer&#39;</span><span class="p">);</span>
          <span class="nx">$otherModals</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">siblings</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">modal</span><span class="p">);</span>
          <span class="nx">$allModals</span>   <span class="o">=</span> <span class="nx">$otherModals</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">$module</span><span class="p">);</span>

          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Attaching close events&#39;</span><span class="p">,</span> <span class="nx">$close</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">events</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">observeChanges</span><span class="p">();</span>

          <span class="nx">module</span><span class="p">.</span><span class="nx">instantiate</span><span class="p">();</span>
        <span class="p">},</span>

        <span class="nx">instantiate</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Storing instance of modal&#39;</span><span class="p">);</span>
          <span class="nx">instance</span> <span class="o">=</span> <span class="nx">module</span><span class="p">;</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">,</span> <span class="nx">instance</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">destroy</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Destroying previous modal&#39;</span><span class="p">);</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">removeData</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">eventNamespace</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$close</span><span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">eventNamespace</span><span class="p">);</span>
          <span class="nx">$context</span><span class="p">.</span><span class="nx">dimmer</span><span class="p">(</span><span class="s1">&#39;destroy&#39;</span><span class="p">);</span>
        <span class="p">},</span>

        <span class="nx">observeChanges</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="s1">&#39;MutationObserver&#39;</span> <span class="k">in</span> <span class="nb">window</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">observer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MutationObserver</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">mutations</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;DOM tree modified, refreshing&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">refresh</span><span class="p">();</span>
            <span class="p">});</span>
            <span class="nx">observer</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="p">{</span>
              <span class="nx">childList</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
              <span class="nx">subtree</span>   <span class="o">:</span> <span class="kc">true</span>
            <span class="p">});</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Setting up mutation observer&#39;</span><span class="p">,</span> <span class="nx">observer</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">refresh</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">scrolling</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">cacheSizes</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">screenHeight</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">type</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">position</span><span class="p">();</span>
        <span class="p">},</span>

        <span class="nx">attachEvents</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">selector</span><span class="p">,</span> <span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">$toggle</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">selector</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">event</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">module</span><span class="p">[</span><span class="nx">event</span><span class="p">])</span>
            <span class="o">?</span> <span class="nx">module</span><span class="p">[</span><span class="nx">event</span><span class="p">]</span>
            <span class="o">:</span> <span class="nx">module</span><span class="p">.</span><span class="nx">toggle</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">$toggle</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Attaching modal events to element&#39;</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">event</span><span class="p">);</span>
            <span class="nx">$toggle</span>
              <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">eventNamespace</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">event</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">notFound</span><span class="p">,</span> <span class="nx">selector</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">bind</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">events</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$close</span>
              <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">close</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="nx">$window</span>
              <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;resize&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">resize</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">event</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">close</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Closing element pressed&#39;</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">is</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">approve</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onApprove</span><span class="p">,</span> <span class="nx">element</span><span class="p">)()</span> <span class="o">!==</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Approve callback returned false cancelling hide&#39;</span><span class="p">);</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">is</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">deny</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onDeny</span><span class="p">,</span> <span class="nx">element</span><span class="p">)()</span> <span class="o">!==</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Deny callback returned false cancelling hide&#39;</span><span class="p">);</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">click</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">).</span><span class="nx">closest</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">modal</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Dimmer clicked, hiding all modals&#39;</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">allowMultiple</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">hideAll</span><span class="p">();</span>
              <span class="p">}</span>
              <span class="nx">event</span><span class="p">.</span><span class="nx">stopImmediatePropagation</span><span class="p">();</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">debounce</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">method</span><span class="p">,</span> <span class="nx">delay</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">method</span><span class="p">,</span> <span class="nx">delay</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">keyboard</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">keyCode</span>   <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">which</span><span class="p">,</span>
              <span class="nx">escapeKey</span> <span class="o">=</span> <span class="mi">27</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">keyCode</span> <span class="o">==</span> <span class="nx">escapeKey</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">closable</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Escape key pressed hiding modal&#39;</span><span class="p">);</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Escape key pressed, but closable is set to false&#39;</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">resize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">$dimmable</span><span class="p">.</span><span class="nx">dimmer</span><span class="p">(</span><span class="s1">&#39;is active&#39;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">requestAnimationFrame</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">refresh</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">toggle</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">active</span><span class="p">()</span> <span class="o">||</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">animating</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">show</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">callback</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span>
            <span class="o">?</span> <span class="nx">callback</span>
            <span class="o">:</span> <span class="kd">function</span><span class="p">(){}</span>
          <span class="p">;</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">showDimmer</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">showModal</span><span class="p">(</span><span class="nx">callback</span><span class="p">);</span>
        <span class="p">},</span>

        <span class="nx">showModal</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">callback</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span>
            <span class="o">?</span> <span class="nx">callback</span>
            <span class="o">:</span> <span class="kd">function</span><span class="p">(){}</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">active</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>

            <span class="k">if</span><span class="p">(</span> <span class="nx">$otherModals</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;:visible&#39;</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">settings</span><span class="p">.</span><span class="nx">allowMultiple</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Other modals visible, queueing show animation&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">hideOthers</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">showModal</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onShow</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">transition</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s1">&#39;is supported&#39;</span><span class="p">))</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Showing modal with css animations&#39;</span><span class="p">);</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">cacheSizes</span><span class="p">();</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">position</span><span class="p">();</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">screenHeight</span><span class="p">();</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">type</span><span class="p">();</span>
                <span class="nx">$module</span>
                  <span class="p">.</span><span class="nx">transition</span><span class="p">({</span>
                    <span class="nx">debug</span>     <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">,</span>
                    <span class="nx">animation</span> <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span> <span class="o">+</span> <span class="s1">&#39; in&#39;</span><span class="p">,</span>
                    <span class="nx">queue</span>     <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                    <span class="nx">duration</span>  <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">,</span>
                    <span class="nx">onStart</span>   <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                      <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">clickaway</span><span class="p">();</span>
                    <span class="p">},</span>
                    <span class="nx">onComplete</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                      <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onVisible</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
                      <span class="nx">module</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">keyboardShortcuts</span><span class="p">();</span>
                      <span class="nx">module</span><span class="p">.</span><span class="nx">save</span><span class="p">.</span><span class="nx">focus</span><span class="p">();</span>
                      <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">active</span><span class="p">();</span>
                      <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">autofocus</span><span class="p">();</span>
                      <span class="nx">callback</span><span class="p">();</span>
                    <span class="p">}</span>
                  <span class="p">})</span>
                <span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Showing modal with javascript&#39;</span><span class="p">);</span>
                <span class="nx">$module</span>
                  <span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">easing</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onVisible</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
                    <span class="nx">module</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">keyboardShortcuts</span><span class="p">();</span>
                    <span class="nx">module</span><span class="p">.</span><span class="nx">save</span><span class="p">.</span><span class="nx">focus</span><span class="p">();</span>
                    <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">active</span><span class="p">();</span>
                    <span class="nx">callback</span><span class="p">();</span>
                  <span class="p">})</span>
                <span class="p">;</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Modal is already visible&#39;</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">showDimmer</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="nx">$dimmable</span><span class="p">.</span><span class="nx">dimmer</span><span class="p">(</span><span class="s1">&#39;is active&#39;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Showing dimmer&#39;</span><span class="p">);</span>
            <span class="nx">$dimmable</span><span class="p">.</span><span class="nx">dimmer</span><span class="p">(</span><span class="s1">&#39;show&#39;</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Dimmer already visible&#39;</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">hide</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">callback</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span>
            <span class="o">?</span> <span class="nx">callback</span>
            <span class="o">:</span> <span class="kd">function</span><span class="p">(){}</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">$allModals</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;:visible&#39;</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">hideDimmer</span><span class="p">();</span>
          <span class="p">}</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">hideModal</span><span class="p">(</span><span class="nx">callback</span><span class="p">);</span>
        <span class="p">},</span>

        <span class="nx">hideDimmer</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="p">(</span><span class="nx">$dimmable</span><span class="p">.</span><span class="nx">dimmer</span><span class="p">(</span><span class="s1">&#39;is active&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="nx">$dimmable</span><span class="p">.</span><span class="nx">dimmer</span><span class="p">(</span><span class="s1">&#39;is animating&#39;</span><span class="p">))</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Dimmer is not visible cannot hide&#39;</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Hiding dimmer&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">clickaway</span><span class="p">();</span>
          <span class="nx">$dimmable</span><span class="p">.</span><span class="nx">dimmer</span><span class="p">(</span><span class="s1">&#39;hide&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">transition</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s1">&#39;is supported&#39;</span><span class="p">))</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">screenHeight</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">active</span><span class="p">();</span>
          <span class="p">});</span>
        <span class="p">},</span>

        <span class="nx">hideModal</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">callback</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span>
            <span class="o">?</span> <span class="nx">callback</span>
            <span class="o">:</span> <span class="kd">function</span><span class="p">(){}</span>
          <span class="p">;</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Hiding modal&#39;</span><span class="p">);</span>
          <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onHide</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">transition</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s1">&#39;is supported&#39;</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">$module</span>
              <span class="p">.</span><span class="nx">transition</span><span class="p">({</span>
                <span class="nx">debug</span>      <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">,</span>
                <span class="nx">animation</span>  <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span> <span class="o">+</span> <span class="s1">&#39; out&#39;</span><span class="p">,</span>
                <span class="nx">queue</span>      <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                <span class="nx">duration</span>   <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">,</span>
                <span class="nx">onStart</span>    <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">keyboardShortcuts</span><span class="p">();</span>
                <span class="p">},</span>
                <span class="nx">onComplete</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                  <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onHidden</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">active</span><span class="p">();</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">restore</span><span class="p">.</span><span class="nx">focus</span><span class="p">();</span>
                  <span class="nx">callback</span><span class="p">();</span>
                <span class="p">}</span>
              <span class="p">})</span>
            <span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">keyboardShortcuts</span><span class="p">();</span>
            <span class="nx">$module</span>
              <span class="p">.</span><span class="nx">fadeOut</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">easing</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onHidden</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">active</span><span class="p">();</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">restore</span><span class="p">.</span><span class="nx">focus</span><span class="p">();</span>
                <span class="nx">callback</span><span class="p">();</span>
              <span class="p">})</span>
            <span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">hideAll</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">callback</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span>
            <span class="o">?</span> <span class="nx">callback</span>
            <span class="o">:</span> <span class="kd">function</span><span class="p">(){}</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$allModals</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;:visible&#39;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Hiding all visible modals&#39;</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">hideDimmer</span><span class="p">();</span>
            <span class="nx">$allModals</span>
              <span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;:visible&#39;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">modal</span><span class="p">(</span><span class="s1">&#39;hide modal&#39;</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">hideOthers</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">callback</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span>
            <span class="o">?</span> <span class="nx">callback</span>
            <span class="o">:</span> <span class="kd">function</span><span class="p">(){}</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$otherModals</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;:visible&#39;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Hiding other modals&#39;</span><span class="p">,</span> <span class="nx">$otherModals</span><span class="p">);</span>
            <span class="nx">$otherModals</span>
              <span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;:visible&#39;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">modal</span><span class="p">(</span><span class="s1">&#39;hide modal&#39;</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">add</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">keyboardShortcuts</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Adding keyboard shortcuts&#39;</span><span class="p">);</span>
            <span class="nx">$document</span>
              <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;keyup&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">keyboard</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">save</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">focus</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$focusedElement</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">activeElement</span><span class="p">).</span><span class="nx">blur</span><span class="p">();</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">restore</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">focus</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">$focusedElement</span> <span class="o">&amp;&amp;</span> <span class="nx">$focusedElement</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$focusedElement</span><span class="p">.</span><span class="nx">focus</span><span class="p">();</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">remove</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">active</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">clickaway</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">closable</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$dimmer</span>
                <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="s1">&#39;click&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">screenHeight</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">height</span> <span class="o">&gt;</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">pageHeight</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Removing page height&#39;</span><span class="p">);</span>
              <span class="nx">$body</span>
                <span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;height&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">keyboardShortcuts</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Removing keyboard shortcuts&#39;</span><span class="p">);</span>
            <span class="nx">$document</span>
              <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="s1">&#39;keyup&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">scrolling</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$dimmable</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">scrolling</span><span class="p">);</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">scrolling</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">cacheSizes</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">modalHeight</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">outerHeight</span><span class="p">()</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">modalHeight</span> <span class="o">!==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span> <span class="o">=</span> <span class="p">{</span>
              <span class="nx">pageHeight</span>    <span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">outerHeight</span><span class="p">(),</span>
              <span class="nx">height</span>        <span class="o">:</span> <span class="nx">modalHeight</span> <span class="o">+</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">offset</span><span class="p">,</span>
              <span class="nx">contextHeight</span> <span class="o">:</span> <span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">context</span> <span class="o">==</span> <span class="s1">&#39;body&#39;</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">height</span><span class="p">()</span>
                <span class="o">:</span> <span class="nx">$dimmable</span><span class="p">.</span><span class="nx">height</span><span class="p">()</span>
            <span class="p">};</span>
          <span class="p">}</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Caching modal and container sizes&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">);</span>
        <span class="p">},</span>

        <span class="nx">can</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">fit</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">height</span> <span class="o">&lt;</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">contextHeight</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">is</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">active</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">animating</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s1">&#39;is supported&#39;</span><span class="p">)</span>
              <span class="o">?</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s1">&#39;is animating&#39;</span><span class="p">)</span>
              <span class="o">:</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;:visible&#39;</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">modernBrowser</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span></pre></div></td></tr><tr id="section-79"><td class="docs"><div class="pilwrap"><a href="#section-79" class="pilcrow">&#182;</a></div><p>appName for IE11 reports 'Netscape' can no longer use</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">return</span> <span class="o">!</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">ActiveXObject</span> <span class="o">||</span> <span class="s2">&quot;ActiveXObject&quot;</span> <span class="k">in</span> <span class="nb">window</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">set</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">autofocus</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">autofocus</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span>
                <span class="nx">$inputs</span>    <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;:input:visible&#39;</span><span class="p">),</span>
                <span class="nx">$autofocus</span> <span class="o">=</span> <span class="nx">$inputs</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;[autofocus]&#39;</span><span class="p">),</span>
                <span class="nx">$input</span>     <span class="o">=</span> <span class="p">(</span><span class="nx">$autofocus</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
                  <span class="o">?</span> <span class="nx">$autofocus</span>
                  <span class="o">:</span> <span class="nx">$inputs</span>
              <span class="p">;</span>
              <span class="nx">$input</span><span class="p">.</span><span class="nx">first</span><span class="p">().</span><span class="nx">focus</span><span class="p">();</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">clickaway</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">closable</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$dimmer</span>
                <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="s1">&#39;click&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">click</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">screenHeight</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">height</span> <span class="o">&gt;</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">pageHeight</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Modal is taller than page content, resizing page height&#39;</span><span class="p">);</span>
              <span class="nx">$body</span>
                <span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;height&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">height</span> <span class="o">+</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">padding</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">$body</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;height&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">active</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">scrolling</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$dimmable</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">scrolling</span><span class="p">);</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">scrolling</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">type</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">can</span><span class="p">.</span><span class="nx">fit</span><span class="p">())</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Modal fits on screen&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">scrolling</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Modal cannot fit on screen setting to scrolling&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">scrolling</span><span class="p">();</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">position</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Centering modal on page&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">can</span><span class="p">.</span><span class="nx">fit</span><span class="p">())</span> <span class="p">{</span>
              <span class="nx">$module</span>
                <span class="p">.</span><span class="nx">css</span><span class="p">({</span>
                  <span class="nx">top</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                  <span class="nx">marginTop</span><span class="o">:</span> <span class="o">-</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">height</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
                <span class="p">})</span>
              <span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">$module</span>
                <span class="p">.</span><span class="nx">css</span><span class="p">({</span>
                  <span class="nx">marginTop</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                  <span class="nx">top</span>       <span class="o">:</span> <span class="nx">$document</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">()</span>
                <span class="p">})</span>
              <span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">setting</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Changing setting&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">settings</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">internal</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">module</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">debug</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">verbose</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">&amp;&amp;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">performance</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">log</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">currentTime</span><span class="p">,</span>
              <span class="nx">executionTime</span><span class="p">,</span>
              <span class="nx">previousTime</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">currentTime</span>   <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>
              <span class="nx">previousTime</span>  <span class="o">=</span> <span class="nx">time</span> <span class="o">||</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">executionTime</span> <span class="o">=</span> <span class="nx">currentTime</span> <span class="o">-</span> <span class="nx">previousTime</span><span class="p">;</span>
              <span class="nx">time</span>          <span class="o">=</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">performance</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
                <span class="s1">&#39;Name&#39;</span>           <span class="o">:</span> <span class="nx">message</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="s1">&#39;Arguments&#39;</span>      <span class="o">:</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Element&#39;</span>        <span class="o">:</span> <span class="nx">element</span><span class="p">,</span>
                <span class="s1">&#39;Execution Time&#39;</span> <span class="o">:</span> <span class="nx">executionTime</span>
              <span class="p">});</span>
            <span class="p">}</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">display</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">title</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span>
              <span class="nx">totalTime</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="p">;</span>
            <span class="nx">time</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">totalTime</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">];</span>
            <span class="p">});</span>
            <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">totalTime</span> <span class="o">+</span> <span class="s1">&#39;ms&#39;</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">moduleSelector</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; \&#39;&#39;</span> <span class="o">+</span> <span class="nx">moduleSelector</span> <span class="o">+</span> <span class="s1">&#39;\&#39;&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span> <span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">group</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">console</span><span class="p">.</span><span class="nx">table</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">performance</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupCollapsed</span><span class="p">(</span><span class="nx">title</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">performance</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;ms&#39;</span><span class="p">);</span>
                <span class="p">});</span>
              <span class="p">}</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupEnd</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">performance</span> <span class="o">=</span> <span class="p">[];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">invoke</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">object</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">,</span>
            <span class="nx">maxDepth</span><span class="p">,</span>
            <span class="nx">found</span><span class="p">,</span>
            <span class="nx">response</span>
          <span class="p">;</span>
          <span class="nx">passedArguments</span> <span class="o">=</span> <span class="nx">passedArguments</span> <span class="o">||</span> <span class="nx">queryArguments</span><span class="p">;</span>
          <span class="nx">context</span>         <span class="o">=</span> <span class="nx">element</span>         <span class="o">||</span> <span class="nx">context</span><span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">object</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">query</span>    <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/[\. ]/</span><span class="p">);</span>
            <span class="nx">maxDepth</span> <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">depth</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span> <span class="nx">camelCaseValue</span> <span class="o">=</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">value</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="o">:</span> <span class="nx">query</span>
              <span class="p">;</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">});</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">found</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">found</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">returnedValue</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">returnedValue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="p">[</span><span class="nx">returnedValue</span><span class="p">,</span> <span class="nx">response</span><span class="p">];</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">response</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="nx">found</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>

      <span class="k">if</span><span class="p">(</span><span class="nx">methodInvoked</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="nx">query</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">})</span>
  <span class="p">;</span>

  <span class="k">return</span> <span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
    <span class="o">?</span> <span class="nx">returnedValue</span>
    <span class="o">:</span> <span class="k">this</span>
  <span class="p">;</span>
<span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">modal</span><span class="p">.</span><span class="nx">settings</span> <span class="o">=</span> <span class="p">{</span>

  <span class="nx">name</span>          <span class="o">:</span> <span class="s1">&#39;Modal&#39;</span><span class="p">,</span>
  <span class="nx">namespace</span>     <span class="o">:</span> <span class="s1">&#39;modal&#39;</span><span class="p">,</span>

  <span class="nx">debug</span>         <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">verbose</span>       <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">performance</span>   <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="nx">allowMultiple</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">detachable</span>    <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">closable</span>      <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">autofocus</span>     <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="nx">context</span>       <span class="o">:</span> <span class="s1">&#39;body&#39;</span><span class="p">,</span>

  <span class="nx">duration</span>      <span class="o">:</span> <span class="mi">500</span><span class="p">,</span>
  <span class="nx">easing</span>        <span class="o">:</span> <span class="s1">&#39;easeOutExpo&#39;</span><span class="p">,</span>
  <span class="nx">offset</span>        <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="nx">transition</span>    <span class="o">:</span> <span class="s1">&#39;scale&#39;</span><span class="p">,</span>

  <span class="nx">padding</span>       <span class="o">:</span> <span class="mi">30</span><span class="p">,</span>

  <span class="nx">onShow</span>        <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>
  <span class="nx">onHide</span>        <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>

  <span class="nx">onVisible</span>     <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>
  <span class="nx">onHidden</span>      <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>

  <span class="nx">onApprove</span>     <span class="o">:</span> <span class="kd">function</span><span class="p">(){</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span> <span class="p">},</span>
  <span class="nx">onDeny</span>        <span class="o">:</span> <span class="kd">function</span><span class="p">(){</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span> <span class="p">},</span>

  <span class="nx">selector</span>    <span class="o">:</span> <span class="p">{</span>
    <span class="nx">close</span>    <span class="o">:</span> <span class="s1">&#39;.close, .actions .button&#39;</span><span class="p">,</span>
    <span class="nx">approve</span>  <span class="o">:</span> <span class="s1">&#39;.actions .positive, .actions .approve, .actions .ok&#39;</span><span class="p">,</span>
    <span class="nx">deny</span>     <span class="o">:</span> <span class="s1">&#39;.actions .negative, .actions .deny, .actions .cancel&#39;</span><span class="p">,</span>
    <span class="nx">modal</span>    <span class="o">:</span> <span class="s1">&#39;.ui.modal&#39;</span>
  <span class="p">},</span>
  <span class="nx">error</span> <span class="o">:</span> <span class="p">{</span>
    <span class="nx">dimmer</span>    <span class="o">:</span> <span class="s1">&#39;UI Dimmer, a required component is not included in this page&#39;</span><span class="p">,</span>
    <span class="nx">method</span>    <span class="o">:</span> <span class="s1">&#39;The method you called is not defined.&#39;</span><span class="p">,</span>
    <span class="nx">notFound</span>  <span class="o">:</span> <span class="s1">&#39;The element you specified could not be found&#39;</span>
  <span class="p">},</span>
  <span class="nx">className</span> <span class="o">:</span> <span class="p">{</span>
    <span class="nx">active</span>    <span class="o">:</span> <span class="s1">&#39;active&#39;</span><span class="p">,</span>
    <span class="nx">scrolling</span> <span class="o">:</span> <span class="s1">&#39;scrolling&#39;</span>
  <span class="p">}</span>
<span class="p">};</span>


<span class="p">})(</span> <span class="nx">jQuery</span><span class="p">,</span> <span class="nb">window</span> <span class="p">,</span> <span class="nb">document</span> <span class="p">);</span></pre></div></td></tr><tr id="section-80"><td class="docs"><div class="pilwrap"><a href="#section-80" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><h1>Semantic - Nag</h1>

<p><a href='http://github.com/semantic-org/semantic-ui/'>http://github.com/semantic-org/semantic-ui/</a></p></div><div class="body"><p>Copyright 2014 Contributor<br />Released under the MIT license<br /><a href='http://opensource.org/licenses/MIT'>http://opensource.org/licenses/MIT</a></p></div></div>
</td><td class="code"><div class="highlight"><pre><span class="p">;(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">$</span><span class="p">,</span> <span class="nb">window</span><span class="p">,</span> <span class="nb">document</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>

<span class="s2">&quot;use strict&quot;</span><span class="p">;</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">nag</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span>
    <span class="nx">$allModules</span>    <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
    <span class="nx">moduleSelector</span> <span class="o">=</span> <span class="nx">$allModules</span><span class="p">.</span><span class="nx">selector</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>

    <span class="nx">time</span>           <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">(),</span>
    <span class="nx">performance</span>    <span class="o">=</span> <span class="p">[],</span>

    <span class="nx">query</span>          <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="nx">methodInvoked</span>  <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">),</span>
    <span class="nx">queryArguments</span> <span class="o">=</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="nx">returnedValue</span>
  <span class="p">;</span>
  <span class="nx">$allModules</span>
    <span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span>
        <span class="nx">settings</span>          <span class="o">=</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span> <span class="p">)</span>
          <span class="o">?</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">nag</span><span class="p">.</span><span class="nx">settings</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">)</span>
          <span class="o">:</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">nag</span><span class="p">.</span><span class="nx">settings</span><span class="p">),</span>

        <span class="nx">className</span>       <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">className</span><span class="p">,</span>
        <span class="nx">selector</span>        <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">selector</span><span class="p">,</span>
        <span class="nx">error</span>           <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span>
        <span class="nx">namespace</span>       <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">namespace</span><span class="p">,</span>

        <span class="nx">eventNamespace</span>  <span class="o">=</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">,</span>
        <span class="nx">moduleNamespace</span> <span class="o">=</span> <span class="nx">namespace</span> <span class="o">+</span> <span class="s1">&#39;-module&#39;</span><span class="p">,</span>

        <span class="nx">$module</span>         <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>

        <span class="nx">$close</span>          <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">close</span><span class="p">),</span>
        <span class="nx">$context</span>        <span class="o">=</span> <span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">context</span><span class="p">)</span>
          <span class="o">?</span> <span class="nx">$</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">context</span><span class="p">)</span>
          <span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">),</span>

        <span class="nx">element</span>         <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
        <span class="nx">instance</span>        <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">),</span>

        <span class="nx">moduleOffset</span><span class="p">,</span>
        <span class="nx">moduleHeight</span><span class="p">,</span>

        <span class="nx">contextWidth</span><span class="p">,</span>
        <span class="nx">contextHeight</span><span class="p">,</span>
        <span class="nx">contextOffset</span><span class="p">,</span>

        <span class="nx">yOffset</span><span class="p">,</span>
        <span class="nx">yPosition</span><span class="p">,</span>

        <span class="nx">timer</span><span class="p">,</span>
        <span class="nx">module</span><span class="p">,</span>

        <span class="nx">requestAnimationFrame</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">requestAnimationFrame</span>
          <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">mozRequestAnimationFrame</span>
          <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">webkitRequestAnimationFrame</span>
          <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">msRequestAnimationFrame</span>
          <span class="o">||</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="p">}</span>
      <span class="p">;</span>
      <span class="nx">module</span> <span class="o">=</span> <span class="p">{</span>

        <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Initializing element&#39;</span><span class="p">);</span>

          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$close</span>
            <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">dismiss</span><span class="p">)</span>
          <span class="p">;</span>

          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">detachable</span> <span class="o">&amp;&amp;</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">parent</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!==</span> <span class="nx">$context</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">{</span>
            <span class="nx">$module</span>
              <span class="p">.</span><span class="nx">detach</span><span class="p">()</span>
              <span class="p">.</span><span class="nx">prependTo</span><span class="p">(</span><span class="nx">$context</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">}</span>

          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">displayTime</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">hide</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">displayTime</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span>
        <span class="p">},</span>

        <span class="nx">destroy</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Destroying instance&#39;</span><span class="p">);</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">removeData</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">eventNamespace</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">show</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">should</span><span class="p">.</span><span class="nx">show</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">$module</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;:visible&#39;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Showing nag&#39;</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">animation</span><span class="p">.</span><span class="nx">show</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">animation</span><span class="p">.</span><span class="nx">show</span> <span class="o">==</span> <span class="s1">&#39;fade&#39;</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$module</span>
                <span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">easing</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">$module</span>
                <span class="p">.</span><span class="nx">slideDown</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">easing</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">hide</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Showing nag&#39;</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">animation</span><span class="p">.</span><span class="nx">hide</span><span class="p">);</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">animation</span><span class="p">.</span><span class="nx">show</span> <span class="o">==</span> <span class="s1">&#39;fade&#39;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$module</span>
              <span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">easing</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">$module</span>
              <span class="p">.</span><span class="nx">slideUp</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">easing</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">onHide</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Removing nag&#39;</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">animation</span><span class="p">.</span><span class="nx">hide</span><span class="p">);</span>
          <span class="nx">$module</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onHide</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">settings</span><span class="p">.</span><span class="nx">onHide</span><span class="p">();</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">dismiss</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">storageMethod</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">storage</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">key</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
          <span class="nx">event</span><span class="p">.</span><span class="nx">stopImmediatePropagation</span><span class="p">();</span>
          <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
        <span class="p">},</span>

        <span class="nx">should</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">show</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">persist</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Persistent nag is set, can show nag&#39;</span><span class="p">);</span>
              <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">storage</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">key</span><span class="p">)</span> <span class="o">!=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Stored value is not set, can show nag&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">storage</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">key</span><span class="p">));</span>
              <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Stored value is set, cannot show nag&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">storage</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">key</span><span class="p">));</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">get</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">storageOptions</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">options</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">expires</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">options</span><span class="p">.</span><span class="nx">expires</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">expires</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">domain</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">options</span><span class="p">.</span><span class="nx">domain</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">domain</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">path</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">options</span><span class="p">.</span><span class="nx">path</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">path</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">options</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">clear</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">storage</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">key</span><span class="p">);</span>
        <span class="p">},</span>

        <span class="nx">storage</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">options</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">storageOptions</span><span class="p">()</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">storageMethod</span> <span class="o">==</span> <span class="s1">&#39;localstorage&#39;</span> <span class="o">&amp;&amp;</span> <span class="nb">window</span><span class="p">.</span><span class="nx">localStorage</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
              <span class="nb">window</span><span class="p">.</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Value stored using local storage&#39;</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">cookie</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">cookie</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Value stored using cookie&#39;</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">noCookieStorage</span><span class="p">);</span>
              <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">storedValue</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">storageMethod</span> <span class="o">==</span> <span class="s1">&#39;localstorage&#39;</span> <span class="o">&amp;&amp;</span> <span class="nb">window</span><span class="p">.</span><span class="nx">localStorage</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">storedValue</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
            <span class="p">}</span></pre></div></td></tr><tr id="section-81"><td class="docs"><div class="pilwrap"><a href="#section-81" class="pilcrow">&#182;</a></div><p>get by cookie</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">cookie</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">storedValue</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">cookie</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">noCookieStorage</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">storedValue</span> <span class="o">==</span> <span class="s1">&#39;undefined&#39;</span> <span class="o">||</span> <span class="nx">storedValue</span> <span class="o">==</span> <span class="s1">&#39;null&#39;</span> <span class="o">||</span> <span class="nx">storedValue</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">storedValue</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">storedValue</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">storedValue</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">remove</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">options</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">storageOptions</span><span class="p">()</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">storageMethod</span> <span class="o">==</span> <span class="s1">&#39;local&#39;</span> <span class="o">&amp;&amp;</span> <span class="nb">window</span><span class="p">.</span><span class="nx">store</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
              <span class="nb">window</span><span class="p">.</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">removeItem</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
            <span class="p">}</span></pre></div></td></tr><tr id="section-82"><td class="docs"><div class="pilwrap"><a href="#section-82" class="pilcrow">&#182;</a></div><p>store by cookie</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">cookie</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">removeCookie</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">noStorage</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">setting</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Changing setting&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">settings</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">internal</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">module</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">debug</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">verbose</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">&amp;&amp;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">performance</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">log</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">currentTime</span><span class="p">,</span>
              <span class="nx">executionTime</span><span class="p">,</span>
              <span class="nx">previousTime</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">currentTime</span>   <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>
              <span class="nx">previousTime</span>  <span class="o">=</span> <span class="nx">time</span> <span class="o">||</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">executionTime</span> <span class="o">=</span> <span class="nx">currentTime</span> <span class="o">-</span> <span class="nx">previousTime</span><span class="p">;</span>
              <span class="nx">time</span>          <span class="o">=</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">performance</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
                <span class="s1">&#39;Name&#39;</span>           <span class="o">:</span> <span class="nx">message</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="s1">&#39;Arguments&#39;</span>      <span class="o">:</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Element&#39;</span>        <span class="o">:</span> <span class="nx">element</span><span class="p">,</span>
                <span class="s1">&#39;Execution Time&#39;</span> <span class="o">:</span> <span class="nx">executionTime</span>
              <span class="p">});</span>
            <span class="p">}</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">display</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">title</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span>
              <span class="nx">totalTime</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="p">;</span>
            <span class="nx">time</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">totalTime</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">];</span>
            <span class="p">});</span>
            <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">totalTime</span> <span class="o">+</span> <span class="s1">&#39;ms&#39;</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">moduleSelector</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; \&#39;&#39;</span> <span class="o">+</span> <span class="nx">moduleSelector</span> <span class="o">+</span> <span class="s1">&#39;\&#39;&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span> <span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">group</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">console</span><span class="p">.</span><span class="nx">table</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">performance</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupCollapsed</span><span class="p">(</span><span class="nx">title</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">performance</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;ms&#39;</span><span class="p">);</span>
                <span class="p">});</span>
              <span class="p">}</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupEnd</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">performance</span> <span class="o">=</span> <span class="p">[];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">invoke</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">object</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">,</span>
            <span class="nx">maxDepth</span><span class="p">,</span>
            <span class="nx">found</span><span class="p">,</span>
            <span class="nx">response</span>
          <span class="p">;</span>
          <span class="nx">passedArguments</span> <span class="o">=</span> <span class="nx">passedArguments</span> <span class="o">||</span> <span class="nx">queryArguments</span><span class="p">;</span>
          <span class="nx">context</span>         <span class="o">=</span> <span class="nx">element</span>         <span class="o">||</span> <span class="nx">context</span><span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">object</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">query</span>    <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/[\. ]/</span><span class="p">);</span>
            <span class="nx">maxDepth</span> <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">depth</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span> <span class="nx">camelCaseValue</span> <span class="o">=</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">value</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="o">:</span> <span class="nx">query</span>
              <span class="p">;</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">method</span><span class="p">,</span> <span class="nx">query</span><span class="p">);</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">});</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">found</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">found</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">returnedValue</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">returnedValue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="p">[</span><span class="nx">returnedValue</span><span class="p">,</span> <span class="nx">response</span><span class="p">];</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">response</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="nx">found</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>

      <span class="k">if</span><span class="p">(</span><span class="nx">methodInvoked</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="nx">query</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">})</span>
  <span class="p">;</span>

  <span class="k">return</span> <span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
    <span class="o">?</span> <span class="nx">returnedValue</span>
    <span class="o">:</span> <span class="k">this</span>
  <span class="p">;</span>
<span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">nag</span><span class="p">.</span><span class="nx">settings</span> <span class="o">=</span> <span class="p">{</span>

  <span class="nx">name</span>        <span class="o">:</span> <span class="s1">&#39;Nag&#39;</span><span class="p">,</span>

  <span class="nx">debug</span>       <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">verbose</span>     <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">performance</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="nx">namespace</span>   <span class="o">:</span> <span class="s1">&#39;Nag&#39;</span><span class="p">,</span></pre></div></td></tr><tr id="section-83"><td class="docs"><div class="pilwrap"><a href="#section-83" class="pilcrow">&#182;</a></div><p>allows cookie to be overriden</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">persist</span>     <span class="o">:</span> <span class="kc">false</span><span class="p">,</span></pre></div></td></tr><tr id="section-84"><td class="docs"><div class="pilwrap"><a href="#section-84" class="pilcrow">&#182;</a></div><p>set to zero to require manually dismissal, otherwise hides on its own</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">displayTime</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>

  <span class="nx">animation</span>   <span class="o">:</span> <span class="p">{</span>
    <span class="nx">show</span> <span class="o">:</span> <span class="s1">&#39;slide&#39;</span><span class="p">,</span>
    <span class="nx">hide</span> <span class="o">:</span> <span class="s1">&#39;slide&#39;</span>
  <span class="p">},</span>

  <span class="nx">context</span>       <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">detachable</span>    <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>

  <span class="nx">expires</span>       <span class="o">:</span> <span class="mi">30</span><span class="p">,</span>
  <span class="nx">domain</span>        <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">path</span>          <span class="o">:</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span></pre></div></td></tr><tr id="section-85"><td class="docs"><div class="pilwrap"><a href="#section-85" class="pilcrow">&#182;</a></div><p>type of storage to use</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">storageMethod</span> <span class="o">:</span> <span class="s1">&#39;cookie&#39;</span><span class="p">,</span></pre></div></td></tr><tr id="section-86"><td class="docs"><div class="pilwrap"><a href="#section-86" class="pilcrow">&#182;</a></div><p>value to store in dismissed localstorage/cookie</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">key</span>           <span class="o">:</span> <span class="s1">&#39;nag&#39;</span><span class="p">,</span>
  <span class="nx">value</span>         <span class="o">:</span> <span class="s1">&#39;dismiss&#39;</span><span class="p">,</span>

  <span class="nx">error</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">noStorage</span> <span class="o">:</span> <span class="s1">&#39;Neither $.cookie or store is defined. A storage solution is required for storing state&#39;</span><span class="p">,</span>
    <span class="nx">method</span>    <span class="o">:</span> <span class="s1">&#39;The method you called is not defined.&#39;</span>
  <span class="p">},</span>

  <span class="nx">className</span>     <span class="o">:</span> <span class="p">{</span>
    <span class="nx">bottom</span> <span class="o">:</span> <span class="s1">&#39;bottom&#39;</span><span class="p">,</span>
    <span class="nx">fixed</span>  <span class="o">:</span> <span class="s1">&#39;fixed&#39;</span>
  <span class="p">},</span>

  <span class="nx">selector</span>      <span class="o">:</span> <span class="p">{</span>
    <span class="nx">close</span> <span class="o">:</span> <span class="s1">&#39;.close.icon&#39;</span>
  <span class="p">},</span>

  <span class="nx">speed</span>         <span class="o">:</span> <span class="mi">500</span><span class="p">,</span>
  <span class="nx">easing</span>        <span class="o">:</span> <span class="s1">&#39;easeOutQuad&#39;</span><span class="p">,</span>

  <span class="nx">onHide</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{}</span>

<span class="p">};</span>

<span class="p">})(</span> <span class="nx">jQuery</span><span class="p">,</span> <span class="nb">window</span> <span class="p">,</span> <span class="nb">document</span> <span class="p">);</span></pre></div></td></tr><tr id="section-87"><td class="docs"><div class="pilwrap"><a href="#section-87" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><h1>Semantic - Popup</h1>

<p><a href='http://github.com/jlukic/semantic-ui/'>http://github.com/jlukic/semantic-ui/</a></p></div><div class="body"><p>Copyright 2014 Contributor<br />Released under the MIT license<br /><a href='http://opensource.org/licenses/MIT'>http://opensource.org/licenses/MIT</a></p></div></div>
</td><td class="code"><div class="highlight"><pre><span class="p">;(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">$</span><span class="p">,</span> <span class="nb">window</span><span class="p">,</span> <span class="nb">document</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>

<span class="s2">&quot;use strict&quot;</span><span class="p">;</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">popup</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span>
    <span class="nx">$allModules</span>    <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
    <span class="nx">$document</span>      <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">),</span>

    <span class="nx">moduleSelector</span> <span class="o">=</span> <span class="nx">$allModules</span><span class="p">.</span><span class="nx">selector</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>

    <span class="nx">hasTouch</span>       <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;ontouchstart&#39;</span> <span class="k">in</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">),</span>
    <span class="nx">time</span>           <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">(),</span>
    <span class="nx">performance</span>    <span class="o">=</span> <span class="p">[],</span>

    <span class="nx">query</span>          <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="nx">methodInvoked</span>  <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">),</span>
    <span class="nx">queryArguments</span> <span class="o">=</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>

    <span class="nx">returnedValue</span>
  <span class="p">;</span>
  <span class="nx">$allModules</span>
    <span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span>
        <span class="nx">settings</span>        <span class="o">=</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span> <span class="p">)</span>
          <span class="o">?</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">popup</span><span class="p">.</span><span class="nx">settings</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">)</span>
          <span class="o">:</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">popup</span><span class="p">.</span><span class="nx">settings</span><span class="p">),</span>

        <span class="nx">selector</span>           <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">selector</span><span class="p">,</span>
        <span class="nx">className</span>          <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">className</span><span class="p">,</span>
        <span class="nx">error</span>              <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span>
        <span class="nx">metadata</span>           <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">metadata</span><span class="p">,</span>
        <span class="nx">namespace</span>          <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">namespace</span><span class="p">,</span>

        <span class="nx">eventNamespace</span>     <span class="o">=</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">namespace</span><span class="p">,</span>
        <span class="nx">moduleNamespace</span>    <span class="o">=</span> <span class="s1">&#39;module-&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">,</span>

        <span class="nx">$module</span>            <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
        <span class="nx">$context</span>           <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">context</span><span class="p">),</span>
        <span class="nx">$target</span>            <span class="o">=</span> <span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">target</span><span class="p">)</span>
          <span class="o">?</span> <span class="nx">$</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">target</span><span class="p">)</span>
          <span class="o">:</span> <span class="nx">$module</span><span class="p">,</span>

        <span class="nx">$window</span>            <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">),</span>
        <span class="nx">$body</span>              <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">),</span>
        <span class="nx">$popup</span><span class="p">,</span>
        <span class="nx">$offsetParent</span><span class="p">,</span>

        <span class="nx">searchDepth</span>        <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">triedPositions</span>     <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>

        <span class="nx">element</span>            <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
        <span class="nx">instance</span>           <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">),</span>
        <span class="nx">module</span>
      <span class="p">;</span>

      <span class="nx">module</span> <span class="o">=</span> <span class="p">{</span></pre></div></td></tr><tr id="section-88"><td class="docs"><div class="pilwrap"><a href="#section-88" class="pilcrow">&#182;</a></div><p>binds events</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Initializing module&#39;</span><span class="p">,</span> <span class="nx">$module</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">refresh</span><span class="p">();</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">on</span> <span class="o">==</span> <span class="s1">&#39;click&#39;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$module</span>
              <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">toggle</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">startEvent</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$module</span>
              <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">startEvent</span><span class="p">()</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">start</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">endEvent</span><span class="p">()</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">end</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">target</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Target set to element&#39;</span><span class="p">,</span> <span class="nx">$target</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="nx">$window</span>
            <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;resize&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">resize</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">exists</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">hoverable</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">popup</span><span class="p">();</span>
          <span class="p">}</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">instantiate</span><span class="p">();</span>
        <span class="p">},</span>

        <span class="nx">instantiate</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Storing instance of module&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">);</span>
          <span class="nx">instance</span> <span class="o">=</span> <span class="nx">module</span><span class="p">;</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">,</span> <span class="nx">instance</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">refresh</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">popup</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$popup</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">popup</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">inline</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$popup</span> <span class="o">=</span> <span class="nx">$target</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">selector</span><span class="p">.</span><span class="nx">popup</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">popup</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$popup</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">loading</span><span class="p">);</span>
            <span class="nx">$offsetParent</span> <span class="o">=</span> <span class="nx">$popup</span><span class="p">.</span><span class="nx">offsetParent</span><span class="p">();</span>
            <span class="nx">$popup</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">loading</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">$offsetParent</span> <span class="o">=</span> <span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">inline</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">$target</span><span class="p">.</span><span class="nx">offsetParent</span><span class="p">()</span>
                <span class="o">:</span> <span class="nx">$body</span>
            <span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$offsetParent</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;html&#39;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Page is popups offset parent&#39;</span><span class="p">);</span>
            <span class="nx">$offsetParent</span> <span class="o">=</span> <span class="nx">$body</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">reposition</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">refresh</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">position</span><span class="p">();</span>
        <span class="p">},</span>

        <span class="nx">destroy</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Destroying previous module&#39;</span><span class="p">);</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">$popup</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">settings</span><span class="p">.</span><span class="nx">preserve</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">removePopup</span><span class="p">();</span>
          <span class="p">}</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">eventNamespace</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">removeData</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">event</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">start</span><span class="o">:</span>  <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">delay</span> <span class="o">=</span> <span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">delay</span><span class="p">))</span>
                <span class="o">?</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">delay</span><span class="p">.</span><span class="nx">show</span>
                <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">delay</span>
            <span class="p">;</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">hideTimer</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">showTimer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">hidden</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">active</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">dropdown</span><span class="p">())</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span>
              <span class="p">}</span>
            <span class="p">},</span> <span class="nx">delay</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">end</span><span class="o">:</span>  <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">delay</span> <span class="o">=</span> <span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">delay</span><span class="p">))</span>
                <span class="o">?</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">delay</span><span class="p">.</span><span class="nx">hide</span>
                <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">delay</span>
            <span class="p">;</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">showTimer</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">hideTimer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">visible</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
              <span class="p">}</span>
            <span class="p">},</span> <span class="nx">delay</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">resize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">visible</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">position</span><span class="p">();</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span></pre></div></td></tr><tr id="section-89"><td class="docs"><div class="pilwrap"><a href="#section-89" class="pilcrow">&#182;</a></div><p>generates popup html from metadata</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">create</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">html</span>      <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">html</span><span class="p">)</span>      <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">html</span><span class="p">,</span>
            <span class="nx">variation</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">variation</span><span class="p">)</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">variation</span><span class="p">,</span>
            <span class="nx">title</span>     <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">title</span><span class="p">)</span>     <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">title</span><span class="p">,</span>
            <span class="nx">content</span>   <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">content</span><span class="p">)</span>   <span class="o">||</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">content</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">html</span> <span class="o">||</span> <span class="nx">content</span> <span class="o">||</span> <span class="nx">title</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Creating pop-up html&#39;</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">html</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">html</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">templates</span><span class="p">.</span><span class="nx">popup</span><span class="p">({</span>
                <span class="nx">title</span>   <span class="o">:</span> <span class="nx">title</span><span class="p">,</span>
                <span class="nx">content</span> <span class="o">:</span> <span class="nx">content</span>
              <span class="p">});</span>
            <span class="p">}</span>
            <span class="nx">$popup</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;&lt;div/&gt;&#39;</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">popup</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">variation</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">html</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">variation</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$popup</span>
                <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">variation</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">inline</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Inserting popup element inline&#39;</span><span class="p">,</span> <span class="nx">$popup</span><span class="p">);</span>
              <span class="nx">$popup</span>
                <span class="p">.</span><span class="nx">insertAfter</span><span class="p">(</span><span class="nx">$module</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Appending popup element to body&#39;</span><span class="p">,</span> <span class="nx">$popup</span><span class="p">);</span>
              <span class="nx">$popup</span>
                <span class="p">.</span><span class="nx">appendTo</span><span class="p">(</span> <span class="nx">$context</span> <span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">hoverable</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">popup</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onCreate</span><span class="p">,</span> <span class="nx">$popup</span><span class="p">)(</span><span class="nx">element</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">$target</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">selector</span><span class="p">.</span><span class="nx">popup</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">!==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Pre-existing popup found, reverting to inline&#39;</span><span class="p">);</span>
            <span class="nx">settings</span><span class="p">.</span><span class="nx">inline</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">refresh</span><span class="p">();</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">hoverable</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">popup</span><span class="p">();</span>
            <span class="p">}</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;No content specified skipping display&#39;</span><span class="p">,</span> <span class="nx">element</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span></pre></div></td></tr><tr id="section-90"><td class="docs"><div class="pilwrap"><a href="#section-90" class="pilcrow">&#182;</a></div><p>determines popup state</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">toggle</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Toggling pop-up&#39;</span><span class="p">);</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">hidden</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Popup is hidden, showing pop-up&#39;</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">unbind</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">hideAll</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Popup is visible, hiding pop-up&#39;</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">show</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">callback</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="o">?</span> <span class="nx">callback</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(){};</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Showing pop-up&#39;</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span><span class="p">);</span>
          <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">settings</span><span class="p">.</span><span class="nx">preserve</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">settings</span><span class="p">.</span><span class="nx">popup</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">refresh</span><span class="p">();</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">exists</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$popup</span> <span class="o">&amp;&amp;</span> <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">position</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">save</span><span class="p">.</span><span class="nx">conditions</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">animate</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="nx">callback</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>


        <span class="nx">hide</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">callback</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="o">?</span> <span class="nx">callback</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(){};</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">visible</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">unbind</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">visible</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">restore</span><span class="p">.</span><span class="nx">conditions</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">animate</span><span class="p">.</span><span class="nx">hide</span><span class="p">(</span><span class="nx">callback</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">hideAll</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">$</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">popup</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;:visible&#39;</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">popup</span><span class="p">(</span><span class="s1">&#39;hide&#39;</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">hideGracefully</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-91"><td class="docs"><div class="pilwrap"><a href="#section-91" class="pilcrow">&#182;</a></div><p>don't close on clicks inside popup</p>
</td><td class="code"><div class="highlight"><pre>          <span class="k">if</span><span class="p">(</span><span class="nx">event</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">).</span><span class="nx">closest</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">popup</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Click occurred outside popup hiding popup&#39;</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Click was inside popup, keeping popup open&#39;</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">exists</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">$popup</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">inline</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">popup</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span> <span class="nx">$popup</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">!==</span> <span class="mi">0</span> <span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span> <span class="nx">$popup</span><span class="p">.</span><span class="nx">closest</span><span class="p">(</span><span class="nx">$context</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">removePopup</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Removing popup&#39;</span><span class="p">);</span>
          <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onRemove</span><span class="p">,</span> <span class="nx">$popup</span><span class="p">)(</span><span class="nx">element</span><span class="p">);</span>
          <span class="nx">$popup</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
        <span class="p">},</span>

        <span class="nx">save</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">conditions</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span> <span class="o">=</span> <span class="p">{</span>
              <span class="nx">title</span><span class="o">:</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">)</span>
            <span class="p">};</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">title</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$module</span><span class="p">.</span><span class="nx">removeAttr</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Saving original attributes&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">title</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">restore</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">conditions</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">element</span><span class="p">.</span><span class="nx">blur</span><span class="p">();</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span> <span class="o">&amp;&amp;</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">title</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$module</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">title</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Restoring original attributes&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">title</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">animate</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">show</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">callback</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="o">?</span> <span class="nx">callback</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(){};</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">transition</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s1">&#39;is supported&#39;</span><span class="p">))</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">visible</span><span class="p">();</span>
              <span class="nx">$popup</span>
                <span class="p">.</span><span class="nx">transition</span><span class="p">({</span>
                  <span class="nx">animation</span>  <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span> <span class="o">+</span> <span class="s1">&#39; in&#39;</span><span class="p">,</span>
                  <span class="nx">queue</span>      <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                  <span class="nx">debug</span>      <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">,</span>
                  <span class="nx">verbose</span>    <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">verbose</span><span class="p">,</span>
                  <span class="nx">duration</span>   <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">,</span>
                  <span class="nx">onComplete</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                    <span class="nx">module</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
                    <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">$popup</span><span class="p">)(</span><span class="nx">element</span><span class="p">);</span>
                    <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onVisible</span><span class="p">,</span> <span class="nx">$popup</span><span class="p">)(</span><span class="nx">element</span><span class="p">);</span>
                  <span class="p">}</span>
                <span class="p">})</span>
              <span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">visible</span><span class="p">();</span>
              <span class="nx">$popup</span>
                <span class="p">.</span><span class="nx">stop</span><span class="p">()</span>
                <span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">easing</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
                  <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
                <span class="p">})</span>
              <span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onShow</span><span class="p">,</span> <span class="nx">$popup</span><span class="p">)(</span><span class="nx">element</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">hide</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">callback</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="o">?</span> <span class="nx">callback</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(){};</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Hiding pop-up&#39;</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">transition</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s1">&#39;is supported&#39;</span><span class="p">))</span> <span class="p">{</span>
              <span class="nx">$popup</span>
                <span class="p">.</span><span class="nx">transition</span><span class="p">({</span>
                  <span class="nx">animation</span>  <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span> <span class="o">+</span> <span class="s1">&#39; out&#39;</span><span class="p">,</span>
                  <span class="nx">queue</span>      <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                  <span class="nx">duration</span>   <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">,</span>
                  <span class="nx">debug</span>      <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">,</span>
                  <span class="nx">verbose</span>    <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">verbose</span><span class="p">,</span>
                  <span class="nx">onComplete</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                    <span class="nx">module</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>
                    <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">$popup</span><span class="p">)(</span><span class="nx">element</span><span class="p">);</span>
                    <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onHidden</span><span class="p">,</span> <span class="nx">$popup</span><span class="p">)(</span><span class="nx">element</span><span class="p">);</span>
                  <span class="p">}</span>
                <span class="p">})</span>
              <span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">$popup</span>
                <span class="p">.</span><span class="nx">stop</span><span class="p">()</span>
                <span class="p">.</span><span class="nx">fadeOut</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">easing</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>
                  <span class="nx">callback</span><span class="p">();</span>
                <span class="p">})</span>
              <span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onHide</span><span class="p">,</span> <span class="nx">$popup</span><span class="p">)(</span><span class="nx">element</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">get</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">startEvent</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">on</span> <span class="o">==</span> <span class="s1">&#39;hover&#39;</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="s1">&#39;mouseenter&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">on</span> <span class="o">==</span> <span class="s1">&#39;focus&#39;</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="s1">&#39;focus&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">endEvent</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">on</span> <span class="o">==</span> <span class="s1">&#39;hover&#39;</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="s1">&#39;mouseleave&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">on</span> <span class="o">==</span> <span class="s1">&#39;focus&#39;</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="s1">&#39;blur&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">offstagePosition</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">position</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">position</span> <span class="o">=</span> <span class="nx">position</span> <span class="o">||</span> <span class="kc">false</span><span class="p">,</span>
              <span class="nx">boundary</span>  <span class="o">=</span> <span class="p">{</span>
                <span class="nx">top</span>    <span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">scrollTop</span><span class="p">(),</span>
                <span class="nx">bottom</span> <span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">scrollTop</span><span class="p">()</span> <span class="o">+</span> <span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">height</span><span class="p">(),</span>
                <span class="nx">left</span>   <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="nx">right</span>  <span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">width</span><span class="p">()</span>
              <span class="p">},</span>
              <span class="nx">popup</span>     <span class="o">=</span> <span class="p">{</span>
                <span class="nx">width</span>  <span class="o">:</span> <span class="nx">$popup</span><span class="p">.</span><span class="nx">width</span><span class="p">(),</span>
                <span class="nx">height</span> <span class="o">:</span> <span class="nx">$popup</span><span class="p">.</span><span class="nx">height</span><span class="p">(),</span>
                <span class="nx">offset</span> <span class="o">:</span> <span class="nx">$popup</span><span class="p">.</span><span class="nx">offset</span><span class="p">()</span>
              <span class="p">},</span>
              <span class="nx">offstage</span>  <span class="o">=</span> <span class="p">{},</span>
              <span class="nx">offstagePositions</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">popup</span><span class="p">.</span><span class="nx">offset</span> <span class="o">&amp;&amp;</span> <span class="nx">position</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Checking if outside viewable area&#39;</span><span class="p">,</span> <span class="nx">popup</span><span class="p">.</span><span class="nx">offset</span><span class="p">);</span>
              <span class="nx">offstage</span> <span class="o">=</span> <span class="p">{</span>
                <span class="nx">top</span>    <span class="o">:</span> <span class="p">(</span><span class="nx">popup</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">top</span> <span class="o">&lt;</span> <span class="nx">boundary</span><span class="p">.</span><span class="nx">top</span><span class="p">),</span>
                <span class="nx">bottom</span> <span class="o">:</span> <span class="p">(</span><span class="nx">popup</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">top</span> <span class="o">+</span> <span class="nx">popup</span><span class="p">.</span><span class="nx">height</span> <span class="o">&gt;</span> <span class="nx">boundary</span><span class="p">.</span><span class="nx">bottom</span><span class="p">),</span>
                <span class="nx">right</span>  <span class="o">:</span> <span class="p">(</span><span class="nx">popup</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">left</span> <span class="o">+</span> <span class="nx">popup</span><span class="p">.</span><span class="nx">width</span> <span class="o">&gt;</span> <span class="nx">boundary</span><span class="p">.</span><span class="nx">right</span><span class="p">),</span>
                <span class="nx">left</span>   <span class="o">:</span> <span class="p">(</span><span class="nx">popup</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">left</span> <span class="o">&lt;</span> <span class="nx">boundary</span><span class="p">.</span><span class="nx">left</span><span class="p">)</span>
              <span class="p">};</span>
            <span class="p">}</span></pre></div></td></tr><tr id="section-92"><td class="docs"><div class="pilwrap"><a href="#section-92" class="pilcrow">&#182;</a></div><p>return only boundaries that have been surpassed</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">offstage</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">direction</span><span class="p">,</span> <span class="nx">isOffstage</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">isOffstage</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">offstagePositions</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">direction</span><span class="p">);</span>
              <span class="p">}</span>
            <span class="p">});</span>
            <span class="k">return</span> <span class="p">(</span><span class="nx">offstagePositions</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
              <span class="o">?</span> <span class="nx">offstagePositions</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
              <span class="o">:</span> <span class="kc">false</span>
            <span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">positions</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">{</span>
              <span class="s1">&#39;top left&#39;</span>      <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
              <span class="s1">&#39;top center&#39;</span>    <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
              <span class="s1">&#39;top right&#39;</span>     <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
              <span class="s1">&#39;bottom left&#39;</span>   <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
              <span class="s1">&#39;bottom center&#39;</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
              <span class="s1">&#39;bottom right&#39;</span>  <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
              <span class="s1">&#39;left center&#39;</span>   <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
              <span class="s1">&#39;right center&#39;</span>  <span class="o">:</span> <span class="kc">false</span>
            <span class="p">};</span>
          <span class="p">},</span>
          <span class="nx">nextPosition</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">position</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">positions</span>          <span class="o">=</span> <span class="nx">position</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">),</span>
              <span class="nx">verticalPosition</span>   <span class="o">=</span> <span class="nx">positions</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
              <span class="nx">horizontalPosition</span> <span class="o">=</span> <span class="nx">positions</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
              <span class="nx">opposite</span> <span class="o">=</span> <span class="p">{</span>
                <span class="nx">top</span>    <span class="o">:</span> <span class="s1">&#39;bottom&#39;</span><span class="p">,</span>
                <span class="nx">bottom</span> <span class="o">:</span> <span class="s1">&#39;top&#39;</span><span class="p">,</span>
                <span class="nx">left</span>   <span class="o">:</span> <span class="s1">&#39;right&#39;</span><span class="p">,</span>
                <span class="nx">right</span>  <span class="o">:</span> <span class="s1">&#39;left&#39;</span>
              <span class="p">},</span>
              <span class="nx">adjacent</span> <span class="o">=</span> <span class="p">{</span>
                <span class="nx">left</span>   <span class="o">:</span> <span class="s1">&#39;center&#39;</span><span class="p">,</span>
                <span class="nx">center</span> <span class="o">:</span> <span class="s1">&#39;right&#39;</span><span class="p">,</span>
                <span class="nx">right</span>  <span class="o">:</span> <span class="s1">&#39;left&#39;</span>
              <span class="p">},</span>
              <span class="nx">backup</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;top left&#39;</span>      <span class="o">:</span> <span class="s1">&#39;top center&#39;</span><span class="p">,</span>
                <span class="s1">&#39;top center&#39;</span>    <span class="o">:</span> <span class="s1">&#39;top right&#39;</span><span class="p">,</span>
                <span class="s1">&#39;top right&#39;</span>     <span class="o">:</span> <span class="s1">&#39;right center&#39;</span><span class="p">,</span>
                <span class="s1">&#39;right center&#39;</span>  <span class="o">:</span> <span class="s1">&#39;bottom right&#39;</span><span class="p">,</span>
                <span class="s1">&#39;bottom right&#39;</span>  <span class="o">:</span> <span class="s1">&#39;bottom center&#39;</span><span class="p">,</span>
                <span class="s1">&#39;bottom center&#39;</span> <span class="o">:</span> <span class="s1">&#39;bottom left&#39;</span><span class="p">,</span>
                <span class="s1">&#39;bottom left&#39;</span>   <span class="o">:</span> <span class="s1">&#39;left center&#39;</span><span class="p">,</span>
                <span class="s1">&#39;left center&#39;</span>   <span class="o">:</span> <span class="s1">&#39;top left&#39;</span>
              <span class="p">},</span>
              <span class="nx">adjacentsAvailable</span> <span class="o">=</span> <span class="p">(</span><span class="nx">verticalPosition</span> <span class="o">==</span> <span class="s1">&#39;top&#39;</span> <span class="o">||</span> <span class="nx">verticalPosition</span> <span class="o">==</span> <span class="s1">&#39;bottom&#39;</span><span class="p">),</span>
              <span class="nx">oppositeTried</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
              <span class="nx">adjacentTried</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
              <span class="nx">nextPosition</span>  <span class="o">=</span> <span class="kc">false</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">triedPositions</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;All available positions available&#39;</span><span class="p">);</span>
              <span class="nx">triedPositions</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">positions</span><span class="p">();</span>
            <span class="p">}</span>

            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Recording last position tried&#39;</span><span class="p">,</span> <span class="nx">position</span><span class="p">);</span>
            <span class="nx">triedPositions</span><span class="p">[</span><span class="nx">position</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">prefer</span> <span class="o">===</span> <span class="s1">&#39;opposite&#39;</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">nextPosition</span>  <span class="o">=</span> <span class="p">[</span><span class="nx">opposite</span><span class="p">[</span><span class="nx">verticalPosition</span><span class="p">],</span> <span class="nx">horizontalPosition</span><span class="p">];</span>
              <span class="nx">nextPosition</span>  <span class="o">=</span> <span class="nx">nextPosition</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">);</span>
              <span class="nx">oppositeTried</span> <span class="o">=</span> <span class="p">(</span><span class="nx">triedPositions</span><span class="p">[</span><span class="nx">nextPosition</span><span class="p">]</span> <span class="o">===</span> <span class="kc">true</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Trying opposite strategy&#39;</span><span class="p">,</span> <span class="nx">nextPosition</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">((</span><span class="nx">settings</span><span class="p">.</span><span class="nx">prefer</span> <span class="o">===</span> <span class="s1">&#39;adjacent&#39;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">adjacentsAvailable</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">nextPosition</span>  <span class="o">=</span> <span class="p">[</span><span class="nx">verticalPosition</span><span class="p">,</span> <span class="nx">adjacent</span><span class="p">[</span><span class="nx">horizontalPosition</span><span class="p">]];</span>
              <span class="nx">nextPosition</span>  <span class="o">=</span> <span class="nx">nextPosition</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">);</span>
              <span class="nx">adjacentTried</span> <span class="o">=</span> <span class="p">(</span><span class="nx">triedPositions</span><span class="p">[</span><span class="nx">nextPosition</span><span class="p">]</span> <span class="o">===</span> <span class="kc">true</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Trying adjacent strategy&#39;</span><span class="p">,</span> <span class="nx">nextPosition</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">adjacentTried</span> <span class="o">||</span> <span class="nx">oppositeTried</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Using backup position&#39;</span><span class="p">,</span> <span class="nx">nextPosition</span><span class="p">);</span>
              <span class="nx">nextPosition</span> <span class="o">=</span> <span class="nx">backup</span><span class="p">[</span><span class="nx">position</span><span class="p">];</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">nextPosition</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">set</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">position</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">position</span><span class="p">,</span> <span class="nx">arrowOffset</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">windowWidth</span>   <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">width</span><span class="p">(),</span>
              <span class="nx">windowHeight</span>  <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">height</span><span class="p">(),</span>

              <span class="nx">targetWidth</span>   <span class="o">=</span> <span class="nx">$target</span><span class="p">.</span><span class="nx">outerWidth</span><span class="p">(),</span>
              <span class="nx">targetHeight</span>  <span class="o">=</span> <span class="nx">$target</span><span class="p">.</span><span class="nx">outerHeight</span><span class="p">(),</span>

              <span class="nx">popupWidth</span>    <span class="o">=</span> <span class="nx">$popup</span><span class="p">.</span><span class="nx">outerWidth</span><span class="p">(),</span>
              <span class="nx">popupHeight</span>   <span class="o">=</span> <span class="nx">$popup</span><span class="p">.</span><span class="nx">outerHeight</span><span class="p">(),</span>

              <span class="nx">parentWidth</span>   <span class="o">=</span> <span class="nx">$offsetParent</span><span class="p">.</span><span class="nx">outerWidth</span><span class="p">(),</span>
              <span class="nx">parentHeight</span>  <span class="o">=</span> <span class="nx">$offsetParent</span><span class="p">.</span><span class="nx">outerHeight</span><span class="p">(),</span>

              <span class="nx">distanceAway</span>  <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">distanceAway</span><span class="p">,</span>

              <span class="nx">targetElement</span> <span class="o">=</span> <span class="nx">$target</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>

              <span class="nx">marginTop</span>     <span class="o">=</span> <span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">inline</span><span class="p">)</span>
                <span class="o">?</span> <span class="nb">parseInt</span><span class="p">(</span> <span class="nb">window</span><span class="p">.</span><span class="nx">getComputedStyle</span><span class="p">(</span><span class="nx">targetElement</span><span class="p">).</span><span class="nx">getPropertyValue</span><span class="p">(</span><span class="s1">&#39;margin-top&#39;</span><span class="p">),</span> <span class="mi">10</span><span class="p">)</span>
                <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
              <span class="nx">marginLeft</span>    <span class="o">=</span> <span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">inline</span><span class="p">)</span>
                <span class="o">?</span> <span class="nb">parseInt</span><span class="p">(</span> <span class="nb">window</span><span class="p">.</span><span class="nx">getComputedStyle</span><span class="p">(</span><span class="nx">targetElement</span><span class="p">).</span><span class="nx">getPropertyValue</span><span class="p">(</span><span class="s1">&#39;margin-left&#39;</span><span class="p">),</span> <span class="mi">10</span><span class="p">)</span>
                <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>

              <span class="nx">target</span>        <span class="o">=</span> <span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">inline</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">popup</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">$target</span><span class="p">.</span><span class="nx">position</span><span class="p">()</span>
                <span class="o">:</span> <span class="nx">$target</span><span class="p">.</span><span class="nx">offset</span><span class="p">(),</span>

              <span class="nx">positioning</span><span class="p">,</span>
              <span class="nx">offstagePosition</span>
            <span class="p">;</span>
            <span class="nx">position</span>    <span class="o">=</span> <span class="nx">position</span>    <span class="o">||</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">position</span><span class="p">)</span>    <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">position</span><span class="p">;</span>
            <span class="nx">arrowOffset</span> <span class="o">=</span> <span class="nx">arrowOffset</span> <span class="o">||</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">offset</span><span class="p">)</span>      <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">offset</span><span class="p">;</span>

            <span class="k">if</span><span class="p">(</span><span class="nx">searchDepth</span> <span class="o">==</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">maxSearchDepth</span> <span class="o">&amp;&amp;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">lastResort</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Using last resort position to display&#39;</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">lastResort</span><span class="p">);</span>
              <span class="nx">position</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">lastResort</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">inline</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Adding targets margin to calculation&#39;</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">position</span> <span class="o">==</span> <span class="s1">&#39;left center&#39;</span> <span class="o">||</span> <span class="nx">position</span> <span class="o">==</span> <span class="s1">&#39;right center&#39;</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">arrowOffset</span>  <span class="o">+=</span> <span class="nx">marginTop</span><span class="p">;</span>
                <span class="nx">distanceAway</span> <span class="o">+=</span> <span class="o">-</span><span class="nx">marginLeft</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">position</span> <span class="o">==</span> <span class="s1">&#39;top left&#39;</span> <span class="o">||</span> <span class="nx">position</span> <span class="o">==</span> <span class="s1">&#39;top center&#39;</span> <span class="o">||</span> <span class="nx">position</span> <span class="o">==</span> <span class="s1">&#39;top right&#39;</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">arrowOffset</span>  <span class="o">+=</span> <span class="nx">marginLeft</span><span class="p">;</span>
                <span class="nx">distanceAway</span> <span class="o">-=</span> <span class="nx">marginTop</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">arrowOffset</span>  <span class="o">+=</span> <span class="nx">marginLeft</span><span class="p">;</span>
                <span class="nx">distanceAway</span> <span class="o">+=</span> <span class="nx">marginTop</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Calculating popup positioning&#39;</span><span class="p">,</span> <span class="nx">position</span><span class="p">);</span>
            <span class="k">switch</span><span class="p">(</span><span class="nx">position</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">case</span> <span class="s1">&#39;top left&#39;</span><span class="o">:</span>
                <span class="nx">positioning</span> <span class="o">=</span> <span class="p">{</span>
                  <span class="nx">top</span>    <span class="o">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span>
                  <span class="nx">bottom</span> <span class="o">:</span> <span class="nx">parentHeight</span> <span class="o">-</span> <span class="nx">target</span><span class="p">.</span><span class="nx">top</span> <span class="o">+</span> <span class="nx">distanceAway</span><span class="p">,</span>
                  <span class="nx">left</span>   <span class="o">:</span> <span class="nx">target</span><span class="p">.</span><span class="nx">left</span> <span class="o">+</span> <span class="nx">arrowOffset</span><span class="p">,</span>
                  <span class="nx">right</span>  <span class="o">:</span> <span class="s1">&#39;auto&#39;</span>
                <span class="p">};</span>
              <span class="k">break</span><span class="p">;</span>
              <span class="k">case</span> <span class="s1">&#39;top center&#39;</span><span class="o">:</span>
                <span class="nx">positioning</span> <span class="o">=</span> <span class="p">{</span>
                  <span class="nx">bottom</span> <span class="o">:</span> <span class="nx">parentHeight</span> <span class="o">-</span> <span class="nx">target</span><span class="p">.</span><span class="nx">top</span> <span class="o">+</span> <span class="nx">distanceAway</span><span class="p">,</span>
                  <span class="nx">left</span>   <span class="o">:</span> <span class="nx">target</span><span class="p">.</span><span class="nx">left</span> <span class="o">+</span> <span class="p">(</span><span class="nx">targetWidth</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="nx">popupWidth</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="nx">arrowOffset</span><span class="p">,</span>
                  <span class="nx">top</span>    <span class="o">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span>
                  <span class="nx">right</span>  <span class="o">:</span> <span class="s1">&#39;auto&#39;</span>
                <span class="p">};</span>
              <span class="k">break</span><span class="p">;</span>
              <span class="k">case</span> <span class="s1">&#39;top right&#39;</span><span class="o">:</span>
                <span class="nx">positioning</span> <span class="o">=</span> <span class="p">{</span>
                  <span class="nx">bottom</span> <span class="o">:</span>  <span class="nx">parentHeight</span> <span class="o">-</span> <span class="nx">target</span><span class="p">.</span><span class="nx">top</span> <span class="o">+</span> <span class="nx">distanceAway</span><span class="p">,</span>
                  <span class="nx">right</span>  <span class="o">:</span>  <span class="nx">parentWidth</span> <span class="o">-</span> <span class="nx">target</span><span class="p">.</span><span class="nx">left</span> <span class="o">-</span> <span class="nx">targetWidth</span> <span class="o">-</span> <span class="nx">arrowOffset</span><span class="p">,</span>
                  <span class="nx">top</span>    <span class="o">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span>
                  <span class="nx">left</span>   <span class="o">:</span> <span class="s1">&#39;auto&#39;</span>
                <span class="p">};</span>
              <span class="k">break</span><span class="p">;</span>
              <span class="k">case</span> <span class="s1">&#39;left center&#39;</span><span class="o">:</span>
                <span class="nx">positioning</span> <span class="o">=</span> <span class="p">{</span>
                  <span class="nx">top</span>    <span class="o">:</span> <span class="nx">target</span><span class="p">.</span><span class="nx">top</span> <span class="o">+</span> <span class="p">(</span><span class="nx">targetHeight</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="nx">popupHeight</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="nx">arrowOffset</span><span class="p">,</span>
                  <span class="nx">right</span>  <span class="o">:</span> <span class="nx">parentWidth</span> <span class="o">-</span> <span class="nx">target</span><span class="p">.</span><span class="nx">left</span> <span class="o">+</span> <span class="nx">distanceAway</span><span class="p">,</span>
                  <span class="nx">left</span>   <span class="o">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span>
                  <span class="nx">bottom</span> <span class="o">:</span> <span class="s1">&#39;auto&#39;</span>
                <span class="p">};</span>
              <span class="k">break</span><span class="p">;</span>
              <span class="k">case</span> <span class="s1">&#39;right center&#39;</span><span class="o">:</span>
                <span class="nx">positioning</span> <span class="o">=</span> <span class="p">{</span>
                  <span class="nx">top</span>    <span class="o">:</span> <span class="nx">target</span><span class="p">.</span><span class="nx">top</span> <span class="o">+</span> <span class="p">(</span><span class="nx">targetHeight</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="nx">popupHeight</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="nx">arrowOffset</span><span class="p">,</span>
                  <span class="nx">left</span>   <span class="o">:</span> <span class="nx">target</span><span class="p">.</span><span class="nx">left</span> <span class="o">+</span> <span class="nx">targetWidth</span> <span class="o">+</span> <span class="nx">distanceAway</span><span class="p">,</span>
                  <span class="nx">bottom</span> <span class="o">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span>
                  <span class="nx">right</span>  <span class="o">:</span> <span class="s1">&#39;auto&#39;</span>
                <span class="p">};</span>
              <span class="k">break</span><span class="p">;</span>
              <span class="k">case</span> <span class="s1">&#39;bottom left&#39;</span><span class="o">:</span>
                <span class="nx">positioning</span> <span class="o">=</span> <span class="p">{</span>
                  <span class="nx">top</span>    <span class="o">:</span> <span class="nx">target</span><span class="p">.</span><span class="nx">top</span> <span class="o">+</span> <span class="nx">targetHeight</span> <span class="o">+</span> <span class="nx">distanceAway</span><span class="p">,</span>
                  <span class="nx">left</span>   <span class="o">:</span> <span class="nx">target</span><span class="p">.</span><span class="nx">left</span> <span class="o">+</span> <span class="nx">arrowOffset</span><span class="p">,</span>
                  <span class="nx">bottom</span> <span class="o">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span>
                  <span class="nx">right</span>  <span class="o">:</span> <span class="s1">&#39;auto&#39;</span>
                <span class="p">};</span>
              <span class="k">break</span><span class="p">;</span>
              <span class="k">case</span> <span class="s1">&#39;bottom center&#39;</span><span class="o">:</span>
                <span class="nx">positioning</span> <span class="o">=</span> <span class="p">{</span>
                  <span class="nx">top</span>    <span class="o">:</span> <span class="nx">target</span><span class="p">.</span><span class="nx">top</span> <span class="o">+</span> <span class="nx">targetHeight</span> <span class="o">+</span> <span class="nx">distanceAway</span><span class="p">,</span>
                  <span class="nx">left</span>   <span class="o">:</span> <span class="nx">target</span><span class="p">.</span><span class="nx">left</span> <span class="o">+</span> <span class="p">(</span><span class="nx">targetWidth</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="nx">popupWidth</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="nx">arrowOffset</span><span class="p">,</span>
                  <span class="nx">bottom</span> <span class="o">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span>
                  <span class="nx">right</span>  <span class="o">:</span> <span class="s1">&#39;auto&#39;</span>
                <span class="p">};</span>
              <span class="k">break</span><span class="p">;</span>
              <span class="k">case</span> <span class="s1">&#39;bottom right&#39;</span><span class="o">:</span>
                <span class="nx">positioning</span> <span class="o">=</span> <span class="p">{</span>
                  <span class="nx">top</span>    <span class="o">:</span> <span class="nx">target</span><span class="p">.</span><span class="nx">top</span> <span class="o">+</span> <span class="nx">targetHeight</span> <span class="o">+</span> <span class="nx">distanceAway</span><span class="p">,</span>
                  <span class="nx">right</span>  <span class="o">:</span> <span class="nx">parentWidth</span> <span class="o">-</span> <span class="nx">target</span><span class="p">.</span><span class="nx">left</span>  <span class="o">-</span> <span class="nx">targetWidth</span> <span class="o">-</span> <span class="nx">arrowOffset</span><span class="p">,</span>
                  <span class="nx">left</span>   <span class="o">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span>
                  <span class="nx">bottom</span> <span class="o">:</span> <span class="s1">&#39;auto&#39;</span>
                <span class="p">};</span>
              <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">positioning</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">invalidPosition</span><span class="p">,</span> <span class="nx">position</span><span class="p">);</span>
            <span class="p">}</span></pre></div></td></tr><tr id="section-93"><td class="docs"><div class="pilwrap"><a href="#section-93" class="pilcrow">&#182;</a></div><p>tentatively place on stage</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">$popup</span>
              <span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="nx">positioning</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">position</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">position</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">loading</span><span class="p">)</span>
            <span class="p">;</span></pre></div></td></tr><tr id="section-94"><td class="docs"><div class="pilwrap"><a href="#section-94" class="pilcrow">&#182;</a></div><p>check if is offstage</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">offstagePosition</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">offstagePosition</span><span class="p">(</span><span class="nx">position</span><span class="p">);</span></pre></div></td></tr><tr id="section-95"><td class="docs"><div class="pilwrap"><a href="#section-95" class="pilcrow">&#182;</a></div><p>recursively find new positioning</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">if</span><span class="p">(</span><span class="nx">offstagePosition</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Popup cant fit into viewport&#39;</span><span class="p">,</span> <span class="nx">offstagePosition</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">searchDepth</span> <span class="o">&lt;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">maxSearchDepth</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">searchDepth</span><span class="o">++</span><span class="p">;</span>
                <span class="nx">position</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">nextPosition</span><span class="p">(</span><span class="nx">position</span><span class="p">);</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Trying new position&#39;</span><span class="p">,</span> <span class="nx">position</span><span class="p">);</span>
                <span class="k">return</span> <span class="p">(</span><span class="nx">$popup</span><span class="p">)</span>
                  <span class="o">?</span> <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">position</span><span class="p">(</span><span class="nx">position</span><span class="p">)</span>
                  <span class="o">:</span> <span class="kc">false</span>
                <span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">settings</span><span class="p">.</span><span class="nx">lastResort</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Popup could not find a position in view&#39;</span><span class="p">,</span> <span class="nx">$popup</span><span class="p">);</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">cannotPlace</span><span class="p">);</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">attempts</span><span class="p">();</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">loading</span><span class="p">();</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">}</span>

            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Position is on stage&#39;</span><span class="p">,</span> <span class="nx">position</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">attempts</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">fluidWidth</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">loading</span><span class="p">();</span>
            <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
          <span class="p">},</span>

          <span class="nx">fluidWidth</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">setFluidWidth</span> <span class="o">&amp;&amp;</span> <span class="nx">$popup</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">fluid</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">$popup</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;width&#39;</span><span class="p">,</span> <span class="nx">$offsetParent</span><span class="p">.</span><span class="nx">width</span><span class="p">());</span>
            <span class="p">}</span>
          <span class="p">},</span>

          <span class="nx">visible</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">visible</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">remove</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">loading</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$popup</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">loading</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">visible</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">visible</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">attempts</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Resetting all searched positions&#39;</span><span class="p">);</span>
            <span class="nx">searchDepth</span>    <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="nx">triedPositions</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">bind</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">popup</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Allowing hover events on popup to prevent closing&#39;</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">$popup</span> <span class="o">&amp;&amp;</span> <span class="nx">$popup</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$popup</span>
                <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;mouseenter&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">start</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;mouseleave&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">end</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">close</span><span class="o">:</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">hideOnScroll</span> <span class="o">===</span> <span class="kc">true</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">hideOnScroll</span> <span class="o">==</span> <span class="s1">&#39;auto&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">on</span> <span class="o">!=</span> <span class="s1">&#39;click&#39;</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$document</span>
                <span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="s1">&#39;touchmove&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">hideGracefully</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="s1">&#39;scroll&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">hideGracefully</span><span class="p">)</span>
              <span class="p">;</span>
              <span class="nx">$context</span>
                <span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="s1">&#39;touchmove&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">hideGracefully</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="s1">&#39;scroll&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">hideGracefully</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">on</span> <span class="o">==</span> <span class="s1">&#39;click&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">closable</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Binding popup close event to document&#39;</span><span class="p">);</span>
              <span class="nx">$document</span>
                <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Pop-up clickaway intent detected&#39;</span><span class="p">);</span>
                  <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">hideGracefully</span><span class="p">,</span> <span class="nx">element</span><span class="p">)(</span><span class="nx">event</span><span class="p">);</span>
                <span class="p">})</span>
              <span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">unbind</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">close</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">hideOnScroll</span> <span class="o">===</span> <span class="kc">true</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">hideOnScroll</span> <span class="o">==</span> <span class="s1">&#39;auto&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">on</span> <span class="o">!=</span> <span class="s1">&#39;click&#39;</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$document</span>
                <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="s1">&#39;scroll&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">hide</span><span class="p">)</span>
              <span class="p">;</span>
              <span class="nx">$context</span>
                <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="s1">&#39;scroll&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">hide</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">on</span> <span class="o">==</span> <span class="s1">&#39;click&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">closable</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Removing close event from document&#39;</span><span class="p">);</span>
              <span class="nx">$document</span>
                <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="s1">&#39;click&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">is</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">active</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">animating</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span> <span class="nx">$popup</span> <span class="o">&amp;&amp;</span> <span class="nx">$popup</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;:animated&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="nx">$popup</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">animating</span><span class="p">)</span> <span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">visible</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$popup</span> <span class="o">&amp;&amp;</span> <span class="nx">$popup</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;:visible&#39;</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">dropdown</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">dropdown</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">hidden</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">visible</span><span class="p">();</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">reset</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">visible</span><span class="p">();</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">preserve</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">popup</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">transition</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$popup</span>
                <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s1">&#39;remove transition&#39;</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">removePopup</span><span class="p">();</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">setting</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">settings</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">internal</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">module</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">debug</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">verbose</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">&amp;&amp;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">performance</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">log</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">currentTime</span><span class="p">,</span>
              <span class="nx">executionTime</span><span class="p">,</span>
              <span class="nx">previousTime</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">currentTime</span>   <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>
              <span class="nx">previousTime</span>  <span class="o">=</span> <span class="nx">time</span> <span class="o">||</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">executionTime</span> <span class="o">=</span> <span class="nx">currentTime</span> <span class="o">-</span> <span class="nx">previousTime</span><span class="p">;</span>
              <span class="nx">time</span>          <span class="o">=</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">performance</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
                <span class="s1">&#39;Name&#39;</span>           <span class="o">:</span> <span class="nx">message</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="s1">&#39;Arguments&#39;</span>      <span class="o">:</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Element&#39;</span>        <span class="o">:</span> <span class="nx">element</span><span class="p">,</span>
                <span class="s1">&#39;Execution Time&#39;</span> <span class="o">:</span> <span class="nx">executionTime</span>
              <span class="p">});</span>
            <span class="p">}</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">display</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">title</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span>
              <span class="nx">totalTime</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="p">;</span>
            <span class="nx">time</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">totalTime</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">];</span>
            <span class="p">});</span>
            <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">totalTime</span> <span class="o">+</span> <span class="s1">&#39;ms&#39;</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">moduleSelector</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; \&#39;&#39;</span> <span class="o">+</span> <span class="nx">moduleSelector</span> <span class="o">+</span> <span class="s1">&#39;\&#39;&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span> <span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">group</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">console</span><span class="p">.</span><span class="nx">table</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">performance</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupCollapsed</span><span class="p">(</span><span class="nx">title</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">performance</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;ms&#39;</span><span class="p">);</span>
                <span class="p">});</span>
              <span class="p">}</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupEnd</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">performance</span> <span class="o">=</span> <span class="p">[];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">invoke</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">object</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">,</span>
            <span class="nx">maxDepth</span><span class="p">,</span>
            <span class="nx">found</span><span class="p">,</span>
            <span class="nx">response</span>
          <span class="p">;</span>
          <span class="nx">passedArguments</span> <span class="o">=</span> <span class="nx">passedArguments</span> <span class="o">||</span> <span class="nx">queryArguments</span><span class="p">;</span>
          <span class="nx">context</span>         <span class="o">=</span> <span class="nx">element</span>         <span class="o">||</span> <span class="nx">context</span><span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">object</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">query</span>    <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/[\. ]/</span><span class="p">);</span>
            <span class="nx">maxDepth</span> <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">depth</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span> <span class="nx">camelCaseValue</span> <span class="o">=</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">value</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="o">:</span> <span class="nx">query</span>
              <span class="p">;</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">});</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">found</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">found</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">returnedValue</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">returnedValue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="p">[</span><span class="nx">returnedValue</span><span class="p">,</span> <span class="nx">response</span><span class="p">];</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">response</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="nx">found</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>

      <span class="k">if</span><span class="p">(</span><span class="nx">methodInvoked</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="nx">query</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">})</span>
  <span class="p">;</span>

  <span class="k">return</span> <span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
    <span class="o">?</span> <span class="nx">returnedValue</span>
    <span class="o">:</span> <span class="k">this</span>
  <span class="p">;</span>
<span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">popup</span><span class="p">.</span><span class="nx">settings</span> <span class="o">=</span> <span class="p">{</span>

  <span class="nx">name</span>         <span class="o">:</span> <span class="s1">&#39;Popup&#39;</span><span class="p">,</span>

  <span class="nx">debug</span>        <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">verbose</span>      <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">performance</span>  <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">namespace</span>    <span class="o">:</span> <span class="s1">&#39;popup&#39;</span><span class="p">,</span>

  <span class="nx">onCreate</span>     <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>
  <span class="nx">onRemove</span>     <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>

  <span class="nx">onShow</span>       <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>
  <span class="nx">onVisible</span>    <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>
  <span class="nx">onHide</span>       <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>
  <span class="nx">onHidden</span>     <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>

  <span class="nx">variation</span>    <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
  <span class="nx">content</span>      <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">html</span>         <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">title</span>        <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>

  <span class="nx">on</span>           <span class="o">:</span> <span class="s1">&#39;hover&#39;</span><span class="p">,</span>
  <span class="nx">closable</span>     <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">hideOnScroll</span> <span class="o">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span>

  <span class="nx">context</span>      <span class="o">:</span> <span class="s1">&#39;body&#39;</span><span class="p">,</span>

  <span class="nx">position</span>     <span class="o">:</span> <span class="s1">&#39;top left&#39;</span><span class="p">,</span>
  <span class="nx">prefer</span>       <span class="o">:</span> <span class="s1">&#39;opposite&#39;</span><span class="p">,</span>
  <span class="nx">lastResort</span>   <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>

  <span class="nx">delay</span>        <span class="o">:</span> <span class="p">{</span>
    <span class="nx">show</span> <span class="o">:</span> <span class="mi">30</span><span class="p">,</span>
    <span class="nx">hide</span> <span class="o">:</span> <span class="mi">0</span>
  <span class="p">},</span>

  <span class="nx">setFluidWidth</span>  <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="nx">target</span>         <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">popup</span>          <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">inline</span>         <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">preserve</span>       <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">hoverable</span>      <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>

  <span class="nx">duration</span>       <span class="o">:</span> <span class="mi">200</span><span class="p">,</span>
  <span class="nx">easing</span>         <span class="o">:</span> <span class="s1">&#39;easeOutQuint&#39;</span><span class="p">,</span>
  <span class="nx">transition</span>     <span class="o">:</span> <span class="s1">&#39;scale&#39;</span><span class="p">,</span>

  <span class="nx">distanceAway</span>   <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="nx">offset</span>         <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="nx">maxSearchDepth</span> <span class="o">:</span> <span class="mi">20</span><span class="p">,</span>

  <span class="nx">error</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">invalidPosition</span> <span class="o">:</span> <span class="s1">&#39;The position you specified is not a valid position&#39;</span><span class="p">,</span>
    <span class="nx">cannotPlace</span>     <span class="o">:</span> <span class="s1">&#39;No visible position could be found for the popup&#39;</span><span class="p">,</span>
    <span class="nx">method</span>          <span class="o">:</span> <span class="s1">&#39;The method you called is not defined.&#39;</span>
  <span class="p">},</span>

  <span class="nx">metadata</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">content</span>   <span class="o">:</span> <span class="s1">&#39;content&#39;</span><span class="p">,</span>
    <span class="nx">html</span>      <span class="o">:</span> <span class="s1">&#39;html&#39;</span><span class="p">,</span>
    <span class="nx">offset</span>    <span class="o">:</span> <span class="s1">&#39;offset&#39;</span><span class="p">,</span>
    <span class="nx">position</span>  <span class="o">:</span> <span class="s1">&#39;position&#39;</span><span class="p">,</span>
    <span class="nx">title</span>     <span class="o">:</span> <span class="s1">&#39;title&#39;</span><span class="p">,</span>
    <span class="nx">variation</span> <span class="o">:</span> <span class="s1">&#39;variation&#39;</span>
  <span class="p">},</span>

  <span class="nx">className</span>   <span class="o">:</span> <span class="p">{</span>
    <span class="nx">active</span>    <span class="o">:</span> <span class="s1">&#39;active&#39;</span><span class="p">,</span>
    <span class="nx">animating</span> <span class="o">:</span> <span class="s1">&#39;animating&#39;</span><span class="p">,</span>
    <span class="nx">dropdown</span>  <span class="o">:</span> <span class="s1">&#39;dropdown&#39;</span><span class="p">,</span>
    <span class="nx">fluid</span>     <span class="o">:</span> <span class="s1">&#39;fluid&#39;</span><span class="p">,</span>
    <span class="nx">loading</span>   <span class="o">:</span> <span class="s1">&#39;loading&#39;</span><span class="p">,</span>
    <span class="nx">popup</span>     <span class="o">:</span> <span class="s1">&#39;ui popup&#39;</span><span class="p">,</span>
    <span class="nx">position</span>  <span class="o">:</span> <span class="s1">&#39;top left center bottom right&#39;</span><span class="p">,</span>
    <span class="nx">visible</span>   <span class="o">:</span> <span class="s1">&#39;visible&#39;</span>
  <span class="p">},</span>

  <span class="nx">selector</span>    <span class="o">:</span> <span class="p">{</span>
    <span class="nx">popup</span>    <span class="o">:</span> <span class="s1">&#39;.ui.popup&#39;</span>
  <span class="p">},</span>

  <span class="nx">templates</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">escape</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span>
        <span class="nx">badChars</span>     <span class="o">=</span> <span class="sr">/[&amp;&lt;&gt;&quot;&#39;`]/g</span><span class="p">,</span>
        <span class="nx">shouldEscape</span> <span class="o">=</span> <span class="sr">/[&amp;&lt;&gt;&quot;&#39;`]/</span><span class="p">,</span>
        <span class="nx">escape</span>       <span class="o">=</span> <span class="p">{</span>
          <span class="s2">&quot;&amp;&quot;</span><span class="o">:</span> <span class="s2">&quot;&amp;amp;&quot;</span><span class="p">,</span>
          <span class="s2">&quot;&lt;&quot;</span><span class="o">:</span> <span class="s2">&quot;&amp;lt;&quot;</span><span class="p">,</span>
          <span class="s2">&quot;&gt;&quot;</span><span class="o">:</span> <span class="s2">&quot;&amp;gt;&quot;</span><span class="p">,</span>
          <span class="s1">&#39;&quot;&#39;</span><span class="o">:</span> <span class="s2">&quot;&amp;quot;&quot;</span><span class="p">,</span>
          <span class="s2">&quot;&#39;&quot;</span><span class="o">:</span> <span class="s2">&quot;&amp;#x27;&quot;</span><span class="p">,</span>
          <span class="s2">&quot;`&quot;</span><span class="o">:</span> <span class="s2">&quot;&amp;#x60;&quot;</span>
        <span class="p">},</span>
        <span class="nx">escapedChar</span>  <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">chr</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">escape</span><span class="p">[</span><span class="nx">chr</span><span class="p">];</span>
        <span class="p">}</span>
      <span class="p">;</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">shouldEscape</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">string</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">string</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">badChars</span><span class="p">,</span> <span class="nx">escapedChar</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">string</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">popup</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span>
        <span class="nx">html</span>   <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="nx">escape</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">popup</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">templates</span><span class="p">.</span><span class="nx">escape</span>
      <span class="p">;</span>
      <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">text</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">text</span><span class="p">.</span><span class="nx">title</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">text</span><span class="p">.</span><span class="nx">title</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">text</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="nx">escape</span><span class="p">(</span><span class="nx">text</span><span class="p">.</span><span class="nx">title</span><span class="p">);</span>
          <span class="nx">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;div class=&quot;header&quot;&gt;&#39;</span> <span class="o">+</span> <span class="nx">text</span><span class="p">.</span><span class="nx">title</span> <span class="o">+</span> <span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">text</span><span class="p">.</span><span class="nx">content</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">text</span><span class="p">.</span><span class="nx">content</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">text</span><span class="p">.</span><span class="nx">content</span> <span class="o">=</span> <span class="nx">escape</span><span class="p">(</span><span class="nx">text</span><span class="p">.</span><span class="nx">content</span><span class="p">);</span>
          <span class="nx">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;div class=&quot;content&quot;&gt;&#39;</span> <span class="o">+</span> <span class="nx">text</span><span class="p">.</span><span class="nx">content</span> <span class="o">+</span> <span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">html</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

<span class="p">};</span></pre></div></td></tr><tr id="section-96"><td class="docs"><div class="pilwrap"><a href="#section-96" class="pilcrow">&#182;</a></div><p>Adds easing</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">easing</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">easeOutQuad</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">t</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">-</span><span class="nx">c</span> <span class="o">*</span><span class="p">(</span><span class="nx">t</span><span class="o">/=</span><span class="nx">d</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="nx">t</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>


<span class="p">})(</span> <span class="nx">jQuery</span><span class="p">,</span> <span class="nb">window</span> <span class="p">,</span> <span class="nb">document</span> <span class="p">);</span></pre></div></td></tr><tr id="section-97"><td class="docs"><div class="pilwrap"><a href="#section-97" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><h1>Semantic - Progress</h1>

<p><a href='http://github.com/semantic-org/semantic-ui/'>http://github.com/semantic-org/semantic-ui/</a></p></div><div class="body"><p>Copyright 2014 Contributor<br />Released under the MIT license<br /><a href='http://opensource.org/licenses/MIT'>http://opensource.org/licenses/MIT</a></p></div></div>
</td><td class="code"><div class="highlight"><pre><span class="p">;(</span><span class="kd">function</span> <span class="p">(</span> <span class="nx">$</span><span class="p">,</span> <span class="nb">window</span><span class="p">,</span> <span class="nb">document</span><span class="p">,</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>

<span class="s2">&quot;use strict&quot;</span><span class="p">;</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">progress</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span>
    <span class="nx">$allModules</span>    <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>

    <span class="nx">moduleSelector</span> <span class="o">=</span> <span class="nx">$allModules</span><span class="p">.</span><span class="nx">selector</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>

    <span class="nx">time</span>           <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">(),</span>
    <span class="nx">performance</span>    <span class="o">=</span> <span class="p">[],</span>

    <span class="nx">query</span>          <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="nx">methodInvoked</span>  <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">),</span>
    <span class="nx">queryArguments</span> <span class="o">=</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>

    <span class="nx">returnedValue</span>
  <span class="p">;</span>

  <span class="nx">$allModules</span>
    <span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span>
        <span class="nx">settings</span>          <span class="o">=</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span> <span class="p">)</span>
          <span class="o">?</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">progress</span><span class="p">.</span><span class="nx">settings</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">)</span>
          <span class="o">:</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">progress</span><span class="p">.</span><span class="nx">settings</span><span class="p">),</span>

        <span class="nx">className</span>       <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">className</span><span class="p">,</span>
        <span class="nx">metadata</span>        <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">metadata</span><span class="p">,</span>
        <span class="nx">namespace</span>       <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">namespace</span><span class="p">,</span>
        <span class="nx">selector</span>        <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">selector</span><span class="p">,</span>
        <span class="nx">error</span>           <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span>

        <span class="nx">eventNamespace</span>  <span class="o">=</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">,</span>
        <span class="nx">moduleNamespace</span> <span class="o">=</span> <span class="s1">&#39;module-&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">,</span>

        <span class="nx">$module</span>         <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
        <span class="nx">$bar</span>            <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">bar</span><span class="p">),</span>
        <span class="nx">$progress</span>       <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">progress</span><span class="p">),</span>
        <span class="nx">$label</span>          <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">label</span><span class="p">),</span>

        <span class="nx">element</span>         <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
        <span class="nx">instance</span>        <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">),</span>
        <span class="nx">module</span>
      <span class="p">;</span>

      <span class="nx">module</span> <span class="o">=</span> <span class="p">{</span>

        <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Initializing progress&#39;</span><span class="p">,</span> <span class="nx">settings</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">read</span><span class="p">.</span><span class="nx">metadata</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">initials</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">instantiate</span><span class="p">();</span>
        <span class="p">},</span>

        <span class="nx">instantiate</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Storing instance of progress&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">);</span>
          <span class="nx">instance</span> <span class="o">=</span> <span class="nx">module</span><span class="p">;</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">destroy</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Destroying previous dropdown for&#39;</span><span class="p">,</span> <span class="nx">$module</span><span class="p">);</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">removeData</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">instance</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">reset</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">percent</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
        <span class="p">},</span>

        <span class="nx">complete</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">percent</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">module</span><span class="p">.</span><span class="nx">percent</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">percent</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">read</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">metadata</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">percent</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Current percent value set from metadata&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">percent</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">percent</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">total</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Total value set from metadata&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">total</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">total</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Current value set from metadata&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">currentValue</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
              <span class="o">?</span> <span class="nx">module</span><span class="p">.</span><span class="nx">value</span>
              <span class="o">:</span> <span class="kc">false</span>
            <span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">increment</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">incrementValue</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">total</span>          <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">total</span> <span class="o">||</span> <span class="kc">false</span><span class="p">,</span>
            <span class="nx">edgeValue</span><span class="p">,</span>
            <span class="nx">startValue</span><span class="p">,</span>
            <span class="nx">newValue</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">total</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">startValue</span>     <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">value</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
            <span class="nx">incrementValue</span> <span class="o">=</span> <span class="nx">incrementValue</span> <span class="o">||</span> <span class="mi">1</span><span class="p">;</span>
            <span class="nx">newValue</span>       <span class="o">=</span> <span class="nx">startValue</span> <span class="o">+</span> <span class="nx">incrementValue</span><span class="p">;</span>
            <span class="nx">edgeValue</span>      <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">total</span><span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Incrementing value by&#39;</span><span class="p">,</span> <span class="nx">incrementValue</span><span class="p">,</span> <span class="nx">startValue</span><span class="p">,</span> <span class="nx">edgeValue</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">newValue</span> <span class="o">&gt;</span> <span class="nx">edgeValue</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Value cannot increment above total&#39;</span><span class="p">,</span> <span class="nx">edgeValue</span><span class="p">);</span>
              <span class="nx">newValue</span> <span class="o">=</span> <span class="nx">edgeValue</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">progress</span><span class="p">(</span><span class="nx">newValue</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">startValue</span>     <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">percent</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
            <span class="nx">incrementValue</span> <span class="o">=</span> <span class="nx">incrementValue</span> <span class="o">||</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">randomValue</span><span class="p">();</span>
            <span class="nx">newValue</span>       <span class="o">=</span> <span class="nx">startValue</span> <span class="o">+</span> <span class="nx">incrementValue</span><span class="p">;</span>
            <span class="nx">edgeValue</span>      <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Incrementing percentage by&#39;</span><span class="p">,</span> <span class="nx">incrementValue</span><span class="p">,</span> <span class="nx">startValue</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">newValue</span> <span class="o">&gt;</span> <span class="nx">edgeValue</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Value cannot increment above 100 percent&#39;</span><span class="p">);</span>
              <span class="nx">newValue</span> <span class="o">=</span> <span class="nx">edgeValue</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">progress</span><span class="p">(</span><span class="nx">newValue</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">decrement</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">decrementValue</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">total</span>     <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">total</span> <span class="o">||</span> <span class="kc">false</span><span class="p">,</span>
            <span class="nx">edgeValue</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nx">startValue</span><span class="p">,</span>
            <span class="nx">newValue</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">total</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">startValue</span>     <span class="o">=</span>  <span class="nx">module</span><span class="p">.</span><span class="nx">value</span>   <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
            <span class="nx">decrementValue</span> <span class="o">=</span>  <span class="nx">decrementValue</span> <span class="o">||</span> <span class="mi">1</span><span class="p">;</span>
            <span class="nx">newValue</span>       <span class="o">=</span>  <span class="nx">startValue</span> <span class="o">-</span> <span class="nx">decrementValue</span><span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Decrementing value by&#39;</span><span class="p">,</span> <span class="nx">decrementValue</span><span class="p">,</span> <span class="nx">startValue</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">startValue</span>     <span class="o">=</span>  <span class="nx">module</span><span class="p">.</span><span class="nx">percent</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
            <span class="nx">decrementValue</span> <span class="o">=</span>  <span class="nx">decrementValue</span> <span class="o">||</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">randomValue</span><span class="p">();</span>
            <span class="nx">newValue</span>       <span class="o">=</span>  <span class="nx">startValue</span> <span class="o">-</span> <span class="nx">decrementValue</span><span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Decrementing percentage by&#39;</span><span class="p">,</span> <span class="nx">decrementValue</span><span class="p">,</span> <span class="nx">startValue</span><span class="p">);</span>
          <span class="p">}</span>

          <span class="k">if</span><span class="p">(</span><span class="nx">newValue</span> <span class="o">&lt;</span> <span class="nx">edgeValue</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Value cannot decrement below 0&#39;</span><span class="p">);</span>
            <span class="nx">newValue</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">progress</span><span class="p">(</span><span class="nx">newValue</span><span class="p">);</span>
        <span class="p">},</span>

        <span class="nx">get</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">text</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">templateText</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">value</span>   <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">value</span> <span class="o">||</span> <span class="mi">0</span><span class="p">,</span>
              <span class="nx">total</span>   <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">total</span> <span class="o">||</span> <span class="mi">0</span><span class="p">,</span>
              <span class="nx">percent</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">percent</span> <span class="o">||</span> <span class="mi">0</span>
            <span class="p">;</span>
            <span class="nx">templateText</span> <span class="o">=</span> <span class="nx">templateText</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
            <span class="nx">templateText</span> <span class="o">=</span> <span class="nx">templateText</span>
              <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;{value}&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;{total}&#39;</span><span class="p">,</span> <span class="nx">total</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;{percent}&#39;</span><span class="p">,</span> <span class="nx">percent</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Adding variables to progress bar text&#39;</span><span class="p">,</span> <span class="nx">templateText</span><span class="p">);</span>
            <span class="k">return</span> <span class="nx">templateText</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">randomValue</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Generating random increment percentage&#39;</span><span class="p">);</span>
            <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">((</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">random</span><span class="p">.</span><span class="nx">max</span><span class="p">)</span> <span class="o">+</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">random</span><span class="p">.</span><span class="nx">min</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">percent</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">module</span><span class="p">.</span><span class="nx">percent</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">value</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">module</span><span class="p">.</span><span class="nx">value</span> <span class="o">||</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">total</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">module</span><span class="p">.</span><span class="nx">total</span> <span class="o">||</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">is</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">success</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">success</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">warning</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">warning</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">remove</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">active</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Removing active state&#39;</span><span class="p">);</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">success</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Removing success state&#39;</span><span class="p">);</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">success</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">warning</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Removing warning state&#39;</span><span class="p">);</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">warning</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Removing error state&#39;</span><span class="p">);</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">set</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">barWidth</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">tooHigh</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="nx">$bar</span>
              <span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;width&#39;</span><span class="p">,</span> <span class="nx">value</span> <span class="o">+</span> <span class="s1">&#39;%&#39;</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">initials</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Current value set in settings&#39;</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">total</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Current total set in settings&#39;</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">total</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">total</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">total</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">percent</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Current percent set in settings&#39;</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">percent</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">percent</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">percent</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">percent</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">percent</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">percent</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">progress</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">percent</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">percent</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">percent</span> <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">percent</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span>
              <span class="o">?</span> <span class="o">+</span><span class="p">(</span><span class="nx">percent</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;%&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>
              <span class="o">:</span> <span class="nx">percent</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">percent</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">percent</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Module percentage passed as decimal, converting&#39;</span><span class="p">);</span>
              <span class="nx">percent</span> <span class="o">=</span> <span class="nx">percent</span> <span class="o">*</span> <span class="mi">100</span><span class="p">;</span>
            <span class="p">}</span></pre></div></td></tr><tr id="section-98"><td class="docs"><div class="pilwrap"><a href="#section-98" class="pilcrow">&#182;</a></div><p>round percentage</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">precision</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">percent</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">percent</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">percent</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">percent</span> <span class="o">*</span> <span class="p">(</span><span class="mi">10</span> <span class="o">*</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">precision</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">10</span> <span class="o">*</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">precision</span><span class="p">)</span> <span class="p">);</span>
            <span class="p">}</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">percent</span> <span class="o">=</span> <span class="nx">percent</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">total</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span> <span class="p">(</span><span class="nx">percent</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)</span> <span class="o">*</span> <span class="nx">module</span><span class="p">.</span><span class="nx">total</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">barWidth</span><span class="p">(</span><span class="nx">percent</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">barLabel</span><span class="p">();</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">percent</span> <span class="o">===</span> <span class="mi">100</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">autoSuccess</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">warning</span><span class="p">()</span> <span class="o">||</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">error</span><span class="p">()))</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">success</span><span class="p">();</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Automatically triggering success at 100%&#39;</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">active</span><span class="p">();</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">active</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onChange</span><span class="p">,</span> <span class="nx">element</span><span class="p">)(</span><span class="nx">percent</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">total</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">label</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">text</span> <span class="o">=</span> <span class="nx">text</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">text</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Setting label to text&#39;</span><span class="p">,</span> <span class="nx">text</span><span class="p">);</span>
              <span class="nx">$label</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">barLabel</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">text</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$progress</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">label</span> <span class="o">==</span> <span class="s1">&#39;ratio&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">module</span><span class="p">.</span><span class="nx">total</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Adding ratio to bar label&#39;</span><span class="p">);</span>
              <span class="nx">$progress</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">ratio</span><span class="p">)</span> <span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">label</span> <span class="o">==</span> <span class="s1">&#39;percent&#39;</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Adding percentage to bar label&#39;</span><span class="p">);</span>
              <span class="nx">$progress</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">percent</span><span class="p">)</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">active</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">text</span> <span class="o">=</span> <span class="nx">text</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">active</span><span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Setting active state&#39;</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">showActivity</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$module</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">warning</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">error</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">success</span><span class="p">();</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">label</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onActive</span><span class="p">,</span> <span class="nx">element</span><span class="p">)(</span><span class="nx">module</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">total</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">success</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">text</span> <span class="o">=</span> <span class="nx">text</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">success</span><span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Setting success state&#39;</span><span class="p">);</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">success</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">active</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">warning</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">error</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">complete</span><span class="p">();</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">label</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onSuccess</span><span class="p">,</span> <span class="nx">element</span><span class="p">)(</span><span class="nx">module</span><span class="p">.</span><span class="nx">total</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">warning</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">text</span> <span class="o">=</span> <span class="nx">text</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">warning</span><span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Setting warning state&#39;</span><span class="p">);</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">warning</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">active</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">success</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">error</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">complete</span><span class="p">();</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">label</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onWarning</span><span class="p">,</span> <span class="nx">element</span><span class="p">)(</span><span class="nx">module</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">total</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">error</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">text</span> <span class="o">=</span> <span class="nx">text</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">error</span><span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Setting error state&#39;</span><span class="p">);</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">active</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">success</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">warning</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">complete</span><span class="p">();</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">label</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onError</span><span class="p">,</span> <span class="nx">element</span><span class="p">)(</span><span class="nx">module</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">total</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">total</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">totalValue</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">total</span> <span class="o">=</span> <span class="nx">totalValue</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">progress</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">numericValue</span> <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span>
                <span class="o">?</span> <span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/[^\d.]/g</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">!==</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
                  <span class="o">?</span> <span class="o">+</span><span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/[^\d.]/g</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>
                  <span class="o">:</span> <span class="kc">false</span>
                <span class="o">:</span> <span class="nx">value</span><span class="p">,</span>
              <span class="nx">percentComplete</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">numericValue</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">nonNumeric</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">total</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">value</span>    <span class="o">=</span> <span class="nx">numericValue</span><span class="p">;</span>
              <span class="nx">percentComplete</span> <span class="o">=</span> <span class="p">(</span><span class="nx">numericValue</span> <span class="o">/</span> <span class="nx">module</span><span class="p">.</span><span class="nx">total</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span><span class="p">;</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Calculating percent complete from total&#39;</span><span class="p">,</span> <span class="nx">percentComplete</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">percent</span><span class="p">(</span> <span class="nx">percentComplete</span> <span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">percentComplete</span> <span class="o">=</span> <span class="nx">numericValue</span><span class="p">;</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Setting value to exact percentage value&#39;</span><span class="p">,</span> <span class="nx">percentComplete</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">percent</span><span class="p">(</span> <span class="nx">percentComplete</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">setting</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Changing setting&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">settings</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">internal</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">module</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">debug</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">verbose</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">&amp;&amp;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">performance</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">log</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">currentTime</span><span class="p">,</span>
              <span class="nx">executionTime</span><span class="p">,</span>
              <span class="nx">previousTime</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">currentTime</span>   <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>
              <span class="nx">previousTime</span>  <span class="o">=</span> <span class="nx">time</span> <span class="o">||</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">executionTime</span> <span class="o">=</span> <span class="nx">currentTime</span> <span class="o">-</span> <span class="nx">previousTime</span><span class="p">;</span>
              <span class="nx">time</span>          <span class="o">=</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">performance</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
                <span class="s1">&#39;Name&#39;</span>           <span class="o">:</span> <span class="nx">message</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="s1">&#39;Arguments&#39;</span>      <span class="o">:</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Element&#39;</span>        <span class="o">:</span> <span class="nx">element</span><span class="p">,</span>
                <span class="s1">&#39;Execution Time&#39;</span> <span class="o">:</span> <span class="nx">executionTime</span>
              <span class="p">});</span>
            <span class="p">}</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">display</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">title</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span>
              <span class="nx">totalTime</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="p">;</span>
            <span class="nx">time</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">totalTime</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">];</span>
            <span class="p">});</span>
            <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">totalTime</span> <span class="o">+</span> <span class="s1">&#39;ms&#39;</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">moduleSelector</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; \&#39;&#39;</span> <span class="o">+</span> <span class="nx">moduleSelector</span> <span class="o">+</span> <span class="s1">&#39;\&#39;&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span> <span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">group</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">console</span><span class="p">.</span><span class="nx">table</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">performance</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupCollapsed</span><span class="p">(</span><span class="nx">title</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">performance</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;ms&#39;</span><span class="p">);</span>
                <span class="p">});</span>
              <span class="p">}</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupEnd</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">performance</span> <span class="o">=</span> <span class="p">[];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">invoke</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">object</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">,</span>
            <span class="nx">maxDepth</span><span class="p">,</span>
            <span class="nx">found</span><span class="p">,</span>
            <span class="nx">response</span>
          <span class="p">;</span>
          <span class="nx">passedArguments</span> <span class="o">=</span> <span class="nx">passedArguments</span> <span class="o">||</span> <span class="nx">queryArguments</span><span class="p">;</span>
          <span class="nx">context</span>         <span class="o">=</span> <span class="nx">element</span>         <span class="o">||</span> <span class="nx">context</span><span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">object</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">query</span>    <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/[\. ]/</span><span class="p">);</span>
            <span class="nx">maxDepth</span> <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">depth</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span> <span class="nx">camelCaseValue</span> <span class="o">=</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">value</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="o">:</span> <span class="nx">query</span>
              <span class="p">;</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">method</span><span class="p">,</span> <span class="nx">query</span><span class="p">);</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">});</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">found</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">found</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">returnedValue</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">returnedValue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="p">[</span><span class="nx">returnedValue</span><span class="p">,</span> <span class="nx">response</span><span class="p">];</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">response</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="nx">found</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>

      <span class="k">if</span><span class="p">(</span><span class="nx">methodInvoked</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="nx">query</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">})</span>
  <span class="p">;</span>

  <span class="k">return</span> <span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
    <span class="o">?</span> <span class="nx">returnedValue</span>
    <span class="o">:</span> <span class="k">this</span>
  <span class="p">;</span>
<span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">progress</span><span class="p">.</span><span class="nx">settings</span> <span class="o">=</span> <span class="p">{</span>

  <span class="nx">name</span>         <span class="o">:</span> <span class="s1">&#39;Progress&#39;</span><span class="p">,</span>
  <span class="nx">namespace</span>    <span class="o">:</span> <span class="s1">&#39;progress&#39;</span><span class="p">,</span>

  <span class="nx">debug</span>        <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">verbose</span>      <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">performance</span>  <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="nx">random</span>       <span class="o">:</span> <span class="p">{</span>
    <span class="nx">min</span> <span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="nx">max</span> <span class="o">:</span> <span class="mi">5</span>
  <span class="p">},</span>

  <span class="nx">autoSuccess</span>  <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">showActivity</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="nx">label</span>        <span class="o">:</span> <span class="s1">&#39;percent&#39;</span><span class="p">,</span>
  <span class="nx">precision</span>    <span class="o">:</span> <span class="mi">1</span><span class="p">,</span>

  <span class="nx">percent</span>      <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">total</span>        <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">value</span>        <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>

  <span class="nx">onChange</span>     <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">percent</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">total</span><span class="p">){},</span>
  <span class="nx">onSuccess</span>    <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">total</span><span class="p">){},</span>
  <span class="nx">onActive</span>     <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">total</span><span class="p">){},</span>
  <span class="nx">onError</span>      <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">total</span><span class="p">){},</span>
  <span class="nx">onWarning</span>    <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">total</span><span class="p">){},</span>

  <span class="nx">error</span>    <span class="o">:</span> <span class="p">{</span>
    <span class="nx">method</span>     <span class="o">:</span> <span class="s1">&#39;The method you called is not defined.&#39;</span><span class="p">,</span>
    <span class="nx">nonNumeric</span> <span class="o">:</span> <span class="s1">&#39;Progress value is non numeric&#39;</span>
  <span class="p">},</span>

  <span class="nx">regExp</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">variable</span><span class="o">:</span> <span class="sr">/\{\$*[A-z0-9]+\}/g</span>
  <span class="p">},</span>

  <span class="nx">metadata</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">percent</span> <span class="o">:</span> <span class="s1">&#39;percent&#39;</span><span class="p">,</span>
    <span class="nx">total</span>   <span class="o">:</span> <span class="s1">&#39;total&#39;</span><span class="p">,</span>
    <span class="nx">value</span>   <span class="o">:</span> <span class="s1">&#39;value&#39;</span>
  <span class="p">},</span>

  <span class="nx">selector</span> <span class="o">:</span> <span class="p">{</span>
    <span class="nx">bar</span>      <span class="o">:</span> <span class="s1">&#39;&gt; .bar&#39;</span><span class="p">,</span>
    <span class="nx">label</span>    <span class="o">:</span> <span class="s1">&#39;&gt; .label&#39;</span><span class="p">,</span>
    <span class="nx">progress</span> <span class="o">:</span> <span class="s1">&#39;.bar &gt; .progress&#39;</span>
  <span class="p">},</span>

  <span class="nx">text</span> <span class="o">:</span> <span class="p">{</span>
    <span class="nx">active</span>  <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">error</span>   <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">success</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">warning</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">percent</span> <span class="o">:</span> <span class="s1">&#39;{percent}%&#39;</span><span class="p">,</span>
    <span class="nx">ratio</span>   <span class="o">:</span> <span class="s1">&#39;{value} of {total}&#39;</span>
  <span class="p">},</span>

  <span class="nx">className</span> <span class="o">:</span> <span class="p">{</span>
    <span class="nx">active</span>  <span class="o">:</span> <span class="s1">&#39;active&#39;</span><span class="p">,</span>
    <span class="nx">error</span>   <span class="o">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span>
    <span class="nx">success</span> <span class="o">:</span> <span class="s1">&#39;success&#39;</span><span class="p">,</span>
    <span class="nx">warning</span> <span class="o">:</span> <span class="s1">&#39;warning&#39;</span>
  <span class="p">}</span>

<span class="p">};</span>


<span class="p">})(</span> <span class="nx">jQuery</span><span class="p">,</span> <span class="nb">window</span> <span class="p">,</span> <span class="nb">document</span> <span class="p">);</span></pre></div></td></tr><tr id="section-99"><td class="docs"><div class="pilwrap"><a href="#section-99" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><h1>Semantic - Rating</h1>

<p><a href='http://github.com/semantic-org/semantic-ui/'>http://github.com/semantic-org/semantic-ui/</a></p></div><div class="body"><p>Copyright 2014 Contributor<br />Released under the MIT license<br /><a href='http://opensource.org/licenses/MIT'>http://opensource.org/licenses/MIT</a></p></div></div>
</td><td class="code"><div class="highlight"><pre><span class="p">;(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">$</span><span class="p">,</span> <span class="nb">window</span><span class="p">,</span> <span class="nb">document</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>

<span class="s2">&quot;use strict&quot;</span><span class="p">;</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">rating</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span>
    <span class="nx">$allModules</span>     <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
    <span class="nx">moduleSelector</span>  <span class="o">=</span> <span class="nx">$allModules</span><span class="p">.</span><span class="nx">selector</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>

    <span class="nx">time</span>            <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">(),</span>
    <span class="nx">performance</span>     <span class="o">=</span> <span class="p">[],</span>

    <span class="nx">query</span>           <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="nx">methodInvoked</span>   <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">),</span>
    <span class="nx">queryArguments</span>  <span class="o">=</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="nx">returnedValue</span>
  <span class="p">;</span>
  <span class="nx">$allModules</span>
    <span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span>
        <span class="nx">settings</span>        <span class="o">=</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span> <span class="p">)</span>
          <span class="o">?</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">rating</span><span class="p">.</span><span class="nx">settings</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">)</span>
          <span class="o">:</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">rating</span><span class="p">.</span><span class="nx">settings</span><span class="p">),</span>

        <span class="nx">namespace</span>       <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">namespace</span><span class="p">,</span>
        <span class="nx">className</span>       <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">className</span><span class="p">,</span>
        <span class="nx">metadata</span>        <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">metadata</span><span class="p">,</span>
        <span class="nx">selector</span>        <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">selector</span><span class="p">,</span>
        <span class="nx">error</span>           <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span>

        <span class="nx">eventNamespace</span>  <span class="o">=</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">,</span>
        <span class="nx">moduleNamespace</span> <span class="o">=</span> <span class="s1">&#39;module-&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">,</span>

        <span class="nx">element</span>         <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
        <span class="nx">instance</span>        <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">),</span>

        <span class="nx">$module</span>         <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
        <span class="nx">$icon</span>           <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">icon</span><span class="p">),</span>

        <span class="nx">module</span>
      <span class="p">;</span>

      <span class="nx">module</span> <span class="o">=</span> <span class="p">{</span>

        <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Initializing rating module&#39;</span><span class="p">,</span> <span class="nx">settings</span><span class="p">);</span>

          <span class="k">if</span><span class="p">(</span><span class="nx">$icon</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">setup</span><span class="p">.</span><span class="nx">layout</span><span class="p">();</span>
          <span class="p">}</span>

          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">interactive</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">enable</span><span class="p">();</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">disable</span><span class="p">();</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">initialRating</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Setting initial rating&#39;</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">setRating</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">initialRating</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">rating</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Rating found in metadata&#39;</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">setRating</span><span class="p">(</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">rating</span><span class="p">)</span> <span class="p">);</span>
          <span class="p">}</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">instantiate</span><span class="p">();</span>
        <span class="p">},</span>

        <span class="nx">instantiate</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Instantiating module&#39;</span><span class="p">,</span> <span class="nx">settings</span><span class="p">);</span>
          <span class="nx">instance</span> <span class="o">=</span> <span class="nx">module</span><span class="p">;</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">destroy</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Destroying previous instance&#39;</span><span class="p">,</span> <span class="nx">instance</span><span class="p">);</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">removeData</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$icon</span>
            <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">eventNamespace</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">refresh</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">$icon</span>   <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">icon</span><span class="p">);</span>
        <span class="p">},</span>

        <span class="nx">setup</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">layout</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">maxRating</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">maxRating</span><span class="p">)</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">maxRating</span>
            <span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Generating icon html dynamically&#39;</span><span class="p">);</span>
            <span class="nx">$module</span>
              <span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">rating</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">templates</span><span class="p">.</span><span class="nx">icon</span><span class="p">(</span><span class="nx">maxRating</span><span class="p">))</span>
            <span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">refresh</span><span class="p">();</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">event</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">mouseenter</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">$activeIcon</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="nx">$activeIcon</span>
              <span class="p">.</span><span class="nx">nextAll</span><span class="p">()</span>
                <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">selected</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="nx">$module</span>
              <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">selected</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="nx">$activeIcon</span>
              <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">selected</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">prevAll</span><span class="p">()</span>
                <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">selected</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">mouseleave</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$module</span>
              <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">selected</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="nx">$icon</span>
              <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">selected</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">click</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">$activeIcon</span>   <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
              <span class="nx">currentRating</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">getRating</span><span class="p">(),</span>
              <span class="nx">rating</span>        <span class="o">=</span> <span class="nx">$icon</span><span class="p">.</span><span class="nx">index</span><span class="p">(</span><span class="nx">$activeIcon</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
              <span class="nx">canClear</span>      <span class="o">=</span> <span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">clearable</span> <span class="o">==</span> <span class="s1">&#39;auto&#39;</span><span class="p">)</span>
               <span class="o">?</span> <span class="p">(</span><span class="nx">$icon</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span>
               <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">clearable</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">canClear</span> <span class="o">&amp;&amp;</span> <span class="nx">currentRating</span> <span class="o">==</span> <span class="nx">rating</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">clearRating</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">setRating</span><span class="p">(</span> <span class="nx">rating</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">clearRating</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Clearing current rating&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">setRating</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
        <span class="p">},</span>

        <span class="nx">getRating</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">currentRating</span> <span class="o">=</span> <span class="nx">$icon</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span>
          <span class="p">;</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Current rating retrieved&#39;</span><span class="p">,</span> <span class="nx">currentRating</span><span class="p">);</span>
          <span class="k">return</span> <span class="nx">currentRating</span><span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">enable</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Setting rating to interactive mode&#39;</span><span class="p">);</span>
          <span class="nx">$icon</span>
            <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;mouseenter&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">mouseenter</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;mouseleave&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">mouseleave</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">click</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">disabled</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">disable</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Setting rating to read-only mode&#39;</span><span class="p">);</span>
          <span class="nx">$icon</span>
            <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">eventNamespace</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">disabled</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">setRating</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">rating</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">ratingIndex</span> <span class="o">=</span> <span class="p">(</span><span class="nx">rating</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span>
              <span class="o">?</span> <span class="p">(</span><span class="nx">rating</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
              <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nx">$activeIcon</span> <span class="o">=</span> <span class="nx">$icon</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span><span class="nx">ratingIndex</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">selected</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$icon</span>
            <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">selected</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">rating</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Setting current rating to&#39;</span><span class="p">,</span> <span class="nx">rating</span><span class="p">);</span>
            <span class="nx">$activeIcon</span>
              <span class="p">.</span><span class="nx">prevAll</span><span class="p">()</span>
              <span class="p">.</span><span class="nx">andSelf</span><span class="p">()</span>
                <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">}</span>
          <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onRate</span><span class="p">,</span> <span class="nx">element</span><span class="p">)(</span><span class="nx">rating</span><span class="p">);</span>
        <span class="p">},</span>

        <span class="nx">setting</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Changing setting&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">settings</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">internal</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">module</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">debug</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">verbose</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">&amp;&amp;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">performance</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">log</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">currentTime</span><span class="p">,</span>
              <span class="nx">executionTime</span><span class="p">,</span>
              <span class="nx">previousTime</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">currentTime</span>   <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>
              <span class="nx">previousTime</span>  <span class="o">=</span> <span class="nx">time</span> <span class="o">||</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">executionTime</span> <span class="o">=</span> <span class="nx">currentTime</span> <span class="o">-</span> <span class="nx">previousTime</span><span class="p">;</span>
              <span class="nx">time</span>          <span class="o">=</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">performance</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
                <span class="s1">&#39;Name&#39;</span>           <span class="o">:</span> <span class="nx">message</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="s1">&#39;Arguments&#39;</span>      <span class="o">:</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Element&#39;</span>        <span class="o">:</span> <span class="nx">element</span><span class="p">,</span>
                <span class="s1">&#39;Execution Time&#39;</span> <span class="o">:</span> <span class="nx">executionTime</span>
              <span class="p">});</span>
            <span class="p">}</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">display</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">title</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span>
              <span class="nx">totalTime</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="p">;</span>
            <span class="nx">time</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">totalTime</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">];</span>
            <span class="p">});</span>
            <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">totalTime</span> <span class="o">+</span> <span class="s1">&#39;ms&#39;</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">moduleSelector</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; \&#39;&#39;</span> <span class="o">+</span> <span class="nx">moduleSelector</span> <span class="o">+</span> <span class="s1">&#39;\&#39;&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">$allModules</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="s1">&#39;(&#39;</span> <span class="o">+</span> <span class="nx">$allModules</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span> <span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">group</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">console</span><span class="p">.</span><span class="nx">table</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">performance</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupCollapsed</span><span class="p">(</span><span class="nx">title</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">performance</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;ms&#39;</span><span class="p">);</span>
                <span class="p">});</span>
              <span class="p">}</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupEnd</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">performance</span> <span class="o">=</span> <span class="p">[];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">invoke</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">object</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">,</span>
            <span class="nx">maxDepth</span><span class="p">,</span>
            <span class="nx">found</span><span class="p">,</span>
            <span class="nx">response</span>
          <span class="p">;</span>
          <span class="nx">passedArguments</span> <span class="o">=</span> <span class="nx">passedArguments</span> <span class="o">||</span> <span class="nx">queryArguments</span><span class="p">;</span>
          <span class="nx">context</span>         <span class="o">=</span> <span class="nx">element</span>         <span class="o">||</span> <span class="nx">context</span><span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">object</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">query</span>    <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/[\. ]/</span><span class="p">);</span>
            <span class="nx">maxDepth</span> <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">depth</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span> <span class="nx">camelCaseValue</span> <span class="o">=</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">value</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="o">:</span> <span class="nx">query</span>
              <span class="p">;</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">});</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">found</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">found</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">returnedValue</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">returnedValue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="p">[</span><span class="nx">returnedValue</span><span class="p">,</span> <span class="nx">response</span><span class="p">];</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">response</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="nx">found</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">methodInvoked</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="nx">query</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">})</span>
  <span class="p">;</span>

  <span class="k">return</span> <span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
    <span class="o">?</span> <span class="nx">returnedValue</span>
    <span class="o">:</span> <span class="k">this</span>
  <span class="p">;</span>
<span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">rating</span><span class="p">.</span><span class="nx">settings</span> <span class="o">=</span> <span class="p">{</span>

  <span class="nx">name</span>          <span class="o">:</span> <span class="s1">&#39;Rating&#39;</span><span class="p">,</span>
  <span class="nx">namespace</span>     <span class="o">:</span> <span class="s1">&#39;rating&#39;</span><span class="p">,</span>

  <span class="nx">debug</span>         <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">verbose</span>       <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">performance</span>   <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="nx">initialRating</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="nx">interactive</span>   <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">maxRating</span>     <span class="o">:</span> <span class="mi">4</span><span class="p">,</span>
  <span class="nx">clearable</span>     <span class="o">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span>

  <span class="nx">onRate</span>        <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">rating</span><span class="p">){},</span>

  <span class="nx">error</span>         <span class="o">:</span> <span class="p">{</span>
    <span class="nx">method</span>    <span class="o">:</span> <span class="s1">&#39;The method you called is not defined&#39;</span><span class="p">,</span>
    <span class="nx">noMaximum</span> <span class="o">:</span> <span class="s1">&#39;No maximum rating specified. Cannot generate HTML automatically&#39;</span>
  <span class="p">},</span>


  <span class="nx">metadata</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">rating</span>    <span class="o">:</span> <span class="s1">&#39;rating&#39;</span><span class="p">,</span>
    <span class="nx">maxRating</span> <span class="o">:</span> <span class="s1">&#39;maxRating&#39;</span>
  <span class="p">},</span>

  <span class="nx">className</span> <span class="o">:</span> <span class="p">{</span>
    <span class="nx">active</span>   <span class="o">:</span> <span class="s1">&#39;active&#39;</span><span class="p">,</span>
    <span class="nx">disabled</span> <span class="o">:</span> <span class="s1">&#39;disabled&#39;</span><span class="p">,</span>
    <span class="nx">selected</span> <span class="o">:</span> <span class="s1">&#39;selected&#39;</span><span class="p">,</span>
    <span class="nx">loading</span>  <span class="o">:</span> <span class="s1">&#39;loading&#39;</span>
  <span class="p">},</span>

  <span class="nx">selector</span>  <span class="o">:</span> <span class="p">{</span>
    <span class="nx">icon</span> <span class="o">:</span> <span class="s1">&#39;.icon&#39;</span>
  <span class="p">},</span>

  <span class="nx">templates</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">icon</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">maxRating</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span>
        <span class="nx">icon</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nx">html</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
      <span class="p">;</span>
      <span class="k">while</span><span class="p">(</span><span class="nx">icon</span> <span class="o">&lt;=</span> <span class="nx">maxRating</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;i class=&quot;icon&quot;&gt;&lt;/i&gt;&#39;</span><span class="p">;</span>
        <span class="nx">icon</span><span class="o">++</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">html</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

<span class="p">};</span>

<span class="p">})(</span> <span class="nx">jQuery</span><span class="p">,</span> <span class="nb">window</span> <span class="p">,</span> <span class="nb">document</span> <span class="p">);</span></pre></div></td></tr><tr id="section-100"><td class="docs"><div class="pilwrap"><a href="#section-100" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><h1>Semantic - Search</h1>

<p><a href='http://github.com/semantic-org/semantic-ui/'>http://github.com/semantic-org/semantic-ui/</a></p></div><div class="body"><p>Copyright 2014 Contributor<br />Released under the MIT license<br /><a href='http://opensource.org/licenses/MIT'>http://opensource.org/licenses/MIT</a></p></div></div>
</td><td class="code"><div class="highlight"><pre><span class="p">;(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">$</span><span class="p">,</span> <span class="nb">window</span><span class="p">,</span> <span class="nb">document</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>

<span class="s2">&quot;use strict&quot;</span><span class="p">;</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">search</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span>
    <span class="nx">$allModules</span>     <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
    <span class="nx">moduleSelector</span>  <span class="o">=</span> <span class="nx">$allModules</span><span class="p">.</span><span class="nx">selector</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>

    <span class="nx">time</span>            <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">(),</span>
    <span class="nx">performance</span>     <span class="o">=</span> <span class="p">[],</span>

    <span class="nx">query</span>           <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="nx">methodInvoked</span>   <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">),</span>
    <span class="nx">queryArguments</span>  <span class="o">=</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="nx">returnedValue</span>
  <span class="p">;</span>
  <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span>
        <span class="nx">settings</span>        <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">search</span><span class="p">.</span><span class="nx">settings</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">),</span>

        <span class="nx">className</span>       <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">className</span><span class="p">,</span>
        <span class="nx">selector</span>        <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">selector</span><span class="p">,</span>
        <span class="nx">error</span>           <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span>
        <span class="nx">namespace</span>       <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">namespace</span><span class="p">,</span>

        <span class="nx">eventNamespace</span>  <span class="o">=</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">,</span>
        <span class="nx">moduleNamespace</span> <span class="o">=</span> <span class="nx">namespace</span> <span class="o">+</span> <span class="s1">&#39;-module&#39;</span><span class="p">,</span>

        <span class="nx">$module</span>         <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
        <span class="nx">$prompt</span>         <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">prompt</span><span class="p">),</span>
        <span class="nx">$searchButton</span>   <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">searchButton</span><span class="p">),</span>
        <span class="nx">$results</span>        <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">results</span><span class="p">),</span>
        <span class="nx">$result</span>         <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">result</span><span class="p">),</span>
        <span class="nx">$category</span>       <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">category</span><span class="p">),</span>

        <span class="nx">element</span>         <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
        <span class="nx">instance</span>        <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">),</span>

        <span class="nx">module</span>
      <span class="p">;</span>
      <span class="nx">module</span> <span class="o">=</span> <span class="p">{</span>

        <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Initializing module&#39;</span><span class="p">);</span>
          <span class="kd">var</span>
            <span class="nx">prompt</span> <span class="o">=</span> <span class="nx">$prompt</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="nx">inputEvent</span>   <span class="o">=</span> <span class="p">(</span><span class="nx">prompt</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">prompt</span><span class="p">.</span><span class="nx">oninput</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
              <span class="o">?</span> <span class="s1">&#39;input&#39;</span>
              <span class="o">:</span> <span class="p">(</span><span class="nx">prompt</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">prompt</span><span class="p">.</span><span class="nx">onpropertychange</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
                <span class="o">?</span> <span class="s1">&#39;propertychange&#39;</span>
                <span class="o">:</span> <span class="s1">&#39;keyup&#39;</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">automatic</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$prompt</span>
              <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">inputEvent</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">search</span><span class="p">.</span><span class="nx">throttle</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">}</span>
          <span class="nx">$prompt</span>
            <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;focus&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">focus</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;blur&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">blur</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;keydown&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">handleKeyboard</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$searchButton</span>
            <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">search</span><span class="p">.</span><span class="nx">query</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$results</span>
            <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;mousedown&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">mousedown</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;mouseup&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">mouseup</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">result</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">results</span><span class="p">.</span><span class="nx">select</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">instantiate</span><span class="p">();</span>
        <span class="p">},</span>
        <span class="nx">instantiate</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Storing instance of module&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">);</span>
          <span class="nx">instance</span> <span class="o">=</span> <span class="nx">module</span><span class="p">;</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>
        <span class="nx">destroy</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Destroying instance&#39;</span><span class="p">);</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">removeData</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$prompt</span>
            <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">eventNamespace</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$searchButton</span>
            <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">eventNamespace</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$results</span>
            <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">eventNamespace</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>
        <span class="nx">event</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">focus</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$module</span>
              <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">focus</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">search</span><span class="p">.</span><span class="nx">throttle</span><span class="p">();</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">has</span><span class="p">.</span><span class="nx">minimum</span><span class="p">())</span>  <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">results</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">mousedown</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">resultsClicked</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">mouseup</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">resultsClicked</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">blur</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">search</span><span class="p">.</span><span class="nx">cancel</span><span class="p">();</span>
            <span class="nx">$module</span>
              <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">focus</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">resultsClicked</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">results</span><span class="p">.</span><span class="nx">hide</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">hideDelay</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">handleKeyboard</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span></pre></div></td></tr><tr id="section-101"><td class="docs"><div class="pilwrap"><a href="#section-101" class="pilcrow">&#182;</a></div><p>force latest jq dom</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">$result</span>       <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">result</span><span class="p">),</span>
            <span class="nx">$category</span>     <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">category</span><span class="p">),</span>
            <span class="nx">keyCode</span>       <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">which</span><span class="p">,</span>
            <span class="nx">keys</span>          <span class="o">=</span> <span class="p">{</span>
              <span class="nx">backspace</span> <span class="o">:</span> <span class="mi">8</span><span class="p">,</span>
              <span class="nx">enter</span>     <span class="o">:</span> <span class="mi">13</span><span class="p">,</span>
              <span class="nx">escape</span>    <span class="o">:</span> <span class="mi">27</span><span class="p">,</span>
              <span class="nx">upArrow</span>   <span class="o">:</span> <span class="mi">38</span><span class="p">,</span>
              <span class="nx">downArrow</span> <span class="o">:</span> <span class="mi">40</span>
            <span class="p">},</span>
            <span class="nx">activeClass</span>  <span class="o">=</span> <span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">,</span>
            <span class="nx">currentIndex</span> <span class="o">=</span> <span class="nx">$result</span><span class="p">.</span><span class="nx">index</span><span class="p">(</span> <span class="nx">$result</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">activeClass</span><span class="p">)</span> <span class="p">),</span>
            <span class="nx">resultSize</span>   <span class="o">=</span> <span class="nx">$result</span><span class="p">.</span><span class="nx">size</span><span class="p">(),</span>
            <span class="nx">newIndex</span>
          <span class="p">;</span></pre></div></td></tr><tr id="section-102"><td class="docs"><div class="pilwrap"><a href="#section-102" class="pilcrow">&#182;</a></div><p>search shortcuts</p>
</td><td class="code"><div class="highlight"><pre>          <span class="k">if</span><span class="p">(</span><span class="nx">keyCode</span> <span class="o">==</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">escape</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Escape key pressed, blurring search field&#39;</span><span class="p">);</span>
            <span class="nx">$prompt</span>
              <span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;blur&#39;</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">}</span></pre></div></td></tr><tr id="section-103"><td class="docs"><div class="pilwrap"><a href="#section-103" class="pilcrow">&#182;</a></div><p>result shortcuts</p>
</td><td class="code"><div class="highlight"><pre>          <span class="k">if</span><span class="p">(</span><span class="nx">$results</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;:visible&#39;</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">keyCode</span> <span class="o">==</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">enter</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Enter key pressed, selecting active result&#39;</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">$result</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">activeClass</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">results</span><span class="p">.</span><span class="nx">select</span><span class="p">,</span> <span class="nx">$result</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">activeClass</span><span class="p">)</span> <span class="p">)(</span><span class="nx">event</span><span class="p">);</span>
                <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">keyCode</span> <span class="o">==</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">upArrow</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Up key pressed, changing active result&#39;</span><span class="p">);</span>
              <span class="nx">newIndex</span> <span class="o">=</span> <span class="p">(</span><span class="nx">currentIndex</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">currentIndex</span>
                <span class="o">:</span> <span class="nx">currentIndex</span> <span class="o">-</span> <span class="mi">1</span>
              <span class="p">;</span>
              <span class="nx">$category</span>
                <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">activeClass</span><span class="p">)</span>
              <span class="p">;</span>
              <span class="nx">$result</span>
                <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">activeClass</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">eq</span><span class="p">(</span><span class="nx">newIndex</span><span class="p">)</span>
                  <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">activeClass</span><span class="p">)</span>
                  <span class="p">.</span><span class="nx">closest</span><span class="p">(</span><span class="nx">$category</span><span class="p">)</span>
                    <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">activeClass</span><span class="p">)</span>
              <span class="p">;</span>
              <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">keyCode</span> <span class="o">==</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">downArrow</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Down key pressed, changing active result&#39;</span><span class="p">);</span>
              <span class="nx">newIndex</span> <span class="o">=</span> <span class="p">(</span><span class="nx">currentIndex</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&gt;=</span> <span class="nx">resultSize</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">currentIndex</span>
                <span class="o">:</span> <span class="nx">currentIndex</span> <span class="o">+</span> <span class="mi">1</span>
              <span class="p">;</span>
              <span class="nx">$category</span>
                <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">activeClass</span><span class="p">)</span>
              <span class="p">;</span>
              <span class="nx">$result</span>
                <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">activeClass</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">eq</span><span class="p">(</span><span class="nx">newIndex</span><span class="p">)</span>
                  <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">activeClass</span><span class="p">)</span>
                  <span class="p">.</span><span class="nx">closest</span><span class="p">(</span><span class="nx">$category</span><span class="p">)</span>
                    <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">activeClass</span><span class="p">)</span>
              <span class="p">;</span>
              <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
            <span class="p">}</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span></pre></div></td></tr><tr id="section-104"><td class="docs"><div class="pilwrap"><a href="#section-104" class="pilcrow">&#182;</a></div><p>query shortcuts</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">if</span><span class="p">(</span><span class="nx">keyCode</span> <span class="o">==</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">enter</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Enter key pressed, executing query&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">search</span><span class="p">.</span><span class="nx">query</span><span class="p">();</span>
              <span class="nx">$searchButton</span>
                <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">down</span><span class="p">)</span>
              <span class="p">;</span>
              <span class="nx">$prompt</span>
                <span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="s1">&#39;keyup&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
                  <span class="nx">$searchButton</span>
                    <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">down</span><span class="p">)</span>
                  <span class="p">;</span>
                <span class="p">})</span>
              <span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">has</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">minimum</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">searchTerm</span>    <span class="o">=</span> <span class="nx">$prompt</span><span class="p">.</span><span class="nx">val</span><span class="p">(),</span>
              <span class="nx">numCharacters</span> <span class="o">=</span> <span class="nx">searchTerm</span><span class="p">.</span><span class="nx">length</span>
            <span class="p">;</span>
            <span class="k">return</span> <span class="p">(</span><span class="nx">numCharacters</span> <span class="o">&gt;=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">minCharacters</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">search</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">cancel</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">xhr</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;xhr&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="kc">false</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">xhr</span> <span class="o">&amp;&amp;</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">state</span><span class="p">()</span> <span class="o">!=</span> <span class="s1">&#39;resolved&#39;</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Cancelling last search&#39;</span><span class="p">);</span>
              <span class="nx">xhr</span><span class="p">.</span><span class="nx">abort</span><span class="p">();</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">throttle</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">has</span><span class="p">.</span><span class="nx">minimum</span><span class="p">())</span>  <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">search</span><span class="p">.</span><span class="nx">query</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">searchDelay</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">results</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">query</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">searchTerm</span> <span class="o">=</span> <span class="nx">$prompt</span><span class="p">.</span><span class="nx">val</span><span class="p">(),</span>
              <span class="nx">cachedHTML</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">search</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">read</span><span class="p">(</span><span class="nx">searchTerm</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">cachedHTML</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s2">&quot;Reading result for &#39;&quot;</span> <span class="o">+</span> <span class="nx">searchTerm</span> <span class="o">+</span> <span class="s2">&quot;&#39; from cache&quot;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">results</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">cachedHTML</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s2">&quot;Querying for &#39;&quot;</span> <span class="o">+</span> <span class="nx">searchTerm</span> <span class="o">+</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">source</span><span class="p">)</span> <span class="o">||</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">source</span><span class="p">))</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">search</span><span class="p">.</span><span class="nx">local</span><span class="p">(</span><span class="nx">searchTerm</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">apiSettings</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">search</span><span class="p">.</span><span class="nx">remote</span><span class="p">(</span><span class="nx">searchTerm</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">api</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">search</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Searching with default search API endpoint&#39;</span><span class="p">);</span>
                <span class="nx">settings</span><span class="p">.</span><span class="nx">apiSettings</span> <span class="o">=</span> <span class="p">{</span>
                  <span class="nx">action</span><span class="o">:</span> <span class="s1">&#39;search&#39;</span>
                <span class="p">};</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">search</span><span class="p">.</span><span class="nx">remote</span><span class="p">(</span><span class="nx">searchTerm</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">source</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onSearchQuery</span><span class="p">,</span> <span class="nx">$module</span><span class="p">)(</span><span class="nx">searchTerm</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">local</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">searchTerm</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">results</span>   <span class="o">=</span> <span class="p">[],</span>
              <span class="nx">fullTextResults</span> <span class="o">=</span> <span class="p">[],</span>
              <span class="nx">searchFields</span>    <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">searchFields</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">searchFields</span>
                <span class="o">:</span> <span class="p">[</span><span class="nx">settings</span><span class="p">.</span><span class="nx">searchFields</span><span class="p">],</span>
              <span class="nx">searchRegExp</span>   <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s1">&#39;(?:\s|^)&#39;</span> <span class="o">+</span> <span class="nx">searchTerm</span><span class="p">,</span> <span class="s1">&#39;i&#39;</span><span class="p">),</span>
              <span class="nx">fullTextRegExp</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="nx">searchTerm</span><span class="p">,</span> <span class="s1">&#39;i&#39;</span><span class="p">),</span>
              <span class="nx">searchHTML</span>
            <span class="p">;</span>
            <span class="nx">$module</span>
              <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">loading</span><span class="p">)</span>
            <span class="p">;</span></pre></div></td></tr><tr id="section-105"><td class="docs"><div class="pilwrap"><a href="#section-105" class="pilcrow">&#182;</a></div><p>iterate through search fields in array order</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">searchFields</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">field</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">source</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">label</span><span class="p">,</span> <span class="nx">content</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span>
                  <span class="nx">fieldExists</span> <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">content</span><span class="p">[</span><span class="nx">field</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">),</span>
                  <span class="nx">notAlreadyResult</span> <span class="o">=</span> <span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">inArray</span><span class="p">(</span><span class="nx">content</span><span class="p">,</span> <span class="nx">results</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">.</span><span class="nx">inArray</span><span class="p">(</span><span class="nx">content</span><span class="p">,</span> <span class="nx">fullTextResults</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                <span class="p">;</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">fieldExists</span> <span class="o">&amp;&amp;</span> <span class="nx">notAlreadyResult</span><span class="p">)</span> <span class="p">{</span>
                  <span class="k">if</span><span class="p">(</span> <span class="nx">searchRegExp</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">content</span><span class="p">[</span><span class="nx">field</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                    <span class="nx">results</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">content</span><span class="p">);</span>
                  <span class="p">}</span>
                  <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">searchFullText</span> <span class="o">&amp;&amp;</span> <span class="nx">fullTextRegExp</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">content</span><span class="p">[</span><span class="nx">field</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                    <span class="nx">fullTextResults</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">content</span><span class="p">);</span>
                  <span class="p">}</span>
                <span class="p">}</span>
              <span class="p">});</span>
            <span class="p">});</span>
            <span class="nx">searchHTML</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">results</span><span class="p">.</span><span class="nx">generate</span><span class="p">({</span>
              <span class="nx">results</span><span class="o">:</span> <span class="nx">$</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span><span class="nx">results</span><span class="p">,</span> <span class="nx">fullTextResults</span><span class="p">)</span>
            <span class="p">});</span>
            <span class="nx">$module</span>
              <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">loading</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">search</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">searchTerm</span><span class="p">,</span> <span class="nx">searchHTML</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">results</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">searchHTML</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">remote</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">searchTerm</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">apiSettings</span> <span class="o">=</span> <span class="p">{</span>
                <span class="nx">stateContext</span> <span class="o">:</span> <span class="nx">$module</span><span class="p">,</span>
                <span class="nx">urlData</span>      <span class="o">:</span> <span class="p">{</span>
                  <span class="nx">query</span><span class="o">:</span> <span class="nx">searchTerm</span>
                <span class="p">},</span>
                <span class="nx">onSuccess</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">searchHTML</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">results</span><span class="p">.</span><span class="nx">generate</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">search</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">searchTerm</span><span class="p">,</span> <span class="nx">searchHTML</span><span class="p">);</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">results</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">searchHTML</span><span class="p">);</span>
                <span class="p">},</span>
                <span class="nx">onFailure</span> <span class="o">:</span> <span class="nx">module</span><span class="p">.</span><span class="nx">error</span>
              <span class="p">},</span>
              <span class="nx">searchHTML</span>
            <span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">search</span><span class="p">.</span><span class="nx">cancel</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Executing search&#39;</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">apiSettings</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">apiSettings</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">api</span><span class="p">(</span><span class="nx">apiSettings</span><span class="p">);</span>
          <span class="p">},</span>

          <span class="nx">cache</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">read</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span>
                <span class="nx">cache</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;cache&#39;</span><span class="p">)</span>
              <span class="p">;</span>
              <span class="k">return</span> <span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">cache</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">cache</span> <span class="o">==</span> <span class="s1">&#39;object&#39;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">cache</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">)</span>
                <span class="o">?</span> <span class="nx">cache</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span>
                <span class="o">:</span> <span class="kc">false</span>
              <span class="p">;</span>
            <span class="p">},</span>
            <span class="nx">write</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span>
                <span class="nx">cache</span> <span class="o">=</span> <span class="p">(</span><span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;cache&#39;</span><span class="p">)</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
                  <span class="o">?</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;cache&#39;</span><span class="p">)</span>
                  <span class="o">:</span> <span class="p">{}</span>
              <span class="p">;</span>
              <span class="nx">cache</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
              <span class="nx">$module</span>
                <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;cache&#39;</span><span class="p">,</span> <span class="nx">cache</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">results</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">generate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Generating html from response&#39;</span><span class="p">,</span> <span class="nx">response</span><span class="p">);</span>
            <span class="kd">var</span>
              <span class="nx">template</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">templates</span><span class="p">[</span><span class="nx">settings</span><span class="p">.</span><span class="nx">type</span><span class="p">],</span>
              <span class="nx">html</span>     <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">((</span><span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">results</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">$</span><span class="p">.</span><span class="nx">isEmptyObject</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">results</span><span class="p">))</span> <span class="o">||</span> <span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">results</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">results</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">maxResults</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">response</span><span class="p">.</span><span class="nx">results</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">results</span><span class="p">)</span>
                  <span class="o">?</span> <span class="nx">response</span><span class="p">.</span><span class="nx">results</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">maxResults</span><span class="p">)</span>
                  <span class="o">:</span> <span class="nx">response</span><span class="p">.</span><span class="nx">results</span>
                <span class="p">;</span>
              <span class="p">}</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">template</span><span class="p">))</span> <span class="p">{</span>
                <span class="nx">html</span> <span class="o">=</span> <span class="nx">template</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">noTemplate</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">html</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">message</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">noResults</span><span class="p">,</span> <span class="s1">&#39;empty&#39;</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onResults</span><span class="p">,</span> <span class="nx">$module</span><span class="p">)(</span><span class="nx">response</span><span class="p">);</span>
            <span class="k">return</span> <span class="nx">html</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">add</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">html</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onResultsAdd</span> <span class="o">==</span> <span class="s1">&#39;default&#39;</span> <span class="o">||</span> <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onResultsAdd</span><span class="p">,</span> <span class="nx">$results</span><span class="p">)(</span><span class="nx">html</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;default&#39;</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$results</span>
                <span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">html</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">results</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span>
          <span class="p">},</span>
          <span class="nx">show</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span> <span class="p">(</span><span class="nx">$results</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;:visible&#39;</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">$prompt</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;:focus&#39;</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">$results</span><span class="p">.</span><span class="nx">html</span><span class="p">()</span> <span class="o">!==</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">transition</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s1">&#39;is supported&#39;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">$results</span><span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s1">&#39;is inward&#39;</span><span class="p">))</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Showing results with css animations&#39;</span><span class="p">);</span>
                <span class="nx">$results</span>
                  <span class="p">.</span><span class="nx">transition</span><span class="p">({</span>
                    <span class="nx">animation</span>  <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span> <span class="o">+</span> <span class="s1">&#39; in&#39;</span><span class="p">,</span>
                    <span class="nx">duration</span>   <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">,</span>
                    <span class="nx">queue</span>      <span class="o">:</span> <span class="kc">true</span>
                  <span class="p">})</span>
                <span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Showing results with javascript&#39;</span><span class="p">);</span>
                <span class="nx">$results</span>
                  <span class="p">.</span><span class="nx">stop</span><span class="p">()</span>
                  <span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">easing</span><span class="p">)</span>
                <span class="p">;</span>
              <span class="p">}</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onResultsOpen</span><span class="p">,</span> <span class="nx">$results</span><span class="p">)();</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">hide</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">$results</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;:visible&#39;</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">transition</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s1">&#39;is supported&#39;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">$results</span><span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s1">&#39;is outward&#39;</span><span class="p">))</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Hiding results with css animations&#39;</span><span class="p">);</span>
                <span class="nx">$results</span>
                  <span class="p">.</span><span class="nx">transition</span><span class="p">({</span>
                    <span class="nx">animation</span>  <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span> <span class="o">+</span> <span class="s1">&#39; out&#39;</span><span class="p">,</span>
                    <span class="nx">duration</span>   <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">,</span>
                    <span class="nx">queue</span>      <span class="o">:</span> <span class="kc">true</span>
                  <span class="p">})</span>
                <span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Hiding results with javascript&#39;</span><span class="p">);</span>
                <span class="nx">$results</span>
                  <span class="p">.</span><span class="nx">stop</span><span class="p">()</span>
                  <span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">easing</span><span class="p">)</span>
                <span class="p">;</span>
              <span class="p">}</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onResultsClose</span><span class="p">,</span> <span class="nx">$results</span><span class="p">)();</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">select</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Search result selected&#39;</span><span class="p">);</span>
            <span class="kd">var</span>
              <span class="nx">$result</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
              <span class="nx">$title</span>  <span class="o">=</span> <span class="nx">$result</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;.title&#39;</span><span class="p">),</span>
              <span class="nx">title</span>   <span class="o">=</span> <span class="nx">$title</span><span class="p">.</span><span class="nx">html</span><span class="p">()</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onSelect</span> <span class="o">==</span> <span class="s1">&#39;default&#39;</span> <span class="o">||</span> <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onSelect</span><span class="p">,</span> <span class="k">this</span><span class="p">)(</span><span class="nx">event</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;default&#39;</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span>
                <span class="nx">$link</span>  <span class="o">=</span> <span class="nx">$result</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;a[href]&#39;</span><span class="p">).</span><span class="nx">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
                <span class="nx">$title</span> <span class="o">=</span> <span class="nx">$result</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">title</span><span class="p">).</span><span class="nx">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
                <span class="nx">href</span>   <span class="o">=</span> <span class="nx">$link</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;href&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="kc">false</span><span class="p">,</span>
                <span class="nx">target</span> <span class="o">=</span> <span class="nx">$link</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;target&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="kc">false</span><span class="p">,</span>
                <span class="nx">name</span>   <span class="o">=</span> <span class="p">(</span><span class="nx">$title</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
                  <span class="o">?</span> <span class="nx">$title</span><span class="p">.</span><span class="nx">text</span><span class="p">()</span>
                  <span class="o">:</span> <span class="kc">false</span>
              <span class="p">;</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">results</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">$prompt</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">href</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">target</span> <span class="o">==</span> <span class="s1">&#39;_blank&#39;</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">ctrlKey</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nb">window</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">href</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="p">{</span>
                  <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="p">(</span><span class="nx">href</span><span class="p">);</span>
                <span class="p">}</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span></pre></div></td></tr><tr id="section-106"><td class="docs"><div class="pilwrap"><a href="#section-106" class="pilcrow">&#182;</a></div><p>displays mesage visibly in search results</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">message</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">type</span> <span class="o">=</span> <span class="nx">type</span> <span class="o">||</span> <span class="s1">&#39;standard&#39;</span><span class="p">;</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">results</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">templates</span><span class="p">.</span><span class="nx">message</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">type</span><span class="p">)</span> <span class="p">);</span>
          <span class="k">return</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">templates</span><span class="p">.</span><span class="nx">message</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">type</span><span class="p">);</span>
        <span class="p">},</span>

        <span class="nx">setting</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">settings</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">internal</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">module</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">debug</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">verbose</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">&amp;&amp;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">performance</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">log</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">currentTime</span><span class="p">,</span>
              <span class="nx">executionTime</span><span class="p">,</span>
              <span class="nx">previousTime</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">currentTime</span>   <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>
              <span class="nx">previousTime</span>  <span class="o">=</span> <span class="nx">time</span> <span class="o">||</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">executionTime</span> <span class="o">=</span> <span class="nx">currentTime</span> <span class="o">-</span> <span class="nx">previousTime</span><span class="p">;</span>
              <span class="nx">time</span>          <span class="o">=</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">performance</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
                <span class="s1">&#39;Name&#39;</span>           <span class="o">:</span> <span class="nx">message</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="s1">&#39;Arguments&#39;</span>      <span class="o">:</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Element&#39;</span>        <span class="o">:</span> <span class="nx">element</span><span class="p">,</span>
                <span class="s1">&#39;Execution Time&#39;</span> <span class="o">:</span> <span class="nx">executionTime</span>
              <span class="p">});</span>
            <span class="p">}</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">display</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">title</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span>
              <span class="nx">totalTime</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="p">;</span>
            <span class="nx">time</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">totalTime</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">];</span>
            <span class="p">});</span>
            <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">totalTime</span> <span class="o">+</span> <span class="s1">&#39;ms&#39;</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">moduleSelector</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; \&#39;&#39;</span> <span class="o">+</span> <span class="nx">moduleSelector</span> <span class="o">+</span> <span class="s1">&#39;\&#39;&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">$allModules</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="s1">&#39;(&#39;</span> <span class="o">+</span> <span class="nx">$allModules</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span> <span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">group</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">console</span><span class="p">.</span><span class="nx">table</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">performance</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupCollapsed</span><span class="p">(</span><span class="nx">title</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">performance</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;ms&#39;</span><span class="p">);</span>
                <span class="p">});</span>
              <span class="p">}</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupEnd</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">performance</span> <span class="o">=</span> <span class="p">[];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">invoke</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">object</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">,</span>
            <span class="nx">maxDepth</span><span class="p">,</span>
            <span class="nx">found</span><span class="p">,</span>
            <span class="nx">response</span>
          <span class="p">;</span>
          <span class="nx">passedArguments</span> <span class="o">=</span> <span class="nx">passedArguments</span> <span class="o">||</span> <span class="nx">queryArguments</span><span class="p">;</span>
          <span class="nx">context</span>         <span class="o">=</span> <span class="nx">element</span>         <span class="o">||</span> <span class="nx">context</span><span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">object</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">query</span>    <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/[\. ]/</span><span class="p">);</span>
            <span class="nx">maxDepth</span> <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">depth</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span> <span class="nx">camelCaseValue</span> <span class="o">=</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">value</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="o">:</span> <span class="nx">query</span>
              <span class="p">;</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">});</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">found</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">found</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">returnedValue</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">returnedValue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="p">[</span><span class="nx">returnedValue</span><span class="p">,</span> <span class="nx">response</span><span class="p">];</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">response</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="nx">found</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">methodInvoked</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="nx">query</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
      <span class="p">}</span>

    <span class="p">})</span>
  <span class="p">;</span>

  <span class="k">return</span> <span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
    <span class="o">?</span> <span class="nx">returnedValue</span>
    <span class="o">:</span> <span class="k">this</span>
  <span class="p">;</span>
<span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">search</span><span class="p">.</span><span class="nx">settings</span> <span class="o">=</span> <span class="p">{</span>

  <span class="nx">name</span>           <span class="o">:</span> <span class="s1">&#39;Search Module&#39;</span><span class="p">,</span>
  <span class="nx">namespace</span>      <span class="o">:</span> <span class="s1">&#39;search&#39;</span><span class="p">,</span>

  <span class="nx">debug</span>          <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">verbose</span>        <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">performance</span>    <span class="o">:</span> <span class="kc">true</span><span class="p">,</span></pre></div></td></tr><tr id="section-107"><td class="docs"><div class="pilwrap"><a href="#section-107" class="pilcrow">&#182;</a></div><p>api config</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">apiSettings</span>    <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">type</span>           <span class="o">:</span> <span class="s1">&#39;standard&#39;</span><span class="p">,</span>
  <span class="nx">minCharacters</span>  <span class="o">:</span> <span class="mi">1</span><span class="p">,</span>

  <span class="nx">source</span>         <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">searchFields</span>   <span class="o">:</span> <span class="p">[</span>
    <span class="s1">&#39;title&#39;</span><span class="p">,</span>
    <span class="s1">&#39;description&#39;</span>
  <span class="p">],</span>
  <span class="nx">searchFullText</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="nx">automatic</span>      <span class="o">:</span> <span class="s1">&#39;true&#39;</span><span class="p">,</span>
  <span class="nx">hideDelay</span>      <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="nx">searchDelay</span>    <span class="o">:</span> <span class="mi">300</span><span class="p">,</span>
  <span class="nx">maxResults</span>     <span class="o">:</span> <span class="mi">7</span><span class="p">,</span>
  <span class="nx">cache</span>          <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="nx">transition</span>     <span class="o">:</span> <span class="s1">&#39;scale&#39;</span><span class="p">,</span>
  <span class="nx">duration</span>       <span class="o">:</span> <span class="mi">300</span><span class="p">,</span>
  <span class="nx">easing</span>         <span class="o">:</span> <span class="s1">&#39;easeOutExpo&#39;</span><span class="p">,</span></pre></div></td></tr><tr id="section-108"><td class="docs"><div class="pilwrap"><a href="#section-108" class="pilcrow">&#182;</a></div><p>onSelect default action is defined in module</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">onSelect</span>       <span class="o">:</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span>
  <span class="nx">onResultsAdd</span>   <span class="o">:</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span>

  <span class="nx">onSearchQuery</span>  <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>
  <span class="nx">onResults</span>      <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">){},</span>

  <span class="nx">onResultsOpen</span>  <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>
  <span class="nx">onResultsClose</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>

  <span class="nx">className</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">active</span>  <span class="o">:</span> <span class="s1">&#39;active&#39;</span><span class="p">,</span>
    <span class="nx">down</span>    <span class="o">:</span> <span class="s1">&#39;down&#39;</span><span class="p">,</span>
    <span class="nx">focus</span>   <span class="o">:</span> <span class="s1">&#39;focus&#39;</span><span class="p">,</span>
    <span class="nx">empty</span>   <span class="o">:</span> <span class="s1">&#39;empty&#39;</span><span class="p">,</span>
    <span class="nx">loading</span> <span class="o">:</span> <span class="s1">&#39;loading&#39;</span>
  <span class="p">},</span>

  <span class="nx">error</span> <span class="o">:</span> <span class="p">{</span>
    <span class="nx">source</span>      <span class="o">:</span> <span class="s1">&#39;Cannot search. No source used, and Semantic API module was not included&#39;</span><span class="p">,</span>
    <span class="nx">noResults</span>   <span class="o">:</span> <span class="s1">&#39;Your search returned no results&#39;</span><span class="p">,</span>
    <span class="nx">logging</span>     <span class="o">:</span> <span class="s1">&#39;Error in debug logging, exiting.&#39;</span><span class="p">,</span>
    <span class="nx">noTemplate</span>  <span class="o">:</span> <span class="s1">&#39;A valid template name was not specified.&#39;</span><span class="p">,</span>
    <span class="nx">serverError</span> <span class="o">:</span> <span class="s1">&#39;There was an issue with querying the server.&#39;</span><span class="p">,</span>
    <span class="nx">method</span>      <span class="o">:</span> <span class="s1">&#39;The method you called is not defined.&#39;</span>
  <span class="p">},</span>

  <span class="nx">selector</span> <span class="o">:</span> <span class="p">{</span>
    <span class="nx">prompt</span>       <span class="o">:</span> <span class="s1">&#39;.prompt&#39;</span><span class="p">,</span>
    <span class="nx">searchButton</span> <span class="o">:</span> <span class="s1">&#39;.search.button&#39;</span><span class="p">,</span>
    <span class="nx">results</span>      <span class="o">:</span> <span class="s1">&#39;.results&#39;</span><span class="p">,</span>
    <span class="nx">category</span>     <span class="o">:</span> <span class="s1">&#39;.category&#39;</span><span class="p">,</span>
    <span class="nx">result</span>       <span class="o">:</span> <span class="s1">&#39;.result&#39;</span><span class="p">,</span>
    <span class="nx">title</span>        <span class="o">:</span> <span class="s1">&#39;.title, .name&#39;</span>
  <span class="p">},</span>

  <span class="nx">templates</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">escape</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span>
        <span class="nx">badChars</span>     <span class="o">=</span> <span class="sr">/[&amp;&lt;&gt;&quot;&#39;`]/g</span><span class="p">,</span>
        <span class="nx">shouldEscape</span> <span class="o">=</span> <span class="sr">/[&amp;&lt;&gt;&quot;&#39;`]/</span><span class="p">,</span>
        <span class="nx">escape</span>       <span class="o">=</span> <span class="p">{</span>
          <span class="s2">&quot;&amp;&quot;</span><span class="o">:</span> <span class="s2">&quot;&amp;amp;&quot;</span><span class="p">,</span>
          <span class="s2">&quot;&lt;&quot;</span><span class="o">:</span> <span class="s2">&quot;&amp;lt;&quot;</span><span class="p">,</span>
          <span class="s2">&quot;&gt;&quot;</span><span class="o">:</span> <span class="s2">&quot;&amp;gt;&quot;</span><span class="p">,</span>
          <span class="s1">&#39;&quot;&#39;</span><span class="o">:</span> <span class="s2">&quot;&amp;quot;&quot;</span><span class="p">,</span>
          <span class="s2">&quot;&#39;&quot;</span><span class="o">:</span> <span class="s2">&quot;&amp;#x27;&quot;</span><span class="p">,</span>
          <span class="s2">&quot;`&quot;</span><span class="o">:</span> <span class="s2">&quot;&amp;#x60;&quot;</span>
        <span class="p">},</span>
        <span class="nx">escapedChar</span>  <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">chr</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">escape</span><span class="p">[</span><span class="nx">chr</span><span class="p">];</span>
        <span class="p">}</span>
      <span class="p">;</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">shouldEscape</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">string</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">string</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">badChars</span><span class="p">,</span> <span class="nx">escapedChar</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">string</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">message</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span> <span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span>
        <span class="nx">html</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
      <span class="p">;</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">message</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">type</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">html</span> <span class="o">+=</span>  <span class="s1">&#39;&#39;</span>
          <span class="o">+</span> <span class="s1">&#39;&lt;div class=&quot;message &#39;</span> <span class="o">+</span> <span class="nx">type</span> <span class="o">+</span> <span class="s1">&#39;&quot;&gt;&#39;</span>
        <span class="p">;</span></pre></div></td></tr><tr id="section-109"><td class="docs"><div class="pilwrap"><a href="#section-109" class="pilcrow">&#182;</a></div><p>message type</p>
</td><td class="code"><div class="highlight"><pre>        <span class="k">if</span><span class="p">(</span><span class="nx">type</span> <span class="o">==</span> <span class="s1">&#39;empty&#39;</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">html</span> <span class="o">+=</span> <span class="s1">&#39;&#39;</span>
            <span class="o">+</span> <span class="s1">&#39;&lt;div class=&quot;header&quot;&gt;No Results&lt;/div class=&quot;header&quot;&gt;&#39;</span>
            <span class="o">+</span> <span class="s1">&#39;&lt;div class=&quot;description&quot;&gt;&#39;</span> <span class="o">+</span> <span class="nx">message</span> <span class="o">+</span> <span class="s1">&#39;&lt;/div class=&quot;description&quot;&gt;&#39;</span>
          <span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
          <span class="nx">html</span> <span class="o">+=</span> <span class="s1">&#39; &lt;div class=&quot;description&quot;&gt;&#39;</span> <span class="o">+</span> <span class="nx">message</span> <span class="o">+</span> <span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nx">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">html</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">category</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span>
        <span class="nx">html</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="nx">escape</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">search</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">templates</span><span class="p">.</span><span class="nx">escape</span>
      <span class="p">;</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">results</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-110"><td class="docs"><div class="pilwrap"><a href="#section-110" class="pilcrow">&#182;</a></div><p>each category</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">results</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">category</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">category</span><span class="p">.</span><span class="nx">results</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">category</span><span class="p">.</span><span class="nx">results</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">html</span>  <span class="o">+=</span> <span class="s1">&#39;&#39;</span>
              <span class="o">+</span> <span class="s1">&#39;&lt;div class=&quot;category&quot;&gt;&#39;</span>
              <span class="o">+</span> <span class="s1">&#39;&lt;div class=&quot;name&quot;&gt;&#39;</span> <span class="o">+</span> <span class="nx">category</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;&lt;/div&gt;&#39;</span>
            <span class="p">;</span></pre></div></td></tr><tr id="section-111"><td class="docs"><div class="pilwrap"><a href="#section-111" class="pilcrow">&#182;</a></div><p>each item inside category</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">category</span><span class="p">.</span><span class="nx">results</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">html</span>  <span class="o">+=</span> <span class="s1">&#39;&lt;div class=&quot;result&quot;&gt;&#39;</span><span class="p">;</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">html</span>  <span class="o">+=</span> <span class="s1">&#39;&lt;a href=&quot;&#39;</span> <span class="o">+</span> <span class="nx">result</span><span class="p">.</span><span class="nx">url</span> <span class="o">+</span> <span class="s1">&#39;&quot;&gt;&lt;/a&gt;&#39;</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">image</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">result</span><span class="p">.</span><span class="nx">image</span> <span class="o">=</span> <span class="nx">escape</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">image</span><span class="p">);</span>
                <span class="nx">html</span> <span class="o">+=</span> <span class="s1">&#39;&#39;</span>
                  <span class="o">+</span> <span class="s1">&#39;&lt;div class=&quot;image&quot;&gt;&#39;</span>
                  <span class="o">+</span> <span class="s1">&#39; &lt;img src=&quot;&#39;</span> <span class="o">+</span> <span class="nx">result</span><span class="p">.</span><span class="nx">image</span> <span class="o">+</span> <span class="s1">&#39;&quot; alt=&quot;&quot;&gt;&#39;</span>
                  <span class="o">+</span> <span class="s1">&#39;&lt;/div&gt;&#39;</span>
                <span class="p">;</span>
              <span class="p">}</span>
              <span class="nx">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;div class=&quot;content&quot;&gt;&#39;</span><span class="p">;</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">price</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">result</span><span class="p">.</span><span class="nx">price</span> <span class="o">=</span> <span class="nx">escape</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">price</span><span class="p">);</span>
                <span class="nx">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;div class=&quot;price&quot;&gt;&#39;</span> <span class="o">+</span> <span class="nx">result</span><span class="p">.</span><span class="nx">price</span> <span class="o">+</span> <span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">title</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">result</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="nx">escape</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">title</span><span class="p">);</span>
                <span class="nx">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;div class=&quot;title&quot;&gt;&#39;</span> <span class="o">+</span> <span class="nx">result</span><span class="p">.</span><span class="nx">title</span> <span class="o">+</span> <span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">description</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;div class=&quot;description&quot;&gt;&#39;</span> <span class="o">+</span> <span class="nx">result</span><span class="p">.</span><span class="nx">description</span> <span class="o">+</span> <span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="nx">html</span>  <span class="o">+=</span> <span class="s1">&#39;&#39;</span>
                <span class="o">+</span> <span class="s1">&#39;&lt;/div&gt;&#39;</span>
                <span class="o">+</span> <span class="s1">&#39;&lt;/div&gt;&#39;</span>
              <span class="p">;</span>
            <span class="p">});</span>
            <span class="nx">html</span>  <span class="o">+=</span> <span class="s1">&#39;&#39;</span>
              <span class="o">+</span> <span class="s1">&#39;&lt;/div&gt;&#39;</span>
            <span class="p">;</span>
          <span class="p">}</span>
        <span class="p">});</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">action</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">html</span> <span class="o">+=</span> <span class="s1">&#39;&#39;</span>
          <span class="o">+</span> <span class="s1">&#39;&lt;a href=&quot;&#39;</span> <span class="o">+</span> <span class="nx">response</span><span class="p">.</span><span class="nx">action</span><span class="p">.</span><span class="nx">url</span> <span class="o">+</span> <span class="s1">&#39;&quot; class=&quot;action&quot;&gt;&#39;</span>
          <span class="o">+</span>   <span class="nx">response</span><span class="p">.</span><span class="nx">action</span><span class="p">.</span><span class="nx">text</span>
          <span class="o">+</span> <span class="s1">&#39;&lt;/a&gt;&#39;</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">html</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">standard</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span>
        <span class="nx">html</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
      <span class="p">;</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">results</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-112"><td class="docs"><div class="pilwrap"><a href="#section-112" class="pilcrow">&#182;</a></div><p>each result</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">results</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">html</span>  <span class="o">+=</span> <span class="s1">&#39;&lt;a class=&quot;result&quot; href=&quot;&#39;</span> <span class="o">+</span> <span class="nx">result</span><span class="p">.</span><span class="nx">url</span> <span class="o">+</span> <span class="s1">&#39;&quot;&gt;&#39;</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">html</span>  <span class="o">+=</span> <span class="s1">&#39;&lt;a class=&quot;result&quot;&gt;&#39;</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">image</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">html</span> <span class="o">+=</span> <span class="s1">&#39;&#39;</span>
              <span class="o">+</span> <span class="s1">&#39;&lt;div class=&quot;image&quot;&gt;&#39;</span>
              <span class="o">+</span> <span class="s1">&#39; &lt;img src=&quot;&#39;</span> <span class="o">+</span> <span class="nx">result</span><span class="p">.</span><span class="nx">image</span> <span class="o">+</span> <span class="s1">&#39;&quot;&gt;&#39;</span>
              <span class="o">+</span> <span class="s1">&#39;&lt;/div&gt;&#39;</span>
            <span class="p">;</span>
          <span class="p">}</span>
          <span class="nx">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;div class=&quot;content&quot;&gt;&#39;</span><span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">price</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;div class=&quot;price&quot;&gt;&#39;</span> <span class="o">+</span> <span class="nx">result</span><span class="p">.</span><span class="nx">price</span> <span class="o">+</span> <span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">title</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;div class=&quot;title&quot;&gt;&#39;</span> <span class="o">+</span> <span class="nx">result</span><span class="p">.</span><span class="nx">title</span> <span class="o">+</span> <span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">description</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;div class=&quot;description&quot;&gt;&#39;</span> <span class="o">+</span> <span class="nx">result</span><span class="p">.</span><span class="nx">description</span> <span class="o">+</span> <span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="nx">html</span>  <span class="o">+=</span> <span class="s1">&#39;&#39;</span>
            <span class="o">+</span> <span class="s1">&#39;&lt;/div&gt;&#39;</span>
          <span class="p">;</span>
          <span class="nx">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/a&gt;&#39;</span><span class="p">;</span>
        <span class="p">});</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">action</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">html</span> <span class="o">+=</span> <span class="s1">&#39;&#39;</span>
          <span class="o">+</span> <span class="s1">&#39;&lt;a href=&quot;&#39;</span> <span class="o">+</span> <span class="nx">response</span><span class="p">.</span><span class="nx">action</span><span class="p">.</span><span class="nx">url</span> <span class="o">+</span> <span class="s1">&#39;&quot; class=&quot;action&quot;&gt;&#39;</span>
          <span class="o">+</span>   <span class="nx">response</span><span class="p">.</span><span class="nx">action</span><span class="p">.</span><span class="nx">text</span>
          <span class="o">+</span> <span class="s1">&#39;&lt;/a&gt;&#39;</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">html</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="p">})(</span> <span class="nx">jQuery</span><span class="p">,</span> <span class="nb">window</span> <span class="p">,</span> <span class="nb">document</span> <span class="p">);</span></pre></div></td></tr><tr id="section-113"><td class="docs"><div class="pilwrap"><a href="#section-113" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><h1>Semantic - Shape</h1>

<p><a href='http://github.com/semantic-org/semantic-ui/'>http://github.com/semantic-org/semantic-ui/</a></p></div><div class="body"><p>Copyright 2014 Contributor<br />Released under the MIT license<br /><a href='http://opensource.org/licenses/MIT'>http://opensource.org/licenses/MIT</a></p></div></div>
</td><td class="code"><div class="highlight"><pre><span class="p">;(</span><span class="kd">function</span> <span class="p">(</span> <span class="nx">$</span><span class="p">,</span> <span class="nb">window</span><span class="p">,</span> <span class="nb">document</span><span class="p">,</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>

<span class="s2">&quot;use strict&quot;</span><span class="p">;</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">shape</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span>
    <span class="nx">$allModules</span>     <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
    <span class="nx">$body</span>           <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">),</span>

    <span class="nx">time</span>            <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">(),</span>
    <span class="nx">performance</span>     <span class="o">=</span> <span class="p">[],</span>

    <span class="nx">query</span>           <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="nx">methodInvoked</span>   <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">),</span>
    <span class="nx">queryArguments</span>  <span class="o">=</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>

    <span class="nx">requestAnimationFrame</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">requestAnimationFrame</span>
      <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">mozRequestAnimationFrame</span>
      <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">webkitRequestAnimationFrame</span>
      <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">msRequestAnimationFrame</span>
      <span class="o">||</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="p">},</span>

    <span class="nx">returnedValue</span>
  <span class="p">;</span>

  <span class="nx">$allModules</span>
    <span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span>
        <span class="nx">moduleSelector</span>  <span class="o">=</span> <span class="nx">$allModules</span><span class="p">.</span><span class="nx">selector</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="nx">settings</span>        <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">shape</span><span class="p">.</span><span class="nx">settings</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">),</span></pre></div></td></tr><tr id="section-114"><td class="docs"><div class="pilwrap"><a href="#section-114" class="pilcrow">&#182;</a></div><p>internal aliases</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">namespace</span>     <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">namespace</span><span class="p">,</span>
        <span class="nx">selector</span>      <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">selector</span><span class="p">,</span>
        <span class="nx">error</span>         <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span>
        <span class="nx">className</span>     <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">className</span><span class="p">,</span></pre></div></td></tr><tr id="section-115"><td class="docs"><div class="pilwrap"><a href="#section-115" class="pilcrow">&#182;</a></div><p>define namespaces for modules</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">eventNamespace</span>  <span class="o">=</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">,</span>
        <span class="nx">moduleNamespace</span> <span class="o">=</span> <span class="s1">&#39;module-&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">,</span></pre></div></td></tr><tr id="section-116"><td class="docs"><div class="pilwrap"><a href="#section-116" class="pilcrow">&#182;</a></div><p>selector cache</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">$module</span>       <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
        <span class="nx">$sides</span>        <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">sides</span><span class="p">),</span>
        <span class="nx">$side</span>         <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">side</span><span class="p">),</span></pre></div></td></tr><tr id="section-117"><td class="docs"><div class="pilwrap"><a href="#section-117" class="pilcrow">&#182;</a></div><p>private variables</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">nextIndex</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nx">$activeSide</span><span class="p">,</span>
        <span class="nx">$nextSide</span><span class="p">,</span></pre></div></td></tr><tr id="section-118"><td class="docs"><div class="pilwrap"><a href="#section-118" class="pilcrow">&#182;</a></div><p>standard module</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">element</span>       <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
        <span class="nx">instance</span>      <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">),</span>
        <span class="nx">module</span>
      <span class="p">;</span>

      <span class="nx">module</span> <span class="o">=</span> <span class="p">{</span>

        <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Initializing module for&#39;</span><span class="p">,</span> <span class="nx">element</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">defaultSide</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">instantiate</span><span class="p">();</span>
        <span class="p">},</span>

        <span class="nx">instantiate</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Storing instance of module&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">);</span>
          <span class="nx">instance</span> <span class="o">=</span> <span class="nx">module</span><span class="p">;</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">,</span> <span class="nx">instance</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">destroy</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Destroying previous module for&#39;</span><span class="p">,</span> <span class="nx">element</span><span class="p">);</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">removeData</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">eventNamespace</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">refresh</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Refreshing selector cache for&#39;</span><span class="p">,</span> <span class="nx">element</span><span class="p">);</span>
          <span class="nx">$module</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
          <span class="nx">$sides</span>  <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">shape</span><span class="p">);</span>
          <span class="nx">$side</span>   <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">side</span><span class="p">);</span>
        <span class="p">},</span>

        <span class="nx">repaint</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Forcing repaint event&#39;</span><span class="p">);</span>
          <span class="kd">var</span>
            <span class="nx">shape</span>          <span class="o">=</span> <span class="nx">$sides</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">),</span>
            <span class="nx">fakeAssignment</span> <span class="o">=</span> <span class="nx">shape</span><span class="p">.</span><span class="nx">offsetWidth</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">animate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">propertyObject</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Animating box with properties&#39;</span><span class="p">,</span> <span class="nx">propertyObject</span><span class="p">);</span>
          <span class="nx">callback</span> <span class="o">=</span> <span class="nx">callback</span> <span class="o">||</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Executing animation callback&#39;</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">event</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">event</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">active</span><span class="p">();</span>
          <span class="p">};</span>
          <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">beforeChange</span><span class="p">,</span> <span class="nx">$nextSide</span><span class="p">[</span><span class="mi">0</span><span class="p">])();</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">transitionEvent</span><span class="p">())</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Starting CSS animation&#39;</span><span class="p">);</span>
            <span class="nx">$module</span>
              <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">animating</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="nx">$sides</span>
              <span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="nx">propertyObject</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">transitionEvent</span><span class="p">(),</span> <span class="nx">callback</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">);</span>
            <span class="nx">requestAnimationFrame</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
              <span class="nx">$module</span>
                <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">animating</span><span class="p">)</span>
              <span class="p">;</span>
              <span class="nx">$activeSide</span>
                <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">hidden</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">});</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">callback</span><span class="p">();</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">queue</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">method</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Queueing animation of&#39;</span><span class="p">,</span> <span class="nx">method</span><span class="p">);</span>
          <span class="nx">$sides</span>
            <span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">transitionEvent</span><span class="p">(),</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Executing queued animation&#39;</span><span class="p">);</span>
              <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
                <span class="nx">$module</span><span class="p">.</span><span class="nx">shape</span><span class="p">(</span><span class="nx">method</span><span class="p">);</span>
              <span class="p">},</span> <span class="mi">0</span><span class="p">);</span>
            <span class="p">})</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">reset</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Animating states reset&#39;</span><span class="p">);</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">animating</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;style&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">removeAttr</span><span class="p">(</span><span class="s1">&#39;style&#39;</span><span class="p">)</span>
          <span class="p">;</span></pre></div></td></tr><tr id="section-119"><td class="docs"><div class="pilwrap"><a href="#section-119" class="pilcrow">&#182;</a></div><p>removeAttr style does not consistently work in safari</p>
</td><td class="code"><div class="highlight"><pre>          <span class="nx">$sides</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;style&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">removeAttr</span><span class="p">(</span><span class="s1">&#39;style&#39;</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$side</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;style&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">removeAttr</span><span class="p">(</span><span class="s1">&#39;style&#39;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">hidden</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$nextSide</span>
            <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">animating</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;style&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">removeAttr</span><span class="p">(</span><span class="s1">&#39;style&#39;</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">is</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">complete</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span><span class="nx">$side</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="nx">$nextSide</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
          <span class="p">},</span>
          <span class="nx">animating</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">animating</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">set</span><span class="o">:</span> <span class="p">{</span>

          <span class="nx">defaultSide</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$activeSide</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">);</span>
            <span class="nx">$nextSide</span>   <span class="o">=</span> <span class="p">(</span> <span class="nx">$activeSide</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">side</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span>
              <span class="o">?</span> <span class="nx">$activeSide</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">side</span><span class="p">)</span>
              <span class="o">:</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">side</span><span class="p">).</span><span class="nx">first</span><span class="p">()</span>
            <span class="p">;</span>
            <span class="nx">nextIndex</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Active side set to&#39;</span><span class="p">,</span> <span class="nx">$activeSide</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Next side set to&#39;</span><span class="p">,</span> <span class="nx">$nextSide</span><span class="p">);</span>
          <span class="p">},</span>

          <span class="nx">duration</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">duration</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">duration</span> <span class="o">=</span> <span class="nx">duration</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">;</span>
            <span class="nx">duration</span> <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">duration</span> <span class="o">==</span> <span class="s1">&#39;number&#39;</span><span class="p">)</span>
              <span class="o">?</span> <span class="nx">duration</span> <span class="o">+</span> <span class="s1">&#39;ms&#39;</span>
              <span class="o">:</span> <span class="nx">duration</span>
            <span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Setting animation duration&#39;</span><span class="p">,</span> <span class="nx">duration</span><span class="p">);</span>
            <span class="nx">$sides</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">$side</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">css</span><span class="p">({</span>
                <span class="s1">&#39;-webkit-transition-duration&#39;</span><span class="o">:</span> <span class="nx">duration</span><span class="p">,</span>
                <span class="s1">&#39;-moz-transition-duration&#39;</span><span class="o">:</span> <span class="nx">duration</span><span class="p">,</span>
                <span class="s1">&#39;-ms-transition-duration&#39;</span><span class="o">:</span> <span class="nx">duration</span><span class="p">,</span>
                <span class="s1">&#39;-o-transition-duration&#39;</span><span class="o">:</span> <span class="nx">duration</span><span class="p">,</span>
                <span class="s1">&#39;transition-duration&#39;</span><span class="o">:</span> <span class="nx">duration</span>
              <span class="p">})</span>
            <span class="p">;</span>
          <span class="p">},</span>

          <span class="nx">stageSize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">$clone</span>      <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">clone</span><span class="p">().</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">loading</span><span class="p">),</span>
              <span class="nx">$activeSide</span> <span class="o">=</span> <span class="nx">$clone</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">),</span>
              <span class="nx">$nextSide</span>   <span class="o">=</span> <span class="p">(</span><span class="nx">nextIndex</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">$clone</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">side</span><span class="p">).</span><span class="nx">eq</span><span class="p">(</span><span class="nx">nextIndex</span><span class="p">)</span>
                <span class="o">:</span> <span class="p">(</span> <span class="nx">$activeSide</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">side</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span>
                  <span class="o">?</span> <span class="nx">$activeSide</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">side</span><span class="p">)</span>
                  <span class="o">:</span> <span class="nx">$clone</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">side</span><span class="p">).</span><span class="nx">first</span><span class="p">(),</span>
              <span class="nx">newSize</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="p">;</span>
            <span class="nx">$activeSide</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">);</span>
            <span class="nx">$nextSide</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">);</span>
            <span class="nx">$clone</span><span class="p">.</span><span class="nx">insertAfter</span><span class="p">(</span><span class="nx">$module</span><span class="p">);</span>
            <span class="nx">newSize</span> <span class="o">=</span> <span class="p">{</span>
              <span class="nx">width</span>  <span class="o">:</span> <span class="nx">$nextSide</span><span class="p">.</span><span class="nx">outerWidth</span><span class="p">(),</span>
              <span class="nx">height</span> <span class="o">:</span> <span class="nx">$nextSide</span><span class="p">.</span><span class="nx">outerHeight</span><span class="p">()</span>
            <span class="p">};</span>
            <span class="nx">$clone</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
            <span class="nx">$module</span>
              <span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="nx">newSize</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Resizing stage to fit new content&#39;</span><span class="p">,</span> <span class="nx">newSize</span><span class="p">);</span>
          <span class="p">},</span>

          <span class="nx">nextSide</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">selector</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">nextIndex</span> <span class="o">=</span> <span class="nx">selector</span><span class="p">;</span>
            <span class="nx">$nextSide</span> <span class="o">=</span> <span class="nx">$side</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">selector</span><span class="p">);</span>
            <span class="nx">nextIndex</span> <span class="o">=</span> <span class="nx">$side</span><span class="p">.</span><span class="nx">index</span><span class="p">(</span><span class="nx">$nextSide</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">$nextSide</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">defaultSide</span><span class="p">();</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">side</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Next side manually set to&#39;</span><span class="p">,</span> <span class="nx">$nextSide</span><span class="p">);</span>
          <span class="p">},</span>

          <span class="nx">active</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Setting new side to active&#39;</span><span class="p">,</span> <span class="nx">$nextSide</span><span class="p">);</span>
            <span class="nx">$side</span>
              <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="nx">$nextSide</span>
              <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onChange</span><span class="p">,</span> <span class="nx">$nextSide</span><span class="p">[</span><span class="mi">0</span><span class="p">])();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">defaultSide</span><span class="p">();</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">flip</span><span class="o">:</span> <span class="p">{</span>

          <span class="nx">up</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">complete</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">animating</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">settings</span><span class="p">.</span><span class="nx">allowRepeats</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Side already visible&#39;</span><span class="p">,</span> <span class="nx">$nextSide</span><span class="p">);</span>
              <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">animating</span><span class="p">())</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Flipping up&#39;</span><span class="p">,</span> <span class="nx">$nextSide</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">stageSize</span><span class="p">();</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">above</span><span class="p">();</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">animate</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">up</span><span class="p">()</span> <span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">queue</span><span class="p">(</span><span class="s1">&#39;flip up&#39;</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">},</span>

          <span class="nx">down</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">complete</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">animating</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">settings</span><span class="p">.</span><span class="nx">allowRepeats</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Side already visible&#39;</span><span class="p">,</span> <span class="nx">$nextSide</span><span class="p">);</span>
              <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">animating</span><span class="p">())</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Flipping down&#39;</span><span class="p">,</span> <span class="nx">$nextSide</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">stageSize</span><span class="p">();</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">below</span><span class="p">();</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">animate</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">down</span><span class="p">()</span> <span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">queue</span><span class="p">(</span><span class="s1">&#39;flip down&#39;</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">},</span>

          <span class="nx">left</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">complete</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">animating</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">settings</span><span class="p">.</span><span class="nx">allowRepeats</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Side already visible&#39;</span><span class="p">,</span> <span class="nx">$nextSide</span><span class="p">);</span>
              <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">animating</span><span class="p">())</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Flipping left&#39;</span><span class="p">,</span> <span class="nx">$nextSide</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">stageSize</span><span class="p">();</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">left</span><span class="p">();</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">animate</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">left</span><span class="p">()</span> <span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">queue</span><span class="p">(</span><span class="s1">&#39;flip left&#39;</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">},</span>

          <span class="nx">right</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">complete</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">animating</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">settings</span><span class="p">.</span><span class="nx">allowRepeats</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Side already visible&#39;</span><span class="p">,</span> <span class="nx">$nextSide</span><span class="p">);</span>
              <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">animating</span><span class="p">())</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Flipping right&#39;</span><span class="p">,</span> <span class="nx">$nextSide</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">stageSize</span><span class="p">();</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">right</span><span class="p">();</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">animate</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">right</span><span class="p">()</span> <span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">queue</span><span class="p">(</span><span class="s1">&#39;flip right&#39;</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">},</span>

          <span class="nx">over</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">complete</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">animating</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">settings</span><span class="p">.</span><span class="nx">allowRepeats</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Side already visible&#39;</span><span class="p">,</span> <span class="nx">$nextSide</span><span class="p">);</span>
              <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">animating</span><span class="p">())</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Flipping over&#39;</span><span class="p">,</span> <span class="nx">$nextSide</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">stageSize</span><span class="p">();</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">behind</span><span class="p">();</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">animate</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">over</span><span class="p">()</span> <span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">queue</span><span class="p">(</span><span class="s1">&#39;flip over&#39;</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">},</span>

          <span class="nx">back</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">complete</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">animating</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">settings</span><span class="p">.</span><span class="nx">allowRepeats</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Side already visible&#39;</span><span class="p">,</span> <span class="nx">$nextSide</span><span class="p">);</span>
              <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">animating</span><span class="p">())</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Flipping back&#39;</span><span class="p">,</span> <span class="nx">$nextSide</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">stageSize</span><span class="p">();</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">stage</span><span class="p">.</span><span class="nx">behind</span><span class="p">();</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">animate</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">back</span><span class="p">()</span> <span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">queue</span><span class="p">(</span><span class="s1">&#39;flip back&#39;</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>

        <span class="p">},</span>

        <span class="nx">get</span><span class="o">:</span> <span class="p">{</span>

          <span class="nx">transform</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">up</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
              <span class="kd">var</span>
                <span class="nx">translate</span> <span class="o">=</span> <span class="p">{</span>
                  <span class="nx">y</span><span class="o">:</span> <span class="o">-</span><span class="p">((</span><span class="nx">$activeSide</span><span class="p">.</span><span class="nx">outerHeight</span><span class="p">()</span> <span class="o">-</span> <span class="nx">$nextSide</span><span class="p">.</span><span class="nx">outerHeight</span><span class="p">())</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span>
                  <span class="nx">z</span><span class="o">:</span> <span class="o">-</span><span class="p">(</span><span class="nx">$activeSide</span><span class="p">.</span><span class="nx">outerHeight</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
                <span class="p">}</span>
              <span class="p">;</span>
              <span class="k">return</span> <span class="p">{</span>
                <span class="nx">transform</span><span class="o">:</span> <span class="s1">&#39;translateY(&#39;</span> <span class="o">+</span> <span class="nx">translate</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="s1">&#39;px) translateZ(&#39;</span><span class="o">+</span> <span class="nx">translate</span><span class="p">.</span><span class="nx">z</span> <span class="o">+</span> <span class="s1">&#39;px) rotateX(-90deg)&#39;</span>
              <span class="p">};</span>
            <span class="p">},</span>

            <span class="nx">down</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
              <span class="kd">var</span>
                <span class="nx">translate</span> <span class="o">=</span> <span class="p">{</span>
                  <span class="nx">y</span><span class="o">:</span> <span class="o">-</span><span class="p">((</span><span class="nx">$activeSide</span><span class="p">.</span><span class="nx">outerHeight</span><span class="p">()</span> <span class="o">-</span> <span class="nx">$nextSide</span><span class="p">.</span><span class="nx">outerHeight</span><span class="p">())</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span>
                  <span class="nx">z</span><span class="o">:</span> <span class="o">-</span><span class="p">(</span><span class="nx">$activeSide</span><span class="p">.</span><span class="nx">outerHeight</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
                <span class="p">}</span>
              <span class="p">;</span>
              <span class="k">return</span> <span class="p">{</span>
                <span class="nx">transform</span><span class="o">:</span> <span class="s1">&#39;translateY(&#39;</span> <span class="o">+</span> <span class="nx">translate</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="s1">&#39;px) translateZ(&#39;</span><span class="o">+</span> <span class="nx">translate</span><span class="p">.</span><span class="nx">z</span> <span class="o">+</span> <span class="s1">&#39;px) rotateX(90deg)&#39;</span>
              <span class="p">};</span>
            <span class="p">},</span>

            <span class="nx">left</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
              <span class="kd">var</span>
                <span class="nx">translate</span> <span class="o">=</span> <span class="p">{</span>
                  <span class="nx">x</span> <span class="o">:</span> <span class="o">-</span><span class="p">((</span><span class="nx">$activeSide</span><span class="p">.</span><span class="nx">outerWidth</span><span class="p">()</span> <span class="o">-</span> <span class="nx">$nextSide</span><span class="p">.</span><span class="nx">outerWidth</span><span class="p">())</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span>
                  <span class="nx">z</span> <span class="o">:</span> <span class="o">-</span><span class="p">(</span><span class="nx">$activeSide</span><span class="p">.</span><span class="nx">outerWidth</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
                <span class="p">}</span>
              <span class="p">;</span>
              <span class="k">return</span> <span class="p">{</span>
                <span class="nx">transform</span><span class="o">:</span> <span class="s1">&#39;translateX(&#39;</span> <span class="o">+</span> <span class="nx">translate</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="s1">&#39;px) translateZ(&#39;</span> <span class="o">+</span> <span class="nx">translate</span><span class="p">.</span><span class="nx">z</span> <span class="o">+</span> <span class="s1">&#39;px) rotateY(90deg)&#39;</span>
              <span class="p">};</span>
            <span class="p">},</span>

            <span class="nx">right</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
              <span class="kd">var</span>
                <span class="nx">translate</span> <span class="o">=</span> <span class="p">{</span>
                  <span class="nx">x</span> <span class="o">:</span> <span class="o">-</span><span class="p">((</span><span class="nx">$activeSide</span><span class="p">.</span><span class="nx">outerWidth</span><span class="p">()</span> <span class="o">-</span> <span class="nx">$nextSide</span><span class="p">.</span><span class="nx">outerWidth</span><span class="p">())</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span>
                  <span class="nx">z</span> <span class="o">:</span> <span class="o">-</span><span class="p">(</span><span class="nx">$activeSide</span><span class="p">.</span><span class="nx">outerWidth</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
                <span class="p">}</span>
              <span class="p">;</span>
              <span class="k">return</span> <span class="p">{</span>
                <span class="nx">transform</span><span class="o">:</span> <span class="s1">&#39;translateX(&#39;</span> <span class="o">+</span> <span class="nx">translate</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="s1">&#39;px) translateZ(&#39;</span> <span class="o">+</span> <span class="nx">translate</span><span class="p">.</span><span class="nx">z</span> <span class="o">+</span> <span class="s1">&#39;px) rotateY(-90deg)&#39;</span>
              <span class="p">};</span>
            <span class="p">},</span>

            <span class="nx">over</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
              <span class="kd">var</span>
                <span class="nx">translate</span> <span class="o">=</span> <span class="p">{</span>
                  <span class="nx">x</span> <span class="o">:</span> <span class="o">-</span><span class="p">((</span><span class="nx">$activeSide</span><span class="p">.</span><span class="nx">outerWidth</span><span class="p">()</span> <span class="o">-</span> <span class="nx">$nextSide</span><span class="p">.</span><span class="nx">outerWidth</span><span class="p">())</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
                <span class="p">}</span>
              <span class="p">;</span>
              <span class="k">return</span> <span class="p">{</span>
                <span class="nx">transform</span><span class="o">:</span> <span class="s1">&#39;translateX(&#39;</span> <span class="o">+</span> <span class="nx">translate</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="s1">&#39;px) rotateY(180deg)&#39;</span>
              <span class="p">};</span>
            <span class="p">},</span>

            <span class="nx">back</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
              <span class="kd">var</span>
                <span class="nx">translate</span> <span class="o">=</span> <span class="p">{</span>
                  <span class="nx">x</span> <span class="o">:</span> <span class="o">-</span><span class="p">((</span><span class="nx">$activeSide</span><span class="p">.</span><span class="nx">outerWidth</span><span class="p">()</span> <span class="o">-</span> <span class="nx">$nextSide</span><span class="p">.</span><span class="nx">outerWidth</span><span class="p">())</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
                <span class="p">}</span>
              <span class="p">;</span>
              <span class="k">return</span> <span class="p">{</span>
                <span class="nx">transform</span><span class="o">:</span> <span class="s1">&#39;translateX(&#39;</span> <span class="o">+</span> <span class="nx">translate</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="s1">&#39;px) rotateY(-180deg)&#39;</span>
              <span class="p">};</span>
            <span class="p">}</span>
          <span class="p">},</span>

          <span class="nx">transitionEvent</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">element</span>     <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;element&#39;</span><span class="p">),</span>
              <span class="nx">transitions</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;transition&#39;</span>       <span class="o">:</span><span class="s1">&#39;transitionend&#39;</span><span class="p">,</span>
                <span class="s1">&#39;OTransition&#39;</span>      <span class="o">:</span><span class="s1">&#39;oTransitionEnd&#39;</span><span class="p">,</span>
                <span class="s1">&#39;MozTransition&#39;</span>    <span class="o">:</span><span class="s1">&#39;transitionend&#39;</span><span class="p">,</span>
                <span class="s1">&#39;WebkitTransition&#39;</span> <span class="o">:</span><span class="s1">&#39;webkitTransitionEnd&#39;</span>
              <span class="p">},</span>
              <span class="nx">transition</span>
            <span class="p">;</span>
            <span class="k">for</span><span class="p">(</span><span class="nx">transition</span> <span class="k">in</span> <span class="nx">transitions</span><span class="p">){</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span><span class="nx">transition</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">){</span>
                <span class="k">return</span> <span class="nx">transitions</span><span class="p">[</span><span class="nx">transition</span><span class="p">];</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">},</span>

          <span class="nx">nextSide</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span> <span class="nx">$activeSide</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">side</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span>
              <span class="o">?</span> <span class="nx">$activeSide</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">side</span><span class="p">)</span>
              <span class="o">:</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">side</span><span class="p">).</span><span class="nx">first</span><span class="p">()</span>
            <span class="p">;</span>
          <span class="p">}</span>

        <span class="p">},</span>

        <span class="nx">stage</span><span class="o">:</span> <span class="p">{</span>

          <span class="nx">above</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">box</span> <span class="o">=</span> <span class="p">{</span>
                <span class="nx">origin</span> <span class="o">:</span> <span class="p">((</span><span class="nx">$activeSide</span><span class="p">.</span><span class="nx">outerHeight</span><span class="p">()</span> <span class="o">-</span> <span class="nx">$nextSide</span><span class="p">.</span><span class="nx">outerHeight</span><span class="p">())</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span>
                <span class="nx">depth</span>  <span class="o">:</span> <span class="p">{</span>
                  <span class="nx">active</span> <span class="o">:</span> <span class="p">(</span><span class="nx">$nextSide</span><span class="p">.</span><span class="nx">outerHeight</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span>
                  <span class="nx">next</span>   <span class="o">:</span> <span class="p">(</span><span class="nx">$activeSide</span><span class="p">.</span><span class="nx">outerHeight</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
                <span class="p">}</span>
              <span class="p">}</span>
            <span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Setting the initial animation position as above&#39;</span><span class="p">,</span> <span class="nx">$nextSide</span><span class="p">,</span> <span class="nx">box</span><span class="p">);</span>
            <span class="nx">$activeSide</span>
              <span class="p">.</span><span class="nx">css</span><span class="p">({</span>
                <span class="s1">&#39;transform&#39;</span> <span class="o">:</span> <span class="s1">&#39;rotateY(0deg) translateZ(&#39;</span> <span class="o">+</span> <span class="nx">box</span><span class="p">.</span><span class="nx">depth</span><span class="p">.</span><span class="nx">active</span> <span class="o">+</span> <span class="s1">&#39;px)&#39;</span>
              <span class="p">})</span>
            <span class="p">;</span>
            <span class="nx">$nextSide</span>
              <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">animating</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">css</span><span class="p">({</span>
                <span class="s1">&#39;display&#39;</span>   <span class="o">:</span> <span class="s1">&#39;block&#39;</span><span class="p">,</span>
                <span class="s1">&#39;top&#39;</span>       <span class="o">:</span> <span class="nx">box</span><span class="p">.</span><span class="nx">origin</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">,</span>
                <span class="s1">&#39;transform&#39;</span> <span class="o">:</span> <span class="s1">&#39;rotateX(90deg) translateZ(&#39;</span> <span class="o">+</span> <span class="nx">box</span><span class="p">.</span><span class="nx">depth</span><span class="p">.</span><span class="nx">next</span> <span class="o">+</span> <span class="s1">&#39;px)&#39;</span>
              <span class="p">})</span>
            <span class="p">;</span>
          <span class="p">},</span>

          <span class="nx">below</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">box</span> <span class="o">=</span> <span class="p">{</span>
                <span class="nx">origin</span> <span class="o">:</span> <span class="p">((</span><span class="nx">$activeSide</span><span class="p">.</span><span class="nx">outerHeight</span><span class="p">()</span> <span class="o">-</span> <span class="nx">$nextSide</span><span class="p">.</span><span class="nx">outerHeight</span><span class="p">())</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span>
                <span class="nx">depth</span>  <span class="o">:</span> <span class="p">{</span>
                  <span class="nx">active</span> <span class="o">:</span> <span class="p">(</span><span class="nx">$nextSide</span><span class="p">.</span><span class="nx">outerHeight</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span>
                  <span class="nx">next</span>   <span class="o">:</span> <span class="p">(</span><span class="nx">$activeSide</span><span class="p">.</span><span class="nx">outerHeight</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
                <span class="p">}</span>
              <span class="p">}</span>
            <span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Setting the initial animation position as below&#39;</span><span class="p">,</span> <span class="nx">$nextSide</span><span class="p">,</span> <span class="nx">box</span><span class="p">);</span>
            <span class="nx">$activeSide</span>
              <span class="p">.</span><span class="nx">css</span><span class="p">({</span>
                <span class="s1">&#39;transform&#39;</span> <span class="o">:</span> <span class="s1">&#39;rotateY(0deg) translateZ(&#39;</span> <span class="o">+</span> <span class="nx">box</span><span class="p">.</span><span class="nx">depth</span><span class="p">.</span><span class="nx">active</span> <span class="o">+</span> <span class="s1">&#39;px)&#39;</span>
              <span class="p">})</span>
            <span class="p">;</span>
            <span class="nx">$nextSide</span>
              <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">animating</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">css</span><span class="p">({</span>
                <span class="s1">&#39;display&#39;</span>   <span class="o">:</span> <span class="s1">&#39;block&#39;</span><span class="p">,</span>
                <span class="s1">&#39;top&#39;</span>       <span class="o">:</span> <span class="nx">box</span><span class="p">.</span><span class="nx">origin</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">,</span>
                <span class="s1">&#39;transform&#39;</span> <span class="o">:</span> <span class="s1">&#39;rotateX(-90deg) translateZ(&#39;</span> <span class="o">+</span> <span class="nx">box</span><span class="p">.</span><span class="nx">depth</span><span class="p">.</span><span class="nx">next</span> <span class="o">+</span> <span class="s1">&#39;px)&#39;</span>
              <span class="p">})</span>
            <span class="p">;</span>
          <span class="p">},</span>

          <span class="nx">left</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">box</span> <span class="o">=</span> <span class="p">{</span>
                <span class="nx">origin</span> <span class="o">:</span> <span class="p">(</span> <span class="p">(</span> <span class="nx">$activeSide</span><span class="p">.</span><span class="nx">outerWidth</span><span class="p">()</span> <span class="o">-</span> <span class="nx">$nextSide</span><span class="p">.</span><span class="nx">outerWidth</span><span class="p">()</span> <span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span>
                <span class="nx">depth</span>  <span class="o">:</span> <span class="p">{</span>
                  <span class="nx">active</span> <span class="o">:</span> <span class="p">(</span><span class="nx">$nextSide</span><span class="p">.</span><span class="nx">outerWidth</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span>
                  <span class="nx">next</span>   <span class="o">:</span> <span class="p">(</span><span class="nx">$activeSide</span><span class="p">.</span><span class="nx">outerWidth</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
                <span class="p">}</span>
              <span class="p">}</span>
            <span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Setting the initial animation position as left&#39;</span><span class="p">,</span> <span class="nx">$nextSide</span><span class="p">,</span> <span class="nx">box</span><span class="p">);</span>
            <span class="nx">$activeSide</span>
              <span class="p">.</span><span class="nx">css</span><span class="p">({</span>
                <span class="s1">&#39;transform&#39;</span> <span class="o">:</span> <span class="s1">&#39;rotateY(0deg) translateZ(&#39;</span> <span class="o">+</span> <span class="nx">box</span><span class="p">.</span><span class="nx">depth</span><span class="p">.</span><span class="nx">active</span> <span class="o">+</span> <span class="s1">&#39;px)&#39;</span>
              <span class="p">})</span>
            <span class="p">;</span>
            <span class="nx">$nextSide</span>
              <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">animating</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">css</span><span class="p">({</span>
                <span class="s1">&#39;display&#39;</span>   <span class="o">:</span> <span class="s1">&#39;block&#39;</span><span class="p">,</span>
                <span class="s1">&#39;left&#39;</span>      <span class="o">:</span> <span class="nx">box</span><span class="p">.</span><span class="nx">origin</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">,</span>
                <span class="s1">&#39;transform&#39;</span> <span class="o">:</span> <span class="s1">&#39;rotateY(-90deg) translateZ(&#39;</span> <span class="o">+</span> <span class="nx">box</span><span class="p">.</span><span class="nx">depth</span><span class="p">.</span><span class="nx">next</span> <span class="o">+</span> <span class="s1">&#39;px)&#39;</span>
              <span class="p">})</span>
            <span class="p">;</span>
          <span class="p">},</span>

          <span class="nx">right</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">box</span> <span class="o">=</span> <span class="p">{</span>
                <span class="nx">origin</span> <span class="o">:</span> <span class="p">(</span> <span class="p">(</span> <span class="nx">$activeSide</span><span class="p">.</span><span class="nx">outerWidth</span><span class="p">()</span> <span class="o">-</span> <span class="nx">$nextSide</span><span class="p">.</span><span class="nx">outerWidth</span><span class="p">()</span> <span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span>
                <span class="nx">depth</span>  <span class="o">:</span> <span class="p">{</span>
                  <span class="nx">active</span> <span class="o">:</span> <span class="p">(</span><span class="nx">$nextSide</span><span class="p">.</span><span class="nx">outerWidth</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span>
                  <span class="nx">next</span>   <span class="o">:</span> <span class="p">(</span><span class="nx">$activeSide</span><span class="p">.</span><span class="nx">outerWidth</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
                <span class="p">}</span>
              <span class="p">}</span>
            <span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Setting the initial animation position as left&#39;</span><span class="p">,</span> <span class="nx">$nextSide</span><span class="p">,</span> <span class="nx">box</span><span class="p">);</span>
            <span class="nx">$activeSide</span>
              <span class="p">.</span><span class="nx">css</span><span class="p">({</span>
                <span class="s1">&#39;transform&#39;</span> <span class="o">:</span> <span class="s1">&#39;rotateY(0deg) translateZ(&#39;</span> <span class="o">+</span> <span class="nx">box</span><span class="p">.</span><span class="nx">depth</span><span class="p">.</span><span class="nx">active</span> <span class="o">+</span> <span class="s1">&#39;px)&#39;</span>
              <span class="p">})</span>
            <span class="p">;</span>
            <span class="nx">$nextSide</span>
              <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">animating</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">css</span><span class="p">({</span>
                <span class="s1">&#39;display&#39;</span>   <span class="o">:</span> <span class="s1">&#39;block&#39;</span><span class="p">,</span>
                <span class="s1">&#39;left&#39;</span>      <span class="o">:</span> <span class="nx">box</span><span class="p">.</span><span class="nx">origin</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">,</span>
                <span class="s1">&#39;transform&#39;</span> <span class="o">:</span> <span class="s1">&#39;rotateY(90deg) translateZ(&#39;</span> <span class="o">+</span> <span class="nx">box</span><span class="p">.</span><span class="nx">depth</span><span class="p">.</span><span class="nx">next</span> <span class="o">+</span> <span class="s1">&#39;px)&#39;</span>
              <span class="p">})</span>
            <span class="p">;</span>
          <span class="p">},</span>

          <span class="nx">behind</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">box</span> <span class="o">=</span> <span class="p">{</span>
                <span class="nx">origin</span> <span class="o">:</span> <span class="p">(</span> <span class="p">(</span> <span class="nx">$activeSide</span><span class="p">.</span><span class="nx">outerWidth</span><span class="p">()</span> <span class="o">-</span> <span class="nx">$nextSide</span><span class="p">.</span><span class="nx">outerWidth</span><span class="p">()</span> <span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span>
                <span class="nx">depth</span>  <span class="o">:</span> <span class="p">{</span>
                  <span class="nx">active</span> <span class="o">:</span> <span class="p">(</span><span class="nx">$nextSide</span><span class="p">.</span><span class="nx">outerWidth</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span>
                  <span class="nx">next</span>   <span class="o">:</span> <span class="p">(</span><span class="nx">$activeSide</span><span class="p">.</span><span class="nx">outerWidth</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
                <span class="p">}</span>
              <span class="p">}</span>
            <span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Setting the initial animation position as behind&#39;</span><span class="p">,</span> <span class="nx">$nextSide</span><span class="p">,</span> <span class="nx">box</span><span class="p">);</span>
            <span class="nx">$activeSide</span>
              <span class="p">.</span><span class="nx">css</span><span class="p">({</span>
                <span class="s1">&#39;transform&#39;</span> <span class="o">:</span> <span class="s1">&#39;rotateY(0deg)&#39;</span>
              <span class="p">})</span>
            <span class="p">;</span>
            <span class="nx">$nextSide</span>
              <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">animating</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">css</span><span class="p">({</span>
                <span class="s1">&#39;display&#39;</span>   <span class="o">:</span> <span class="s1">&#39;block&#39;</span><span class="p">,</span>
                <span class="s1">&#39;left&#39;</span>      <span class="o">:</span> <span class="nx">box</span><span class="p">.</span><span class="nx">origin</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">,</span>
                <span class="s1">&#39;transform&#39;</span> <span class="o">:</span> <span class="s1">&#39;rotateY(-180deg)&#39;</span>
              <span class="p">})</span>
            <span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">setting</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Changing setting&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">settings</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">internal</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">module</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">debug</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">verbose</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">&amp;&amp;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">performance</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">log</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">currentTime</span><span class="p">,</span>
              <span class="nx">executionTime</span><span class="p">,</span>
              <span class="nx">previousTime</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">currentTime</span>   <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>
              <span class="nx">previousTime</span>  <span class="o">=</span> <span class="nx">time</span> <span class="o">||</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">executionTime</span> <span class="o">=</span> <span class="nx">currentTime</span> <span class="o">-</span> <span class="nx">previousTime</span><span class="p">;</span>
              <span class="nx">time</span>          <span class="o">=</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">performance</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
                <span class="s1">&#39;Name&#39;</span>           <span class="o">:</span> <span class="nx">message</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="s1">&#39;Arguments&#39;</span>      <span class="o">:</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Element&#39;</span>        <span class="o">:</span> <span class="nx">element</span><span class="p">,</span>
                <span class="s1">&#39;Execution Time&#39;</span> <span class="o">:</span> <span class="nx">executionTime</span>
              <span class="p">});</span>
            <span class="p">}</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">display</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">title</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span>
              <span class="nx">totalTime</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="p">;</span>
            <span class="nx">time</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">totalTime</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">];</span>
            <span class="p">});</span>
            <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">totalTime</span> <span class="o">+</span> <span class="s1">&#39;ms&#39;</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">moduleSelector</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; \&#39;&#39;</span> <span class="o">+</span> <span class="nx">moduleSelector</span> <span class="o">+</span> <span class="s1">&#39;\&#39;&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">$allModules</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="s1">&#39;(&#39;</span> <span class="o">+</span> <span class="nx">$allModules</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span> <span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">group</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">console</span><span class="p">.</span><span class="nx">table</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">performance</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupCollapsed</span><span class="p">(</span><span class="nx">title</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">performance</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;ms&#39;</span><span class="p">);</span>
                <span class="p">});</span>
              <span class="p">}</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupEnd</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">performance</span> <span class="o">=</span> <span class="p">[];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">invoke</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">object</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">,</span>
            <span class="nx">maxDepth</span><span class="p">,</span>
            <span class="nx">found</span><span class="p">,</span>
            <span class="nx">response</span>
          <span class="p">;</span>
          <span class="nx">passedArguments</span> <span class="o">=</span> <span class="nx">passedArguments</span> <span class="o">||</span> <span class="nx">queryArguments</span><span class="p">;</span>
          <span class="nx">context</span>         <span class="o">=</span> <span class="nx">element</span>         <span class="o">||</span> <span class="nx">context</span><span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">object</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">query</span>    <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/[\. ]/</span><span class="p">);</span>
            <span class="nx">maxDepth</span> <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">depth</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span> <span class="nx">camelCaseValue</span> <span class="o">=</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">value</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="o">:</span> <span class="nx">query</span>
              <span class="p">;</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">});</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">found</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">found</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">returnedValue</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">returnedValue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="p">[</span><span class="nx">returnedValue</span><span class="p">,</span> <span class="nx">response</span><span class="p">];</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">response</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="nx">found</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>

      <span class="k">if</span><span class="p">(</span><span class="nx">methodInvoked</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="nx">query</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">})</span>
  <span class="p">;</span>

  <span class="k">return</span> <span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
    <span class="o">?</span> <span class="nx">returnedValue</span>
    <span class="o">:</span> <span class="k">this</span>
  <span class="p">;</span>
<span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">shape</span><span class="p">.</span><span class="nx">settings</span> <span class="o">=</span> <span class="p">{</span></pre></div></td></tr><tr id="section-120"><td class="docs"><div class="pilwrap"><a href="#section-120" class="pilcrow">&#182;</a></div><p>module info</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">name</span> <span class="o">:</span> <span class="s1">&#39;Shape&#39;</span><span class="p">,</span></pre></div></td></tr><tr id="section-121"><td class="docs"><div class="pilwrap"><a href="#section-121" class="pilcrow">&#182;</a></div><p>debug content outputted to console</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">debug</span>      <span class="o">:</span> <span class="kc">false</span><span class="p">,</span></pre></div></td></tr><tr id="section-122"><td class="docs"><div class="pilwrap"><a href="#section-122" class="pilcrow">&#182;</a></div><p>verbose debug output</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">verbose</span>    <span class="o">:</span> <span class="kc">true</span><span class="p">,</span></pre></div></td></tr><tr id="section-123"><td class="docs"><div class="pilwrap"><a href="#section-123" class="pilcrow">&#182;</a></div><p>performance data output</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">performance</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span></pre></div></td></tr><tr id="section-124"><td class="docs"><div class="pilwrap"><a href="#section-124" class="pilcrow">&#182;</a></div><p>event namespace</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">namespace</span>  <span class="o">:</span> <span class="s1">&#39;shape&#39;</span><span class="p">,</span></pre></div></td></tr><tr id="section-125"><td class="docs"><div class="pilwrap"><a href="#section-125" class="pilcrow">&#182;</a></div><p>callback occurs on side change</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">beforeChange</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{},</span>
  <span class="nx">onChange</span>     <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{},</span></pre></div></td></tr><tr id="section-126"><td class="docs"><div class="pilwrap"><a href="#section-126" class="pilcrow">&#182;</a></div><p>allow animation to same side</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">allowRepeats</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span></pre></div></td></tr><tr id="section-127"><td class="docs"><div class="pilwrap"><a href="#section-127" class="pilcrow">&#182;</a></div><p>animation duration</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">duration</span>   <span class="o">:</span> <span class="mi">700</span><span class="p">,</span></pre></div></td></tr><tr id="section-128"><td class="docs"><div class="pilwrap"><a href="#section-128" class="pilcrow">&#182;</a></div><p>possible errors</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">error</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">side</span>   <span class="o">:</span> <span class="s1">&#39;You tried to switch to a side that does not exist.&#39;</span><span class="p">,</span>
    <span class="nx">method</span> <span class="o">:</span> <span class="s1">&#39;The method you called is not defined&#39;</span>
  <span class="p">},</span></pre></div></td></tr><tr id="section-129"><td class="docs"><div class="pilwrap"><a href="#section-129" class="pilcrow">&#182;</a></div><p>classnames used</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">className</span>   <span class="o">:</span> <span class="p">{</span>
    <span class="nx">animating</span> <span class="o">:</span> <span class="s1">&#39;animating&#39;</span><span class="p">,</span>
    <span class="nx">hidden</span>    <span class="o">:</span> <span class="s1">&#39;hidden&#39;</span><span class="p">,</span>
    <span class="nx">loading</span>   <span class="o">:</span> <span class="s1">&#39;loading&#39;</span><span class="p">,</span>
    <span class="nx">active</span>    <span class="o">:</span> <span class="s1">&#39;active&#39;</span>
  <span class="p">},</span></pre></div></td></tr><tr id="section-130"><td class="docs"><div class="pilwrap"><a href="#section-130" class="pilcrow">&#182;</a></div><p>selectors used</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">selector</span>    <span class="o">:</span> <span class="p">{</span>
    <span class="nx">sides</span> <span class="o">:</span> <span class="s1">&#39;.sides&#39;</span><span class="p">,</span>
    <span class="nx">side</span>  <span class="o">:</span> <span class="s1">&#39;.side&#39;</span>
  <span class="p">}</span>

<span class="p">};</span>


<span class="p">})(</span> <span class="nx">jQuery</span><span class="p">,</span> <span class="nb">window</span> <span class="p">,</span> <span class="nb">document</span> <span class="p">);</span></pre></div></td></tr><tr id="section-131"><td class="docs"><div class="pilwrap"><a href="#section-131" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><h1>Semantic - Sidebar</h1>

<p><a href='http://github.com/semantic-org/semantic-ui/'>http://github.com/semantic-org/semantic-ui/</a></p></div><div class="body"><p>Copyright 2014 Contributor<br />Released under the MIT license<br /><a href='http://opensource.org/licenses/MIT'>http://opensource.org/licenses/MIT</a></p></div></div>
</td><td class="code"><div class="highlight"><pre><span class="p">;(</span><span class="kd">function</span> <span class="p">(</span> <span class="nx">$</span><span class="p">,</span> <span class="nb">window</span><span class="p">,</span> <span class="nb">document</span><span class="p">,</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>

<span class="s2">&quot;use strict&quot;</span><span class="p">;</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">sidebar</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span>
    <span class="nx">$allModules</span>    <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
    <span class="nx">$head</span>          <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;head&#39;</span><span class="p">),</span>

    <span class="nx">moduleSelector</span> <span class="o">=</span> <span class="nx">$allModules</span><span class="p">.</span><span class="nx">selector</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>

    <span class="nx">time</span>           <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">(),</span>
    <span class="nx">performance</span>    <span class="o">=</span> <span class="p">[],</span>

    <span class="nx">query</span>          <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="nx">methodInvoked</span>  <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">),</span>
    <span class="nx">queryArguments</span> <span class="o">=</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>

    <span class="nx">requestAnimationFrame</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">requestAnimationFrame</span>
      <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">mozRequestAnimationFrame</span>
      <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">webkitRequestAnimationFrame</span>
      <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">msRequestAnimationFrame</span>
      <span class="o">||</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="p">},</span>

    <span class="nx">returnedValue</span>
  <span class="p">;</span>

  <span class="nx">$allModules</span>
    <span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span>
        <span class="nx">settings</span>        <span class="o">=</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span> <span class="p">)</span>
          <span class="o">?</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">sidebar</span><span class="p">.</span><span class="nx">settings</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">)</span>
          <span class="o">:</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">sidebar</span><span class="p">.</span><span class="nx">settings</span><span class="p">),</span>

        <span class="nx">selector</span>        <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">selector</span><span class="p">,</span>
        <span class="nx">className</span>       <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">className</span><span class="p">,</span>
        <span class="nx">namespace</span>       <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">namespace</span><span class="p">,</span>
        <span class="nx">error</span>           <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span>

        <span class="nx">eventNamespace</span>  <span class="o">=</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">,</span>
        <span class="nx">moduleNamespace</span> <span class="o">=</span> <span class="s1">&#39;module-&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">,</span>

        <span class="nx">$module</span>         <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
        <span class="nx">$context</span>        <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">context</span><span class="p">),</span>

        <span class="nx">$sidebars</span>       <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">children</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">sidebar</span><span class="p">),</span>
        <span class="nx">$pusher</span>         <span class="o">=</span> <span class="nx">$context</span><span class="p">.</span><span class="nx">children</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">pusher</span><span class="p">),</span>
        <span class="nx">$style</span><span class="p">,</span>

        <span class="nx">element</span>         <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
        <span class="nx">instance</span>        <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">),</span>

        <span class="nx">currentScroll</span><span class="p">,</span>
        <span class="nx">transitionEvent</span><span class="p">,</span>

        <span class="nx">module</span>
      <span class="p">;</span>

      <span class="nx">module</span>      <span class="o">=</span> <span class="p">{</span>

        <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Initializing sidebar&#39;</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">);</span>

          <span class="nx">transitionEvent</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">transitionEvent</span><span class="p">();</span></pre></div></td></tr><tr id="section-132"><td class="docs"><div class="pilwrap"><a href="#section-132" class="pilcrow">&#182;</a></div><p>cache on initialize</p>
</td><td class="code"><div class="highlight"><pre>          <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">legacy</span><span class="p">()</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">legacy</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span> <span class="o">=</span> <span class="s1">&#39;overlay&#39;</span><span class="p">;</span>
            <span class="nx">settings</span><span class="p">.</span><span class="nx">useLegacy</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
          <span class="p">}</span></pre></div></td></tr><tr id="section-133"><td class="docs"><div class="pilwrap"><a href="#section-133" class="pilcrow">&#182;</a></div><p>avoid locking rendering if included in onReady</p>
</td><td class="code"><div class="highlight"><pre>          <span class="nx">requestAnimationFrame</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">setup</span><span class="p">.</span><span class="nx">layout</span><span class="p">);</span>

          <span class="nx">module</span><span class="p">.</span><span class="nx">instantiate</span><span class="p">();</span>
        <span class="p">},</span>

        <span class="nx">instantiate</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Storing instance of module&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">);</span>
          <span class="nx">instance</span> <span class="o">=</span> <span class="nx">module</span><span class="p">;</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">destroy</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Destroying previous module for&#39;</span><span class="p">,</span> <span class="nx">$module</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">direction</span><span class="p">();</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">eventNamespace</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">removeData</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">event</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">clickaway</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">).</span><span class="nx">closest</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">sidebar</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;User clicked on dimmed page&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">touch</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-134"><td class="docs"><div class="pilwrap"><a href="#section-134" class="pilcrow">&#182;</a></div><p>event.stopPropagation();</p>
</td><td class="code"><div class="highlight"><pre>          <span class="p">},</span>
          <span class="nx">containScroll</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">scrollTop</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span>  <span class="p">{</span>
              <span class="nx">element</span><span class="p">.</span><span class="nx">scrollTop</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">((</span><span class="nx">element</span><span class="p">.</span><span class="nx">scrollTop</span> <span class="o">+</span> <span class="nx">element</span><span class="p">.</span><span class="nx">offsetHeight</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">scrollHeight</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">element</span><span class="p">.</span><span class="nx">scrollTop</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">scrollHeight</span> <span class="o">-</span> <span class="nx">element</span><span class="p">.</span><span class="nx">offsetHeight</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">scroll</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">).</span><span class="nx">closest</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">sidebar</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">bind</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">clickaway</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">scrollLock</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;DOMMouseScroll&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">scroll</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;touchmove&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">touch</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="nx">$module</span>
              <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;scroll&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">containScroll</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">closable</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$context</span>
                <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">clickaway</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;touchend&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">clickaway</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">unbind</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">clickaway</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$context</span><span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">eventNamespace</span><span class="p">);</span>
            <span class="nx">$pusher</span><span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">eventNamespace</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">off</span><span class="p">(</span><span class="nx">eventNamespace</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">off</span><span class="p">(</span><span class="nx">eventNamespace</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">add</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">bodyCSS</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">direction</span><span class="p">,</span> <span class="nx">distance</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">width</span>  <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">outerWidth</span><span class="p">(),</span>
              <span class="nx">height</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">outerHeight</span><span class="p">(),</span>
              <span class="nx">style</span>
            <span class="p">;</span>
            <span class="nx">style</span>  <span class="o">=</span> <span class="s1">&#39;&#39;</span>
              <span class="o">+</span> <span class="s1">&#39;&lt;style title=&quot;&#39;</span> <span class="o">+</span> <span class="nx">namespace</span> <span class="o">+</span> <span class="s1">&#39;&quot;&gt;&#39;</span>
              <span class="o">+</span> <span class="s1">&#39; .ui.visible.left.sidebar ~ .fixed,&#39;</span>
              <span class="o">+</span> <span class="s1">&#39; .ui.visible.left.sidebar ~ .pusher {&#39;</span>
              <span class="o">+</span> <span class="s1">&#39;   -webkit-transform: translate3d(&#39;</span><span class="o">+</span> <span class="nx">width</span> <span class="o">+</span> <span class="s1">&#39;px, 0, 0);&#39;</span>
              <span class="o">+</span> <span class="s1">&#39;           transform: translate3d(&#39;</span><span class="o">+</span> <span class="nx">width</span> <span class="o">+</span> <span class="s1">&#39;px, 0, 0);&#39;</span>
              <span class="o">+</span> <span class="s1">&#39; }&#39;</span>
              <span class="o">+</span> <span class="s1">&#39; .ui.visible.right.sidebar ~ .fixed,&#39;</span>
              <span class="o">+</span> <span class="s1">&#39; .ui.visible.right.sidebar ~ .pusher {&#39;</span>
              <span class="o">+</span> <span class="s1">&#39;   -webkit-transform: translate3d(-&#39;</span><span class="o">+</span> <span class="nx">width</span> <span class="o">+</span> <span class="s1">&#39;px, 0, 0);&#39;</span>
              <span class="o">+</span> <span class="s1">&#39;           transform: translate3d(-&#39;</span><span class="o">+</span> <span class="nx">width</span> <span class="o">+</span> <span class="s1">&#39;px, 0, 0);&#39;</span>
              <span class="o">+</span> <span class="s1">&#39; }&#39;</span>
              <span class="o">+</span> <span class="s1">&#39; .ui.visible.left.sidebar ~ .ui.visible.right.sidebar ~ .fixed,&#39;</span>
              <span class="o">+</span> <span class="s1">&#39; .ui.visible.left.sidebar ~ .ui.visible.right.sidebar ~ .pusher,&#39;</span>
              <span class="o">+</span> <span class="s1">&#39; .ui.visible.right.sidebar ~ .ui.visible.left.sidebar ~ .fixed,&#39;</span>
              <span class="o">+</span> <span class="s1">&#39; .ui.visible.right.sidebar ~ .ui.visible.left.sidebar ~ .pusher {&#39;</span>
              <span class="o">+</span> <span class="s1">&#39;   -webkit-transform: translate3d(0px, 0, 0);&#39;</span>
              <span class="o">+</span> <span class="s1">&#39;           transform: translate3d(0px, 0, 0);&#39;</span>
              <span class="o">+</span> <span class="s1">&#39; }&#39;</span>
              <span class="o">+</span> <span class="s1">&#39; .ui.visible.top.sidebar ~ .fixed,&#39;</span>
              <span class="o">+</span> <span class="s1">&#39; .ui.visible.top.sidebar ~ .pusher {&#39;</span>
              <span class="o">+</span> <span class="s1">&#39;   -webkit-transform: translate3d(0, &#39;</span> <span class="o">+</span> <span class="nx">height</span> <span class="o">+</span> <span class="s1">&#39;px, 0);&#39;</span>
              <span class="o">+</span> <span class="s1">&#39;           transform: translate3d(0, &#39;</span> <span class="o">+</span> <span class="nx">height</span> <span class="o">+</span> <span class="s1">&#39;px, 0);&#39;</span>
              <span class="o">+</span> <span class="s1">&#39; }&#39;</span>
              <span class="o">+</span> <span class="s1">&#39; .ui.visible.bottom.sidebar ~ .fixed,&#39;</span>
              <span class="o">+</span> <span class="s1">&#39; .ui.visible.bottom.sidebar ~ .pusher {&#39;</span>
              <span class="o">+</span> <span class="s1">&#39;   -webkit-transform: translate3d(0, -&#39;</span> <span class="o">+</span> <span class="nx">height</span> <span class="o">+</span> <span class="s1">&#39;px, 0);&#39;</span>
              <span class="o">+</span> <span class="s1">&#39;           transform: translate3d(0, -&#39;</span> <span class="o">+</span> <span class="nx">height</span> <span class="o">+</span> <span class="s1">&#39;px, 0);&#39;</span>
              <span class="o">+</span> <span class="s1">&#39; }&#39;</span>
            <span class="p">;</span></pre></div></td></tr><tr id="section-135"><td class="docs"><div class="pilwrap"><a href="#section-135" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>IE is only browser not to create context with transforms</p></div><div class="body"></div></div><div class="dox"><div class="summary"><p><a href='https://www.w3.org/Bugs/Public/show_bug.cgi?id=16328'>https://www.w3.org/Bugs/Public/show_bug.cgi?id=16328</a></p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>            <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">ie</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">style</span> <span class="o">+=</span> <span class="s1">&#39;&#39;</span>
                <span class="o">+</span> <span class="s1">&#39; .ui.visible.left.sidebar ~ .pusher:after {&#39;</span>
                <span class="o">+</span> <span class="s1">&#39;   -webkit-transform: translate3d(&#39;</span><span class="o">+</span> <span class="nx">width</span> <span class="o">+</span> <span class="s1">&#39;px, 0, 0);&#39;</span>
                <span class="o">+</span> <span class="s1">&#39;           transform: translate3d(&#39;</span><span class="o">+</span> <span class="nx">width</span> <span class="o">+</span> <span class="s1">&#39;px, 0, 0);&#39;</span>
                <span class="o">+</span> <span class="s1">&#39; }&#39;</span>
                <span class="o">+</span> <span class="s1">&#39; .ui.visible.right.sidebar ~ .pusher:after {&#39;</span>
                <span class="o">+</span> <span class="s1">&#39;   -webkit-transform: translate3d(-&#39;</span><span class="o">+</span> <span class="nx">width</span> <span class="o">+</span> <span class="s1">&#39;px, 0, 0);&#39;</span>
                <span class="o">+</span> <span class="s1">&#39;           transform: translate3d(-&#39;</span><span class="o">+</span> <span class="nx">width</span> <span class="o">+</span> <span class="s1">&#39;px, 0, 0);&#39;</span>
                <span class="o">+</span> <span class="s1">&#39; }&#39;</span>
                <span class="o">+</span> <span class="s1">&#39; .ui.visible.left.sidebar ~ .ui.visible.right.sidebar ~ .pusher:after,&#39;</span>
                <span class="o">+</span> <span class="s1">&#39; .ui.visible.right.sidebar ~ .ui.visible.left.sidebar ~ .pusher:after {&#39;</span>
                <span class="o">+</span> <span class="s1">&#39;   -webkit-transform: translate3d(0px, 0, 0);&#39;</span>
                <span class="o">+</span> <span class="s1">&#39;           transform: translate3d(0px, 0, 0);&#39;</span>
                <span class="o">+</span> <span class="s1">&#39; }&#39;</span>
                <span class="o">+</span> <span class="s1">&#39; .ui.visible.top.sidebar ~ .pusher:after {&#39;</span>
                <span class="o">+</span> <span class="s1">&#39;   -webkit-transform: translate3d(0, &#39;</span> <span class="o">+</span> <span class="nx">height</span> <span class="o">+</span> <span class="s1">&#39;px, 0);&#39;</span>
                <span class="o">+</span> <span class="s1">&#39;           transform: translate3d(0, &#39;</span> <span class="o">+</span> <span class="nx">height</span> <span class="o">+</span> <span class="s1">&#39;px, 0);&#39;</span>
                <span class="o">+</span> <span class="s1">&#39; }&#39;</span>
                <span class="o">+</span> <span class="s1">&#39; .ui.visible.bottom.sidebar ~ .pusher:after {&#39;</span>
                <span class="o">+</span> <span class="s1">&#39;   -webkit-transform: translate3d(0, -&#39;</span> <span class="o">+</span> <span class="nx">height</span> <span class="o">+</span> <span class="s1">&#39;px, 0);&#39;</span>
                <span class="o">+</span> <span class="s1">&#39;           transform: translate3d(0, -&#39;</span> <span class="o">+</span> <span class="nx">height</span> <span class="o">+</span> <span class="s1">&#39;px, 0);&#39;</span>
                <span class="o">+</span> <span class="s1">&#39; }&#39;</span>
              <span class="p">;</span>
            <span class="p">}</span>

           <span class="nx">style</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/style&gt;&#39;</span><span class="p">;</span>

            <span class="nx">$head</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">style</span><span class="p">);</span>
            <span class="nx">$style</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;style[title=&#39;</span> <span class="o">+</span> <span class="nx">namespace</span> <span class="o">+</span> <span class="s1">&#39;]&#39;</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Adding sizing css to head&#39;</span><span class="p">,</span> <span class="nx">$style</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">refresh</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Refreshing selector cache&#39;</span><span class="p">);</span>
          <span class="nx">$context</span>  <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">context</span><span class="p">);</span>
          <span class="nx">$sidebars</span> <span class="o">=</span> <span class="nx">$context</span><span class="p">.</span><span class="nx">children</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">sidebar</span><span class="p">);</span>
          <span class="nx">$pusher</span>   <span class="o">=</span> <span class="nx">$context</span><span class="p">.</span><span class="nx">children</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">pusher</span><span class="p">);</span>
        <span class="p">},</span>

        <span class="nx">repaint</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Forcing repaint event&#39;</span><span class="p">);</span>
          <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">;</span>
          <span class="nx">element</span><span class="p">.</span><span class="nx">offsetHeight</span><span class="p">;</span>
          <span class="nx">element</span><span class="p">.</span><span class="nx">scrollTop</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">;</span>
          <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">setup</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">layout</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">$context</span><span class="p">.</span><span class="nx">children</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">pusher</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Adding wrapper element for sidebar&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">pusher</span><span class="p">);</span>
              <span class="nx">$pusher</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;&lt;div class=&quot;pusher&quot; /&gt;&#39;</span><span class="p">);</span>
              <span class="nx">$context</span>
                <span class="p">.</span><span class="nx">children</span><span class="p">()</span>
                  <span class="p">.</span><span class="nx">not</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">omitted</span><span class="p">)</span>
                  <span class="p">.</span><span class="nx">not</span><span class="p">(</span><span class="nx">$sidebars</span><span class="p">)</span>
                  <span class="p">.</span><span class="nx">wrapAll</span><span class="p">(</span><span class="nx">$pusher</span><span class="p">)</span>
              <span class="p">;</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">refresh</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">$module</span><span class="p">.</span><span class="nx">nextAll</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">pusher</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">nextAll</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">pusher</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!==</span> <span class="nx">$pusher</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Moved sidebar to correct parent element&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">movedSidebar</span><span class="p">,</span> <span class="nx">element</span><span class="p">);</span>
              <span class="nx">$module</span><span class="p">.</span><span class="nx">detach</span><span class="p">().</span><span class="nx">prependTo</span><span class="p">(</span><span class="nx">$context</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">refresh</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">pushable</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">direction</span><span class="p">();</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">attachEvents</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">selector</span><span class="p">,</span> <span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">$toggle</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">selector</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">event</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">module</span><span class="p">[</span><span class="nx">event</span><span class="p">])</span>
            <span class="o">?</span> <span class="nx">module</span><span class="p">[</span><span class="nx">event</span><span class="p">]</span>
            <span class="o">:</span> <span class="nx">module</span><span class="p">.</span><span class="nx">toggle</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">$toggle</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Attaching sidebar events to element&#39;</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">event</span><span class="p">);</span>
            <span class="nx">$toggle</span>
              <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">event</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">notFound</span><span class="p">,</span> <span class="nx">selector</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">show</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">animateMethod</span> <span class="o">=</span> <span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">useLegacy</span><span class="p">)</span>
              <span class="o">?</span> <span class="nx">module</span><span class="p">.</span><span class="nx">legacyPushPage</span>
              <span class="o">:</span> <span class="nx">module</span><span class="p">.</span><span class="nx">pushPage</span>
          <span class="p">;</span>
          <span class="nx">callback</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span>
            <span class="o">?</span> <span class="nx">callback</span>
            <span class="o">:</span> <span class="kd">function</span><span class="p">(){}</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">closed</span><span class="p">())</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">overlay</span><span class="p">)</span>  <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">overlay</span><span class="p">);</span>
              <span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span> <span class="o">=</span> <span class="s1">&#39;overlay&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">refresh</span><span class="p">();</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">othersVisible</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">transition</span><span class="p">()</span> <span class="o">!=</span> <span class="s1">&#39;overlay&#39;</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Other sidebars currently open&#39;</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">exclusive</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">hideOthers</span><span class="p">();</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="nx">animateMethod</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onShow</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
            <span class="p">});</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onChange</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onVisible</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Sidebar is already visible&#39;</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">hide</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">animateMethod</span> <span class="o">=</span> <span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">useLegacy</span><span class="p">)</span>
              <span class="o">?</span> <span class="nx">module</span><span class="p">.</span><span class="nx">legacyPullPage</span>
              <span class="o">:</span> <span class="nx">module</span><span class="p">.</span><span class="nx">pullPage</span>
          <span class="p">;</span>
          <span class="nx">callback</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span>
            <span class="o">?</span> <span class="nx">callback</span>
            <span class="o">:</span> <span class="kd">function</span><span class="p">(){}</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">visible</span><span class="p">()</span> <span class="o">||</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">animating</span><span class="p">())</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Hiding sidebar&#39;</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
            <span class="nx">animateMethod</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onHidden</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
            <span class="p">});</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onChange</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onHide</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">othersVisible</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">return</span> <span class="p">(</span><span class="nx">$sidebars</span><span class="p">.</span><span class="nx">not</span><span class="p">(</span><span class="nx">$module</span><span class="p">).</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">className</span><span class="p">.</span><span class="nx">visible</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">othersActive</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">return</span> <span class="p">(</span><span class="nx">$sidebars</span><span class="p">.</span><span class="nx">not</span><span class="p">(</span><span class="nx">$module</span><span class="p">).</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span>
        <span class="p">},</span>

        <span class="nx">hideOthers</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">$otherSidebars</span> <span class="o">=</span> <span class="nx">$sidebars</span><span class="p">.</span><span class="nx">not</span><span class="p">(</span><span class="nx">$module</span><span class="p">).</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">className</span><span class="p">.</span><span class="nx">visible</span><span class="p">),</span>
            <span class="nx">callback</span>       <span class="o">=</span> <span class="nx">callback</span> <span class="o">||</span> <span class="kd">function</span><span class="p">(){},</span>
            <span class="nx">sidebarCount</span>   <span class="o">=</span> <span class="nx">$otherSidebars</span><span class="p">.</span><span class="nx">size</span><span class="p">(),</span>
            <span class="nx">callbackCount</span>  <span class="o">=</span> <span class="mi">0</span>
          <span class="p">;</span>
          <span class="nx">$otherSidebars</span>
            <span class="p">.</span><span class="nx">sidebar</span><span class="p">(</span><span class="s1">&#39;hide&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
              <span class="nx">callbackCount</span><span class="o">++</span><span class="p">;</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">callbackCount</span> <span class="o">==</span> <span class="nx">sidebarCount</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">callback</span><span class="p">();</span>
              <span class="p">}</span>
            <span class="p">})</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">toggle</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Determining toggled direction&#39;</span><span class="p">);</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">closed</span><span class="p">())</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">pushPage</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">transition</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">transition</span><span class="p">(),</span>
            <span class="nx">$transition</span> <span class="o">=</span> <span class="p">(</span><span class="nx">transition</span> <span class="o">==</span> <span class="s1">&#39;safe&#39;</span><span class="p">)</span>
              <span class="o">?</span> <span class="nx">$context</span>
              <span class="o">:</span> <span class="p">(</span><span class="nx">transition</span> <span class="o">==</span> <span class="s1">&#39;overlay&#39;</span> <span class="o">||</span> <span class="nx">module</span><span class="p">.</span><span class="nx">othersVisible</span><span class="p">())</span>
                <span class="o">?</span> <span class="nx">$module</span>
                <span class="o">:</span> <span class="nx">$pusher</span><span class="p">,</span>
            <span class="nx">animate</span><span class="p">,</span>
            <span class="nx">transitionEnd</span>
          <span class="p">;</span>
          <span class="nx">callback</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span>
            <span class="o">?</span> <span class="nx">callback</span>
            <span class="o">:</span> <span class="kd">function</span><span class="p">(){}</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span> <span class="o">==</span> <span class="s1">&#39;scale down&#39;</span> <span class="o">||</span> <span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">mobile</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nx">transition</span> <span class="o">!==</span> <span class="s1">&#39;overlay&#39;</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">scrollToTop</span><span class="p">();</span>
          <span class="p">}</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">transition</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">repaint</span><span class="p">();</span>
          <span class="nx">animate</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">bodyCSS</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">animating</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">visible</span><span class="p">();</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">othersActive</span><span class="p">())</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">dimPage</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">$pusher</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">dimmed</span><span class="p">);</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">};</span>
          <span class="nx">transitionEnd</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span> <span class="o">==</span> <span class="nx">$transition</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">$transition</span><span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">transitionEvent</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">transitionEnd</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">animating</span><span class="p">();</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">clickaway</span><span class="p">();</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
            <span class="p">}</span>
          <span class="p">};</span>
          <span class="nx">$transition</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">transitionEvent</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">transitionEnd</span><span class="p">);</span>
          <span class="nx">requestAnimationFrame</span><span class="p">(</span><span class="nx">animate</span><span class="p">);</span>
        <span class="p">},</span>

        <span class="nx">pullPage</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">transition</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">transition</span><span class="p">(),</span>
            <span class="nx">$transition</span> <span class="o">=</span> <span class="p">(</span><span class="nx">transition</span> <span class="o">==</span> <span class="s1">&#39;safe&#39;</span><span class="p">)</span>
              <span class="o">?</span> <span class="nx">$context</span>
              <span class="o">:</span> <span class="p">(</span><span class="nx">transition</span> <span class="o">==</span> <span class="s1">&#39;overlay&#39;</span> <span class="o">||</span> <span class="nx">module</span><span class="p">.</span><span class="nx">othersActive</span><span class="p">())</span>
                <span class="o">?</span> <span class="nx">$module</span>
                <span class="o">:</span> <span class="nx">$pusher</span><span class="p">,</span>
            <span class="nx">animate</span><span class="p">,</span>
            <span class="nx">transitionEnd</span>
          <span class="p">;</span>
          <span class="nx">callback</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span>
            <span class="o">?</span> <span class="nx">callback</span>
            <span class="o">:</span> <span class="kd">function</span><span class="p">(){}</span>
          <span class="p">;</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Removing context push state&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">direction</span><span class="p">());</span>
          <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">othersActive</span><span class="p">())</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">unbind</span><span class="p">.</span><span class="nx">clickaway</span><span class="p">();</span>
          <span class="p">}</span>
          <span class="nx">animate</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">animating</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">visible</span><span class="p">();</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">dimPage</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">othersActive</span><span class="p">())</span> <span class="p">{</span>
              <span class="nx">$pusher</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">dimmed</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">};</span>
          <span class="nx">transitionEnd</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span> <span class="o">==</span> <span class="nx">$transition</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">$transition</span><span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">transitionEvent</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">transitionEnd</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">animating</span><span class="p">();</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">transition</span><span class="p">();</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">bodyCSS</span><span class="p">();</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">transition</span> <span class="o">==</span> <span class="s1">&#39;scale down&#39;</span> <span class="o">||</span> <span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">returnScroll</span> <span class="o">&amp;&amp;</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">mobile</span><span class="p">())</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">scrollBack</span><span class="p">();</span>
              <span class="p">}</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
            <span class="p">}</span>
          <span class="p">};</span>
          <span class="nx">$transition</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">transitionEvent</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">transitionEnd</span><span class="p">);</span>
          <span class="nx">requestAnimationFrame</span><span class="p">(</span><span class="nx">animate</span><span class="p">);</span>
        <span class="p">},</span>

        <span class="nx">legacyPushPage</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">distance</span>   <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">width</span><span class="p">(),</span>
            <span class="nx">direction</span>  <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">direction</span><span class="p">(),</span>
            <span class="nx">properties</span> <span class="o">=</span> <span class="p">{}</span>
          <span class="p">;</span>
          <span class="nx">distance</span>  <span class="o">=</span> <span class="nx">distance</span> <span class="o">||</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">width</span><span class="p">();</span>
          <span class="nx">callback</span>  <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span>
            <span class="o">?</span> <span class="nx">callback</span>
            <span class="o">:</span> <span class="kd">function</span><span class="p">(){}</span>
          <span class="p">;</span>
          <span class="nx">properties</span><span class="p">[</span><span class="nx">direction</span><span class="p">]</span> <span class="o">=</span> <span class="nx">distance</span><span class="p">;</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Using javascript to push context&#39;</span><span class="p">,</span> <span class="nx">properties</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">visible</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">transition</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">animating</span><span class="p">();</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">dimPage</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$pusher</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">dimmed</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="nx">$context</span>
            <span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;position&#39;</span><span class="p">,</span> <span class="s1">&#39;relative&#39;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">animate</span><span class="p">(</span><span class="nx">properties</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">easing</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">animating</span><span class="p">();</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">clickaway</span><span class="p">();</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">module</span><span class="p">)();</span>
            <span class="p">})</span>
          <span class="p">;</span>
        <span class="p">},</span>
        <span class="nx">legacyPullPage</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">distance</span>   <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nx">direction</span>  <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">direction</span><span class="p">(),</span>
            <span class="nx">properties</span> <span class="o">=</span> <span class="p">{}</span>
          <span class="p">;</span>
          <span class="nx">distance</span>  <span class="o">=</span> <span class="nx">distance</span> <span class="o">||</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">width</span><span class="p">();</span>
          <span class="nx">callback</span>  <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span>
            <span class="o">?</span> <span class="nx">callback</span>
            <span class="o">:</span> <span class="kd">function</span><span class="p">(){}</span>
          <span class="p">;</span>
          <span class="nx">properties</span><span class="p">[</span><span class="nx">direction</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;0px&#39;</span><span class="p">;</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Using javascript to pull context&#39;</span><span class="p">,</span> <span class="nx">properties</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">unbind</span><span class="p">.</span><span class="nx">clickaway</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">animating</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">visible</span><span class="p">();</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">dimPage</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">othersVisible</span><span class="p">())</span> <span class="p">{</span>
            <span class="nx">$pusher</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">dimmed</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="nx">$context</span>
            <span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;position&#39;</span><span class="p">,</span> <span class="s1">&#39;relative&#39;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">animate</span><span class="p">(</span><span class="nx">properties</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">easing</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">animating</span><span class="p">();</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">module</span><span class="p">)();</span>
            <span class="p">})</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">scrollToTop</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Scrolling to top of page to avoid animation issues&#39;</span><span class="p">);</span>
          <span class="nx">currentScroll</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">scrollTop</span><span class="p">();</span>
          <span class="nx">$module</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
          <span class="nb">window</span><span class="p">.</span><span class="nx">scrollTo</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="p">},</span>

        <span class="nx">scrollBack</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Scrolling back to original page position&#39;</span><span class="p">);</span>
          <span class="nb">window</span><span class="p">.</span><span class="nx">scrollTo</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">currentScroll</span><span class="p">);</span>
        <span class="p">},</span>

        <span class="nx">set</span><span class="o">:</span> <span class="p">{</span></pre></div></td></tr><tr id="section-136"><td class="docs"><div class="pilwrap"><a href="#section-136" class="pilcrow">&#182;</a></div><p>container</p>
</td><td class="code"><div class="highlight"><pre>          <span class="nx">pushed</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$context</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">pushed</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">pushable</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$context</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">pushable</span><span class="p">);</span>
          <span class="p">},</span></pre></div></td></tr><tr id="section-137"><td class="docs"><div class="pilwrap"><a href="#section-137" class="pilcrow">&#182;</a></div><p>sidebar</p>
</td><td class="code"><div class="highlight"><pre>          <span class="nx">active</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">animating</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">animating</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">transition</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">transition</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">transition</span> <span class="o">=</span> <span class="nx">transition</span> <span class="o">||</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">transition</span><span class="p">();</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">transition</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">direction</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">direction</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">direction</span> <span class="o">=</span> <span class="nx">direction</span> <span class="o">||</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">direction</span><span class="p">();</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">[</span><span class="nx">direction</span><span class="p">]);</span>
          <span class="p">},</span>
          <span class="nx">visible</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">visible</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">overlay</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">overlay</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">remove</span><span class="o">:</span> <span class="p">{</span>

          <span class="nx">bodyCSS</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Removing body css styles&#39;</span><span class="p">,</span> <span class="nx">$style</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">$style</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$style</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
            <span class="p">}</span>
          <span class="p">},</span></pre></div></td></tr><tr id="section-138"><td class="docs"><div class="pilwrap"><a href="#section-138" class="pilcrow">&#182;</a></div><p>context</p>
</td><td class="code"><div class="highlight"><pre>          <span class="nx">pushed</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$context</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">pushed</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">pushable</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$context</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">pushable</span><span class="p">);</span>
          <span class="p">},</span></pre></div></td></tr><tr id="section-139"><td class="docs"><div class="pilwrap"><a href="#section-139" class="pilcrow">&#182;</a></div><p>sidebar</p>
</td><td class="code"><div class="highlight"><pre>          <span class="nx">active</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">animating</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">animating</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">transition</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">transition</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">transition</span> <span class="o">=</span> <span class="nx">transition</span> <span class="o">||</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">transition</span><span class="p">();</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">transition</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">direction</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">direction</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">direction</span> <span class="o">=</span> <span class="nx">direction</span> <span class="o">||</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">direction</span><span class="p">();</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">[</span><span class="nx">direction</span><span class="p">]);</span>
          <span class="p">},</span>
          <span class="nx">visible</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">visible</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">overlay</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">overlay</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">get</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">direction</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">$module</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">top</span><span class="p">))</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">className</span><span class="p">.</span><span class="nx">top</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">$module</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">right</span><span class="p">))</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">className</span><span class="p">.</span><span class="nx">right</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">$module</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">bottom</span><span class="p">))</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">className</span><span class="p">.</span><span class="nx">bottom</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">className</span><span class="p">.</span><span class="nx">left</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">transition</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">direction</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">direction</span><span class="p">(),</span>
              <span class="nx">transition</span>
            <span class="p">;</span>
            <span class="k">return</span> <span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">mobile</span><span class="p">()</span> <span class="p">)</span>
              <span class="o">?</span> <span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">mobileTransition</span> <span class="o">==</span> <span class="s1">&#39;auto&#39;</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">defaultTransition</span><span class="p">.</span><span class="nx">mobile</span><span class="p">[</span><span class="nx">direction</span><span class="p">]</span>
                <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">mobileTransition</span>
              <span class="o">:</span> <span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span> <span class="o">==</span> <span class="s1">&#39;auto&#39;</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">defaultTransition</span><span class="p">.</span><span class="nx">computer</span><span class="p">[</span><span class="nx">direction</span><span class="p">]</span>
                <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span>
            <span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">transitionEvent</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">element</span>     <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;element&#39;</span><span class="p">),</span>
              <span class="nx">transitions</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;transition&#39;</span>       <span class="o">:</span><span class="s1">&#39;transitionend&#39;</span><span class="p">,</span>
                <span class="s1">&#39;OTransition&#39;</span>      <span class="o">:</span><span class="s1">&#39;oTransitionEnd&#39;</span><span class="p">,</span>
                <span class="s1">&#39;MozTransition&#39;</span>    <span class="o">:</span><span class="s1">&#39;transitionend&#39;</span><span class="p">,</span>
                <span class="s1">&#39;WebkitTransition&#39;</span> <span class="o">:</span><span class="s1">&#39;webkitTransitionEnd&#39;</span>
              <span class="p">},</span>
              <span class="nx">transition</span>
            <span class="p">;</span>
            <span class="k">for</span><span class="p">(</span><span class="nx">transition</span> <span class="k">in</span> <span class="nx">transitions</span><span class="p">){</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span><span class="nx">transition</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">){</span>
                <span class="k">return</span> <span class="nx">transitions</span><span class="p">[</span><span class="nx">transition</span><span class="p">];</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">is</span><span class="o">:</span> <span class="p">{</span>

          <span class="nx">ie</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">isIE11</span> <span class="o">=</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">ActiveXObject</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="s1">&#39;ActiveXObject&#39;</span> <span class="k">in</span> <span class="nb">window</span><span class="p">),</span>
              <span class="nx">isIE</span>   <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;ActiveXObject&#39;</span> <span class="k">in</span> <span class="nb">window</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="k">return</span> <span class="p">(</span><span class="nx">isIE11</span> <span class="o">||</span> <span class="nx">isIE</span><span class="p">);</span>
          <span class="p">},</span>

          <span class="nx">legacy</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">element</span>    <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">),</span>
              <span class="nx">transforms</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;webkitTransform&#39;</span> <span class="o">:</span><span class="s1">&#39;-webkit-transform&#39;</span><span class="p">,</span>
                <span class="s1">&#39;OTransform&#39;</span>      <span class="o">:</span><span class="s1">&#39;-o-transform&#39;</span><span class="p">,</span>
                <span class="s1">&#39;msTransform&#39;</span>     <span class="o">:</span><span class="s1">&#39;-ms-transform&#39;</span><span class="p">,</span>
                <span class="s1">&#39;MozTransform&#39;</span>    <span class="o">:</span><span class="s1">&#39;-moz-transform&#39;</span><span class="p">,</span>
                <span class="s1">&#39;transform&#39;</span>       <span class="o">:</span><span class="s1">&#39;transform&#39;</span>
              <span class="p">},</span>
              <span class="nx">has3D</span>
            <span class="p">;</span></pre></div></td></tr><tr id="section-140"><td class="docs"><div class="pilwrap"><a href="#section-140" class="pilcrow">&#182;</a></div><p>Add it to the body to get the computed style.</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>
            <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">transform</span> <span class="k">in</span> <span class="nx">transforms</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span> <span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span><span class="nx">transform</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span><span class="nx">transform</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;translate3d(1px,1px,1px)&quot;</span><span class="p">;</span>
                <span class="nx">has3D</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">getComputedStyle</span><span class="p">(</span><span class="nx">element</span><span class="p">).</span><span class="nx">getPropertyValue</span><span class="p">(</span><span class="nx">transforms</span><span class="p">[</span><span class="nx">transform</span><span class="p">]);</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
            <span class="k">return</span> <span class="o">!</span><span class="p">(</span><span class="nx">has3D</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">has3D</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">has3D</span> <span class="o">!==</span> <span class="s1">&#39;none&#39;</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">mobile</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">userAgent</span>    <span class="o">=</span> <span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">,</span>
              <span class="nx">mobileRegExp</span> <span class="o">=</span> <span class="sr">/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/</span><span class="p">,</span>
              <span class="nx">isMobile</span>     <span class="o">=</span> <span class="nx">mobileRegExp</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">userAgent</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">isMobile</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Browser was found to be mobile&#39;</span><span class="p">,</span> <span class="nx">userAgent</span><span class="p">);</span>
              <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Browser is not mobile, using regular transition&#39;</span><span class="p">,</span> <span class="nx">userAgent</span><span class="p">);</span>
              <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">closed</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">visible</span><span class="p">();</span>
          <span class="p">},</span>
          <span class="nx">visible</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">visible</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">vertical</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">top</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">animating</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$context</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">animating</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">setting</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Changing setting&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">settings</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">internal</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">module</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">debug</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">verbose</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">&amp;&amp;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">performance</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">log</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">currentTime</span><span class="p">,</span>
              <span class="nx">executionTime</span><span class="p">,</span>
              <span class="nx">previousTime</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">currentTime</span>   <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>
              <span class="nx">previousTime</span>  <span class="o">=</span> <span class="nx">time</span> <span class="o">||</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">executionTime</span> <span class="o">=</span> <span class="nx">currentTime</span> <span class="o">-</span> <span class="nx">previousTime</span><span class="p">;</span>
              <span class="nx">time</span>          <span class="o">=</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">performance</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
                <span class="s1">&#39;Name&#39;</span>           <span class="o">:</span> <span class="nx">message</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="s1">&#39;Arguments&#39;</span>      <span class="o">:</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Element&#39;</span>        <span class="o">:</span> <span class="nx">element</span><span class="p">,</span>
                <span class="s1">&#39;Execution Time&#39;</span> <span class="o">:</span> <span class="nx">executionTime</span>
              <span class="p">});</span>
            <span class="p">}</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">display</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">title</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span>
              <span class="nx">totalTime</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="p">;</span>
            <span class="nx">time</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">totalTime</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">];</span>
            <span class="p">});</span>
            <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">totalTime</span> <span class="o">+</span> <span class="s1">&#39;ms&#39;</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">moduleSelector</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; \&#39;&#39;</span> <span class="o">+</span> <span class="nx">moduleSelector</span> <span class="o">+</span> <span class="s1">&#39;\&#39;&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span> <span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">group</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">console</span><span class="p">.</span><span class="nx">table</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">performance</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupCollapsed</span><span class="p">(</span><span class="nx">title</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">performance</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;ms&#39;</span><span class="p">);</span>
                <span class="p">});</span>
              <span class="p">}</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupEnd</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">performance</span> <span class="o">=</span> <span class="p">[];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">invoke</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">object</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">,</span>
            <span class="nx">maxDepth</span><span class="p">,</span>
            <span class="nx">found</span><span class="p">,</span>
            <span class="nx">response</span>
          <span class="p">;</span>
          <span class="nx">passedArguments</span> <span class="o">=</span> <span class="nx">passedArguments</span> <span class="o">||</span> <span class="nx">queryArguments</span><span class="p">;</span>
          <span class="nx">context</span>         <span class="o">=</span> <span class="nx">element</span>         <span class="o">||</span> <span class="nx">context</span><span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">object</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">query</span>    <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/[\. ]/</span><span class="p">);</span>
            <span class="nx">maxDepth</span> <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">depth</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span> <span class="nx">camelCaseValue</span> <span class="o">=</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">value</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="o">:</span> <span class="nx">query</span>
              <span class="p">;</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">method</span><span class="p">,</span> <span class="nx">query</span><span class="p">);</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">});</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">found</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">found</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">returnedValue</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">returnedValue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="p">[</span><span class="nx">returnedValue</span><span class="p">,</span> <span class="nx">response</span><span class="p">];</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">response</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="nx">found</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">methodInvoked</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="nx">module</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="nx">query</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="s1">&#39;destroy&#39;</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">});</span>

  <span class="k">return</span> <span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
    <span class="o">?</span> <span class="nx">returnedValue</span>
    <span class="o">:</span> <span class="k">this</span>
  <span class="p">;</span>
<span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">sidebar</span><span class="p">.</span><span class="nx">settings</span> <span class="o">=</span> <span class="p">{</span>

  <span class="nx">name</span>              <span class="o">:</span> <span class="s1">&#39;Sidebar&#39;</span><span class="p">,</span>
  <span class="nx">namespace</span>         <span class="o">:</span> <span class="s1">&#39;sidebar&#39;</span><span class="p">,</span>

  <span class="nx">debug</span>             <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">verbose</span>           <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">performance</span>       <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="nx">transition</span>        <span class="o">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span>
  <span class="nx">mobileTransition</span>  <span class="o">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span>

  <span class="nx">defaultTransition</span> <span class="o">:</span> <span class="p">{</span>
    <span class="nx">computer</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">left</span>   <span class="o">:</span> <span class="s1">&#39;uncover&#39;</span><span class="p">,</span>
      <span class="nx">right</span>  <span class="o">:</span> <span class="s1">&#39;uncover&#39;</span><span class="p">,</span>
      <span class="nx">top</span>    <span class="o">:</span> <span class="s1">&#39;overlay&#39;</span><span class="p">,</span>
      <span class="nx">bottom</span> <span class="o">:</span> <span class="s1">&#39;overlay&#39;</span>
    <span class="p">},</span>
    <span class="nx">mobile</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">left</span>   <span class="o">:</span> <span class="s1">&#39;uncover&#39;</span><span class="p">,</span>
      <span class="nx">right</span>  <span class="o">:</span> <span class="s1">&#39;uncover&#39;</span><span class="p">,</span>
      <span class="nx">top</span>    <span class="o">:</span> <span class="s1">&#39;overlay&#39;</span><span class="p">,</span>
      <span class="nx">bottom</span> <span class="o">:</span> <span class="s1">&#39;overlay&#39;</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">context</span>           <span class="o">:</span> <span class="s1">&#39;body&#39;</span><span class="p">,</span>
  <span class="nx">exclusive</span>         <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">closable</span>          <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">dimPage</span>           <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">scrollLock</span>        <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">returnScroll</span>      <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>

  <span class="nx">useLegacy</span>         <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">duration</span>          <span class="o">:</span> <span class="mi">500</span><span class="p">,</span>
  <span class="nx">easing</span>            <span class="o">:</span> <span class="s1">&#39;easeInOutQuint&#39;</span><span class="p">,</span>

  <span class="nx">onChange</span>          <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>
  <span class="nx">onShow</span>            <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>
  <span class="nx">onHide</span>            <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>

  <span class="nx">onHidden</span>          <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>
  <span class="nx">onVisible</span>         <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>

  <span class="nx">className</span>         <span class="o">:</span> <span class="p">{</span>
    <span class="nx">active</span>    <span class="o">:</span> <span class="s1">&#39;active&#39;</span><span class="p">,</span>
    <span class="nx">animating</span> <span class="o">:</span> <span class="s1">&#39;animating&#39;</span><span class="p">,</span>
    <span class="nx">dimmed</span>    <span class="o">:</span> <span class="s1">&#39;dimmed&#39;</span><span class="p">,</span>
    <span class="nx">pushable</span>  <span class="o">:</span> <span class="s1">&#39;pushable&#39;</span><span class="p">,</span>
    <span class="nx">pushed</span>    <span class="o">:</span> <span class="s1">&#39;pushed&#39;</span><span class="p">,</span>
    <span class="nx">right</span>     <span class="o">:</span> <span class="s1">&#39;right&#39;</span><span class="p">,</span>
    <span class="nx">top</span>       <span class="o">:</span> <span class="s1">&#39;top&#39;</span><span class="p">,</span>
    <span class="nx">left</span>      <span class="o">:</span> <span class="s1">&#39;left&#39;</span><span class="p">,</span>
    <span class="nx">bottom</span>    <span class="o">:</span> <span class="s1">&#39;bottom&#39;</span><span class="p">,</span>
    <span class="nx">visible</span>   <span class="o">:</span> <span class="s1">&#39;visible&#39;</span>
  <span class="p">},</span>

  <span class="nx">selector</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">fixed</span>   <span class="o">:</span> <span class="s1">&#39;.fixed&#39;</span><span class="p">,</span>
    <span class="nx">omitted</span> <span class="o">:</span> <span class="s1">&#39;script, link, style, .ui.modal, .ui.dimmer, .ui.nag, .ui.fixed&#39;</span><span class="p">,</span>
    <span class="nx">pusher</span>  <span class="o">:</span> <span class="s1">&#39;.pusher&#39;</span><span class="p">,</span>
    <span class="nx">sidebar</span> <span class="o">:</span> <span class="s1">&#39;.ui.sidebar&#39;</span>
  <span class="p">},</span>

  <span class="nx">error</span>   <span class="o">:</span> <span class="p">{</span>
    <span class="nx">method</span>       <span class="o">:</span> <span class="s1">&#39;The method you called is not defined.&#39;</span><span class="p">,</span>
    <span class="nx">pusher</span>       <span class="o">:</span> <span class="s1">&#39;Had to add pusher element. For optimal performance make sure body content is inside a pusher element&#39;</span><span class="p">,</span>
    <span class="nx">movedSidebar</span> <span class="o">:</span> <span class="s1">&#39;Had to move sidebar. For optimal performance make sure sidebar and pusher are direct children of your body tag&#39;</span><span class="p">,</span>
    <span class="nx">overlay</span>      <span class="o">:</span> <span class="s1">&#39;The overlay setting is no longer supported, use animation: overlay&#39;</span><span class="p">,</span>
    <span class="nx">notFound</span>     <span class="o">:</span> <span class="s1">&#39;There were no elements that matched the specified selector&#39;</span>
  <span class="p">}</span>

<span class="p">};</span></pre></div></td></tr><tr id="section-141"><td class="docs"><div class="pilwrap"><a href="#section-141" class="pilcrow">&#182;</a></div><p>Adds easing</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">easing</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">easeInOutQuint</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">t</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">((</span><span class="nx">t</span><span class="o">/=</span><span class="nx">d</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="nx">c</span><span class="o">/</span><span class="mi">2</span><span class="o">*</span><span class="nx">t</span><span class="o">*</span><span class="nx">t</span><span class="o">*</span><span class="nx">t</span><span class="o">*</span><span class="nx">t</span><span class="o">*</span><span class="nx">t</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">c</span><span class="o">/</span><span class="mi">2</span><span class="o">*</span><span class="p">((</span><span class="nx">t</span><span class="o">-=</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="nx">t</span><span class="o">*</span><span class="nx">t</span><span class="o">*</span><span class="nx">t</span><span class="o">*</span><span class="nx">t</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>


<span class="p">})(</span> <span class="nx">jQuery</span><span class="p">,</span> <span class="nb">window</span> <span class="p">,</span> <span class="nb">document</span> <span class="p">);</span></pre></div></td></tr><tr id="section-142"><td class="docs"><div class="pilwrap"><a href="#section-142" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><h1>Semantic - Site</h1>

<p><a href='http://github.com/semantic-org/semantic-ui/'>http://github.com/semantic-org/semantic-ui/</a></p></div><div class="body"><p>Copyright 2014 Contributor<br />Released under the MIT license<br /><a href='http://opensource.org/licenses/MIT'>http://opensource.org/licenses/MIT</a></p></div></div>
</td><td class="code"><div class="highlight"><pre><span class="p">;(</span><span class="kd">function</span> <span class="p">(</span> <span class="nx">$</span><span class="p">,</span> <span class="nb">window</span><span class="p">,</span> <span class="nb">document</span><span class="p">,</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">site</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">site</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span>
    <span class="nx">time</span>           <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">(),</span>
    <span class="nx">performance</span>    <span class="o">=</span> <span class="p">[],</span>

    <span class="nx">query</span>          <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="nx">methodInvoked</span>  <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">),</span>
    <span class="nx">queryArguments</span> <span class="o">=</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>

    <span class="nx">settings</span>        <span class="o">=</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span> <span class="p">)</span>
      <span class="o">?</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">site</span><span class="p">.</span><span class="nx">settings</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">)</span>
      <span class="o">:</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">site</span><span class="p">.</span><span class="nx">settings</span><span class="p">),</span>

    <span class="nx">namespace</span>       <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">namespace</span><span class="p">,</span>
    <span class="nx">error</span>           <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span>

    <span class="nx">eventNamespace</span>  <span class="o">=</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">,</span>
    <span class="nx">moduleNamespace</span> <span class="o">=</span> <span class="s1">&#39;module-&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">,</span>

    <span class="nx">$document</span>       <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">),</span>
    <span class="nx">$module</span>         <span class="o">=</span> <span class="nx">$document</span><span class="p">,</span>
    <span class="nx">element</span>         <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
    <span class="nx">instance</span>        <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">),</span>

    <span class="nx">module</span><span class="p">,</span>
    <span class="nx">returnedValue</span>
  <span class="p">;</span>
  <span class="nx">module</span> <span class="o">=</span> <span class="p">{</span>

    <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">module</span><span class="p">.</span><span class="nx">instantiate</span><span class="p">();</span>
    <span class="p">},</span>

    <span class="nx">instantiate</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Storing instance of site&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">);</span>
      <span class="nx">instance</span> <span class="o">=</span> <span class="nx">module</span><span class="p">;</span>
      <span class="nx">$module</span>
        <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">)</span>
      <span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">normalize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">module</span><span class="p">.</span><span class="nx">fix</span><span class="p">.</span><span class="nx">console</span><span class="p">();</span>
      <span class="nx">module</span><span class="p">.</span><span class="nx">fix</span><span class="p">.</span><span class="nx">requestAnimationFrame</span><span class="p">();</span>
    <span class="p">},</span>

    <span class="nx">fix</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">console</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Normalizing window.console&#39;</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">console</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Console not available, normalizing events&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">disable</span><span class="p">.</span><span class="nx">console</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">console</span><span class="p">.</span><span class="nx">group</span> <span class="o">==</span> <span class="s1">&#39;undefined&#39;</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">console</span><span class="p">.</span><span class="nx">groupEnd</span> <span class="o">==</span> <span class="s1">&#39;undefined&#39;</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">console</span><span class="p">.</span><span class="nx">groupCollapsed</span> <span class="o">==</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Console group not available, normalizing events&#39;</span><span class="p">);</span>
          <span class="nb">window</span><span class="p">.</span><span class="nx">console</span><span class="p">.</span><span class="nx">group</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{};</span>
          <span class="nb">window</span><span class="p">.</span><span class="nx">console</span><span class="p">.</span><span class="nx">groupEnd</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{};</span>
          <span class="nb">window</span><span class="p">.</span><span class="nx">console</span><span class="p">.</span><span class="nx">groupCollapsed</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{};</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">console</span><span class="p">.</span><span class="nx">markTimeline</span> <span class="o">==</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Mark timeline not available, normalizing events&#39;</span><span class="p">);</span>
          <span class="nb">window</span><span class="p">.</span><span class="nx">console</span><span class="p">.</span><span class="nx">markTimeline</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{};</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="nx">consoleClear</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Disabling programmatic console clearing&#39;</span><span class="p">);</span>
        <span class="nb">window</span><span class="p">.</span><span class="nx">console</span><span class="p">.</span><span class="nx">clear</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{};</span>
      <span class="p">},</span>
      <span class="nx">requestAnimationFrame</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Normalizing requestAnimationFrame&#39;</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">requestAnimationFrame</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;RequestAnimationFrame not available, normailizing event&#39;</span><span class="p">);</span>
          <span class="nb">window</span><span class="p">.</span><span class="nx">requestAnimationFrame</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">requestAnimationFrame</span>
            <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">mozRequestAnimationFrame</span>
            <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">webkitRequestAnimationFrame</span>
            <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">msRequestAnimationFrame</span>
            <span class="o">||</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="p">}</span>
          <span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="nx">moduleExists</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span><span class="nx">name</span><span class="p">].</span><span class="nx">settings</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">);</span>
    <span class="p">},</span>

    <span class="nx">enabled</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">modules</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">modules</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span>
          <span class="nx">enabledModules</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="p">;</span>
        <span class="nx">modules</span> <span class="o">=</span> <span class="nx">modules</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">modules</span><span class="p">;</span>
        <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">modules</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">moduleExists</span><span class="p">(</span><span class="nx">name</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">enabledModules</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">});</span>
        <span class="k">return</span> <span class="nx">enabledModules</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="nx">disabled</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">modules</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">modules</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span>
          <span class="nx">disabledModules</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="p">;</span>
        <span class="nx">modules</span> <span class="o">=</span> <span class="nx">modules</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">modules</span><span class="p">;</span>
        <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">modules</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">moduleExists</span><span class="p">(</span><span class="nx">name</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">disabledModules</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">});</span>
        <span class="k">return</span> <span class="nx">disabledModules</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="nx">change</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">setting</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">setting</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">modules</span><span class="p">,</span> <span class="nx">modifyExisting</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">modules</span> <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">modules</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span>
          <span class="o">?</span> <span class="p">(</span><span class="nx">modules</span> <span class="o">===</span> <span class="s1">&#39;all&#39;</span><span class="p">)</span>
            <span class="o">?</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">modules</span>
            <span class="o">:</span> <span class="p">[</span><span class="nx">modules</span><span class="p">]</span>
          <span class="o">:</span> <span class="nx">modules</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">modules</span>
        <span class="p">;</span>
        <span class="nx">modifyExisting</span> <span class="o">=</span> <span class="p">(</span><span class="nx">modifyExisting</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
          <span class="o">?</span> <span class="nx">modifyExisting</span>
          <span class="o">:</span> <span class="kc">true</span>
        <span class="p">;</span>
        <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">modules</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">namespace</span> <span class="o">=</span> <span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">moduleExists</span><span class="p">(</span><span class="nx">name</span><span class="p">))</span>
              <span class="o">?</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span><span class="nx">name</span><span class="p">].</span><span class="nx">settings</span><span class="p">.</span><span class="nx">namespace</span> <span class="o">||</span> <span class="kc">false</span>
              <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="nx">$existingModules</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">moduleExists</span><span class="p">(</span><span class="nx">name</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Changing default setting&#39;</span><span class="p">,</span> <span class="nx">setting</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span><span class="nx">name</span><span class="p">].</span><span class="nx">settings</span><span class="p">[</span><span class="nx">setting</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">modifyExisting</span> <span class="o">&amp;&amp;</span> <span class="nx">namespace</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$existingModules</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;:data(module-&#39;</span> <span class="o">+</span> <span class="nx">namespace</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">$existingModules</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Modifying existing settings&#39;</span><span class="p">,</span> <span class="nx">$existingModules</span><span class="p">);</span>
                <span class="nx">$existingModules</span><span class="p">[</span><span class="nx">name</span><span class="p">](</span><span class="s1">&#39;setting&#39;</span><span class="p">,</span> <span class="nx">setting</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">});</span>
      <span class="p">},</span>
      <span class="nx">settings</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">newSettings</span><span class="p">,</span> <span class="nx">modules</span><span class="p">,</span> <span class="nx">modifyExisting</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">modules</span> <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">modules</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span>
          <span class="o">?</span> <span class="p">[</span><span class="nx">modules</span><span class="p">]</span>
          <span class="o">:</span> <span class="nx">modules</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">modules</span>
        <span class="p">;</span>
        <span class="nx">modifyExisting</span> <span class="o">=</span> <span class="p">(</span><span class="nx">modifyExisting</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
          <span class="o">?</span> <span class="nx">modifyExisting</span>
          <span class="o">:</span> <span class="kc">true</span>
        <span class="p">;</span>
        <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">modules</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">$existingModules</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">moduleExists</span><span class="p">(</span><span class="nx">name</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Changing default setting&#39;</span><span class="p">,</span> <span class="nx">newSettings</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span><span class="nx">name</span><span class="p">].</span><span class="nx">settings</span><span class="p">,</span> <span class="nx">newSettings</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">modifyExisting</span> <span class="o">&amp;&amp;</span> <span class="nx">namespace</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$existingModules</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;:data(module-&#39;</span> <span class="o">+</span> <span class="nx">namespace</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">$existingModules</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Modifying existing settings&#39;</span><span class="p">,</span> <span class="nx">$existingModules</span><span class="p">);</span>
                <span class="nx">$existingModules</span><span class="p">[</span><span class="nx">name</span><span class="p">](</span><span class="s1">&#39;setting&#39;</span><span class="p">,</span> <span class="nx">newSettings</span><span class="p">);</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">});</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="nx">enable</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">console</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">console</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
      <span class="p">},</span>
      <span class="nx">debug</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">modules</span><span class="p">,</span> <span class="nx">modifyExisting</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">modules</span> <span class="o">=</span> <span class="nx">modules</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">modules</span><span class="p">;</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Enabling debug for modules&#39;</span><span class="p">,</span> <span class="nx">modules</span><span class="p">);</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">change</span><span class="p">.</span><span class="nx">setting</span><span class="p">(</span><span class="s1">&#39;debug&#39;</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">modules</span><span class="p">,</span> <span class="nx">modifyExisting</span><span class="p">);</span>
      <span class="p">},</span>
      <span class="nx">verbose</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">modules</span><span class="p">,</span> <span class="nx">modifyExisting</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">modules</span> <span class="o">=</span> <span class="nx">modules</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">modules</span><span class="p">;</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Enabling verbose debug for modules&#39;</span><span class="p">,</span> <span class="nx">modules</span><span class="p">);</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">change</span><span class="p">.</span><span class="nx">setting</span><span class="p">(</span><span class="s1">&#39;verbose&#39;</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">modules</span><span class="p">,</span> <span class="nx">modifyExisting</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">disable</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">console</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">console</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
      <span class="p">},</span>
      <span class="nx">debug</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">modules</span><span class="p">,</span> <span class="nx">modifyExisting</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">modules</span> <span class="o">=</span> <span class="nx">modules</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">modules</span><span class="p">;</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Disabling debug for modules&#39;</span><span class="p">,</span> <span class="nx">modules</span><span class="p">);</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">change</span><span class="p">.</span><span class="nx">setting</span><span class="p">(</span><span class="s1">&#39;debug&#39;</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">modules</span><span class="p">,</span> <span class="nx">modifyExisting</span><span class="p">);</span>
      <span class="p">},</span>
      <span class="nx">verbose</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">modules</span><span class="p">,</span> <span class="nx">modifyExisting</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">modules</span> <span class="o">=</span> <span class="nx">modules</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">modules</span><span class="p">;</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Disabling verbose debug for modules&#39;</span><span class="p">,</span> <span class="nx">modules</span><span class="p">);</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">change</span><span class="p">.</span><span class="nx">setting</span><span class="p">(</span><span class="s1">&#39;verbose&#39;</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">modules</span><span class="p">,</span> <span class="nx">modifyExisting</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="nx">console</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">enable</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">enable</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">console</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">console</span><span class="p">);</span>
          <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Restoring console function&#39;</span><span class="p">);</span>
        <span class="nb">window</span><span class="p">.</span><span class="nx">console</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">console</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Disabling console function&#39;</span><span class="p">);</span>
        <span class="nx">instance</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">console</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">console</span><span class="p">;</span>
        <span class="nb">window</span><span class="p">.</span><span class="nx">console</span> <span class="o">=</span> <span class="p">{</span>
          <span class="nx">clear</span>          <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>
          <span class="nx">error</span>          <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>
          <span class="nx">group</span>          <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>
          <span class="nx">groupCollapsed</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>
          <span class="nx">groupEnd</span>       <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>
          <span class="nx">info</span>           <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>
          <span class="nx">log</span>            <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>
          <span class="nx">markTimeline</span>   <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>
          <span class="nx">warn</span>           <span class="o">:</span> <span class="kd">function</span><span class="p">(){}</span>
        <span class="p">};</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="nx">destroy</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Destroying previous site for&#39;</span><span class="p">,</span> <span class="nx">$module</span><span class="p">);</span>
      <span class="nx">$module</span>
        <span class="p">.</span><span class="nx">removeData</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">)</span>
      <span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">cache</span><span class="o">:</span> <span class="p">{},</span>

    <span class="nx">setting</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">settings</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">internal</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">module</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">debug</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">verbose</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">&amp;&amp;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">module</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
      <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">performance</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">log</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span>
          <span class="nx">currentTime</span><span class="p">,</span>
          <span class="nx">executionTime</span><span class="p">,</span>
          <span class="nx">previousTime</span>
        <span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">currentTime</span>   <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>
          <span class="nx">previousTime</span>  <span class="o">=</span> <span class="nx">time</span> <span class="o">||</span> <span class="nx">currentTime</span><span class="p">;</span>
          <span class="nx">executionTime</span> <span class="o">=</span> <span class="nx">currentTime</span> <span class="o">-</span> <span class="nx">previousTime</span><span class="p">;</span>
          <span class="nx">time</span>          <span class="o">=</span> <span class="nx">currentTime</span><span class="p">;</span>
          <span class="nx">performance</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
            <span class="s1">&#39;Element&#39;</span>        <span class="o">:</span> <span class="nx">element</span><span class="p">,</span>
            <span class="s1">&#39;Name&#39;</span>           <span class="o">:</span> <span class="nx">message</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="s1">&#39;Arguments&#39;</span>      <span class="o">:</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Execution Time&#39;</span> <span class="o">:</span> <span class="nx">executionTime</span>
          <span class="p">});</span>
        <span class="p">}</span>
        <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
      <span class="p">},</span>
      <span class="nx">display</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span>
          <span class="nx">title</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span>
          <span class="nx">totalTime</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="p">;</span>
        <span class="nx">time</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
        <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">totalTime</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">];</span>
        <span class="p">});</span>
        <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">totalTime</span> <span class="o">+</span> <span class="s1">&#39;ms&#39;</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span> <span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">group</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">console</span><span class="p">.</span><span class="nx">table</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">performance</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">console</span><span class="p">.</span><span class="nx">groupCollapsed</span><span class="p">(</span><span class="nx">title</span><span class="p">);</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">performance</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;ms&#39;</span><span class="p">);</span>
            <span class="p">});</span>
          <span class="p">}</span>
          <span class="nx">console</span><span class="p">.</span><span class="nx">groupEnd</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">performance</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">invoke</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span>
        <span class="nx">object</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">,</span>
        <span class="nx">maxDepth</span><span class="p">,</span>
        <span class="nx">found</span><span class="p">,</span>
        <span class="nx">response</span>
      <span class="p">;</span>
      <span class="nx">passedArguments</span> <span class="o">=</span> <span class="nx">passedArguments</span> <span class="o">||</span> <span class="nx">queryArguments</span><span class="p">;</span>
      <span class="nx">context</span>         <span class="o">=</span> <span class="nx">element</span>         <span class="o">||</span> <span class="nx">context</span><span class="p">;</span>
      <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">object</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">query</span>    <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/[\. ]/</span><span class="p">);</span>
        <span class="nx">maxDepth</span> <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
        <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">depth</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">camelCaseValue</span> <span class="o">=</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span>
            <span class="o">?</span> <span class="nx">value</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="o">:</span> <span class="nx">query</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">method</span><span class="p">,</span> <span class="nx">query</span><span class="p">);</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">});</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">found</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">found</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">returnedValue</span><span class="p">))</span> <span class="p">{</span>
        <span class="nx">returnedValue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">returnedValue</span> <span class="o">=</span> <span class="p">[</span><span class="nx">returnedValue</span><span class="p">,</span> <span class="nx">response</span><span class="p">];</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">response</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">returnedValue</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">found</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="k">if</span><span class="p">(</span><span class="nx">methodInvoked</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="nx">module</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="nx">query</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">else</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">module</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
    <span class="o">?</span> <span class="nx">returnedValue</span>
    <span class="o">:</span> <span class="k">this</span>
  <span class="p">;</span>
<span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">site</span><span class="p">.</span><span class="nx">settings</span> <span class="o">=</span> <span class="p">{</span>

  <span class="nx">name</span>        <span class="o">:</span> <span class="s1">&#39;Site&#39;</span><span class="p">,</span>
  <span class="nx">namespace</span>   <span class="o">:</span> <span class="s1">&#39;site&#39;</span><span class="p">,</span>

  <span class="nx">error</span> <span class="o">:</span> <span class="p">{</span>
    <span class="nx">console</span> <span class="o">:</span> <span class="s1">&#39;Console cannot be restored, most likely it was overwritten outside of module&#39;</span><span class="p">,</span>
    <span class="nx">method</span> <span class="o">:</span> <span class="s1">&#39;The method you called is not defined.&#39;</span>
  <span class="p">},</span>

  <span class="nx">debug</span>       <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">verbose</span>     <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">performance</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="nx">modules</span><span class="o">:</span> <span class="p">[</span>
    <span class="s1">&#39;accordion&#39;</span><span class="p">,</span>
    <span class="s1">&#39;api&#39;</span><span class="p">,</span>
    <span class="s1">&#39;checkbox&#39;</span><span class="p">,</span>
    <span class="s1">&#39;dimmer&#39;</span><span class="p">,</span>
    <span class="s1">&#39;dropdown&#39;</span><span class="p">,</span>
    <span class="s1">&#39;form&#39;</span><span class="p">,</span>
    <span class="s1">&#39;modal&#39;</span><span class="p">,</span>
    <span class="s1">&#39;nag&#39;</span><span class="p">,</span>
    <span class="s1">&#39;popup&#39;</span><span class="p">,</span>
    <span class="s1">&#39;rating&#39;</span><span class="p">,</span>
    <span class="s1">&#39;shape&#39;</span><span class="p">,</span>
    <span class="s1">&#39;sidebar&#39;</span><span class="p">,</span>
    <span class="s1">&#39;state&#39;</span><span class="p">,</span>
    <span class="s1">&#39;sticky&#39;</span><span class="p">,</span>
    <span class="s1">&#39;tab&#39;</span><span class="p">,</span>
    <span class="s1">&#39;transition&#39;</span><span class="p">,</span>
    <span class="s1">&#39;video&#39;</span><span class="p">,</span>
    <span class="s1">&#39;visit&#39;</span><span class="p">,</span>
    <span class="s1">&#39;visibility&#39;</span>
  <span class="p">],</span>

  <span class="nx">siteNamespace</span>   <span class="o">:</span> <span class="s1">&#39;site&#39;</span><span class="p">,</span>
  <span class="nx">namespaceStub</span>   <span class="o">:</span> <span class="p">{</span>
    <span class="nx">cache</span>     <span class="o">:</span> <span class="p">{},</span>
    <span class="nx">config</span>    <span class="o">:</span> <span class="p">{},</span>
    <span class="nx">sections</span>  <span class="o">:</span> <span class="p">{},</span>
    <span class="nx">section</span>   <span class="o">:</span> <span class="p">{},</span>
    <span class="nx">utilities</span> <span class="o">:</span> <span class="p">{}</span>
  <span class="p">}</span>

<span class="p">};</span></pre></div></td></tr><tr id="section-143"><td class="docs"><div class="pilwrap"><a href="#section-143" class="pilcrow">&#182;</a></div><p>allows for selection of elements with data attributes</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">expr</span><span class="p">[</span> <span class="s2">&quot;:&quot;</span> <span class="p">],</span> <span class="p">{</span>
  <span class="nx">data</span><span class="o">:</span> <span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">expr</span><span class="p">.</span><span class="nx">createPseudo</span><span class="p">)</span>
    <span class="o">?</span> <span class="nx">$</span><span class="p">.</span><span class="nx">expr</span><span class="p">.</span><span class="nx">createPseudo</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">dataName</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">elem</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="o">!!</span><span class="nx">$</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">elem</span><span class="p">,</span> <span class="nx">dataName</span><span class="p">);</span>
        <span class="p">};</span>
      <span class="p">})</span>
    <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">match</span><span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-144"><td class="docs"><div class="pilwrap"><a href="#section-144" class="pilcrow">&#182;</a></div><p>support: jQuery &lt; 1.8</p>
</td><td class="code"><div class="highlight"><pre>      <span class="k">return</span> <span class="o">!!</span><span class="nx">$</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">elem</span><span class="p">,</span> <span class="nx">match</span><span class="p">[</span> <span class="mi">3</span> <span class="p">]);</span>
    <span class="p">}</span>
<span class="p">});</span>


<span class="p">})(</span> <span class="nx">jQuery</span><span class="p">,</span> <span class="nb">window</span> <span class="p">,</span> <span class="nb">document</span> <span class="p">);</span></pre></div></td></tr><tr id="section-145"><td class="docs"><div class="pilwrap"><a href="#section-145" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><h1>Semantic - State</h1>

<p><a href='http://github.com/semantic-org/semantic-ui/'>http://github.com/semantic-org/semantic-ui/</a></p></div><div class="body"><p>Copyright 2014 Contributor<br />Released under the MIT license<br /><a href='http://opensource.org/licenses/MIT'>http://opensource.org/licenses/MIT</a></p></div></div>
</td><td class="code"><div class="highlight"><pre><span class="p">;(</span><span class="kd">function</span> <span class="p">(</span> <span class="nx">$</span><span class="p">,</span> <span class="nb">window</span><span class="p">,</span> <span class="nb">document</span><span class="p">,</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span>
    <span class="nx">$allModules</span>     <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>

    <span class="nx">moduleSelector</span>  <span class="o">=</span> <span class="nx">$allModules</span><span class="p">.</span><span class="nx">selector</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>

    <span class="nx">hasTouch</span>        <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;ontouchstart&#39;</span> <span class="k">in</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">),</span>
    <span class="nx">time</span>            <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">(),</span>
    <span class="nx">performance</span>     <span class="o">=</span> <span class="p">[],</span>

    <span class="nx">query</span>           <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="nx">methodInvoked</span>   <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">),</span>
    <span class="nx">queryArguments</span>  <span class="o">=</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>

    <span class="nx">returnedValue</span>
  <span class="p">;</span>
  <span class="nx">$allModules</span>
    <span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span>
        <span class="nx">settings</span>          <span class="o">=</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span> <span class="p">)</span>
          <span class="o">?</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">settings</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">)</span>
          <span class="o">:</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">settings</span><span class="p">),</span>

        <span class="nx">error</span>           <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span>
        <span class="nx">metadata</span>        <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">metadata</span><span class="p">,</span>
        <span class="nx">className</span>       <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">className</span><span class="p">,</span>
        <span class="nx">namespace</span>       <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">namespace</span><span class="p">,</span>
        <span class="nx">states</span>          <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">states</span><span class="p">,</span>
        <span class="nx">text</span>            <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">text</span><span class="p">,</span>

        <span class="nx">eventNamespace</span>  <span class="o">=</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">,</span>
        <span class="nx">moduleNamespace</span> <span class="o">=</span> <span class="nx">namespace</span> <span class="o">+</span> <span class="s1">&#39;-module&#39;</span><span class="p">,</span>

        <span class="nx">$module</span>         <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>

        <span class="nx">element</span>         <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
        <span class="nx">instance</span>        <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">),</span>

        <span class="nx">module</span>
      <span class="p">;</span>
      <span class="nx">module</span> <span class="o">=</span> <span class="p">{</span>

        <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Initializing module&#39;</span><span class="p">);</span></pre></div></td></tr><tr id="section-146"><td class="docs"><div class="pilwrap"><a href="#section-146" class="pilcrow">&#182;</a></div><p>allow module to guess desired state based on element</p>
</td><td class="code"><div class="highlight"><pre>          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">automatic</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">defaults</span><span class="p">();</span>
          <span class="p">}</span></pre></div></td></tr><tr id="section-147"><td class="docs"><div class="pilwrap"><a href="#section-147" class="pilcrow">&#182;</a></div><p>bind events with delegated events</p>
</td><td class="code"><div class="highlight"><pre>          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">context</span> <span class="o">&amp;&amp;</span> <span class="nx">moduleSelector</span> <span class="o">!==</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">context</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">moduleSelector</span><span class="p">,</span> <span class="s1">&#39;mouseenter&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">change</span><span class="p">.</span><span class="nx">text</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">moduleSelector</span><span class="p">,</span> <span class="s1">&#39;mouseleave&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">reset</span><span class="p">.</span><span class="nx">text</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">moduleSelector</span><span class="p">,</span> <span class="s1">&#39;click&#39;</span>      <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">toggle</span><span class="p">.</span><span class="nx">state</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">$module</span>
              <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;mouseenter&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">change</span><span class="p">.</span><span class="nx">text</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;mouseleave&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">reset</span><span class="p">.</span><span class="nx">text</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span>      <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">toggle</span><span class="p">.</span><span class="nx">state</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">}</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">instantiate</span><span class="p">();</span>
        <span class="p">},</span>

        <span class="nx">instantiate</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Storing instance of module&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">);</span>
          <span class="nx">instance</span> <span class="o">=</span> <span class="nx">module</span><span class="p">;</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">destroy</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Destroying previous module&#39;</span><span class="p">,</span> <span class="nx">instance</span><span class="p">);</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">eventNamespace</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">removeData</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">refresh</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Refreshing selector cache&#39;</span><span class="p">);</span>
          <span class="nx">$module</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
        <span class="p">},</span>

        <span class="nx">add</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">defaults</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">userStates</span> <span class="o">=</span> <span class="nx">parameters</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">parameters</span><span class="p">.</span><span class="nx">states</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">parameters</span><span class="p">.</span><span class="nx">states</span>
                <span class="o">:</span> <span class="p">{}</span>
            <span class="p">;</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">defaults</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">typeStates</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">[</span><span class="nx">type</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">[</span><span class="nx">type</span><span class="p">]()</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Adding default states&#39;</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">element</span><span class="p">);</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">states</span><span class="p">,</span> <span class="nx">typeStates</span><span class="p">,</span> <span class="nx">userStates</span><span class="p">);</span>
              <span class="p">}</span>
            <span class="p">});</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">is</span><span class="o">:</span> <span class="p">{</span>

          <span class="nx">active</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">loading</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">loading</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">inactive</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="o">!</span><span class="p">(</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span> <span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">state</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">state</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">className</span><span class="p">[</span><span class="nx">state</span><span class="p">]</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span> <span class="nx">className</span><span class="p">[</span><span class="nx">state</span><span class="p">]</span> <span class="p">);</span>
          <span class="p">},</span>

          <span class="nx">enabled</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="o">!</span><span class="p">(</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">filter</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span> <span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">disabled</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">filter</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span> <span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">textEnabled</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="o">!</span><span class="p">(</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">filter</span><span class="p">.</span><span class="nx">text</span><span class="p">)</span> <span class="p">);</span>
          <span class="p">},</span></pre></div></td></tr><tr id="section-148"><td class="docs"><div class="pilwrap"><a href="#section-148" class="pilcrow">&#182;</a></div><p>definitions for automatic type detection</p>
</td><td class="code"><div class="highlight"><pre>          <span class="nx">button</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;.button:not(a, .submit)&#39;</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">input</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;input&#39;</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">progress</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;.ui.progress&#39;</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">allow</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">state</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Now allowing state&#39;</span><span class="p">,</span> <span class="nx">state</span><span class="p">);</span>
          <span class="nx">states</span><span class="p">[</span><span class="nx">state</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">},</span>
        <span class="nx">disallow</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">state</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;No longer allowing&#39;</span><span class="p">,</span> <span class="nx">state</span><span class="p">);</span>
          <span class="nx">states</span><span class="p">[</span><span class="nx">state</span><span class="p">]</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">allows</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">state</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">states</span><span class="p">[</span><span class="nx">state</span><span class="p">]</span> <span class="o">||</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">enable</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">$module</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">disabled</span><span class="p">);</span>
        <span class="p">},</span>

        <span class="nx">disable</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">$module</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">disabled</span><span class="p">);</span>
        <span class="p">},</span>

        <span class="nx">setState</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">state</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">allows</span><span class="p">(</span><span class="nx">state</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span> <span class="nx">className</span><span class="p">[</span><span class="nx">state</span><span class="p">]</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">removeState</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">state</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">allows</span><span class="p">(</span><span class="nx">state</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span> <span class="nx">className</span><span class="p">[</span><span class="nx">state</span><span class="p">]</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">toggle</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">state</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">apiRequest</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">allows</span><span class="p">(</span><span class="s1">&#39;active&#39;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">enabled</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">refresh</span><span class="p">();</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">api</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">apiRequest</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">api</span><span class="p">(</span><span class="s1">&#39;get request&#39;</span><span class="p">);</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">apiRequest</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">listenTo</span><span class="p">(</span><span class="nx">apiRequest</span><span class="p">);</span>
                  <span class="k">return</span><span class="p">;</span>
                <span class="p">}</span>
              <span class="p">}</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">change</span><span class="p">.</span><span class="nx">state</span><span class="p">();</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">listenTo</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">apiRequest</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;API request detected, waiting for state signal&#39;</span><span class="p">,</span> <span class="nx">apiRequest</span><span class="p">);</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">apiRequest</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">text</span><span class="p">.</span><span class="nx">loading</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">update</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">text</span><span class="p">.</span><span class="nx">loading</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="nx">apiRequest</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">apiRequest</span><span class="p">.</span><span class="nx">state</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;resolved&#39;</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;API request succeeded&#39;</span><span class="p">);</span>
                  <span class="nx">settings</span><span class="p">.</span><span class="nx">activateTest</span>   <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span> <span class="p">};</span>
                  <span class="nx">settings</span><span class="p">.</span><span class="nx">deactivateTest</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span> <span class="p">};</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;API request failed&#39;</span><span class="p">);</span>
                  <span class="nx">settings</span><span class="p">.</span><span class="nx">activateTest</span>   <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span> <span class="p">};</span>
                  <span class="nx">settings</span><span class="p">.</span><span class="nx">deactivateTest</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span> <span class="p">};</span>
                <span class="p">}</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">change</span><span class="p">.</span><span class="nx">state</span><span class="p">();</span>
              <span class="p">})</span>
            <span class="p">;</span>
          <span class="p">}</span></pre></div></td></tr><tr id="section-149"><td class="docs"><div class="pilwrap"><a href="#section-149" class="pilcrow">&#182;</a></div><p>xhr exists but set to false, beforeSend killed the xhr</p>
</td><td class="code"><div class="highlight"><pre>          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">settings</span><span class="p">.</span><span class="nx">activateTest</span>   <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span> <span class="p">};</span>
            <span class="nx">settings</span><span class="p">.</span><span class="nx">deactivateTest</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span> <span class="p">};</span>
          <span class="p">}</span>
        <span class="p">},</span></pre></div></td></tr><tr id="section-150"><td class="docs"><div class="pilwrap"><a href="#section-150" class="pilcrow">&#182;</a></div><p>checks whether active/inactive state can be given</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">change</span><span class="o">:</span> <span class="p">{</span>

          <span class="nx">state</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Determining state change direction&#39;</span><span class="p">);</span></pre></div></td></tr><tr id="section-151"><td class="docs"><div class="pilwrap"><a href="#section-151" class="pilcrow">&#182;</a></div><p>inactive to active change</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">inactive</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">activate</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">deactivate</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">sync</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">sync</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onChange</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
          <span class="p">},</span>

          <span class="nx">text</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">textEnabled</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">disabled</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Changing text to disabled text&#39;</span><span class="p">,</span> <span class="nx">text</span><span class="p">.</span><span class="nx">hover</span><span class="p">);</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">update</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">text</span><span class="p">.</span><span class="nx">disabled</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">active</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">text</span><span class="p">.</span><span class="nx">hover</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Changing text to hover text&#39;</span><span class="p">,</span> <span class="nx">text</span><span class="p">.</span><span class="nx">hover</span><span class="p">);</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">update</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">text</span><span class="p">.</span><span class="nx">hover</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">text</span><span class="p">.</span><span class="nx">deactivate</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Changing text to deactivating text&#39;</span><span class="p">,</span> <span class="nx">text</span><span class="p">.</span><span class="nx">deactivate</span><span class="p">);</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">update</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">text</span><span class="p">.</span><span class="nx">deactivate</span><span class="p">);</span>
                <span class="p">}</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">text</span><span class="p">.</span><span class="nx">hover</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Changing text to hover text&#39;</span><span class="p">,</span> <span class="nx">text</span><span class="p">.</span><span class="nx">hover</span><span class="p">);</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">update</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">text</span><span class="p">.</span><span class="nx">hover</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">text</span><span class="p">.</span><span class="nx">activate</span><span class="p">){</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Changing text to activating text&#39;</span><span class="p">,</span> <span class="nx">text</span><span class="p">.</span><span class="nx">activate</span><span class="p">);</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">update</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">text</span><span class="p">.</span><span class="nx">activate</span><span class="p">);</span>
                <span class="p">}</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>

        <span class="p">},</span>

        <span class="nx">activate</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">activateTest</span><span class="p">,</span> <span class="nx">element</span><span class="p">)()</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Setting state to active&#39;</span><span class="p">);</span>
            <span class="nx">$module</span>
              <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">update</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">text</span><span class="p">.</span><span class="nx">active</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onActivate</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">deactivate</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">deactivateTest</span><span class="p">,</span> <span class="nx">element</span><span class="p">)()</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Setting state to inactive&#39;</span><span class="p">);</span>
            <span class="nx">$module</span>
              <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">update</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">text</span><span class="p">.</span><span class="nx">inactive</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onDeactivate</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">sync</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Syncing other buttons to current state&#39;</span><span class="p">);</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">active</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$allModules</span>
              <span class="p">.</span><span class="nx">not</span><span class="p">(</span><span class="nx">$module</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">state</span><span class="p">(</span><span class="s1">&#39;activate&#39;</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">$allModules</span>
              <span class="p">.</span><span class="nx">not</span><span class="p">(</span><span class="nx">$module</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">state</span><span class="p">(</span><span class="s1">&#39;deactivate&#39;</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">get</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">text</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">selector</span><span class="p">.</span><span class="nx">text</span><span class="p">)</span>
              <span class="o">?</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">selector</span><span class="p">.</span><span class="nx">text</span><span class="p">).</span><span class="nx">text</span><span class="p">()</span>
              <span class="o">:</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">html</span><span class="p">()</span>
            <span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">textFor</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">state</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">text</span><span class="p">[</span><span class="nx">state</span><span class="p">]</span> <span class="o">||</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">flash</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">text</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">duration</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">previousText</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">text</span><span class="p">()</span>
            <span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Flashing text message&#39;</span><span class="p">,</span> <span class="nx">text</span><span class="p">,</span> <span class="nx">duration</span><span class="p">);</span>
            <span class="nx">text</span>     <span class="o">=</span> <span class="nx">text</span>     <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">flash</span><span class="p">;</span>
            <span class="nx">duration</span> <span class="o">=</span> <span class="nx">duration</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">flashDuration</span><span class="p">;</span>
            <span class="nx">callback</span> <span class="o">=</span> <span class="nx">callback</span> <span class="o">||</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{};</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">update</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>
            <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">update</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">previousText</span><span class="p">);</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
            <span class="p">},</span> <span class="nx">duration</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">reset</span><span class="o">:</span> <span class="p">{</span></pre></div></td></tr><tr id="section-152"><td class="docs"><div class="pilwrap"><a href="#section-152" class="pilcrow">&#182;</a></div><p>on mouseout sets text to previous value</p>
</td><td class="code"><div class="highlight"><pre>          <span class="nx">text</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">activeText</span>   <span class="o">=</span> <span class="nx">text</span><span class="p">.</span><span class="nx">active</span>   <span class="o">||</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">storedText</span><span class="p">),</span>
              <span class="nx">inactiveText</span> <span class="o">=</span> <span class="nx">text</span><span class="p">.</span><span class="nx">inactive</span> <span class="o">||</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">storedText</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">textEnabled</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">active</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nx">activeText</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Resetting active text&#39;</span><span class="p">,</span> <span class="nx">activeText</span><span class="p">);</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">update</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">activeText</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">inactiveText</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Resetting inactive text&#39;</span><span class="p">,</span> <span class="nx">activeText</span><span class="p">);</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">update</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">inactiveText</span><span class="p">);</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">update</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">text</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">currentText</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">text</span><span class="p">()</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">text</span> <span class="o">&amp;&amp;</span> <span class="nx">text</span> <span class="o">!==</span> <span class="nx">currentText</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Updating text&#39;</span><span class="p">,</span> <span class="nx">text</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">selector</span><span class="p">.</span><span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">$module</span>
                  <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">storedText</span><span class="p">,</span> <span class="nx">text</span><span class="p">)</span>
                  <span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">selector</span><span class="p">.</span><span class="nx">text</span><span class="p">)</span>
                    <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span>
                <span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">$module</span>
                  <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">storedText</span><span class="p">,</span> <span class="nx">text</span><span class="p">)</span>
                  <span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span>
                <span class="p">;</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Text is already sane, ignoring update&#39;</span><span class="p">,</span> <span class="nx">text</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">setting</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Changing setting&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">settings</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">internal</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">module</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">debug</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">verbose</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">&amp;&amp;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">performance</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">log</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">currentTime</span><span class="p">,</span>
              <span class="nx">executionTime</span><span class="p">,</span>
              <span class="nx">previousTime</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">currentTime</span>   <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>
              <span class="nx">previousTime</span>  <span class="o">=</span> <span class="nx">time</span> <span class="o">||</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">executionTime</span> <span class="o">=</span> <span class="nx">currentTime</span> <span class="o">-</span> <span class="nx">previousTime</span><span class="p">;</span>
              <span class="nx">time</span>          <span class="o">=</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">performance</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
                <span class="s1">&#39;Name&#39;</span>           <span class="o">:</span> <span class="nx">message</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="s1">&#39;Arguments&#39;</span>      <span class="o">:</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Element&#39;</span>        <span class="o">:</span> <span class="nx">element</span><span class="p">,</span>
                <span class="s1">&#39;Execution Time&#39;</span> <span class="o">:</span> <span class="nx">executionTime</span>
              <span class="p">});</span>
            <span class="p">}</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">display</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">title</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span>
              <span class="nx">totalTime</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="p">;</span>
            <span class="nx">time</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">totalTime</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">];</span>
            <span class="p">});</span>
            <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">totalTime</span> <span class="o">+</span> <span class="s1">&#39;ms&#39;</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">moduleSelector</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; \&#39;&#39;</span> <span class="o">+</span> <span class="nx">moduleSelector</span> <span class="o">+</span> <span class="s1">&#39;\&#39;&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span> <span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">group</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">console</span><span class="p">.</span><span class="nx">table</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">performance</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupCollapsed</span><span class="p">(</span><span class="nx">title</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">performance</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;ms&#39;</span><span class="p">);</span>
                <span class="p">});</span>
              <span class="p">}</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupEnd</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">performance</span> <span class="o">=</span> <span class="p">[];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">invoke</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">object</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">,</span>
            <span class="nx">maxDepth</span><span class="p">,</span>
            <span class="nx">found</span><span class="p">,</span>
            <span class="nx">response</span>
          <span class="p">;</span>
          <span class="nx">passedArguments</span> <span class="o">=</span> <span class="nx">passedArguments</span> <span class="o">||</span> <span class="nx">queryArguments</span><span class="p">;</span>
          <span class="nx">context</span>         <span class="o">=</span> <span class="nx">element</span>         <span class="o">||</span> <span class="nx">context</span><span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">object</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">query</span>    <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/[\. ]/</span><span class="p">);</span>
            <span class="nx">maxDepth</span> <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">depth</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span> <span class="nx">camelCaseValue</span> <span class="o">=</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">value</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="o">:</span> <span class="nx">query</span>
              <span class="p">;</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">method</span><span class="p">,</span> <span class="nx">query</span><span class="p">);</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">});</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">found</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">found</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">returnedValue</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">returnedValue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="p">[</span><span class="nx">returnedValue</span><span class="p">,</span> <span class="nx">response</span><span class="p">];</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">response</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="nx">found</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>

      <span class="k">if</span><span class="p">(</span><span class="nx">methodInvoked</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="nx">query</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">})</span>
  <span class="p">;</span>

  <span class="k">return</span> <span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
    <span class="o">?</span> <span class="nx">returnedValue</span>
    <span class="o">:</span> <span class="k">this</span>
  <span class="p">;</span>
<span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">settings</span> <span class="o">=</span> <span class="p">{</span></pre></div></td></tr><tr id="section-153"><td class="docs"><div class="pilwrap"><a href="#section-153" class="pilcrow">&#182;</a></div><p>module info</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">name</span> <span class="o">:</span> <span class="s1">&#39;State&#39;</span><span class="p">,</span></pre></div></td></tr><tr id="section-154"><td class="docs"><div class="pilwrap"><a href="#section-154" class="pilcrow">&#182;</a></div><p>debug output</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">debug</span>      <span class="o">:</span> <span class="kc">false</span><span class="p">,</span></pre></div></td></tr><tr id="section-155"><td class="docs"><div class="pilwrap"><a href="#section-155" class="pilcrow">&#182;</a></div><p>verbose debug output</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">verbose</span>    <span class="o">:</span> <span class="kc">true</span><span class="p">,</span></pre></div></td></tr><tr id="section-156"><td class="docs"><div class="pilwrap"><a href="#section-156" class="pilcrow">&#182;</a></div><p>namespace for events</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">namespace</span>  <span class="o">:</span> <span class="s1">&#39;state&#39;</span><span class="p">,</span></pre></div></td></tr><tr id="section-157"><td class="docs"><div class="pilwrap"><a href="#section-157" class="pilcrow">&#182;</a></div><p>debug data includes performance</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">performance</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span></pre></div></td></tr><tr id="section-158"><td class="docs"><div class="pilwrap"><a href="#section-158" class="pilcrow">&#182;</a></div><p>callback occurs on state change</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">onActivate</span>   <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{},</span>
  <span class="nx">onDeactivate</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{},</span>
  <span class="nx">onChange</span>     <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{},</span></pre></div></td></tr><tr id="section-159"><td class="docs"><div class="pilwrap"><a href="#section-159" class="pilcrow">&#182;</a></div><p>state test functions</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">activateTest</span>   <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span> <span class="p">},</span>
  <span class="nx">deactivateTest</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span> <span class="p">},</span></pre></div></td></tr><tr id="section-160"><td class="docs"><div class="pilwrap"><a href="#section-160" class="pilcrow">&#182;</a></div><p>whether to automatically map default states</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">automatic</span>     <span class="o">:</span> <span class="kc">true</span><span class="p">,</span></pre></div></td></tr><tr id="section-161"><td class="docs"><div class="pilwrap"><a href="#section-161" class="pilcrow">&#182;</a></div><p>activate / deactivate changes all elements instantiated at same time</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">sync</span>          <span class="o">:</span> <span class="kc">false</span><span class="p">,</span></pre></div></td></tr><tr id="section-162"><td class="docs"><div class="pilwrap"><a href="#section-162" class="pilcrow">&#182;</a></div><p>default flash text duration, used for temporarily changing text of an element</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">flashDuration</span> <span class="o">:</span> <span class="mi">1000</span><span class="p">,</span></pre></div></td></tr><tr id="section-163"><td class="docs"><div class="pilwrap"><a href="#section-163" class="pilcrow">&#182;</a></div><p>selector filter</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">filter</span>     <span class="o">:</span> <span class="p">{</span>
    <span class="nx">text</span>   <span class="o">:</span> <span class="s1">&#39;.loading, .disabled&#39;</span><span class="p">,</span>
    <span class="nx">active</span> <span class="o">:</span> <span class="s1">&#39;.disabled&#39;</span>
  <span class="p">},</span>

  <span class="nx">context</span>    <span class="o">:</span> <span class="kc">false</span><span class="p">,</span></pre></div></td></tr><tr id="section-164"><td class="docs"><div class="pilwrap"><a href="#section-164" class="pilcrow">&#182;</a></div><p>error</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">error</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">method</span> <span class="o">:</span> <span class="s1">&#39;The method you called is not defined.&#39;</span>
  <span class="p">},</span></pre></div></td></tr><tr id="section-165"><td class="docs"><div class="pilwrap"><a href="#section-165" class="pilcrow">&#182;</a></div><p>metadata</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">metadata</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">promise</span>    <span class="o">:</span> <span class="s1">&#39;promise&#39;</span><span class="p">,</span>
    <span class="nx">storedText</span> <span class="o">:</span> <span class="s1">&#39;stored-text&#39;</span>
  <span class="p">},</span></pre></div></td></tr><tr id="section-166"><td class="docs"><div class="pilwrap"><a href="#section-166" class="pilcrow">&#182;</a></div><p>change class on state</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">className</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">active</span>   <span class="o">:</span> <span class="s1">&#39;active&#39;</span><span class="p">,</span>
    <span class="nx">disabled</span> <span class="o">:</span> <span class="s1">&#39;disabled&#39;</span><span class="p">,</span>
    <span class="nx">error</span>    <span class="o">:</span> <span class="s1">&#39;error&#39;</span><span class="p">,</span>
    <span class="nx">loading</span>  <span class="o">:</span> <span class="s1">&#39;loading&#39;</span><span class="p">,</span>
    <span class="nx">success</span>  <span class="o">:</span> <span class="s1">&#39;success&#39;</span><span class="p">,</span>
    <span class="nx">warning</span>  <span class="o">:</span> <span class="s1">&#39;warning&#39;</span>
  <span class="p">},</span>

  <span class="nx">selector</span><span class="o">:</span> <span class="p">{</span></pre></div></td></tr><tr id="section-167"><td class="docs"><div class="pilwrap"><a href="#section-167" class="pilcrow">&#182;</a></div><p>selector for text node</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">text</span><span class="o">:</span> <span class="kc">false</span>
  <span class="p">},</span>

  <span class="nx">defaults</span> <span class="o">:</span> <span class="p">{</span>
    <span class="nx">input</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">disabled</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nx">loading</span>  <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nx">active</span>   <span class="o">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="nx">button</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">disabled</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nx">loading</span>  <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nx">active</span>   <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="nx">progress</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">active</span>   <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nx">success</span>  <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nx">warning</span>  <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nx">error</span>    <span class="o">:</span> <span class="kc">true</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">states</span>     <span class="o">:</span> <span class="p">{</span>
    <span class="nx">active</span>   <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">disabled</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">error</span>    <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">loading</span>  <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">success</span>  <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">warning</span>  <span class="o">:</span> <span class="kc">true</span>
  <span class="p">},</span>

  <span class="nx">text</span>     <span class="o">:</span> <span class="p">{</span>
    <span class="nx">disabled</span>   <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">flash</span>      <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">hover</span>      <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">active</span>     <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">inactive</span>   <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">activate</span>   <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">deactivate</span> <span class="o">:</span> <span class="kc">false</span>
  <span class="p">}</span>

<span class="p">};</span>



<span class="p">})(</span> <span class="nx">jQuery</span><span class="p">,</span> <span class="nb">window</span> <span class="p">,</span> <span class="nb">document</span> <span class="p">);</span></pre></div></td></tr><tr id="section-168"><td class="docs"><div class="pilwrap"><a href="#section-168" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><h1>Semantic - Sticky</h1>

<p><a href='http://github.com/semantic-org/semantic-ui/'>http://github.com/semantic-org/semantic-ui/</a></p></div><div class="body"><p>Copyright 2014 Contributors<br />Released under the MIT license<br /><a href='http://opensource.org/licenses/MIT'>http://opensource.org/licenses/MIT</a></p></div></div>
</td><td class="code"><div class="highlight"><pre><span class="p">;(</span><span class="kd">function</span> <span class="p">(</span> <span class="nx">$</span><span class="p">,</span> <span class="nb">window</span><span class="p">,</span> <span class="nb">document</span><span class="p">,</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>

<span class="s2">&quot;use strict&quot;</span><span class="p">;</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">sticky</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span>
    <span class="nx">$allModules</span>    <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
    <span class="nx">moduleSelector</span> <span class="o">=</span> <span class="nx">$allModules</span><span class="p">.</span><span class="nx">selector</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>

    <span class="nx">time</span>           <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">(),</span>
    <span class="nx">performance</span>    <span class="o">=</span> <span class="p">[],</span>

    <span class="nx">query</span>          <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="nx">methodInvoked</span>  <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">),</span>
    <span class="nx">queryArguments</span> <span class="o">=</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="nx">returnedValue</span>
  <span class="p">;</span>

  <span class="nx">$allModules</span>
    <span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span>
        <span class="nx">settings</span>              <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">sticky</span><span class="p">.</span><span class="nx">settings</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">),</span>

        <span class="nx">className</span>             <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">className</span><span class="p">,</span>
        <span class="nx">namespace</span>             <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">namespace</span><span class="p">,</span>
        <span class="nx">error</span>                 <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span>

        <span class="nx">eventNamespace</span>        <span class="o">=</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">,</span>
        <span class="nx">moduleNamespace</span>       <span class="o">=</span> <span class="s1">&#39;module-&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">,</span>

        <span class="nx">$module</span>               <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
        <span class="nx">$window</span>               <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">),</span>
        <span class="nx">$container</span>            <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">offsetParent</span><span class="p">(),</span>
        <span class="nx">$scroll</span>               <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">scrollContext</span><span class="p">),</span>
        <span class="nx">$context</span><span class="p">,</span>

        <span class="nx">selector</span>              <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">selector</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="nx">instance</span>              <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">),</span>

        <span class="nx">requestAnimationFrame</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">requestAnimationFrame</span>
          <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">mozRequestAnimationFrame</span>
          <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">webkitRequestAnimationFrame</span>
          <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">msRequestAnimationFrame</span>
          <span class="o">||</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="p">},</span>

        <span class="nx">element</span>         <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
        <span class="nx">observer</span><span class="p">,</span>
        <span class="nx">module</span>
      <span class="p">;</span>

      <span class="nx">module</span>      <span class="o">=</span> <span class="p">{</span>

        <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$context</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">context</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">$context</span> <span class="o">=</span> <span class="nx">$container</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">$context</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">invalidContext</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">context</span><span class="p">,</span> <span class="nx">$module</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Initializing sticky&#39;</span><span class="p">,</span> <span class="nx">settings</span><span class="p">,</span> <span class="nx">$container</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">save</span><span class="p">.</span><span class="nx">positions</span><span class="p">();</span></pre></div></td></tr><tr id="section-169"><td class="docs"><div class="pilwrap"><a href="#section-169" class="pilcrow">&#182;</a></div><p>error conditions</p>
</td><td class="code"><div class="highlight"><pre>          <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">hidden</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">visible</span><span class="p">,</span> <span class="nx">$module</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">height</span> <span class="o">&gt;</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">height</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">elementSize</span><span class="p">,</span> <span class="nx">$module</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
          <span class="p">}</span>

          <span class="nx">$window</span>
            <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;resize&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">resize</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$scroll</span>
            <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;scroll&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">scroll</span><span class="p">)</span>
          <span class="p">;</span>

          <span class="nx">module</span><span class="p">.</span><span class="nx">observeChanges</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">instantiate</span><span class="p">();</span>
        <span class="p">},</span>

        <span class="nx">instantiate</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Storing instance of module&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">);</span>
          <span class="nx">instance</span> <span class="o">=</span> <span class="nx">module</span><span class="p">;</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">destroy</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Destroying previous module&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>
          <span class="nx">$window</span>
            <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="s1">&#39;resize&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">resize</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$scroll</span>
            <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="s1">&#39;scroll&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">scroll</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">removeData</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">observeChanges</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">context</span> <span class="o">=</span> <span class="nx">$context</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="s1">&#39;MutationObserver&#39;</span> <span class="k">in</span> <span class="nb">window</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">observer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MutationObserver</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">mutations</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;DOM tree modified, updating sticky menu&#39;</span><span class="p">);</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">refresh</span><span class="p">();</span>
              <span class="p">},</span> <span class="mi">200</span><span class="p">);</span>
            <span class="p">});</span>
            <span class="nx">observer</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="p">{</span>
              <span class="nx">childList</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
              <span class="nx">subtree</span>   <span class="o">:</span> <span class="kc">true</span>
            <span class="p">});</span>
            <span class="nx">observer</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="p">{</span>
              <span class="nx">childList</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
              <span class="nx">subtree</span>   <span class="o">:</span> <span class="kc">true</span>
            <span class="p">});</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Setting up mutation observer&#39;</span><span class="p">,</span> <span class="nx">observer</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">event</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">resize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">requestAnimationFrame</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">refresh</span><span class="p">();</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">stick</span><span class="p">();</span>
            <span class="p">});</span>
          <span class="p">},</span>
          <span class="nx">scroll</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">requestAnimationFrame</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">stick</span><span class="p">();</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onScroll</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
            <span class="p">});</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">refresh</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">hardRefresh</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">hardRefresh</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$container</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">offsetParent</span><span class="p">();</span>
          <span class="p">}</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">save</span><span class="p">.</span><span class="nx">positions</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">stick</span><span class="p">();</span>
          <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onReposition</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
        <span class="p">},</span>

        <span class="nx">supports</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">sticky</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">$element</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;&lt;div/&gt;&#39;</span><span class="p">),</span>
              <span class="nx">element</span> <span class="o">=</span> <span class="nx">$element</span><span class="p">.</span><span class="nx">get</span><span class="p">()</span>
            <span class="p">;</span>
            <span class="nx">$element</span>
              <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">supported</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="k">return</span><span class="p">(</span><span class="nx">$element</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;position&#39;</span><span class="p">).</span><span class="nx">match</span><span class="p">(</span><span class="s1">&#39;sticky&#39;</span><span class="p">));</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">save</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">scroll</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">scroll</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">lastScroll</span> <span class="o">=</span> <span class="nx">scroll</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">positions</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nb">window</span> <span class="o">=</span> <span class="p">{</span>
                <span class="nx">height</span><span class="o">:</span> <span class="nx">$window</span><span class="p">.</span><span class="nx">height</span><span class="p">()</span>
              <span class="p">},</span>
              <span class="nx">element</span> <span class="o">=</span> <span class="p">{</span>
                <span class="nx">margin</span><span class="o">:</span> <span class="p">{</span>
                  <span class="nx">top</span>    <span class="o">:</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">$module</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;margin-top&#39;</span><span class="p">),</span> <span class="mi">10</span><span class="p">),</span>
                  <span class="nx">bottom</span> <span class="o">:</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">$module</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;margin-bottom&#39;</span><span class="p">),</span> <span class="mi">10</span><span class="p">),</span>
                <span class="p">},</span>
                <span class="nx">offset</span> <span class="o">:</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">offset</span><span class="p">(),</span>
                <span class="nx">width</span>  <span class="o">:</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">outerWidth</span><span class="p">(),</span>
                <span class="nx">height</span> <span class="o">:</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">outerHeight</span><span class="p">()</span>
              <span class="p">},</span>
              <span class="nx">context</span> <span class="o">=</span> <span class="p">{</span>
                <span class="nx">offset</span><span class="o">:</span> <span class="nx">$context</span><span class="p">.</span><span class="nx">offset</span><span class="p">(),</span>
                <span class="nx">height</span><span class="o">:</span> <span class="nx">$context</span><span class="p">.</span><span class="nx">outerHeight</span><span class="p">()</span>
              <span class="p">}</span>
            <span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span> <span class="o">=</span> <span class="p">{</span>
              <span class="nx">fits</span> <span class="o">:</span> <span class="p">(</span> <span class="nx">element</span><span class="p">.</span><span class="nx">height</span> <span class="o">&lt;</span> <span class="nb">window</span><span class="p">.</span><span class="nx">height</span> <span class="p">),</span>
              <span class="nb">window</span><span class="o">:</span> <span class="p">{</span>
                <span class="nx">height</span><span class="o">:</span> <span class="nb">window</span><span class="p">.</span><span class="nx">height</span>
              <span class="p">},</span>
              <span class="nx">element</span><span class="o">:</span> <span class="p">{</span>
                <span class="nx">margin</span> <span class="o">:</span> <span class="nx">element</span><span class="p">.</span><span class="nx">margin</span><span class="p">,</span>
                <span class="nx">top</span>    <span class="o">:</span> <span class="nx">element</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">top</span> <span class="o">-</span> <span class="nx">element</span><span class="p">.</span><span class="nx">margin</span><span class="p">.</span><span class="nx">top</span><span class="p">,</span>
                <span class="nx">left</span>   <span class="o">:</span> <span class="nx">element</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">left</span><span class="p">,</span>
                <span class="nx">width</span>  <span class="o">:</span> <span class="nx">element</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span>
                <span class="nx">height</span> <span class="o">:</span> <span class="nx">element</span><span class="p">.</span><span class="nx">height</span><span class="p">,</span>
                <span class="nx">bottom</span> <span class="o">:</span> <span class="nx">element</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">top</span> <span class="o">+</span> <span class="nx">element</span><span class="p">.</span><span class="nx">height</span>
              <span class="p">},</span>
              <span class="nx">context</span><span class="o">:</span> <span class="p">{</span>
                <span class="nx">top</span>    <span class="o">:</span> <span class="nx">context</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">top</span><span class="p">,</span>
                <span class="nx">height</span> <span class="o">:</span> <span class="nx">context</span><span class="p">.</span><span class="nx">height</span><span class="p">,</span>
                <span class="nx">bottom</span> <span class="o">:</span> <span class="nx">context</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">top</span> <span class="o">+</span> <span class="nx">context</span><span class="p">.</span><span class="nx">height</span>
              <span class="p">}</span>
            <span class="p">};</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">containerSize</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">size</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">stick</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Caching element positions&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">get</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">direction</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">scroll</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">direction</span> <span class="o">=</span> <span class="s1">&#39;down&#39;</span>
            <span class="p">;</span>
            <span class="nx">scroll</span> <span class="o">=</span> <span class="nx">scroll</span> <span class="o">||</span> <span class="nx">$scroll</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">();</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">lastScroll</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">lastScroll</span> <span class="o">&lt;</span> <span class="nx">scroll</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">direction</span> <span class="o">=</span> <span class="s1">&#39;down&#39;</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">lastScroll</span> <span class="o">&gt;</span> <span class="nx">scroll</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">direction</span> <span class="o">=</span> <span class="s1">&#39;up&#39;</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">direction</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">scrollChange</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">scroll</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">scroll</span> <span class="o">=</span> <span class="nx">scroll</span> <span class="o">||</span> <span class="nx">$scroll</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">();</span>
            <span class="k">return</span> <span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">lastScroll</span><span class="p">)</span>
              <span class="o">?</span> <span class="p">(</span><span class="nx">scroll</span> <span class="o">-</span> <span class="nx">module</span><span class="p">.</span><span class="nx">lastScroll</span><span class="p">)</span>
              <span class="o">:</span> <span class="mi">0</span>
            <span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">currentElementScroll</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">top</span><span class="p">()</span> <span class="p">)</span>
              <span class="o">?</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">$module</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;top&#39;</span><span class="p">),</span> <span class="mi">10</span><span class="p">))</span>    <span class="o">||</span> <span class="mi">0</span>
              <span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">$module</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;bottom&#39;</span><span class="p">),</span> <span class="mi">10</span><span class="p">))</span> <span class="o">||</span> <span class="mi">0</span>
            <span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">elementScroll</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">scroll</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">scroll</span> <span class="o">=</span> <span class="nx">scroll</span> <span class="o">||</span> <span class="nx">$scroll</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">();</span>
            <span class="kd">var</span>
              <span class="nx">element</span>        <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">element</span><span class="p">,</span>
              <span class="nb">window</span>         <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nb">window</span><span class="p">,</span>
              <span class="nx">delta</span>          <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">scrollChange</span><span class="p">(</span><span class="nx">scroll</span><span class="p">),</span>
              <span class="nx">maxScroll</span>      <span class="o">=</span> <span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">height</span> <span class="o">-</span> <span class="nb">window</span><span class="p">.</span><span class="nx">height</span> <span class="o">+</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">offset</span><span class="p">),</span>
              <span class="nx">currentScroll</span>  <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">currentElementScroll</span><span class="p">(),</span>
              <span class="nx">possibleScroll</span> <span class="o">=</span> <span class="p">(</span><span class="nx">currentScroll</span> <span class="o">+</span> <span class="nx">delta</span><span class="p">),</span>
              <span class="nx">elementScroll</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">fits</span> <span class="o">||</span> <span class="nx">possibleScroll</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">elementScroll</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">possibleScroll</span> <span class="o">&gt;</span> <span class="nx">maxScroll</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">elementScroll</span> <span class="o">=</span> <span class="nx">maxScroll</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">elementScroll</span> <span class="o">=</span> <span class="nx">possibleScroll</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">elementScroll</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">remove</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">offset</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;margin-top&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">set</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">offset</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Setting offset on element&#39;</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">offset</span><span class="p">);</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;margin-top&#39;</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">offset</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">containerSize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">tagName</span> <span class="o">=</span> <span class="nx">$container</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">tagName</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">tagName</span> <span class="o">===</span> <span class="s1">&#39;HTML&#39;</span> <span class="o">||</span> <span class="nx">tagName</span> <span class="o">==</span> <span class="s1">&#39;body&#39;</span><span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-170"><td class="docs"><div class="pilwrap"><a href="#section-170" class="pilcrow">&#182;</a></div><p>this can trigger for too many reasons
module.error(error.container, tagName, $module);</p>
</td><td class="code"><div class="highlight"><pre>              <span class="nx">$container</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">offsetParent</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Settings container size&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>
              <span class="nx">$container</span><span class="p">.</span><span class="nx">height</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">scroll</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">scroll</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Setting scroll on element&#39;</span><span class="p">,</span> <span class="nx">scroll</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">top</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">$module</span>
                <span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="o">-</span><span class="nx">scroll</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">bottom</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">$module</span>
                <span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="nx">scroll</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">size</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">height</span> <span class="o">!==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">width</span> <span class="o">!==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$module</span>
                <span class="p">.</span><span class="nx">css</span><span class="p">({</span>
                  <span class="nx">width</span>  <span class="o">:</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span>
                  <span class="nx">height</span> <span class="o">:</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">height</span>
                <span class="p">})</span>
              <span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">is</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">top</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">top</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">bottom</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">bottom</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">initialPosition</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span><span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">fixed</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">bound</span><span class="p">());</span>
          <span class="p">},</span>
          <span class="nx">hidden</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span><span class="o">!</span><span class="nx">$module</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;:visible&#39;</span><span class="p">));</span>
          <span class="p">},</span>
          <span class="nx">bound</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">bound</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">fixed</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">fixed</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">stick</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">cache</span>          <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">,</span>
            <span class="nx">fits</span>           <span class="o">=</span> <span class="nx">cache</span><span class="p">.</span><span class="nx">fits</span><span class="p">,</span>
            <span class="nx">element</span>        <span class="o">=</span> <span class="nx">cache</span><span class="p">.</span><span class="nx">element</span><span class="p">,</span>
            <span class="nb">window</span>         <span class="o">=</span> <span class="nx">cache</span><span class="p">.</span><span class="nb">window</span><span class="p">,</span>
            <span class="nx">context</span>        <span class="o">=</span> <span class="nx">cache</span><span class="p">.</span><span class="nx">context</span><span class="p">,</span>
            <span class="nx">offset</span>         <span class="o">=</span> <span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">bottom</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">pushing</span><span class="p">)</span>
              <span class="o">?</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">bottomOffset</span>
              <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">offset</span><span class="p">,</span>
            <span class="nx">scroll</span>         <span class="o">=</span> <span class="p">{</span>
              <span class="nx">top</span>    <span class="o">:</span> <span class="nx">$scroll</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">()</span> <span class="o">+</span> <span class="nx">offset</span><span class="p">,</span>
              <span class="nx">bottom</span> <span class="o">:</span> <span class="nx">$scroll</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">()</span> <span class="o">+</span> <span class="nx">offset</span> <span class="o">+</span> <span class="nb">window</span><span class="p">.</span><span class="nx">height</span>
            <span class="p">},</span>
            <span class="nx">direction</span>      <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">direction</span><span class="p">(</span><span class="nx">scroll</span><span class="p">.</span><span class="nx">top</span><span class="p">),</span>
            <span class="nx">elementScroll</span>  <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">elementScroll</span><span class="p">(</span><span class="nx">scroll</span><span class="p">.</span><span class="nx">top</span><span class="p">),</span></pre></div></td></tr><tr id="section-171"><td class="docs"><div class="pilwrap"><a href="#section-171" class="pilcrow">&#182;</a></div><p>shorthand</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">doesntFit</span>      <span class="o">=</span> <span class="o">!</span><span class="nx">fits</span><span class="p">,</span>
            <span class="nx">elementVisible</span> <span class="o">=</span> <span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">height</span> <span class="o">!==</span> <span class="mi">0</span><span class="p">)</span>
          <span class="p">;</span></pre></div></td></tr><tr id="section-172"><td class="docs"><div class="pilwrap"><a href="#section-172" class="pilcrow">&#182;</a></div><p>save current scroll for next run</p>
</td><td class="code"><div class="highlight"><pre>          <span class="nx">module</span><span class="p">.</span><span class="nx">save</span><span class="p">.</span><span class="nx">scroll</span><span class="p">(</span><span class="nx">scroll</span><span class="p">.</span><span class="nx">top</span><span class="p">);</span>

          <span class="k">if</span><span class="p">(</span><span class="nx">elementVisible</span><span class="p">)</span> <span class="p">{</span>

            <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">initialPosition</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">scroll</span><span class="p">.</span><span class="nx">top</span> <span class="o">&gt;=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">top</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Element passed, fixing element to page&#39;</span><span class="p">);</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">fixTop</span><span class="p">();</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">fixed</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-173"><td class="docs"><div class="pilwrap"><a href="#section-173" class="pilcrow">&#182;</a></div><p>currently fixed top</p>
</td><td class="code"><div class="highlight"><pre>              <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">top</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span> <span class="nx">scroll</span><span class="p">.</span><span class="nx">top</span> <span class="o">&lt;</span> <span class="nx">element</span><span class="p">.</span><span class="nx">top</span> <span class="p">)</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Fixed element reached top of container&#39;</span><span class="p">);</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">setInitialPosition</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">height</span> <span class="o">+</span> <span class="nx">scroll</span><span class="p">.</span><span class="nx">top</span> <span class="o">-</span> <span class="nx">elementScroll</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nx">context</span><span class="p">.</span><span class="nx">bottom</span> <span class="p">)</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Fixed element reached bottom of container&#39;</span><span class="p">);</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">bindBottom</span><span class="p">();</span>
                <span class="p">}</span></pre></div></td></tr><tr id="section-174"><td class="docs"><div class="pilwrap"><a href="#section-174" class="pilcrow">&#182;</a></div><p>scroll element if larger than screen</p>
</td><td class="code"><div class="highlight"><pre>                <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">doesntFit</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">scroll</span><span class="p">(</span><span class="nx">elementScroll</span><span class="p">);</span>
                <span class="p">}</span>
              <span class="p">}</span></pre></div></td></tr><tr id="section-175"><td class="docs"><div class="pilwrap"><a href="#section-175" class="pilcrow">&#182;</a></div><p>currently fixed bottom</p>
</td><td class="code"><div class="highlight"><pre>              <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">bottom</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-176"><td class="docs"><div class="pilwrap"><a href="#section-176" class="pilcrow">&#182;</a></div><p>top edge</p>
</td><td class="code"><div class="highlight"><pre>                <span class="k">if</span><span class="p">(</span> <span class="p">(</span><span class="nx">scroll</span><span class="p">.</span><span class="nx">bottom</span> <span class="o">-</span> <span class="nx">element</span><span class="p">.</span><span class="nx">height</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nx">element</span><span class="p">.</span><span class="nx">top</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Bottom fixed rail has reached top of container&#39;</span><span class="p">);</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">setInitialPosition</span><span class="p">();</span>
                <span class="p">}</span></pre></div></td></tr><tr id="section-177"><td class="docs"><div class="pilwrap"><a href="#section-177" class="pilcrow">&#182;</a></div><p>bottom edge</p>
</td><td class="code"><div class="highlight"><pre>                <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">scroll</span><span class="p">.</span><span class="nx">bottom</span> <span class="o">&gt;</span> <span class="nx">context</span><span class="p">.</span><span class="nx">bottom</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Bottom fixed rail has reached bottom of container&#39;</span><span class="p">);</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">bindBottom</span><span class="p">();</span>
                <span class="p">}</span></pre></div></td></tr><tr id="section-178"><td class="docs"><div class="pilwrap"><a href="#section-178" class="pilcrow">&#182;</a></div><p>scroll element if larger than screen</p>
</td><td class="code"><div class="highlight"><pre>                <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">doesntFit</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">scroll</span><span class="p">(</span><span class="nx">elementScroll</span><span class="p">);</span>
                <span class="p">}</span>

              <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">bottom</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">pushing</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">bound</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nx">scroll</span><span class="p">.</span><span class="nx">bottom</span> <span class="o">&lt;</span> <span class="nx">context</span><span class="p">.</span><span class="nx">bottom</span> <span class="p">)</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Fixing bottom attached element to bottom of browser.&#39;</span><span class="p">);</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">fixBottom</span><span class="p">();</span>
                <span class="p">}</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">bound</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">scroll</span><span class="p">.</span><span class="nx">top</span> <span class="o">&lt;</span> <span class="nx">context</span><span class="p">.</span><span class="nx">bottom</span> <span class="o">-</span> <span class="nx">element</span><span class="p">.</span><span class="nx">height</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Fixing bottom attached element to top of browser.&#39;</span><span class="p">);</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">fixTop</span><span class="p">();</span>
                <span class="p">}</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">bindTop</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Binding element to top of parent container&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">offset</span><span class="p">();</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;left&#39;</span> <span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;top&#39;</span> <span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;bottom&#39;</span> <span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">fixed</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">bottom</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">bound</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">top</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onTop</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
          <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onUnstick</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
        <span class="p">},</span>
        <span class="nx">bindBottom</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Binding element to bottom of parent container&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">offset</span><span class="p">();</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;left&#39;</span> <span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;top&#39;</span> <span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;bottom&#39;</span> <span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">fixed</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">top</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">bound</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">bottom</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onBottom</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
          <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onUnstick</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
        <span class="p">},</span>

        <span class="nx">setInitialPosition</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">unfix</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">unbind</span><span class="p">();</span>
        <span class="p">},</span>


        <span class="nx">fixTop</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Fixing element to top of page&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">offset</span><span class="p">();</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">left</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">bound</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">bottom</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">fixed</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">top</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onStick</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
        <span class="p">},</span>

        <span class="nx">fixBottom</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Sticking element to bottom of page&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">offset</span><span class="p">();</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">left</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">bound</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">top</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">fixed</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">bottom</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onStick</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
        <span class="p">},</span>

        <span class="nx">unbind</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Removing absolute position on element&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">offset</span><span class="p">();</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">bound</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">top</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">bottom</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">unfix</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Removing fixed position on element&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">offset</span><span class="p">();</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">fixed</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">top</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">bottom</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onUnstick</span><span class="p">,</span> <span class="k">this</span><span class="p">)();</span>
        <span class="p">},</span>

        <span class="nx">reset</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Reseting elements position&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">unbind</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">unfix</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">resetCSS</span><span class="p">();</span>
        <span class="p">},</span>

        <span class="nx">resetCSS</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">css</span><span class="p">({</span>
              <span class="nx">top</span>    <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
              <span class="nx">bottom</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
              <span class="nx">width</span>  <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
              <span class="nx">height</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span>
            <span class="p">})</span>
          <span class="p">;</span>
          <span class="nx">$container</span>
            <span class="p">.</span><span class="nx">css</span><span class="p">({</span>
              <span class="nx">height</span><span class="o">:</span> <span class="s1">&#39;&#39;</span>
            <span class="p">})</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">setting</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">settings</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">internal</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">module</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">debug</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">verbose</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">&amp;&amp;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">performance</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">log</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">currentTime</span><span class="p">,</span>
              <span class="nx">executionTime</span><span class="p">,</span>
              <span class="nx">previousTime</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">currentTime</span>   <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>
              <span class="nx">previousTime</span>  <span class="o">=</span> <span class="nx">time</span> <span class="o">||</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">executionTime</span> <span class="o">=</span> <span class="nx">currentTime</span> <span class="o">-</span> <span class="nx">previousTime</span><span class="p">;</span>
              <span class="nx">time</span>          <span class="o">=</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">performance</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
                <span class="s1">&#39;Name&#39;</span>           <span class="o">:</span> <span class="nx">message</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="s1">&#39;Arguments&#39;</span>      <span class="o">:</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Element&#39;</span>        <span class="o">:</span> <span class="nx">element</span><span class="p">,</span>
                <span class="s1">&#39;Execution Time&#39;</span> <span class="o">:</span> <span class="nx">executionTime</span>
              <span class="p">});</span>
            <span class="p">}</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">display</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">title</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span>
              <span class="nx">totalTime</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="p">;</span>
            <span class="nx">time</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">totalTime</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">];</span>
            <span class="p">});</span>
            <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">totalTime</span> <span class="o">+</span> <span class="s1">&#39;ms&#39;</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">moduleSelector</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; \&#39;&#39;</span> <span class="o">+</span> <span class="nx">moduleSelector</span> <span class="o">+</span> <span class="s1">&#39;\&#39;&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span> <span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">group</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">console</span><span class="p">.</span><span class="nx">table</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">performance</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupCollapsed</span><span class="p">(</span><span class="nx">title</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">performance</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;ms&#39;</span><span class="p">);</span>
                <span class="p">});</span>
              <span class="p">}</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupEnd</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">performance</span> <span class="o">=</span> <span class="p">[];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">invoke</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">object</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">,</span>
            <span class="nx">maxDepth</span><span class="p">,</span>
            <span class="nx">found</span><span class="p">,</span>
            <span class="nx">response</span>
          <span class="p">;</span>
          <span class="nx">passedArguments</span> <span class="o">=</span> <span class="nx">passedArguments</span> <span class="o">||</span> <span class="nx">queryArguments</span><span class="p">;</span>
          <span class="nx">context</span>         <span class="o">=</span> <span class="nx">element</span>         <span class="o">||</span> <span class="nx">context</span><span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">object</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">query</span>    <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/[\. ]/</span><span class="p">);</span>
            <span class="nx">maxDepth</span> <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">depth</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span> <span class="nx">camelCaseValue</span> <span class="o">=</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">value</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="o">:</span> <span class="nx">query</span>
              <span class="p">;</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">});</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">found</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">found</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">returnedValue</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">returnedValue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="p">[</span><span class="nx">returnedValue</span><span class="p">,</span> <span class="nx">response</span><span class="p">];</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">response</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="nx">found</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>

      <span class="k">if</span><span class="p">(</span><span class="nx">methodInvoked</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="nx">query</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">})</span>
  <span class="p">;</span>

  <span class="k">return</span> <span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
    <span class="o">?</span> <span class="nx">returnedValue</span>
    <span class="o">:</span> <span class="k">this</span>
  <span class="p">;</span>
<span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">sticky</span><span class="p">.</span><span class="nx">settings</span> <span class="o">=</span> <span class="p">{</span>

  <span class="nx">name</span>          <span class="o">:</span> <span class="s1">&#39;Sticky&#39;</span><span class="p">,</span>
  <span class="nx">namespace</span>     <span class="o">:</span> <span class="s1">&#39;sticky&#39;</span><span class="p">,</span>

  <span class="nx">debug</span>         <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">verbose</span>       <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">performance</span>   <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>

  <span class="nx">pushing</span>       <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">context</span>       <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">scrollContext</span> <span class="o">:</span> <span class="nb">window</span><span class="p">,</span>
  <span class="nx">offset</span>        <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="nx">bottomOffset</span>  <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>

  <span class="nx">onReposition</span>  <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>
  <span class="nx">onScroll</span>      <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>
  <span class="nx">onStick</span>       <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>
  <span class="nx">onUnstick</span>     <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>
  <span class="nx">onTop</span>         <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>
  <span class="nx">onBottom</span>      <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>

  <span class="nx">error</span>         <span class="o">:</span> <span class="p">{</span>
    <span class="nx">container</span>      <span class="o">:</span> <span class="s1">&#39;Sticky element must be inside a relative container&#39;</span><span class="p">,</span>
    <span class="nx">visible</span>        <span class="o">:</span> <span class="s1">&#39;Element is hidden, you must call refresh after element becomes visible&#39;</span><span class="p">,</span>
    <span class="nx">method</span>         <span class="o">:</span> <span class="s1">&#39;The method you called is not defined.&#39;</span><span class="p">,</span>
    <span class="nx">invalidContext</span> <span class="o">:</span> <span class="s1">&#39;Context specified does not exist&#39;</span><span class="p">,</span>
    <span class="nx">elementSize</span>    <span class="o">:</span> <span class="s1">&#39;Sticky element is larger than its container, cannot create sticky.&#39;</span>
  <span class="p">},</span>

  <span class="nx">className</span> <span class="o">:</span> <span class="p">{</span>
    <span class="nx">bound</span>     <span class="o">:</span> <span class="s1">&#39;bound&#39;</span><span class="p">,</span>
    <span class="nx">fixed</span>     <span class="o">:</span> <span class="s1">&#39;fixed&#39;</span><span class="p">,</span>
    <span class="nx">supported</span> <span class="o">:</span> <span class="s1">&#39;native&#39;</span><span class="p">,</span>
    <span class="nx">top</span>       <span class="o">:</span> <span class="s1">&#39;top&#39;</span><span class="p">,</span>
    <span class="nx">bottom</span>    <span class="o">:</span> <span class="s1">&#39;bottom&#39;</span>
  <span class="p">}</span>

<span class="p">};</span>

<span class="p">})(</span> <span class="nx">jQuery</span><span class="p">,</span> <span class="nb">window</span> <span class="p">,</span> <span class="nb">document</span> <span class="p">);</span></pre></div></td></tr><tr id="section-179"><td class="docs"><div class="pilwrap"><a href="#section-179" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><h1>Semantic - Tab</h1>

<p><a href='http://github.com/semantic-org/semantic-ui/'>http://github.com/semantic-org/semantic-ui/</a></p></div><div class="body"><p>Copyright 2014 Contributors<br />Released under the MIT license<br /><a href='http://opensource.org/licenses/MIT'>http://opensource.org/licenses/MIT</a></p></div></div>
</td><td class="code"><div class="highlight"><pre><span class="p">;(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">$</span><span class="p">,</span> <span class="nb">window</span><span class="p">,</span> <span class="nb">document</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>

<span class="s2">&quot;use strict&quot;</span><span class="p">;</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">tab</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">tab</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span> <span class="p">{</span>

  <span class="kd">var</span></pre></div></td></tr><tr id="section-180"><td class="docs"><div class="pilwrap"><a href="#section-180" class="pilcrow">&#182;</a></div><p>use window context if none specified</p>
</td><td class="code"><div class="highlight"><pre>    <span class="nx">$allModules</span>     <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
        <span class="o">?</span> <span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">)</span>
        <span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>

    <span class="nx">settings</span>        <span class="o">=</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span> <span class="p">)</span>
      <span class="o">?</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">tab</span><span class="p">.</span><span class="nx">settings</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">)</span>
      <span class="o">:</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">tab</span><span class="p">.</span><span class="nx">settings</span><span class="p">),</span>

    <span class="nx">moduleSelector</span>  <span class="o">=</span> <span class="nx">$allModules</span><span class="p">.</span><span class="nx">selector</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="nx">time</span>            <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">(),</span>
    <span class="nx">performance</span>     <span class="o">=</span> <span class="p">[],</span>

    <span class="nx">query</span>           <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="nx">methodInvoked</span>   <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">),</span>
    <span class="nx">queryArguments</span>  <span class="o">=</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>

    <span class="nx">module</span><span class="p">,</span>
    <span class="nx">returnedValue</span>
  <span class="p">;</span>


  <span class="nx">$allModules</span>
    <span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span>

        <span class="nx">className</span>          <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">className</span><span class="p">,</span>
        <span class="nx">metadata</span>           <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">metadata</span><span class="p">,</span>
        <span class="nx">selector</span>           <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">selector</span><span class="p">,</span>
        <span class="nx">error</span>              <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span>

        <span class="nx">eventNamespace</span>     <span class="o">=</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">namespace</span><span class="p">,</span>
        <span class="nx">moduleNamespace</span>    <span class="o">=</span> <span class="s1">&#39;module-&#39;</span> <span class="o">+</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">namespace</span><span class="p">,</span>

        <span class="nx">$module</span>            <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>

        <span class="nx">cache</span>              <span class="o">=</span> <span class="p">{},</span>
        <span class="nx">firstLoad</span>          <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nx">recursionDepth</span>     <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>

        <span class="nx">$context</span><span class="p">,</span>
        <span class="nx">$tabs</span><span class="p">,</span>
        <span class="nx">activeTabPath</span><span class="p">,</span>
        <span class="nx">parameterArray</span><span class="p">,</span>
        <span class="nx">historyEvent</span><span class="p">,</span>

        <span class="nx">element</span>         <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
        <span class="nx">instance</span>        <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">)</span>
      <span class="p">;</span>

      <span class="nx">module</span> <span class="o">=</span> <span class="p">{</span>

        <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Initializing tab menu item&#39;</span><span class="p">,</span> <span class="nx">$module</span><span class="p">);</span>

          <span class="nx">module</span><span class="p">.</span><span class="nx">determineTabs</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Determining tabs&#39;</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">context</span><span class="p">,</span> <span class="nx">$tabs</span><span class="p">);</span></pre></div></td></tr><tr id="section-181"><td class="docs"><div class="pilwrap"><a href="#section-181" class="pilcrow">&#182;</a></div><p>set up automatic routing</p>
</td><td class="code"><div class="highlight"><pre>          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">auto</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Setting up automatic tab retrieval from server&#39;</span><span class="p">);</span>
            <span class="nx">settings</span><span class="p">.</span><span class="nx">apiSettings</span> <span class="o">=</span> <span class="p">{</span>
              <span class="nx">url</span><span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">path</span> <span class="o">+</span> <span class="s1">&#39;/{$tab}&#39;</span>
            <span class="p">};</span>
          <span class="p">}</span></pre></div></td></tr><tr id="section-182"><td class="docs"><div class="pilwrap"><a href="#section-182" class="pilcrow">&#182;</a></div><p>attach events if navigation wasn't set to window</p>
</td><td class="code"><div class="highlight"><pre>          <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="nx">$</span><span class="p">.</span><span class="nx">isWindow</span><span class="p">(</span> <span class="nx">element</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Attaching tab activation events to element&#39;</span><span class="p">,</span> <span class="nx">$module</span><span class="p">);</span>
            <span class="nx">$module</span>
              <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">click</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">}</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">instantiate</span><span class="p">();</span>
        <span class="p">},</span>

        <span class="nx">determineTabs</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">$reference</span>
          <span class="p">;</span></pre></div></td></tr><tr id="section-183"><td class="docs"><div class="pilwrap"><a href="#section-183" class="pilcrow">&#182;</a></div><p>determine tab context</p>
</td><td class="code"><div class="highlight"><pre>          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">context</span> <span class="o">===</span> <span class="s1">&#39;parent&#39;</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">$module</span><span class="p">.</span><span class="nx">closest</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">ui</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$reference</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">closest</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">ui</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Using closest UI element for determining parent&#39;</span><span class="p">,</span> <span class="nx">$reference</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">$reference</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">$context</span> <span class="o">=</span> <span class="nx">$reference</span><span class="p">.</span><span class="nx">parent</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Determined parent element for creating context&#39;</span><span class="p">,</span> <span class="nx">$context</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$context</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">context</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Using selector for tab context&#39;</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">context</span><span class="p">,</span> <span class="nx">$context</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">$context</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">);</span>
          <span class="p">}</span></pre></div></td></tr><tr id="section-184"><td class="docs"><div class="pilwrap"><a href="#section-184" class="pilcrow">&#182;</a></div><p>find tabs</p>
</td><td class="code"><div class="highlight"><pre>          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">childrenOnly</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$tabs</span> <span class="o">=</span> <span class="nx">$context</span><span class="p">.</span><span class="nx">children</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">tabs</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Searching tab context children for tabs&#39;</span><span class="p">,</span> <span class="nx">$context</span><span class="p">,</span> <span class="nx">$tabs</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">$tabs</span> <span class="o">=</span> <span class="nx">$context</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">tabs</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Searching tab context for tabs&#39;</span><span class="p">,</span> <span class="nx">$context</span><span class="p">,</span> <span class="nx">$tabs</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">initializeHistory</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">history</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Initializing page state&#39;</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">address</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">state</span><span class="p">);</span>
              <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">historyType</span> <span class="o">==</span> <span class="s1">&#39;state&#39;</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Using HTML5 to manage state&#39;</span><span class="p">);</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">path</span> <span class="o">!==</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">$</span><span class="p">.</span><span class="nx">address</span>
                    <span class="p">.</span><span class="nx">history</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
                    <span class="p">.</span><span class="nx">state</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">path</span><span class="p">)</span>
                  <span class="p">;</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">path</span><span class="p">);</span>
                  <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
                <span class="p">}</span>
              <span class="p">}</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">address</span>
                <span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;change&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">history</span><span class="p">.</span><span class="nx">change</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">instantiate</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Storing instance of module&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">);</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">destroy</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Destroying tabs&#39;</span><span class="p">,</span> <span class="nx">$module</span><span class="p">);</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">removeData</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">eventNamespace</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">event</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">click</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">tabPath</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">tab</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">tabPath</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">history</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Updating page state&#39;</span><span class="p">,</span> <span class="nx">event</span><span class="p">);</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">address</span><span class="p">.</span><span class="nx">value</span><span class="p">(</span><span class="nx">tabPath</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Changing tab&#39;</span><span class="p">,</span> <span class="nx">event</span><span class="p">);</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">changeTab</span><span class="p">(</span><span class="nx">tabPath</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;No tab specified&#39;</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">history</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">change</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span>
                <span class="nx">tabPath</span>   <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">pathNames</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">initialPath</span><span class="p">(),</span>
                <span class="nx">pageTitle</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">templates</span><span class="p">.</span><span class="nx">determineTitle</span><span class="p">(</span><span class="nx">tabPath</span><span class="p">)</span> <span class="o">||</span> <span class="kc">false</span>
              <span class="p">;</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">display</span><span class="p">();</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;History change event&#39;</span><span class="p">,</span> <span class="nx">tabPath</span><span class="p">,</span> <span class="nx">event</span><span class="p">);</span>
              <span class="nx">historyEvent</span> <span class="o">=</span> <span class="nx">event</span><span class="p">;</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">tabPath</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">changeTab</span><span class="p">(</span><span class="nx">tabPath</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">pageTitle</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">address</span><span class="p">.</span><span class="nx">title</span><span class="p">(</span><span class="nx">pageTitle</span><span class="p">);</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">refresh</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">activeTabPath</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Refreshing tab&#39;</span><span class="p">,</span> <span class="nx">activeTabPath</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">changeTab</span><span class="p">(</span><span class="nx">activeTabPath</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">cache</span><span class="o">:</span> <span class="p">{</span>

          <span class="nx">read</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">cacheKey</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span><span class="nx">cacheKey</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
              <span class="o">?</span> <span class="nx">cache</span><span class="p">[</span><span class="nx">cacheKey</span><span class="p">]</span>
              <span class="o">:</span> <span class="kc">false</span>
            <span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">add</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">cacheKey</span><span class="p">,</span> <span class="nx">content</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">cacheKey</span> <span class="o">=</span> <span class="nx">cacheKey</span> <span class="o">||</span> <span class="nx">activeTabPath</span><span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Adding cached content for&#39;</span><span class="p">,</span> <span class="nx">cacheKey</span><span class="p">);</span>
            <span class="nx">cache</span><span class="p">[</span><span class="nx">cacheKey</span><span class="p">]</span> <span class="o">=</span> <span class="nx">content</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">remove</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">cacheKey</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">cacheKey</span> <span class="o">=</span> <span class="nx">cacheKey</span> <span class="o">||</span> <span class="nx">activeTabPath</span><span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Removing cached content for&#39;</span><span class="p">,</span> <span class="nx">cacheKey</span><span class="p">);</span>
            <span class="k">delete</span> <span class="nx">cache</span><span class="p">[</span><span class="nx">cacheKey</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">set</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">state</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">state</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">address</span><span class="p">.</span><span class="nx">value</span><span class="p">(</span><span class="nx">state</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">changeTab</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">tabPath</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">pushStateAvailable</span> <span class="o">=</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">history</span> <span class="o">&amp;&amp;</span> <span class="nb">window</span><span class="p">.</span><span class="nx">history</span><span class="p">.</span><span class="nx">pushState</span><span class="p">),</span>
            <span class="nx">shouldIgnoreLoad</span>   <span class="o">=</span> <span class="p">(</span><span class="nx">pushStateAvailable</span> <span class="o">&amp;&amp;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">ignoreFirstLoad</span> <span class="o">&amp;&amp;</span> <span class="nx">firstLoad</span><span class="p">),</span>
            <span class="nx">remoteContent</span>      <span class="o">=</span> <span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">auto</span> <span class="o">||</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">apiSettings</span><span class="p">)</span> <span class="p">),</span></pre></div></td></tr><tr id="section-185"><td class="docs"><div class="pilwrap"><a href="#section-185" class="pilcrow">&#182;</a></div><p>only get default path if not remote content</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">pathArray</span> <span class="o">=</span> <span class="p">(</span><span class="nx">remoteContent</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">shouldIgnoreLoad</span><span class="p">)</span>
              <span class="o">?</span> <span class="nx">module</span><span class="p">.</span><span class="nx">utilities</span><span class="p">.</span><span class="nx">pathToArray</span><span class="p">(</span><span class="nx">tabPath</span><span class="p">)</span>
              <span class="o">:</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">defaultPathArray</span><span class="p">(</span><span class="nx">tabPath</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">tabPath</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">utilities</span><span class="p">.</span><span class="nx">arrayToPath</span><span class="p">(</span><span class="nx">pathArray</span><span class="p">);</span>
          <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">pathArray</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">tab</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">currentPathArray</span>   <span class="o">=</span> <span class="nx">pathArray</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span>
              <span class="nx">currentPath</span>        <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">utilities</span><span class="p">.</span><span class="nx">arrayToPath</span><span class="p">(</span><span class="nx">currentPathArray</span><span class="p">),</span>

              <span class="nx">isTab</span>              <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">tab</span><span class="p">(</span><span class="nx">currentPath</span><span class="p">),</span>
              <span class="nx">isLastIndex</span>        <span class="o">=</span> <span class="p">(</span><span class="nx">index</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">==</span> <span class="nx">pathArray</span><span class="p">.</span><span class="nx">length</span><span class="p">),</span>

              <span class="nx">$tab</span>               <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">tabElement</span><span class="p">(</span><span class="nx">currentPath</span><span class="p">),</span>
              <span class="nx">$anchor</span><span class="p">,</span>
              <span class="nx">nextPathArray</span><span class="p">,</span>
              <span class="nx">nextPath</span><span class="p">,</span>
              <span class="nx">isLastTab</span>
            <span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Looking for tab&#39;</span><span class="p">,</span> <span class="nx">tab</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">isTab</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Tab was found&#39;</span><span class="p">,</span> <span class="nx">tab</span><span class="p">);</span></pre></div></td></tr><tr id="section-186"><td class="docs"><div class="pilwrap"><a href="#section-186" class="pilcrow">&#182;</a></div><p>scope up</p>
</td><td class="code"><div class="highlight"><pre>              <span class="nx">activeTabPath</span> <span class="o">=</span> <span class="nx">currentPath</span><span class="p">;</span>
              <span class="nx">parameterArray</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">utilities</span><span class="p">.</span><span class="nx">filterArray</span><span class="p">(</span><span class="nx">pathArray</span><span class="p">,</span> <span class="nx">currentPathArray</span><span class="p">);</span>

              <span class="k">if</span><span class="p">(</span><span class="nx">isLastIndex</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">isLastTab</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">nextPathArray</span> <span class="o">=</span> <span class="nx">pathArray</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">index</span> <span class="o">+</span> <span class="mi">2</span><span class="p">);</span>
                <span class="nx">nextPath</span>      <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">utilities</span><span class="p">.</span><span class="nx">arrayToPath</span><span class="p">(</span><span class="nx">nextPathArray</span><span class="p">);</span>
                <span class="nx">isLastTab</span>     <span class="o">=</span> <span class="p">(</span> <span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">tab</span><span class="p">(</span><span class="nx">nextPath</span><span class="p">)</span> <span class="p">);</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">isLastTab</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Tab parameters found&#39;</span><span class="p">,</span> <span class="nx">nextPathArray</span><span class="p">);</span>
                <span class="p">}</span>
              <span class="p">}</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">isLastTab</span> <span class="o">&amp;&amp;</span> <span class="nx">remoteContent</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">shouldIgnoreLoad</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">activate</span><span class="p">.</span><span class="nx">navigation</span><span class="p">(</span><span class="nx">currentPath</span><span class="p">);</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">fetch</span><span class="p">(</span><span class="nx">currentPath</span><span class="p">,</span> <span class="nx">tabPath</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Ignoring remote content on first tab load&#39;</span><span class="p">,</span> <span class="nx">currentPath</span><span class="p">);</span>
                  <span class="nx">firstLoad</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">tabPath</span><span class="p">,</span> <span class="nx">$tab</span><span class="p">.</span><span class="nx">html</span><span class="p">());</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">activate</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="nx">currentPath</span><span class="p">);</span>
                  <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onTabInit</span><span class="p">,</span> <span class="nx">$tab</span><span class="p">)(</span><span class="nx">currentPath</span><span class="p">,</span> <span class="nx">parameterArray</span><span class="p">,</span> <span class="nx">historyEvent</span><span class="p">);</span>
                  <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onTabLoad</span><span class="p">,</span> <span class="nx">$tab</span><span class="p">)(</span><span class="nx">currentPath</span><span class="p">,</span> <span class="nx">parameterArray</span><span class="p">,</span> <span class="nx">historyEvent</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Opened local tab&#39;</span><span class="p">,</span> <span class="nx">currentPath</span><span class="p">);</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">activate</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="nx">currentPath</span><span class="p">);</span>
                <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">read</span><span class="p">(</span><span class="nx">currentPath</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">currentPath</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;First time tab loaded calling tab init&#39;</span><span class="p">);</span>
                  <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onTabInit</span><span class="p">,</span> <span class="nx">$tab</span><span class="p">)(</span><span class="nx">currentPath</span><span class="p">,</span> <span class="nx">parameterArray</span><span class="p">,</span> <span class="nx">historyEvent</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onTabLoad</span><span class="p">,</span> <span class="nx">$tab</span><span class="p">)(</span><span class="nx">currentPath</span><span class="p">,</span> <span class="nx">parameterArray</span><span class="p">,</span> <span class="nx">historyEvent</span><span class="p">);</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">tabPath</span><span class="p">.</span><span class="nx">search</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-187"><td class="docs"><div class="pilwrap"><a href="#section-187" class="pilcrow">&#182;</a></div><p>look for in page anchor</p>
</td><td class="code"><div class="highlight"><pre>              <span class="nx">$anchor</span>     <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#&#39;</span> <span class="o">+</span> <span class="nx">tabPath</span> <span class="o">+</span> <span class="s1">&#39;, a[name=&quot;&#39;</span> <span class="o">+</span> <span class="nx">tabPath</span> <span class="o">+</span> <span class="s1">&#39;&quot;]&#39;</span><span class="p">),</span>
              <span class="nx">currentPath</span> <span class="o">=</span> <span class="nx">$anchor</span><span class="p">.</span><span class="nx">closest</span><span class="p">(</span><span class="s1">&#39;[data-tab]&#39;</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;tab&#39;</span><span class="p">);</span>
              <span class="nx">$tab</span>        <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">tabElement</span><span class="p">(</span><span class="nx">currentPath</span><span class="p">);</span></pre></div></td></tr><tr id="section-188"><td class="docs"><div class="pilwrap"><a href="#section-188" class="pilcrow">&#182;</a></div><p>if anchor exists use parent tab</p>
</td><td class="code"><div class="highlight"><pre>              <span class="k">if</span><span class="p">(</span><span class="nx">$anchor</span> <span class="o">&amp;&amp;</span> <span class="nx">$anchor</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">currentPath</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;No tab found, but deep anchor link present, opening parent tab&#39;</span><span class="p">);</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">activate</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="nx">currentPath</span><span class="p">);</span>
                <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">read</span><span class="p">(</span><span class="nx">currentPath</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">currentPath</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;First time tab loaded calling tab init&#39;</span><span class="p">);</span>
                  <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onTabInit</span><span class="p">,</span> <span class="nx">$tab</span><span class="p">)(</span><span class="nx">currentPath</span><span class="p">,</span> <span class="nx">parameterArray</span><span class="p">,</span> <span class="nx">historyEvent</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">missingTab</span><span class="p">,</span> <span class="nx">$module</span><span class="p">,</span> <span class="nx">$context</span><span class="p">,</span> <span class="nx">currentPath</span><span class="p">);</span>
              <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">});</span>
        <span class="p">},</span>

        <span class="nx">content</span><span class="o">:</span> <span class="p">{</span>

          <span class="nx">fetch</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">tabPath</span><span class="p">,</span> <span class="nx">fullTabPath</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">$tab</span>             <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">tabElement</span><span class="p">(</span><span class="nx">tabPath</span><span class="p">),</span>
              <span class="nx">apiSettings</span>      <span class="o">=</span> <span class="p">{</span>
                <span class="nx">dataType</span>     <span class="o">:</span> <span class="s1">&#39;html&#39;</span><span class="p">,</span>
                <span class="nx">stateContext</span> <span class="o">:</span> <span class="nx">$tab</span><span class="p">,</span>
                <span class="nx">onSuccess</span>      <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">fullTabPath</span><span class="p">,</span> <span class="nx">response</span><span class="p">);</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">tabPath</span><span class="p">,</span> <span class="nx">response</span><span class="p">);</span>
                  <span class="k">if</span><span class="p">(</span><span class="nx">tabPath</span> <span class="o">==</span> <span class="nx">activeTabPath</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Content loaded&#39;</span><span class="p">,</span> <span class="nx">tabPath</span><span class="p">);</span>
                    <span class="nx">module</span><span class="p">.</span><span class="nx">activate</span><span class="p">.</span><span class="nx">tab</span><span class="p">(</span><span class="nx">tabPath</span><span class="p">);</span>
                  <span class="p">}</span>
                  <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Content loaded in background&#39;</span><span class="p">,</span> <span class="nx">tabPath</span><span class="p">);</span>
                  <span class="p">}</span>
                  <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onTabInit</span><span class="p">,</span> <span class="nx">$tab</span><span class="p">)(</span><span class="nx">tabPath</span><span class="p">,</span> <span class="nx">parameterArray</span><span class="p">,</span> <span class="nx">historyEvent</span><span class="p">);</span>
                  <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onTabLoad</span><span class="p">,</span> <span class="nx">$tab</span><span class="p">)(</span><span class="nx">tabPath</span><span class="p">,</span> <span class="nx">parameterArray</span><span class="p">,</span> <span class="nx">historyEvent</span><span class="p">);</span>
                <span class="p">},</span>
                <span class="nx">urlData</span><span class="o">:</span> <span class="p">{</span> <span class="nx">tab</span><span class="o">:</span> <span class="nx">fullTabPath</span> <span class="p">}</span>
              <span class="p">},</span>
              <span class="nx">request</span>         <span class="o">=</span> <span class="nx">$tab</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">promise</span><span class="p">)</span> <span class="o">||</span> <span class="kc">false</span><span class="p">,</span>
              <span class="nx">existingRequest</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">request</span> <span class="o">&amp;&amp;</span> <span class="nx">request</span><span class="p">.</span><span class="nx">state</span><span class="p">()</span> <span class="o">===</span> <span class="s1">&#39;pending&#39;</span> <span class="p">),</span>
              <span class="nx">requestSettings</span><span class="p">,</span>
              <span class="nx">cachedContent</span>
            <span class="p">;</span>

            <span class="nx">fullTabPath</span>   <span class="o">=</span> <span class="nx">fullTabPath</span> <span class="o">||</span> <span class="nx">tabPath</span><span class="p">;</span>
            <span class="nx">cachedContent</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">read</span><span class="p">(</span><span class="nx">fullTabPath</span><span class="p">);</span>

            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">cache</span> <span class="o">&amp;&amp;</span> <span class="nx">cachedContent</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Showing existing content&#39;</span><span class="p">,</span> <span class="nx">fullTabPath</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">tabPath</span><span class="p">,</span> <span class="nx">cachedContent</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">activate</span><span class="p">.</span><span class="nx">tab</span><span class="p">(</span><span class="nx">tabPath</span><span class="p">);</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onTabLoad</span><span class="p">,</span> <span class="nx">$tab</span><span class="p">)(</span><span class="nx">tabPath</span><span class="p">,</span> <span class="nx">parameterArray</span><span class="p">,</span> <span class="nx">historyEvent</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">existingRequest</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Content is already loading&#39;</span><span class="p">,</span> <span class="nx">fullTabPath</span><span class="p">);</span>
              <span class="nx">$tab</span>
                <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">loading</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">api</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">requestSettings</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="p">{</span> <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span> <span class="s1">&#39;X-Remote&#39;</span><span class="o">:</span> <span class="kc">true</span> <span class="p">}</span> <span class="p">},</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">apiSettings</span><span class="p">,</span> <span class="nx">apiSettings</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Retrieving remote content&#39;</span><span class="p">,</span> <span class="nx">fullTabPath</span><span class="p">,</span> <span class="nx">requestSettings</span><span class="p">);</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">api</span><span class="p">(</span> <span class="nx">requestSettings</span> <span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">api</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">},</span>

          <span class="nx">update</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">tabPath</span><span class="p">,</span> <span class="nx">html</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Updating html for&#39;</span><span class="p">,</span> <span class="nx">tabPath</span><span class="p">);</span>
            <span class="kd">var</span>
              <span class="nx">$tab</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">tabElement</span><span class="p">(</span><span class="nx">tabPath</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="nx">$tab</span>
              <span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">html</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">activate</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">all</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">tabPath</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">activate</span><span class="p">.</span><span class="nx">tab</span><span class="p">(</span><span class="nx">tabPath</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">activate</span><span class="p">.</span><span class="nx">navigation</span><span class="p">(</span><span class="nx">tabPath</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">tab</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">tabPath</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">$tab</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">tabElement</span><span class="p">(</span><span class="nx">tabPath</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Showing tab content for&#39;</span><span class="p">,</span> <span class="nx">$tab</span><span class="p">);</span>
            <span class="nx">$tab</span>
              <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">siblings</span><span class="p">(</span><span class="nx">$tabs</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">className</span><span class="p">.</span><span class="nx">loading</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">navigation</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">tabPath</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">$navigation</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">navElement</span><span class="p">(</span><span class="nx">tabPath</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Activating tab navigation for&#39;</span><span class="p">,</span> <span class="nx">$navigation</span><span class="p">,</span> <span class="nx">tabPath</span><span class="p">);</span>
            <span class="nx">$navigation</span>
              <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">siblings</span><span class="p">(</span><span class="nx">$allModules</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">className</span><span class="p">.</span><span class="nx">loading</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">deactivate</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">all</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">deactivate</span><span class="p">.</span><span class="nx">navigation</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">deactivate</span><span class="p">.</span><span class="nx">tabs</span><span class="p">();</span>
          <span class="p">},</span>
          <span class="nx">navigation</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$allModules</span>
              <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">tabs</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$tabs</span>
              <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">className</span><span class="p">.</span><span class="nx">loading</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">is</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">tab</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">tabName</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span><span class="nx">tabName</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
              <span class="o">?</span> <span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">tabElement</span><span class="p">(</span><span class="nx">tabName</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span>
              <span class="o">:</span> <span class="kc">false</span>
            <span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">get</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">initialPath</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$allModules</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">tab</span><span class="p">)</span> <span class="o">||</span> <span class="nx">$tabs</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">tab</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">path</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">address</span><span class="p">.</span><span class="nx">value</span><span class="p">();</span>
          <span class="p">},</span></pre></div></td></tr><tr id="section-189"><td class="docs"><div class="pilwrap"><a href="#section-189" class="pilcrow">&#182;</a></div><p>adds default tabs to tab path</p>
</td><td class="code"><div class="highlight"><pre>          <span class="nx">defaultPathArray</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">tabPath</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">module</span><span class="p">.</span><span class="nx">utilities</span><span class="p">.</span><span class="nx">pathToArray</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">defaultPath</span><span class="p">(</span><span class="nx">tabPath</span><span class="p">)</span> <span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">defaultPath</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">tabPath</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">$defaultNav</span> <span class="o">=</span> <span class="nx">$allModules</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;[data-&#39;</span> <span class="o">+</span> <span class="nx">metadata</span><span class="p">.</span><span class="nx">tab</span> <span class="o">+</span> <span class="s1">&#39;^=&quot;&#39;</span> <span class="o">+</span> <span class="nx">tabPath</span> <span class="o">+</span> <span class="s1">&#39;/&quot;]&#39;</span><span class="p">).</span><span class="nx">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
              <span class="nx">defaultTab</span>  <span class="o">=</span> <span class="nx">$defaultNav</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">tab</span><span class="p">)</span> <span class="o">||</span> <span class="kc">false</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">defaultTab</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Found default tab&#39;</span><span class="p">,</span> <span class="nx">defaultTab</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">recursionDepth</span> <span class="o">&lt;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">maxDepth</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">recursionDepth</span><span class="o">++</span><span class="p">;</span>
                <span class="k">return</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">defaultPath</span><span class="p">(</span><span class="nx">defaultTab</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">recursion</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;No default tabs found for&#39;</span><span class="p">,</span> <span class="nx">tabPath</span><span class="p">,</span> <span class="nx">$tabs</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="nx">recursionDepth</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">tabPath</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">navElement</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">tabPath</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">tabPath</span> <span class="o">=</span> <span class="nx">tabPath</span> <span class="o">||</span> <span class="nx">activeTabPath</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">$allModules</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;[data-&#39;</span> <span class="o">+</span> <span class="nx">metadata</span><span class="p">.</span><span class="nx">tab</span> <span class="o">+</span> <span class="s1">&#39;=&quot;&#39;</span> <span class="o">+</span> <span class="nx">tabPath</span> <span class="o">+</span> <span class="s1">&#39;&quot;]&#39;</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">tabElement</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">tabPath</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">$fullPathTab</span><span class="p">,</span>
              <span class="nx">$simplePathTab</span><span class="p">,</span>
              <span class="nx">tabPathArray</span><span class="p">,</span>
              <span class="nx">lastTab</span>
            <span class="p">;</span>
            <span class="nx">tabPath</span>        <span class="o">=</span> <span class="nx">tabPath</span> <span class="o">||</span> <span class="nx">activeTabPath</span><span class="p">;</span>
            <span class="nx">tabPathArray</span>   <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">utilities</span><span class="p">.</span><span class="nx">pathToArray</span><span class="p">(</span><span class="nx">tabPath</span><span class="p">);</span>
            <span class="nx">lastTab</span>        <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">utilities</span><span class="p">.</span><span class="nx">last</span><span class="p">(</span><span class="nx">tabPathArray</span><span class="p">);</span>
            <span class="nx">$fullPathTab</span>   <span class="o">=</span> <span class="nx">$tabs</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;[data-&#39;</span> <span class="o">+</span> <span class="nx">metadata</span><span class="p">.</span><span class="nx">tab</span> <span class="o">+</span> <span class="s1">&#39;=&quot;&#39;</span> <span class="o">+</span> <span class="nx">lastTab</span> <span class="o">+</span> <span class="s1">&#39;&quot;]&#39;</span><span class="p">);</span>
            <span class="nx">$simplePathTab</span> <span class="o">=</span> <span class="nx">$tabs</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;[data-&#39;</span> <span class="o">+</span> <span class="nx">metadata</span><span class="p">.</span><span class="nx">tab</span> <span class="o">+</span> <span class="s1">&#39;=&quot;&#39;</span> <span class="o">+</span> <span class="nx">tabPath</span> <span class="o">+</span> <span class="s1">&#39;&quot;]&#39;</span><span class="p">);</span>
            <span class="k">return</span> <span class="p">(</span><span class="nx">$fullPathTab</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
              <span class="o">?</span> <span class="nx">$fullPathTab</span>
              <span class="o">:</span> <span class="nx">$simplePathTab</span>
            <span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">tab</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">activeTabPath</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">utilities</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">filterArray</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">keepArray</span><span class="p">,</span> <span class="nx">removeArray</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">grep</span><span class="p">(</span><span class="nx">keepArray</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">keepValue</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">inArray</span><span class="p">(</span><span class="nx">keepValue</span><span class="p">,</span> <span class="nx">removeArray</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
            <span class="p">});</span>
          <span class="p">},</span>
          <span class="nx">last</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">array</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">array</span><span class="p">)</span>
              <span class="o">?</span> <span class="nx">array</span><span class="p">[</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
              <span class="o">:</span> <span class="kc">false</span>
            <span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">pathToArray</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">pathName</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">pathName</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">pathName</span> <span class="o">=</span> <span class="nx">activeTabPath</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="k">typeof</span> <span class="nx">pathName</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span>
              <span class="o">?</span> <span class="nx">pathName</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
              <span class="o">:</span> <span class="p">[</span><span class="nx">pathName</span><span class="p">]</span>
            <span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">arrayToPath</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">pathArray</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">pathArray</span><span class="p">)</span>
              <span class="o">?</span> <span class="nx">pathArray</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
              <span class="o">:</span> <span class="kc">false</span>
            <span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">setting</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Changing setting&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">settings</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">internal</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">module</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">debug</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">verbose</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">&amp;&amp;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">performance</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">log</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">currentTime</span><span class="p">,</span>
              <span class="nx">executionTime</span><span class="p">,</span>
              <span class="nx">previousTime</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">currentTime</span>   <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>
              <span class="nx">previousTime</span>  <span class="o">=</span> <span class="nx">time</span> <span class="o">||</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">executionTime</span> <span class="o">=</span> <span class="nx">currentTime</span> <span class="o">-</span> <span class="nx">previousTime</span><span class="p">;</span>
              <span class="nx">time</span>          <span class="o">=</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">performance</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
                <span class="s1">&#39;Name&#39;</span>           <span class="o">:</span> <span class="nx">message</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="s1">&#39;Arguments&#39;</span>      <span class="o">:</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Element&#39;</span>        <span class="o">:</span> <span class="nx">element</span><span class="p">,</span>
                <span class="s1">&#39;Execution Time&#39;</span> <span class="o">:</span> <span class="nx">executionTime</span>
              <span class="p">});</span>
            <span class="p">}</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">display</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">title</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span>
              <span class="nx">totalTime</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="p">;</span>
            <span class="nx">time</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">totalTime</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">];</span>
            <span class="p">});</span>
            <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">totalTime</span> <span class="o">+</span> <span class="s1">&#39;ms&#39;</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">moduleSelector</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; \&#39;&#39;</span> <span class="o">+</span> <span class="nx">moduleSelector</span> <span class="o">+</span> <span class="s1">&#39;\&#39;&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span> <span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">group</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">console</span><span class="p">.</span><span class="nx">table</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">performance</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupCollapsed</span><span class="p">(</span><span class="nx">title</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">performance</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;ms&#39;</span><span class="p">);</span>
                <span class="p">});</span>
              <span class="p">}</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupEnd</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">performance</span> <span class="o">=</span> <span class="p">[];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">invoke</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">object</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">,</span>
            <span class="nx">maxDepth</span><span class="p">,</span>
            <span class="nx">found</span><span class="p">,</span>
            <span class="nx">response</span>
          <span class="p">;</span>
          <span class="nx">passedArguments</span> <span class="o">=</span> <span class="nx">passedArguments</span> <span class="o">||</span> <span class="nx">queryArguments</span><span class="p">;</span>
          <span class="nx">context</span>         <span class="o">=</span> <span class="nx">element</span>         <span class="o">||</span> <span class="nx">context</span><span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">object</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">query</span>    <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/[\. ]/</span><span class="p">);</span>
            <span class="nx">maxDepth</span> <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">depth</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span> <span class="nx">camelCaseValue</span> <span class="o">=</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">value</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="o">:</span> <span class="nx">query</span>
              <span class="p">;</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">method</span><span class="p">,</span> <span class="nx">query</span><span class="p">);</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">});</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">found</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">found</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">returnedValue</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">returnedValue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="p">[</span><span class="nx">returnedValue</span><span class="p">,</span> <span class="nx">response</span><span class="p">];</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">response</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="nx">found</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>

      <span class="k">if</span><span class="p">(</span><span class="nx">methodInvoked</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="nx">query</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">})</span>
  <span class="p">;</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">module</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">methodInvoked</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">module</span><span class="p">.</span><span class="nx">initializeHistory</span><span class="p">();</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
    <span class="o">?</span> <span class="nx">returnedValue</span>
    <span class="o">:</span> <span class="k">this</span>
  <span class="p">;</span>

<span class="p">};</span></pre></div></td></tr><tr id="section-190"><td class="docs"><div class="pilwrap"><a href="#section-190" class="pilcrow">&#182;</a></div><p>shortcut for tabbed content with no defined navigation</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">$</span><span class="p">.</span><span class="nx">tab</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">settings</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">tab</span><span class="p">(</span><span class="nx">settings</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">tab</span><span class="p">.</span><span class="nx">settings</span> <span class="o">=</span> <span class="p">{</span>

  <span class="nx">name</span>         <span class="o">:</span> <span class="s1">&#39;Tab&#39;</span><span class="p">,</span>
  <span class="nx">namespace</span>    <span class="o">:</span> <span class="s1">&#39;tab&#39;</span><span class="p">,</span>

  <span class="nx">debug</span>        <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">verbose</span>      <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">performance</span>  <span class="o">:</span> <span class="kc">true</span><span class="p">,</span></pre></div></td></tr><tr id="section-191"><td class="docs"><div class="pilwrap"><a href="#section-191" class="pilcrow">&#182;</a></div><p>uses pjax style endpoints fetching content from same url with remote-content headers</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">auto</span>         <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">history</span>      <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">historyType</span>  <span class="o">:</span> <span class="s1">&#39;hash&#39;</span><span class="p">,</span>
  <span class="nx">path</span>         <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>

  <span class="nx">context</span>      <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">childrenOnly</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span></pre></div></td></tr><tr id="section-192"><td class="docs"><div class="pilwrap"><a href="#section-192" class="pilcrow">&#182;</a></div><p>max depth a tab can be nested</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">maxDepth</span>        <span class="o">:</span> <span class="mi">25</span><span class="p">,</span></pre></div></td></tr><tr id="section-193"><td class="docs"><div class="pilwrap"><a href="#section-193" class="pilcrow">&#182;</a></div><p>dont load content on first load</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">ignoreFirstLoad</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span></pre></div></td></tr><tr id="section-194"><td class="docs"><div class="pilwrap"><a href="#section-194" class="pilcrow">&#182;</a></div><p>load tab content new every tab click</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">alwaysRefresh</span>   <span class="o">:</span> <span class="kc">false</span><span class="p">,</span></pre></div></td></tr><tr id="section-195"><td class="docs"><div class="pilwrap"><a href="#section-195" class="pilcrow">&#182;</a></div><p>cache the content requests to pull locally</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">cache</span>           <span class="o">:</span> <span class="kc">true</span><span class="p">,</span></pre></div></td></tr><tr id="section-196"><td class="docs"><div class="pilwrap"><a href="#section-196" class="pilcrow">&#182;</a></div><p>settings for api call</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">apiSettings</span>     <span class="o">:</span> <span class="kc">false</span><span class="p">,</span></pre></div></td></tr><tr id="section-197"><td class="docs"><div class="pilwrap"><a href="#section-197" class="pilcrow">&#182;</a></div><p>only called first time a tab's content is loaded (when remote source)</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">onTabInit</span>    <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">tabPath</span><span class="p">,</span> <span class="nx">parameterArray</span><span class="p">,</span> <span class="nx">historyEvent</span><span class="p">)</span> <span class="p">{},</span></pre></div></td></tr><tr id="section-198"><td class="docs"><div class="pilwrap"><a href="#section-198" class="pilcrow">&#182;</a></div><p>called on every load</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">onTabLoad</span>    <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">tabPath</span><span class="p">,</span> <span class="nx">parameterArray</span><span class="p">,</span> <span class="nx">historyEvent</span><span class="p">)</span> <span class="p">{},</span>

  <span class="nx">templates</span>    <span class="o">:</span> <span class="p">{</span>
    <span class="nx">determineTitle</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">tabArray</span><span class="p">)</span> <span class="p">{}</span>
  <span class="p">},</span>

  <span class="nx">error</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">api</span>        <span class="o">:</span> <span class="s1">&#39;You attempted to load content without API module&#39;</span><span class="p">,</span>
    <span class="nx">method</span>     <span class="o">:</span> <span class="s1">&#39;The method you called is not defined&#39;</span><span class="p">,</span>
    <span class="nx">missingTab</span> <span class="o">:</span> <span class="s1">&#39;Activated tab cannot be found for this context.&#39;</span><span class="p">,</span>
    <span class="nx">noContent</span>  <span class="o">:</span> <span class="s1">&#39;The tab you specified is missing a content url.&#39;</span><span class="p">,</span>
    <span class="nx">path</span>       <span class="o">:</span> <span class="s1">&#39;History enabled, but no path was specified&#39;</span><span class="p">,</span>
    <span class="nx">recursion</span>  <span class="o">:</span> <span class="s1">&#39;Max recursive depth reached&#39;</span><span class="p">,</span>
    <span class="nx">state</span>      <span class="o">:</span> <span class="s1">&#39;History requires Asual\&#39;s Address library &lt;https://github.com/asual/jquery-address&gt;&#39;</span>
  <span class="p">},</span>

  <span class="nx">metadata</span> <span class="o">:</span> <span class="p">{</span>
    <span class="nx">tab</span>    <span class="o">:</span> <span class="s1">&#39;tab&#39;</span><span class="p">,</span>
    <span class="nx">loaded</span> <span class="o">:</span> <span class="s1">&#39;loaded&#39;</span><span class="p">,</span>
    <span class="nx">promise</span><span class="o">:</span> <span class="s1">&#39;promise&#39;</span>
  <span class="p">},</span>

  <span class="nx">className</span>   <span class="o">:</span> <span class="p">{</span>
    <span class="nx">loading</span> <span class="o">:</span> <span class="s1">&#39;loading&#39;</span><span class="p">,</span>
    <span class="nx">active</span>  <span class="o">:</span> <span class="s1">&#39;active&#39;</span>
  <span class="p">},</span>

  <span class="nx">selector</span>    <span class="o">:</span> <span class="p">{</span>
    <span class="nx">tabs</span> <span class="o">:</span> <span class="s1">&#39;.ui.tab&#39;</span><span class="p">,</span>
    <span class="nx">ui</span>   <span class="o">:</span> <span class="s1">&#39;.ui&#39;</span>
  <span class="p">}</span>

<span class="p">};</span>

<span class="p">})(</span> <span class="nx">jQuery</span><span class="p">,</span> <span class="nb">window</span> <span class="p">,</span> <span class="nb">document</span> <span class="p">);</span></pre></div></td></tr><tr id="section-199"><td class="docs"><div class="pilwrap"><a href="#section-199" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><h1>Semantic - Transition</h1>

<p><a href='http://github.com/semantic-org/semantic-ui/'>http://github.com/semantic-org/semantic-ui/</a></p></div><div class="body"><p>Copyright 2014 Contributor<br />Released under the MIT license<br /><a href='http://opensource.org/licenses/MIT'>http://opensource.org/licenses/MIT</a></p></div></div>
</td><td class="code"><div class="highlight"><pre><span class="p">;(</span><span class="kd">function</span> <span class="p">(</span> <span class="nx">$</span><span class="p">,</span> <span class="nb">window</span><span class="p">,</span> <span class="nb">document</span><span class="p">,</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>

<span class="s2">&quot;use strict&quot;</span><span class="p">;</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">transition</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span>
    <span class="nx">$allModules</span>     <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
    <span class="nx">moduleSelector</span>  <span class="o">=</span> <span class="nx">$allModules</span><span class="p">.</span><span class="nx">selector</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>

    <span class="nx">time</span>            <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">(),</span>
    <span class="nx">performance</span>     <span class="o">=</span> <span class="p">[],</span>

    <span class="nx">moduleArguments</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">,</span>
    <span class="nx">query</span>           <span class="o">=</span> <span class="nx">moduleArguments</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="nx">queryArguments</span>  <span class="o">=</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="nx">methodInvoked</span>   <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span><span class="p">),</span>

    <span class="nx">requestAnimationFrame</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">requestAnimationFrame</span>
      <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">mozRequestAnimationFrame</span>
      <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">webkitRequestAnimationFrame</span>
      <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">msRequestAnimationFrame</span>
      <span class="o">||</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="p">},</span>

    <span class="nx">returnedValue</span>
  <span class="p">;</span>
  <span class="nx">$allModules</span>
    <span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span>
        <span class="nx">$module</span>  <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
        <span class="nx">element</span>  <span class="o">=</span> <span class="k">this</span><span class="p">,</span></pre></div></td></tr><tr id="section-200"><td class="docs"><div class="pilwrap"><a href="#section-200" class="pilcrow">&#182;</a></div><p>set at run time</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">settings</span><span class="p">,</span>
        <span class="nx">instance</span><span class="p">,</span>

        <span class="nx">error</span><span class="p">,</span>
        <span class="nx">className</span><span class="p">,</span>
        <span class="nx">metadata</span><span class="p">,</span>
        <span class="nx">animationStart</span><span class="p">,</span>
        <span class="nx">animationEnd</span><span class="p">,</span>
        <span class="nx">animationName</span><span class="p">,</span>

        <span class="nx">namespace</span><span class="p">,</span>
        <span class="nx">moduleNamespace</span><span class="p">,</span>
        <span class="nx">eventNamespace</span><span class="p">,</span>
        <span class="nx">module</span>
      <span class="p">;</span>

      <span class="nx">module</span> <span class="o">=</span> <span class="p">{</span>

        <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span></pre></div></td></tr><tr id="section-201"><td class="docs"><div class="pilwrap"><a href="#section-201" class="pilcrow">&#182;</a></div><p>get full settings</p>
</td><td class="code"><div class="highlight"><pre>          <span class="nx">moduleNamespace</span> <span class="o">=</span> <span class="s1">&#39;module-&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">;</span>
          <span class="nx">settings</span>        <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">moduleArguments</span><span class="p">);</span>
          <span class="nx">className</span>       <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">className</span><span class="p">;</span>
          <span class="nx">metadata</span>        <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">metadata</span><span class="p">;</span>

          <span class="nx">animationStart</span>  <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">animationStartEvent</span><span class="p">();</span>
          <span class="nx">animationEnd</span>    <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">animationEndEvent</span><span class="p">();</span>
          <span class="nx">animationName</span>   <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">animationName</span><span class="p">();</span>
          <span class="nx">error</span>           <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">error</span><span class="p">;</span>
          <span class="nx">namespace</span>       <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">namespace</span><span class="p">;</span>
          <span class="nx">eventNamespace</span>  <span class="o">=</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">namespace</span><span class="p">;</span>
          <span class="nx">instance</span>        <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">)</span> <span class="o">||</span> <span class="nx">module</span><span class="p">;</span>

          <span class="k">if</span><span class="p">(</span><span class="nx">methodInvoked</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">methodInvoked</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="nx">query</span><span class="p">);</span>
          <span class="p">}</span></pre></div></td></tr><tr id="section-202"><td class="docs"><div class="pilwrap"><a href="#section-202" class="pilcrow">&#182;</a></div><p>no internal method was found matching query or query not made</p>
</td><td class="code"><div class="highlight"><pre>          <span class="k">if</span><span class="p">(</span><span class="nx">methodInvoked</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Converted arguments into settings object&#39;</span><span class="p">,</span> <span class="nx">settings</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">animate</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">instantiate</span><span class="p">();</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">instantiate</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Storing instance of module&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">);</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">,</span> <span class="nx">instance</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">destroy</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Destroying previous module for&#39;</span><span class="p">,</span> <span class="nx">element</span><span class="p">);</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">removeData</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">refresh</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Refreshing display type on next animation&#39;</span><span class="p">);</span>
          <span class="k">delete</span> <span class="nx">module</span><span class="p">.</span><span class="nx">displayType</span><span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">forceRepaint</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Forcing element repaint&#39;</span><span class="p">);</span>
          <span class="kd">var</span>
            <span class="nx">$parentElement</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">parent</span><span class="p">(),</span>
            <span class="nx">$nextElement</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">next</span><span class="p">()</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">$nextElement</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">detach</span><span class="p">().</span><span class="nx">appendTo</span><span class="p">(</span><span class="nx">$parentElement</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">detach</span><span class="p">().</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">$nextElement</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">repaint</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Repainting element&#39;</span><span class="p">);</span>
          <span class="kd">var</span>
            <span class="nx">fakeAssignment</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">offsetWidth</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">animate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">overrideSettings</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">settings</span> <span class="o">=</span> <span class="nx">overrideSettings</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">supported</span><span class="p">())</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">support</span><span class="p">);</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Preparing animation&#39;</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">animation</span><span class="p">);</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">animating</span><span class="p">())</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">queue</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">settings</span><span class="p">.</span><span class="nx">allowRepeats</span> <span class="o">&amp;&amp;</span> <span class="nx">module</span><span class="p">.</span><span class="nx">has</span><span class="p">.</span><span class="nx">direction</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">occuring</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nx">module</span><span class="p">.</span><span class="nx">queuing</span> <span class="o">!==</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">repeated</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">animation</span><span class="p">,</span> <span class="nx">$module</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">queue</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">animation</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>

            <span class="p">}</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">can</span><span class="p">.</span><span class="nx">animate</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">animating</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">animation</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">noAnimation</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">animation</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">reset</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Resetting animation to beginning conditions&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">animationEndCallback</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">restore</span><span class="p">.</span><span class="nx">conditions</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">animating</span><span class="p">();</span>
        <span class="p">},</span>

        <span class="nx">queue</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">animation</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Queueing animation of&#39;</span><span class="p">,</span> <span class="nx">animation</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">queuing</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="nx">animationEnd</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">queuing</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">repaint</span><span class="p">();</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">animate</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">settings</span><span class="p">);</span>
            <span class="p">})</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">complete</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;CSS animation complete&#39;</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">animation</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">animationEndCallback</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">failSafe</span><span class="p">();</span>
          <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">looping</span><span class="p">())</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">outward</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Animation is outward, hiding element&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">restore</span><span class="p">.</span><span class="nx">conditions</span><span class="p">();</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onHide</span><span class="p">,</span> <span class="k">this</span><span class="p">)();</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">inward</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Animation is outward, showing element&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">restore</span><span class="p">.</span><span class="nx">conditions</span><span class="p">();</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">display</span><span class="p">();</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onShow</span><span class="p">,</span> <span class="k">this</span><span class="p">)();</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">restore</span><span class="p">.</span><span class="nx">conditions</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">animation</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">animating</span><span class="p">();</span>
          <span class="p">}</span>
          <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onComplete</span><span class="p">,</span> <span class="k">this</span><span class="p">)();</span>
        <span class="p">},</span>

        <span class="nx">has</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">direction</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">animation</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">animation</span> <span class="o">=</span> <span class="nx">animation</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">animation</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">animation</span><span class="p">.</span><span class="nx">search</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">inward</span><span class="p">)</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span> <span class="o">||</span> <span class="nx">animation</span><span class="p">.</span><span class="nx">search</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">outward</span><span class="p">)</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Direction already set in animation&#39;</span><span class="p">);</span>
              <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">inlineDisplay</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">style</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;style&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span>
            <span class="p">;</span>
            <span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">style</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/display.*?;/</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">));</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">set</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">animating</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">animation</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">animation</span> <span class="o">=</span> <span class="nx">animation</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">animation</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">animating</span><span class="p">())</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">save</span><span class="p">.</span><span class="nx">conditions</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">direction</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">animationEndCallback</span><span class="p">();</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">can</span><span class="p">.</span><span class="nx">transition</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">has</span><span class="p">.</span><span class="nx">direction</span><span class="p">())</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">direction</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">hidden</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">display</span><span class="p">();</span>
            <span class="nx">$module</span>
              <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">animating</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">transition</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">animation</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">one</span><span class="p">(</span><span class="nx">animationEnd</span> <span class="o">+</span> <span class="s1">&#39;.complete&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">complete</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">useFailSafe</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">failSafe</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onStart</span><span class="p">,</span> <span class="k">this</span><span class="p">)();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Starting tween&#39;</span><span class="p">,</span> <span class="nx">animation</span><span class="p">,</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">));</span>
          <span class="p">},</span>
          <span class="nx">duration</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">animationName</span><span class="p">,</span> <span class="nx">duration</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">duration</span> <span class="o">=</span> <span class="nx">duration</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">;</span>
            <span class="nx">duration</span> <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">duration</span> <span class="o">==</span> <span class="s1">&#39;number&#39;</span><span class="p">)</span>
              <span class="o">?</span> <span class="nx">duration</span> <span class="o">+</span> <span class="s1">&#39;ms&#39;</span>
              <span class="o">:</span> <span class="nx">duration</span>
            <span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Setting animation duration&#39;</span><span class="p">,</span> <span class="nx">duration</span><span class="p">);</span>
            <span class="nx">$module</span>
              <span class="p">.</span><span class="nx">css</span><span class="p">({</span>
                <span class="s1">&#39;-webkit-animation-duration&#39;</span><span class="o">:</span> <span class="nx">duration</span><span class="p">,</span>
                <span class="s1">&#39;-moz-animation-duration&#39;</span><span class="o">:</span> <span class="nx">duration</span><span class="p">,</span>
                <span class="s1">&#39;-ms-animation-duration&#39;</span><span class="o">:</span> <span class="nx">duration</span><span class="p">,</span>
                <span class="s1">&#39;-o-animation-duration&#39;</span><span class="o">:</span> <span class="nx">duration</span><span class="p">,</span>
                <span class="s1">&#39;animation-duration&#39;</span><span class="o">:</span>  <span class="nx">duration</span>
              <span class="p">})</span>
            <span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">display</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">style</span>              <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">style</span><span class="p">(),</span>
              <span class="nx">displayType</span>        <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">displayType</span><span class="p">(),</span>
              <span class="nx">overrideStyle</span>      <span class="o">=</span> <span class="nx">style</span> <span class="o">+</span> <span class="s1">&#39;display: &#39;</span> <span class="o">+</span> <span class="nx">displayType</span> <span class="o">+</span> <span class="s1">&#39; !important;&#39;</span>
            <span class="p">;</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;display&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">refresh</span><span class="p">();</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;display&#39;</span><span class="p">)</span> <span class="o">!==</span> <span class="nx">displayType</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Setting inline visibility to&#39;</span><span class="p">,</span> <span class="nx">displayType</span><span class="p">);</span>
              <span class="nx">$module</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;style&#39;</span><span class="p">,</span> <span class="nx">overrideStyle</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">direction</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">$module</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;:visible&#39;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">hidden</span><span class="p">())</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Automatically determining the direction of animation&#39;</span><span class="p">,</span> <span class="s1">&#39;Outward&#39;</span><span class="p">);</span>
              <span class="nx">$module</span>
                <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">inward</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">outward</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Automatically determining the direction of animation&#39;</span><span class="p">,</span> <span class="s1">&#39;Inward&#39;</span><span class="p">);</span>
              <span class="nx">$module</span>
                <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">outward</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">inward</span><span class="p">)</span>
              <span class="p">;</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">looping</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Transition set to loop&#39;</span><span class="p">);</span>
            <span class="nx">$module</span>
              <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">looping</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">hidden</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">hidden</span><span class="p">())</span> <span class="p">{</span>
              <span class="nx">$module</span>
                <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">transition</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">hidden</span><span class="p">)</span>
              <span class="p">;</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">$module</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;display&#39;</span><span class="p">)</span> <span class="o">!==</span> <span class="s1">&#39;none&#39;</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Overriding default display to hide element&#39;</span><span class="p">);</span>
                <span class="nx">$module</span>
                  <span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;display&#39;</span><span class="p">,</span> <span class="s1">&#39;none&#39;</span><span class="p">)</span>
                <span class="p">;</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">visible</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$module</span>
              <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">transition</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">visible</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">save</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">displayType</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">displayType</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">displayType</span><span class="p">,</span> <span class="nx">displayType</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">transitionExists</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">animation</span><span class="p">,</span> <span class="nx">exists</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">transition</span><span class="p">.</span><span class="nx">exists</span><span class="p">[</span><span class="nx">animation</span><span class="p">]</span> <span class="o">=</span> <span class="nx">exists</span><span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Saving existence of transition&#39;</span><span class="p">,</span> <span class="nx">animation</span><span class="p">,</span> <span class="nx">exists</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">conditions</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">clasName</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="kc">false</span><span class="p">,</span>
              <span class="nx">style</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;style&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span>
            <span class="p">;</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">animation</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">direction</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span> <span class="o">=</span> <span class="p">{</span>
              <span class="nx">className</span> <span class="o">:</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">),</span>
              <span class="nx">style</span>     <span class="o">:</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">style</span><span class="p">()</span>
            <span class="p">};</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Saving original attributes&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">restore</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">conditions</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">className</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$module</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">className</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">$module</span><span class="p">.</span><span class="nx">removeAttr</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">style</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Restoring original style attribute&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">style</span><span class="p">);</span>
              <span class="nx">$module</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;style&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">style</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">looping</span><span class="p">())</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">looping</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Restoring original attributes&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">add</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">failSafe</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">duration</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">duration</span><span class="p">()</span>
            <span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">complete</span><span class="p">,</span> <span class="nx">duration</span> <span class="o">+</span> <span class="mi">100</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Adding fail safe timer&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">remove</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">animating</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">animating</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">animation</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$module</span>
              <span class="p">.</span><span class="nx">css</span><span class="p">({</span>
                <span class="s1">&#39;-webkit-animation&#39;</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;-moz-animation&#39;</span>    <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;-ms-animation&#39;</span>     <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;-o-animation&#39;</span>      <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;animation&#39;</span>         <span class="o">:</span> <span class="s1">&#39;&#39;</span>
              <span class="p">})</span>
            <span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">animationEndCallback</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="s1">&#39;.complete&#39;</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">display</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;display&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">direction</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$module</span>
              <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">inward</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">outward</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">failSafe</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Removing fail safe timer&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">timer</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">hidden</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">hidden</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">visible</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$module</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">visible</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">looping</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Transitions are no longer looping&#39;</span><span class="p">);</span>
            <span class="nx">$module</span>
              <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">looping</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">forceRepaint</span><span class="p">();</span>
          <span class="p">},</span>
          <span class="nx">transition</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">$module</span>
              <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">visible</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">hidden</span><span class="p">)</span>
            <span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">get</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">settings</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">animation</span><span class="p">,</span> <span class="nx">duration</span><span class="p">,</span> <span class="nx">onComplete</span><span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-203"><td class="docs"><div class="pilwrap"><a href="#section-203" class="pilcrow">&#182;</a></div><p>single settings object</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">animation</span> <span class="o">==</span> <span class="s1">&#39;object&#39;</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">transition</span><span class="p">.</span><span class="nx">settings</span><span class="p">,</span> <span class="nx">animation</span><span class="p">);</span>
            <span class="p">}</span></pre></div></td></tr><tr id="section-204"><td class="docs"><div class="pilwrap"><a href="#section-204" class="pilcrow">&#182;</a></div><p>all arguments provided</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">onComplete</span> <span class="o">==</span> <span class="s1">&#39;function&#39;</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">transition</span><span class="p">.</span><span class="nx">settings</span><span class="p">,</span> <span class="p">{</span>
                <span class="nx">animation</span>  <span class="o">:</span> <span class="nx">animation</span><span class="p">,</span>
                <span class="nx">onComplete</span> <span class="o">:</span> <span class="nx">onComplete</span><span class="p">,</span>
                <span class="nx">duration</span>   <span class="o">:</span> <span class="nx">duration</span>
              <span class="p">});</span>
            <span class="p">}</span></pre></div></td></tr><tr id="section-205"><td class="docs"><div class="pilwrap"><a href="#section-205" class="pilcrow">&#182;</a></div><p>only duration provided</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">duration</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">duration</span> <span class="o">==</span> <span class="s1">&#39;number&#39;</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">transition</span><span class="p">.</span><span class="nx">settings</span><span class="p">,</span> <span class="p">{</span>
                <span class="nx">animation</span> <span class="o">:</span> <span class="nx">animation</span><span class="p">,</span>
                <span class="nx">duration</span>  <span class="o">:</span> <span class="nx">duration</span>
              <span class="p">});</span>
            <span class="p">}</span></pre></div></td></tr><tr id="section-206"><td class="docs"><div class="pilwrap"><a href="#section-206" class="pilcrow">&#182;</a></div><p>duration is actually settings object</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">duration</span> <span class="o">==</span> <span class="s1">&#39;object&#39;</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">transition</span><span class="p">.</span><span class="nx">settings</span><span class="p">,</span> <span class="nx">duration</span><span class="p">,</span> <span class="p">{</span>
                <span class="nx">animation</span> <span class="o">:</span> <span class="nx">animation</span>
              <span class="p">});</span>
            <span class="p">}</span></pre></div></td></tr><tr id="section-207"><td class="docs"><div class="pilwrap"><a href="#section-207" class="pilcrow">&#182;</a></div><p>duration is actually callback</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">duration</span> <span class="o">==</span> <span class="s1">&#39;function&#39;</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">transition</span><span class="p">.</span><span class="nx">settings</span><span class="p">,</span> <span class="p">{</span>
                <span class="nx">animation</span>  <span class="o">:</span> <span class="nx">animation</span><span class="p">,</span>
                <span class="nx">onComplete</span> <span class="o">:</span> <span class="nx">duration</span>
              <span class="p">});</span>
            <span class="p">}</span></pre></div></td></tr><tr id="section-208"><td class="docs"><div class="pilwrap"><a href="#section-208" class="pilcrow">&#182;</a></div><p>only animation provided</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">else</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">transition</span><span class="p">.</span><span class="nx">settings</span><span class="p">,</span> <span class="p">{</span>
                <span class="nx">animation</span> <span class="o">:</span> <span class="nx">animation</span>
              <span class="p">});</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">transition</span><span class="p">.</span><span class="nx">settings</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">duration</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">duration</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">duration</span> <span class="o">=</span> <span class="nx">duration</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">;</span>
            <span class="k">return</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span>
              <span class="o">?</span> <span class="p">(</span><span class="nx">duration</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                <span class="o">?</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">duration</span><span class="p">)</span>
                <span class="o">:</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">duration</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span>
              <span class="o">:</span> <span class="nx">duration</span>
            <span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">displayType</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">displayType</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">displayType</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">displayType</span><span class="p">)</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span></pre></div></td></tr><tr id="section-209"><td class="docs"><div class="pilwrap"><a href="#section-209" class="pilcrow">&#182;</a></div><p>create fake element to determine display state</p>
</td><td class="code"><div class="highlight"><pre>              <span class="nx">module</span><span class="p">.</span><span class="nx">can</span><span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">displayType</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">style</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">style</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;style&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span>
            <span class="p">;</span>
            <span class="k">return</span> <span class="nx">style</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/display.*?;/</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">transitionExists</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">animation</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">transition</span><span class="p">.</span><span class="nx">exists</span><span class="p">[</span><span class="nx">animation</span><span class="p">];</span>
          <span class="p">},</span>
          <span class="nx">animationName</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">element</span>     <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">),</span>
              <span class="nx">animations</span>  <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;animation&#39;</span>       <span class="o">:</span><span class="s1">&#39;animationName&#39;</span><span class="p">,</span>
                <span class="s1">&#39;OAnimation&#39;</span>      <span class="o">:</span><span class="s1">&#39;oAnimationName&#39;</span><span class="p">,</span>
                <span class="s1">&#39;MozAnimation&#39;</span>    <span class="o">:</span><span class="s1">&#39;mozAnimationName&#39;</span><span class="p">,</span>
                <span class="s1">&#39;WebkitAnimation&#39;</span> <span class="o">:</span><span class="s1">&#39;webkitAnimationName&#39;</span>
              <span class="p">},</span>
              <span class="nx">animation</span>
            <span class="p">;</span>
            <span class="k">for</span><span class="p">(</span><span class="nx">animation</span> <span class="k">in</span> <span class="nx">animations</span><span class="p">){</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span><span class="nx">animation</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">){</span>
                <span class="k">return</span> <span class="nx">animations</span><span class="p">[</span><span class="nx">animation</span><span class="p">];</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">animationStartEvent</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">element</span>     <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">),</span>
              <span class="nx">animations</span>  <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;animation&#39;</span>       <span class="o">:</span><span class="s1">&#39;animationstart&#39;</span><span class="p">,</span>
                <span class="s1">&#39;OAnimation&#39;</span>      <span class="o">:</span><span class="s1">&#39;oAnimationStart&#39;</span><span class="p">,</span>
                <span class="s1">&#39;MozAnimation&#39;</span>    <span class="o">:</span><span class="s1">&#39;mozAnimationStart&#39;</span><span class="p">,</span>
                <span class="s1">&#39;WebkitAnimation&#39;</span> <span class="o">:</span><span class="s1">&#39;webkitAnimationStart&#39;</span>
              <span class="p">},</span>
              <span class="nx">animation</span>
            <span class="p">;</span>
            <span class="k">for</span><span class="p">(</span><span class="nx">animation</span> <span class="k">in</span> <span class="nx">animations</span><span class="p">){</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span><span class="nx">animation</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">){</span>
                <span class="k">return</span> <span class="nx">animations</span><span class="p">[</span><span class="nx">animation</span><span class="p">];</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">animationEndEvent</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">element</span>     <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">),</span>
              <span class="nx">animations</span>  <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;animation&#39;</span>       <span class="o">:</span><span class="s1">&#39;animationend&#39;</span><span class="p">,</span>
                <span class="s1">&#39;OAnimation&#39;</span>      <span class="o">:</span><span class="s1">&#39;oAnimationEnd&#39;</span><span class="p">,</span>
                <span class="s1">&#39;MozAnimation&#39;</span>    <span class="o">:</span><span class="s1">&#39;mozAnimationEnd&#39;</span><span class="p">,</span>
                <span class="s1">&#39;WebkitAnimation&#39;</span> <span class="o">:</span><span class="s1">&#39;webkitAnimationEnd&#39;</span>
              <span class="p">},</span>
              <span class="nx">animation</span>
            <span class="p">;</span>
            <span class="k">for</span><span class="p">(</span><span class="nx">animation</span> <span class="k">in</span> <span class="nx">animations</span><span class="p">){</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span><span class="nx">animation</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">){</span>
                <span class="k">return</span> <span class="nx">animations</span><span class="p">[</span><span class="nx">animation</span><span class="p">];</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">}</span>

        <span class="p">},</span>

        <span class="nx">can</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">transition</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">forced</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">elementClass</span>      <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">),</span>
              <span class="nx">tagName</span>           <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">prop</span><span class="p">(</span><span class="s1">&#39;tagName&#39;</span><span class="p">),</span>
              <span class="nx">animation</span>         <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">animation</span><span class="p">,</span>
              <span class="nx">transitionExists</span>  <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">transitionExists</span><span class="p">(</span><span class="nx">animation</span><span class="p">),</span>
              <span class="nx">$clone</span><span class="p">,</span>
              <span class="nx">currentAnimation</span><span class="p">,</span>
              <span class="nx">inAnimation</span><span class="p">,</span>
              <span class="nx">directionExists</span><span class="p">,</span>
              <span class="nx">displayType</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">transitionExists</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">forced</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Determining whether animation exists&#39;</span><span class="p">);</span>
              <span class="nx">$clone</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;&lt;&#39;</span> <span class="o">+</span> <span class="nx">tagName</span> <span class="o">+</span> <span class="s1">&#39; /&gt;&#39;</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span> <span class="nx">elementClass</span> <span class="p">).</span><span class="nx">insertAfter</span><span class="p">(</span><span class="nx">$module</span><span class="p">);</span>
              <span class="nx">currentAnimation</span> <span class="o">=</span> <span class="nx">$clone</span>
                <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">animation</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">inward</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">outward</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">animating</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">transition</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="nx">animationName</span><span class="p">)</span>
              <span class="p">;</span>
              <span class="nx">inAnimation</span> <span class="o">=</span> <span class="nx">$clone</span>
                <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">inward</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="nx">animationName</span><span class="p">)</span>
              <span class="p">;</span>
              <span class="nx">displayType</span> <span class="o">=</span> <span class="nx">$clone</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">,</span> <span class="nx">elementClass</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">removeAttr</span><span class="p">(</span><span class="s1">&#39;style&#39;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">hidden</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">visible</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">show</span><span class="p">()</span>
                <span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;display&#39;</span><span class="p">)</span>
              <span class="p">;</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Determining final display state&#39;</span><span class="p">,</span> <span class="nx">displayType</span><span class="p">);</span>
              <span class="nx">$clone</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">currentAnimation</span> <span class="o">!=</span> <span class="nx">inAnimation</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Direction exists for animation&#39;</span><span class="p">,</span> <span class="nx">animation</span><span class="p">);</span>
                <span class="nx">directionExists</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">currentAnimation</span> <span class="o">==</span> <span class="s1">&#39;none&#39;</span> <span class="o">||</span> <span class="o">!</span><span class="nx">currentAnimation</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;No animation defined in css&#39;</span><span class="p">,</span> <span class="nx">animation</span><span class="p">);</span>
                <span class="k">return</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Static animation found&#39;</span><span class="p">,</span> <span class="nx">animation</span><span class="p">,</span> <span class="nx">displayType</span><span class="p">);</span>
                <span class="nx">directionExists</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">save</span><span class="p">.</span><span class="nx">displayType</span><span class="p">(</span><span class="nx">displayType</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">save</span><span class="p">.</span><span class="nx">transitionExists</span><span class="p">(</span><span class="nx">animation</span><span class="p">,</span> <span class="nx">directionExists</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="p">(</span><span class="nx">transitionExists</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
              <span class="o">?</span> <span class="nx">transitionExists</span>
              <span class="o">:</span> <span class="nx">directionExists</span>
            <span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">animate</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span></pre></div></td></tr><tr id="section-210"><td class="docs"><div class="pilwrap"><a href="#section-210" class="pilcrow">&#182;</a></div><p>can transition does not return a value if animation does not exist</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">return</span> <span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">can</span><span class="p">.</span><span class="nx">transition</span><span class="p">()</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">is</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">animating</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">animating</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">inward</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">inward</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">outward</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">outward</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">looping</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">looping</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">occuring</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">animation</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">animation</span> <span class="o">=</span> <span class="nx">animation</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">animation</span><span class="p">;</span>
            <span class="nx">animation</span> <span class="o">=</span> <span class="nx">animation</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="p">);</span>
            <span class="k">return</span> <span class="p">(</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">animation</span><span class="p">).</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">visible</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;:visible&#39;</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">hidden</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;visibility&#39;</span><span class="p">)</span> <span class="o">===</span> <span class="s1">&#39;hidden&#39;</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">supported</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span><span class="p">(</span><span class="nx">animationName</span> <span class="o">!==</span> <span class="kc">false</span> <span class="o">&amp;&amp;</span> <span class="nx">animationEnd</span> <span class="o">!==</span> <span class="kc">false</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">hide</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Hiding element&#39;</span><span class="p">);</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">is</span><span class="p">.</span><span class="nx">animating</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>
          <span class="p">}</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">display</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">visible</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">hidden</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">repaint</span><span class="p">();</span>
        <span class="p">},</span>

        <span class="nx">show</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">display</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Showing element&#39;</span><span class="p">,</span> <span class="nx">display</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">hidden</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">visible</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">repaint</span><span class="p">();</span>
        <span class="p">},</span>

        <span class="nx">start</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Starting animation&#39;</span><span class="p">);</span>
          <span class="nx">$module</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">disabled</span><span class="p">);</span>
        <span class="p">},</span>

        <span class="nx">stop</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Stopping animation&#39;</span><span class="p">);</span>
          <span class="nx">$module</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">disabled</span><span class="p">);</span>
        <span class="p">},</span>

        <span class="nx">toggle</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Toggling play status&#39;</span><span class="p">);</span>
          <span class="nx">$module</span><span class="p">.</span><span class="nx">toggleClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">disabled</span><span class="p">);</span>
        <span class="p">},</span>

        <span class="nx">setting</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Changing setting&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">settings</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">internal</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">module</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">debug</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">verbose</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">&amp;&amp;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">performance</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">log</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">currentTime</span><span class="p">,</span>
              <span class="nx">executionTime</span><span class="p">,</span>
              <span class="nx">previousTime</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">currentTime</span>   <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>
              <span class="nx">previousTime</span>  <span class="o">=</span> <span class="nx">time</span> <span class="o">||</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">executionTime</span> <span class="o">=</span> <span class="nx">currentTime</span> <span class="o">-</span> <span class="nx">previousTime</span><span class="p">;</span>
              <span class="nx">time</span>          <span class="o">=</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">performance</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
                <span class="s1">&#39;Name&#39;</span>           <span class="o">:</span> <span class="nx">message</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="s1">&#39;Arguments&#39;</span>      <span class="o">:</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Element&#39;</span>        <span class="o">:</span> <span class="nx">element</span><span class="p">,</span>
                <span class="s1">&#39;Execution Time&#39;</span> <span class="o">:</span> <span class="nx">executionTime</span>
              <span class="p">});</span>
            <span class="p">}</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span> <span class="mi">600</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">display</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">title</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span>
              <span class="nx">totalTime</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="p">;</span>
            <span class="nx">time</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">totalTime</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">];</span>
            <span class="p">});</span>
            <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">totalTime</span> <span class="o">+</span> <span class="s1">&#39;ms&#39;</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">moduleSelector</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; \&#39;&#39;</span> <span class="o">+</span> <span class="nx">moduleSelector</span> <span class="o">+</span> <span class="s1">&#39;\&#39;&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">$allModules</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="s1">&#39;(&#39;</span> <span class="o">+</span> <span class="nx">$allModules</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span> <span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">group</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">console</span><span class="p">.</span><span class="nx">table</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">performance</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupCollapsed</span><span class="p">(</span><span class="nx">title</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">performance</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;ms&#39;</span><span class="p">);</span>
                <span class="p">});</span>
              <span class="p">}</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupEnd</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">performance</span> <span class="o">=</span> <span class="p">[];</span>
          <span class="p">}</span>
        <span class="p">},</span></pre></div></td></tr><tr id="section-211"><td class="docs"><div class="pilwrap"><a href="#section-211" class="pilcrow">&#182;</a></div><p>modified for transition to return invoke success</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">invoke</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">object</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">,</span>
            <span class="nx">maxDepth</span><span class="p">,</span>
            <span class="nx">found</span><span class="p">,</span>
            <span class="nx">response</span>
          <span class="p">;</span>
          <span class="nx">passedArguments</span> <span class="o">=</span> <span class="nx">passedArguments</span> <span class="o">||</span> <span class="nx">queryArguments</span><span class="p">;</span>
          <span class="nx">context</span>         <span class="o">=</span> <span class="nx">element</span>         <span class="o">||</span> <span class="nx">context</span><span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">object</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">query</span>    <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/[\. ]/</span><span class="p">);</span>
            <span class="nx">maxDepth</span> <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">depth</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span> <span class="nx">camelCaseValue</span> <span class="o">=</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">value</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="o">:</span> <span class="nx">query</span>
              <span class="p">;</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">});</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">found</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">found</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">;</span>
          <span class="p">}</span>

          <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">returnedValue</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">returnedValue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="p">[</span><span class="nx">returnedValue</span><span class="p">,</span> <span class="nx">response</span><span class="p">];</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">response</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="p">(</span><span class="nx">found</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
            <span class="o">?</span> <span class="nx">found</span>
            <span class="o">:</span> <span class="kc">false</span>
          <span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>
      <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
    <span class="p">})</span>
  <span class="p">;</span>
  <span class="k">return</span> <span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
    <span class="o">?</span> <span class="nx">returnedValue</span>
    <span class="o">:</span> <span class="k">this</span>
  <span class="p">;</span>
<span class="p">};</span></pre></div></td></tr><tr id="section-212"><td class="docs"><div class="pilwrap"><a href="#section-212" class="pilcrow">&#182;</a></div><p>Records if CSS transition is available</p>
</td><td class="code"><div class="highlight"><pre><span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">transition</span><span class="p">.</span><span class="nx">exists</span> <span class="o">=</span> <span class="p">{};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">transition</span><span class="p">.</span><span class="nx">settings</span> <span class="o">=</span> <span class="p">{</span></pre></div></td></tr><tr id="section-213"><td class="docs"><div class="pilwrap"><a href="#section-213" class="pilcrow">&#182;</a></div><p>module info</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">name</span>         <span class="o">:</span> <span class="s1">&#39;Transition&#39;</span><span class="p">,</span></pre></div></td></tr><tr id="section-214"><td class="docs"><div class="pilwrap"><a href="#section-214" class="pilcrow">&#182;</a></div><p>debug content outputted to console</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">debug</span>        <span class="o">:</span> <span class="kc">false</span><span class="p">,</span></pre></div></td></tr><tr id="section-215"><td class="docs"><div class="pilwrap"><a href="#section-215" class="pilcrow">&#182;</a></div><p>verbose debug output</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">verbose</span>      <span class="o">:</span> <span class="kc">true</span><span class="p">,</span></pre></div></td></tr><tr id="section-216"><td class="docs"><div class="pilwrap"><a href="#section-216" class="pilcrow">&#182;</a></div><p>performance data output</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">performance</span>  <span class="o">:</span> <span class="kc">true</span><span class="p">,</span></pre></div></td></tr><tr id="section-217"><td class="docs"><div class="pilwrap"><a href="#section-217" class="pilcrow">&#182;</a></div><p>event namespace</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">namespace</span>    <span class="o">:</span> <span class="s1">&#39;transition&#39;</span><span class="p">,</span></pre></div></td></tr><tr id="section-218"><td class="docs"><div class="pilwrap"><a href="#section-218" class="pilcrow">&#182;</a></div><p>animation complete event</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">onStart</span>      <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{},</span>
  <span class="nx">onComplete</span>   <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{},</span>
  <span class="nx">onShow</span>       <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{},</span>
  <span class="nx">onHide</span>       <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{},</span></pre></div></td></tr><tr id="section-219"><td class="docs"><div class="pilwrap"><a href="#section-219" class="pilcrow">&#182;</a></div><p>whether timeout should be used to ensure callback fires in cases animationend does not</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">useFailSafe</span>  <span class="o">:</span> <span class="kc">false</span><span class="p">,</span></pre></div></td></tr><tr id="section-220"><td class="docs"><div class="pilwrap"><a href="#section-220" class="pilcrow">&#182;</a></div><p>whether EXACT animation can occur twice in a row</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">allowRepeats</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span></pre></div></td></tr><tr id="section-221"><td class="docs"><div class="pilwrap"><a href="#section-221" class="pilcrow">&#182;</a></div><p>Override final display type on visible</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">displayType</span>  <span class="o">:</span> <span class="kc">false</span><span class="p">,</span></pre></div></td></tr><tr id="section-222"><td class="docs"><div class="pilwrap"><a href="#section-222" class="pilcrow">&#182;</a></div><p>animation duration</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">animation</span>    <span class="o">:</span> <span class="s1">&#39;fade&#39;</span><span class="p">,</span>
  <span class="nx">duration</span>     <span class="o">:</span> <span class="s1">&#39;500ms&#39;</span><span class="p">,</span></pre></div></td></tr><tr id="section-223"><td class="docs"><div class="pilwrap"><a href="#section-223" class="pilcrow">&#182;</a></div><p>new animations will occur after previous ones</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">queue</span>       <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="nx">metadata</span> <span class="o">:</span> <span class="p">{</span>
    <span class="nx">displayType</span><span class="o">:</span> <span class="s1">&#39;display&#39;</span>
  <span class="p">},</span>

  <span class="nx">className</span>   <span class="o">:</span> <span class="p">{</span>
    <span class="nx">animating</span>  <span class="o">:</span> <span class="s1">&#39;animating&#39;</span><span class="p">,</span>
    <span class="nx">disabled</span>   <span class="o">:</span> <span class="s1">&#39;disabled&#39;</span><span class="p">,</span>
    <span class="nx">hidden</span>     <span class="o">:</span> <span class="s1">&#39;hidden&#39;</span><span class="p">,</span>
    <span class="nx">inward</span>     <span class="o">:</span> <span class="s1">&#39;in&#39;</span><span class="p">,</span>
    <span class="nx">loading</span>    <span class="o">:</span> <span class="s1">&#39;loading&#39;</span><span class="p">,</span>
    <span class="nx">looping</span>    <span class="o">:</span> <span class="s1">&#39;looping&#39;</span><span class="p">,</span>
    <span class="nx">outward</span>    <span class="o">:</span> <span class="s1">&#39;out&#39;</span><span class="p">,</span>
    <span class="nx">transition</span> <span class="o">:</span> <span class="s1">&#39;transition&#39;</span><span class="p">,</span>
    <span class="nx">visible</span>    <span class="o">:</span> <span class="s1">&#39;visible&#39;</span>
  <span class="p">},</span></pre></div></td></tr><tr id="section-224"><td class="docs"><div class="pilwrap"><a href="#section-224" class="pilcrow">&#182;</a></div><p>possible errors</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">error</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">noAnimation</span> <span class="o">:</span> <span class="s1">&#39;There is no css animation matching the one you specified.&#39;</span><span class="p">,</span>
    <span class="nx">repeated</span>    <span class="o">:</span> <span class="s1">&#39;That animation is already occurring, cancelling repeated animation&#39;</span><span class="p">,</span>
    <span class="nx">method</span>      <span class="o">:</span> <span class="s1">&#39;The method you called is not defined&#39;</span><span class="p">,</span>
    <span class="nx">support</span>     <span class="o">:</span> <span class="s1">&#39;This browser does not support CSS animations&#39;</span>
  <span class="p">}</span>

<span class="p">};</span>


<span class="p">})(</span> <span class="nx">jQuery</span><span class="p">,</span> <span class="nb">window</span> <span class="p">,</span> <span class="nb">document</span> <span class="p">);</span></pre></div></td></tr><tr id="section-225"><td class="docs"><div class="pilwrap"><a href="#section-225" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><h1>Semantic - Video</h1>

<p><a href='http://github.com/semantic-org/semantic-ui/'>http://github.com/semantic-org/semantic-ui/</a></p></div><div class="body"><p>Copyright 2014 Contributors<br />Released under the MIT license<br /><a href='http://opensource.org/licenses/MIT'>http://opensource.org/licenses/MIT</a></p></div></div>
</td><td class="code"><div class="highlight"><pre><span class="p">;(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">$</span><span class="p">,</span> <span class="nb">window</span><span class="p">,</span> <span class="nb">document</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>

<span class="s2">&quot;use strict&quot;</span><span class="p">;</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">video</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span> <span class="p">{</span>

  <span class="kd">var</span>
    <span class="nx">$allModules</span>     <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>

    <span class="nx">moduleSelector</span>  <span class="o">=</span> <span class="nx">$allModules</span><span class="p">.</span><span class="nx">selector</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>

    <span class="nx">time</span>            <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">(),</span>
    <span class="nx">performance</span>     <span class="o">=</span> <span class="p">[],</span>

    <span class="nx">query</span>           <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="nx">methodInvoked</span>   <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">),</span>
    <span class="nx">queryArguments</span>  <span class="o">=</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>

    <span class="nx">requestAnimationFrame</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">requestAnimationFrame</span>
      <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">mozRequestAnimationFrame</span>
      <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">webkitRequestAnimationFrame</span>
      <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">msRequestAnimationFrame</span>
      <span class="o">||</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="p">},</span>

    <span class="nx">returnedValue</span>
  <span class="p">;</span>

  <span class="nx">$allModules</span>
    <span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span>
        <span class="nx">settings</span>        <span class="o">=</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span> <span class="p">)</span>
          <span class="o">?</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">video</span><span class="p">.</span><span class="nx">settings</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">)</span>
          <span class="o">:</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">video</span><span class="p">.</span><span class="nx">settings</span><span class="p">),</span>

        <span class="nx">selector</span>        <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">selector</span><span class="p">,</span>
        <span class="nx">className</span>       <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">className</span><span class="p">,</span>
        <span class="nx">error</span>           <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span>
        <span class="nx">metadata</span>        <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">metadata</span><span class="p">,</span>
        <span class="nx">namespace</span>       <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">namespace</span><span class="p">,</span>
        <span class="nx">templates</span>       <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">templates</span><span class="p">,</span>

        <span class="nx">eventNamespace</span>  <span class="o">=</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">,</span>
        <span class="nx">moduleNamespace</span> <span class="o">=</span> <span class="s1">&#39;module-&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">,</span>

        <span class="nx">$window</span>         <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">),</span>
        <span class="nx">$module</span>         <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
        <span class="nx">$placeholder</span>    <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">placeholder</span><span class="p">),</span>
        <span class="nx">$playButton</span>     <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">playButton</span><span class="p">),</span>
        <span class="nx">$embed</span>          <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">embed</span><span class="p">),</span>

        <span class="nx">element</span>         <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
        <span class="nx">instance</span>        <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">),</span>
        <span class="nx">module</span>
      <span class="p">;</span>

      <span class="nx">module</span> <span class="o">=</span> <span class="p">{</span>

        <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Initializing video&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span>
          <span class="nx">$placeholder</span>
            <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">play</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$playButton</span>
            <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">play</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">instantiate</span><span class="p">();</span>
        <span class="p">},</span>

        <span class="nx">instantiate</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Storing instance of module&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">);</span>
          <span class="nx">instance</span> <span class="o">=</span> <span class="nx">module</span><span class="p">;</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">create</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">image</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">image</span><span class="p">),</span>
            <span class="nx">html</span> <span class="o">=</span> <span class="nx">templates</span><span class="p">.</span><span class="nx">video</span><span class="p">(</span><span class="nx">image</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$module</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">html</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">refresh</span><span class="p">();</span>
          <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">image</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">play</span><span class="p">();</span>
          <span class="p">}</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Creating html for video element&#39;</span><span class="p">,</span> <span class="nx">html</span><span class="p">);</span>
        <span class="p">},</span>

        <span class="nx">destroy</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Destroying previous instance of video&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">removeData</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">eventNamespace</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$placeholder</span>
            <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">eventNamespace</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$playButton</span>
            <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">eventNamespace</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">refresh</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Refreshing selector cache&#39;</span><span class="p">);</span>
          <span class="nx">$placeholder</span>    <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">placeholder</span><span class="p">);</span>
          <span class="nx">$playButton</span>     <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">playButton</span><span class="p">);</span>
          <span class="nx">$embed</span>          <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">embed</span><span class="p">);</span>
        <span class="p">},</span></pre></div></td></tr><tr id="section-226"><td class="docs"><div class="pilwrap"><a href="#section-226" class="pilcrow">&#182;</a></div><p>sets new video</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">change</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">source</span><span class="p">,</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Changing video to &#39;</span><span class="p">,</span> <span class="nx">source</span><span class="p">,</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">url</span><span class="p">);</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">source</span><span class="p">,</span> <span class="nx">source</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="nx">id</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span> <span class="nx">url</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">settings</span><span class="p">.</span><span class="nx">onChange</span><span class="p">();</span>
        <span class="p">},</span></pre></div></td></tr><tr id="section-227"><td class="docs"><div class="pilwrap"><a href="#section-227" class="pilcrow">&#182;</a></div><p>clears video embed</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">reset</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Clearing video embed and showing placeholder&#39;</span><span class="p">);</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$embed</span>
            <span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$placeholder</span>
            <span class="p">.</span><span class="nx">show</span><span class="p">()</span>
          <span class="p">;</span>
          <span class="nx">settings</span><span class="p">.</span><span class="nx">onReset</span><span class="p">();</span>
        <span class="p">},</span></pre></div></td></tr><tr id="section-228"><td class="docs"><div class="pilwrap"><a href="#section-228" class="pilcrow">&#182;</a></div><p>plays current video</p>
</td><td class="code"><div class="highlight"><pre>        <span class="nx">play</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Playing video&#39;</span><span class="p">);</span>
          <span class="kd">var</span>
            <span class="nx">source</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">source</span><span class="p">)</span> <span class="o">||</span> <span class="kc">false</span><span class="p">,</span>
            <span class="nx">url</span>    <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">url</span><span class="p">)</span>    <span class="o">||</span> <span class="kc">false</span><span class="p">,</span>
            <span class="nx">id</span>     <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span>     <span class="o">||</span> <span class="kc">false</span>
          <span class="p">;</span>
          <span class="nx">$embed</span>
            <span class="p">.</span><span class="nx">html</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">generate</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">source</span><span class="p">,</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">url</span><span class="p">)</span> <span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">settings</span><span class="p">.</span><span class="nx">onPlay</span><span class="p">();</span>
        <span class="p">},</span>

        <span class="nx">get</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">source</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">url</span> <span class="o">!==</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">url</span><span class="p">.</span><span class="nx">search</span><span class="p">(</span><span class="s1">&#39;youtube.com&#39;</span><span class="p">)</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="s1">&#39;youtube&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">url</span><span class="p">.</span><span class="nx">search</span><span class="p">(</span><span class="s1">&#39;vimeo.com&#39;</span><span class="p">)</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="s1">&#39;vimeo&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">id</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">regExp</span><span class="p">.</span><span class="nx">youtube</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">url</span><span class="p">))</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">url</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">regExp</span><span class="p">.</span><span class="nx">youtube</span><span class="p">)[</span><span class="mi">1</span><span class="p">];</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">regExp</span><span class="p">.</span><span class="nx">vimeo</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">url</span><span class="p">))</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">url</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">regExp</span><span class="p">.</span><span class="nx">vimeo</span><span class="p">)[</span><span class="mi">2</span><span class="p">];</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">generate</span><span class="o">:</span> <span class="p">{</span></pre></div></td></tr><tr id="section-229"><td class="docs"><div class="pilwrap"><a href="#section-229" class="pilcrow">&#182;</a></div><p>generates iframe html</p>
</td><td class="code"><div class="highlight"><pre>          <span class="nx">html</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">source</span><span class="p">,</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Generating embed html&#39;</span><span class="p">);</span>
            <span class="kd">var</span>
              <span class="nx">html</span>
            <span class="p">;</span></pre></div></td></tr><tr id="section-230"><td class="docs"><div class="pilwrap"><a href="#section-230" class="pilcrow">&#182;</a></div><p>allow override of settings</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">source</span> <span class="o">=</span> <span class="nx">source</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">source</span><span class="p">;</span>
            <span class="nx">id</span>     <span class="o">=</span> <span class="nx">id</span>     <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
            <span class="k">if</span><span class="p">((</span><span class="nx">source</span> <span class="o">&amp;&amp;</span> <span class="nx">id</span><span class="p">)</span> <span class="o">||</span> <span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">source</span> <span class="o">||</span> <span class="o">!</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">source</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">source</span><span class="p">(</span><span class="nx">url</span><span class="p">);</span>
                <span class="nx">id</span>     <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">id</span><span class="p">(</span><span class="nx">url</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">source</span> <span class="o">==</span> <span class="s1">&#39;vimeo&#39;</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">html</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
                  <span class="o">+</span> <span class="s1">&#39;&lt;iframe src=&quot;http://player.vimeo.com/video/&#39;</span> <span class="o">+</span> <span class="nx">id</span> <span class="o">+</span> <span class="s1">&#39;?=&#39;</span> <span class="o">+</span> <span class="nx">module</span><span class="p">.</span><span class="nx">generate</span><span class="p">.</span><span class="nx">url</span><span class="p">(</span><span class="nx">source</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span>
                  <span class="o">+</span> <span class="s1">&#39; width=&quot;100%&quot; height=&quot;100%&quot;&#39;</span>
                  <span class="o">+</span> <span class="s1">&#39; frameborder=&quot;0&quot; webkitAllowFullScreen mozallowfullscreen allowFullScreen&gt;&lt;/iframe&gt;&#39;</span>
                <span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">source</span> <span class="o">==</span> <span class="s1">&#39;youtube&#39;</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">html</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
                  <span class="o">+</span> <span class="s1">&#39;&lt;iframe src=&quot;http://www.youtube.com/embed/&#39;</span> <span class="o">+</span> <span class="nx">id</span> <span class="o">+</span> <span class="s1">&#39;?=&#39;</span> <span class="o">+</span> <span class="nx">module</span><span class="p">.</span><span class="nx">generate</span><span class="p">.</span><span class="nx">url</span><span class="p">(</span><span class="nx">source</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span>
                  <span class="o">+</span> <span class="s1">&#39; width=&quot;100%&quot; height=&quot;100%&quot;&#39;</span>
                  <span class="o">+</span> <span class="s1">&#39; frameborder=&quot;0&quot; webkitAllowFullScreen mozallowfullscreen allowFullScreen&gt;&lt;/iframe&gt;&#39;</span>
                <span class="p">;</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">noVideo</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">html</span><span class="p">;</span>
          <span class="p">},</span></pre></div></td></tr><tr id="section-231"><td class="docs"><div class="pilwrap"><a href="#section-231" class="pilcrow">&#182;</a></div><p>generate url parameters</p>
</td><td class="code"><div class="highlight"><pre>          <span class="nx">url</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">source</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">api</span>      <span class="o">=</span> <span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">api</span><span class="p">)</span>
                <span class="o">?</span> <span class="mi">1</span>
                <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
              <span class="nx">autoplay</span> <span class="o">=</span> <span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">autoplay</span> <span class="o">===</span> <span class="s1">&#39;auto&#39;</span><span class="p">)</span>
                <span class="o">?</span> <span class="p">(</span><span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;image&#39;</span><span class="p">)</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
                <span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">autoplay</span><span class="p">,</span>
              <span class="nx">hd</span>       <span class="o">=</span> <span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">hd</span><span class="p">)</span>
                <span class="o">?</span> <span class="mi">1</span>
                <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
              <span class="nx">showUI</span>   <span class="o">=</span> <span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">showUI</span><span class="p">)</span>
                <span class="o">?</span> <span class="mi">1</span>
                <span class="o">:</span> <span class="mi">0</span><span class="p">,</span></pre></div></td></tr><tr id="section-232"><td class="docs"><div class="pilwrap"><a href="#section-232" class="pilcrow">&#182;</a></div><p>opposite used for some params</p>
</td><td class="code"><div class="highlight"><pre>              <span class="nx">hideUI</span>   <span class="o">=</span> <span class="o">!</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">showUI</span><span class="p">)</span>
                <span class="o">?</span> <span class="mi">1</span>
                <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
              <span class="nx">url</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">source</span> <span class="o">==</span> <span class="s1">&#39;vimeo&#39;</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">url</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
                <span class="o">+</span>      <span class="s1">&#39;api=&#39;</span>      <span class="o">+</span> <span class="nx">api</span>
                <span class="o">+</span> <span class="s1">&#39;&amp;amp;title=&#39;</span>    <span class="o">+</span> <span class="nx">showUI</span>
                <span class="o">+</span> <span class="s1">&#39;&amp;amp;byline=&#39;</span>   <span class="o">+</span> <span class="nx">showUI</span>
                <span class="o">+</span> <span class="s1">&#39;&amp;amp;portrait=&#39;</span> <span class="o">+</span> <span class="nx">showUI</span>
                <span class="o">+</span> <span class="s1">&#39;&amp;amp;autoplay=&#39;</span> <span class="o">+</span> <span class="nx">autoplay</span>
              <span class="p">;</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">color</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">url</span> <span class="o">+=</span> <span class="s1">&#39;&amp;amp;color=&#39;</span> <span class="o">+</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">color</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">source</span> <span class="o">==</span> <span class="s1">&#39;ustream&#39;</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">url</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
                <span class="o">+</span> <span class="s1">&#39;autoplay=&#39;</span> <span class="o">+</span> <span class="nx">autoplay</span>
              <span class="p">;</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">color</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">url</span> <span class="o">+=</span> <span class="s1">&#39;&amp;amp;color=&#39;</span> <span class="o">+</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">color</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">source</span> <span class="o">==</span> <span class="s1">&#39;youtube&#39;</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">url</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
                <span class="o">+</span> <span class="s1">&#39;enablejsapi=&#39;</span>      <span class="o">+</span> <span class="nx">api</span>
                <span class="o">+</span> <span class="s1">&#39;&amp;amp;autoplay=&#39;</span>    <span class="o">+</span> <span class="nx">autoplay</span>
                <span class="o">+</span> <span class="s1">&#39;&amp;amp;autohide=&#39;</span>    <span class="o">+</span> <span class="nx">hideUI</span>
                <span class="o">+</span> <span class="s1">&#39;&amp;amp;hq=&#39;</span>          <span class="o">+</span> <span class="nx">hd</span>
                <span class="o">+</span> <span class="s1">&#39;&amp;amp;modestbranding=1&#39;</span>
              <span class="p">;</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">color</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">url</span> <span class="o">+=</span> <span class="s1">&#39;&amp;amp;color=&#39;</span> <span class="o">+</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">color</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">url</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">setting</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Changing setting&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">settings</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">internal</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">module</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">debug</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">verbose</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">&amp;&amp;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">performance</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">log</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">currentTime</span><span class="p">,</span>
              <span class="nx">executionTime</span><span class="p">,</span>
              <span class="nx">previousTime</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">currentTime</span>   <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>
              <span class="nx">previousTime</span>  <span class="o">=</span> <span class="nx">time</span> <span class="o">||</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">executionTime</span> <span class="o">=</span> <span class="nx">currentTime</span> <span class="o">-</span> <span class="nx">previousTime</span><span class="p">;</span>
              <span class="nx">time</span>          <span class="o">=</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">performance</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
                <span class="s1">&#39;Name&#39;</span>           <span class="o">:</span> <span class="nx">message</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="s1">&#39;Arguments&#39;</span>      <span class="o">:</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Element&#39;</span>        <span class="o">:</span> <span class="nx">element</span><span class="p">,</span>
                <span class="s1">&#39;Execution Time&#39;</span> <span class="o">:</span> <span class="nx">executionTime</span>
              <span class="p">});</span>
            <span class="p">}</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">display</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">title</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span>
              <span class="nx">totalTime</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="p">;</span>
            <span class="nx">time</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">totalTime</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">];</span>
            <span class="p">});</span>
            <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">totalTime</span> <span class="o">+</span> <span class="s1">&#39;ms&#39;</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">moduleSelector</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; \&#39;&#39;</span> <span class="o">+</span> <span class="nx">moduleSelector</span> <span class="o">+</span> <span class="s1">&#39;\&#39;&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">$allModules</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="s1">&#39;(&#39;</span> <span class="o">+</span> <span class="nx">$allModules</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span> <span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">group</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">console</span><span class="p">.</span><span class="nx">table</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">performance</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupCollapsed</span><span class="p">(</span><span class="nx">title</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">performance</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;ms&#39;</span><span class="p">);</span>
                <span class="p">});</span>
              <span class="p">}</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupEnd</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">performance</span> <span class="o">=</span> <span class="p">[];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">invoke</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">object</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">,</span>
            <span class="nx">maxDepth</span><span class="p">,</span>
            <span class="nx">found</span><span class="p">,</span>
            <span class="nx">response</span>
          <span class="p">;</span>
          <span class="nx">passedArguments</span> <span class="o">=</span> <span class="nx">passedArguments</span> <span class="o">||</span> <span class="nx">queryArguments</span><span class="p">;</span>
          <span class="nx">context</span>         <span class="o">=</span> <span class="nx">element</span>         <span class="o">||</span> <span class="nx">context</span><span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">object</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">query</span>    <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/[\. ]/</span><span class="p">);</span>
            <span class="nx">maxDepth</span> <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">depth</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span> <span class="nx">camelCaseValue</span> <span class="o">=</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">value</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="o">:</span> <span class="nx">query</span>
              <span class="p">;</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">});</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">found</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">found</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">returnedValue</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">returnedValue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="p">[</span><span class="nx">returnedValue</span><span class="p">,</span> <span class="nx">response</span><span class="p">];</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">response</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="nx">found</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>

      <span class="k">if</span><span class="p">(</span><span class="nx">methodInvoked</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="nx">query</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">})</span>
  <span class="p">;</span>
  <span class="k">return</span> <span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
    <span class="o">?</span> <span class="nx">returnedValue</span>
    <span class="o">:</span> <span class="k">this</span>
  <span class="p">;</span>
<span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">video</span><span class="p">.</span><span class="nx">settings</span> <span class="o">=</span> <span class="p">{</span>

  <span class="nx">name</span>        <span class="o">:</span> <span class="s1">&#39;Video&#39;</span><span class="p">,</span>
  <span class="nx">namespace</span>   <span class="o">:</span> <span class="s1">&#39;video&#39;</span><span class="p">,</span>

  <span class="nx">debug</span>       <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">verbose</span>     <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">performance</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="nx">metadata</span>    <span class="o">:</span> <span class="p">{</span>
    <span class="nx">id</span>     <span class="o">:</span> <span class="s1">&#39;id&#39;</span><span class="p">,</span>
    <span class="nx">image</span>  <span class="o">:</span> <span class="s1">&#39;image&#39;</span><span class="p">,</span>
    <span class="nx">source</span> <span class="o">:</span> <span class="s1">&#39;source&#39;</span><span class="p">,</span>
    <span class="nx">url</span>    <span class="o">:</span> <span class="s1">&#39;url&#39;</span>
  <span class="p">},</span>

  <span class="nx">source</span>      <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">url</span>         <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">id</span>          <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>

  <span class="nx">aspectRatio</span> <span class="o">:</span> <span class="p">(</span><span class="mi">16</span><span class="o">/</span><span class="mi">9</span><span class="p">),</span>

  <span class="nx">onPlay</span>   <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>
  <span class="nx">onReset</span>  <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>
  <span class="nx">onChange</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span></pre></div></td></tr><tr id="section-233"><td class="docs"><div class="pilwrap"><a href="#section-233" class="pilcrow">&#182;</a></div><p>callbacks not coded yet (needs to use jsapi)</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">onPause</span>  <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{},</span>
  <span class="nx">onStop</span>   <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{},</span>

  <span class="nx">width</span>    <span class="o">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span>
  <span class="nx">height</span>   <span class="o">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span>

  <span class="nx">autoplay</span> <span class="o">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span>
  <span class="nx">color</span>    <span class="o">:</span> <span class="s1">&#39;#442359&#39;</span><span class="p">,</span>
  <span class="nx">hd</span>       <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">showUI</span>   <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">api</span>      <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="nx">regExp</span> <span class="o">:</span> <span class="p">{</span>
    <span class="nx">youtube</span> <span class="o">:</span> <span class="sr">/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&amp;v=))((\w|-){11})(?:\S+)?$/</span><span class="p">,</span>
    <span class="nx">vimeo</span>   <span class="o">:</span> <span class="sr">/http:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/</span>
  <span class="p">},</span>

  <span class="nx">error</span>      <span class="o">:</span> <span class="p">{</span>
    <span class="nx">noVideo</span>     <span class="o">:</span> <span class="s1">&#39;No video specified&#39;</span><span class="p">,</span>
    <span class="nx">method</span>      <span class="o">:</span> <span class="s1">&#39;The method you called is not defined&#39;</span>
  <span class="p">},</span>

  <span class="nx">className</span>   <span class="o">:</span> <span class="p">{</span>
    <span class="nx">active</span>      <span class="o">:</span> <span class="s1">&#39;active&#39;</span>
  <span class="p">},</span>

  <span class="nx">selector</span>    <span class="o">:</span> <span class="p">{</span>
    <span class="nx">embed</span>       <span class="o">:</span> <span class="s1">&#39;.embed&#39;</span><span class="p">,</span>
    <span class="nx">placeholder</span> <span class="o">:</span> <span class="s1">&#39;.placeholder&#39;</span><span class="p">,</span>
    <span class="nx">playButton</span>  <span class="o">:</span> <span class="s1">&#39;.play&#39;</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">video</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">templates</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">video</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">image</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span>
      <span class="nx">html</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">image</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">html</span> <span class="o">+=</span> <span class="s1">&#39;&#39;</span>
        <span class="o">+</span> <span class="s1">&#39;&lt;i class=&quot;video play icon&quot;&gt;&lt;/i&gt;&#39;</span>
        <span class="o">+</span> <span class="s1">&#39;&lt;img class=&quot;placeholder&quot; src=&quot;&#39;</span> <span class="o">+</span> <span class="nx">image</span> <span class="o">+</span> <span class="s1">&#39;&quot;&gt;&#39;</span>
      <span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;div class=&quot;embed&quot;&gt;&lt;/div&gt;&#39;</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">html</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>


<span class="p">})(</span> <span class="nx">jQuery</span><span class="p">,</span> <span class="nb">window</span> <span class="p">,</span> <span class="nb">document</span> <span class="p">);</span></pre></div></td></tr><tr id="section-234"><td class="docs"><div class="pilwrap"><a href="#section-234" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><h1>Semantic - Visibility</h1>

<p><a href='http://github.com/semantic-org/semantic-ui/'>http://github.com/semantic-org/semantic-ui/</a></p></div><div class="body"><p>Copyright 2014 Contributor<br />Released under the MIT license<br /><a href='http://opensource.org/licenses/MIT'>http://opensource.org/licenses/MIT</a></p></div></div>
</td><td class="code"><div class="highlight"><pre><span class="p">;(</span><span class="kd">function</span> <span class="p">(</span> <span class="nx">$</span><span class="p">,</span> <span class="nb">window</span><span class="p">,</span> <span class="nb">document</span><span class="p">,</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">visibility</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span>
    <span class="nx">$allModules</span>    <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
    <span class="nx">moduleSelector</span> <span class="o">=</span> <span class="nx">$allModules</span><span class="p">.</span><span class="nx">selector</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>

    <span class="nx">time</span>           <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">(),</span>
    <span class="nx">performance</span>    <span class="o">=</span> <span class="p">[],</span>

    <span class="nx">query</span>          <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="nx">methodInvoked</span>  <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">),</span>
    <span class="nx">queryArguments</span> <span class="o">=</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="nx">returnedValue</span>
  <span class="p">;</span>

  <span class="nx">$allModules</span>
    <span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span>
        <span class="nx">settings</span>        <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">visibility</span><span class="p">.</span><span class="nx">settings</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">),</span>

        <span class="nx">className</span>       <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">className</span><span class="p">,</span>
        <span class="nx">namespace</span>       <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">namespace</span><span class="p">,</span>
        <span class="nx">error</span>           <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span>

        <span class="nx">eventNamespace</span>  <span class="o">=</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">,</span>
        <span class="nx">moduleNamespace</span> <span class="o">=</span> <span class="s1">&#39;module-&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">,</span>

        <span class="nx">$window</span>         <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">),</span>
        <span class="nx">$module</span>         <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
        <span class="nx">$context</span>        <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">context</span><span class="p">),</span>
        <span class="nx">$container</span>      <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">offsetParent</span><span class="p">(),</span>

        <span class="nx">selector</span>        <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">selector</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="nx">instance</span>        <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">),</span>

        <span class="nx">requestAnimationFrame</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">requestAnimationFrame</span>
          <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">mozRequestAnimationFrame</span>
          <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">webkitRequestAnimationFrame</span>
          <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">msRequestAnimationFrame</span>
          <span class="o">||</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="p">},</span>

        <span class="nx">element</span>         <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
        <span class="nx">module</span>
      <span class="p">;</span>

      <span class="nx">module</span>      <span class="o">=</span> <span class="p">{</span>

        <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Initializing visibility&#39;</span><span class="p">,</span> <span class="nx">settings</span><span class="p">);</span>

          <span class="nx">module</span><span class="p">.</span><span class="nx">setup</span><span class="p">.</span><span class="nx">cache</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">save</span><span class="p">.</span><span class="nx">position</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">bindEvents</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">instantiate</span><span class="p">();</span>

          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s1">&#39;image&#39;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">setup</span><span class="p">.</span><span class="nx">image</span><span class="p">();</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s1">&#39;fixed&#39;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">setup</span><span class="p">.</span><span class="nx">fixed</span><span class="p">();</span>
          <span class="p">}</span>

          <span class="nx">requestAnimationFrame</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">checkVisibility</span><span class="p">);</span>
        <span class="p">},</span>

        <span class="nx">instantiate</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Storing instance of module&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">);</span>
          <span class="nx">instance</span> <span class="o">=</span> <span class="nx">module</span><span class="p">;</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">destroy</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Destroying previous module&#39;</span><span class="p">);</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="nx">eventNamespace</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">removeData</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">bindEvents</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Binding visibility events to scroll and resize&#39;</span><span class="p">);</span>
          <span class="nx">$window</span>
            <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;resize&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">refresh</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="nx">$context</span>
            <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;scroll&#39;</span> <span class="o">+</span> <span class="nx">eventNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">scroll</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">event</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">refresh</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">requestAnimationFrame</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">refresh</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">scroll</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Scroll position changed&#39;</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">throttle</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">checkVisibility</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">throttle</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">requestAnimationFrame</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">checkVisibility</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">precache</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">images</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">images</span> <span class="k">instanceof</span> <span class="nb">Array</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">images</span> <span class="o">=</span> <span class="p">[</span><span class="nx">images</span><span class="p">];</span>
          <span class="p">}</span>
          <span class="kd">var</span>
            <span class="nx">imagesLength</span>  <span class="o">=</span> <span class="nx">images</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
            <span class="nx">loadedCounter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nx">cache</span>         <span class="o">=</span> <span class="p">[],</span>
            <span class="nx">cacheImage</span>    <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;img&#39;</span><span class="p">),</span>
            <span class="nx">handleLoad</span>    <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
              <span class="nx">loadedCounter</span><span class="o">++</span><span class="p">;</span>
              <span class="k">if</span> <span class="p">(</span><span class="nx">loadedCounter</span> <span class="o">&gt;=</span> <span class="nx">images</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">callback</span><span class="p">))</span> <span class="p">{</span>
                  <span class="nx">callback</span><span class="p">();</span>
                <span class="p">}</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">;</span>
          <span class="k">while</span> <span class="p">(</span><span class="nx">imagesLength</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">cacheImage</span>         <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;img&#39;</span><span class="p">);</span>
            <span class="nx">cacheImage</span><span class="p">.</span><span class="nx">onload</span>  <span class="o">=</span> <span class="nx">handleLoad</span><span class="p">;</span>
            <span class="nx">cacheImage</span><span class="p">.</span><span class="nx">onerror</span> <span class="o">=</span> <span class="nx">handleLoad</span><span class="p">;</span>
            <span class="nx">cacheImage</span><span class="p">.</span><span class="nx">src</span>     <span class="o">=</span> <span class="nx">images</span><span class="p">[</span><span class="nx">imagesLength</span><span class="p">];</span>
            <span class="nx">cache</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">cacheImage</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">setup</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">cache</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span> <span class="o">=</span> <span class="p">{</span>
              <span class="nx">occurred</span> <span class="o">:</span> <span class="p">{},</span>
              <span class="nx">screen</span>   <span class="o">:</span> <span class="p">{},</span>
              <span class="nx">element</span>  <span class="o">:</span> <span class="p">{},</span>
            <span class="p">};</span>
          <span class="p">},</span>
          <span class="nx">image</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">src</span> <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;src&#39;</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">src</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Lazy loading image&#39;</span><span class="p">,</span> <span class="nx">src</span><span class="p">);</span></pre></div></td></tr><tr id="section-235"><td class="docs"><div class="pilwrap"><a href="#section-235" class="pilcrow">&#182;</a></div><p>show when top visible</p>
</td><td class="code"><div class="highlight"><pre>              <span class="nx">module</span><span class="p">.</span><span class="nx">topVisible</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">precache</span><span class="p">(</span><span class="nx">src</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                  <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">image</span><span class="p">(</span><span class="nx">src</span><span class="p">);</span>
                  <span class="nx">settings</span><span class="p">.</span><span class="nx">onTopVisible</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                <span class="p">});</span>
              <span class="p">});</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">fixed</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Setting up fixed on element pass&#39;</span><span class="p">);</span>
            <span class="nx">$module</span>
              <span class="p">.</span><span class="nx">visibility</span><span class="p">({</span>
                <span class="nx">once</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                <span class="nx">continuous</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                <span class="nx">onTopPassed</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                  <span class="nx">$module</span>
                    <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">fixed</span><span class="p">)</span>
                    <span class="p">.</span><span class="nx">css</span><span class="p">({</span>
                      <span class="nx">position</span><span class="o">:</span> <span class="s1">&#39;fixed&#39;</span><span class="p">,</span>
                      <span class="nx">top</span><span class="o">:</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">offset</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span>
                    <span class="p">})</span>
                  <span class="p">;</span>
                  <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">animation</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">transition</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">$module</span><span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">);</span>
                  <span class="p">}</span>
                <span class="p">},</span>
                <span class="nx">onTopPassedReverse</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                  <span class="nx">$module</span>
                    <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">.</span><span class="nx">fixed</span><span class="p">)</span>
                    <span class="p">.</span><span class="nx">css</span><span class="p">({</span>
                      <span class="nx">position</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                      <span class="nx">top</span><span class="o">:</span> <span class="s1">&#39;&#39;</span>
                    <span class="p">})</span>
                  <span class="p">;</span>
                <span class="p">}</span>
              <span class="p">})</span>
            <span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">set</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">image</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">src</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">offScreen</span> <span class="o">=</span> <span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">screen</span><span class="p">.</span><span class="nx">bottom</span> <span class="o">&lt;</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">top</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="nx">$module</span>
              <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;src&#39;</span><span class="p">,</span> <span class="nx">src</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">offScreen</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Image outside browser, avoiding animation&#39;</span><span class="p">)</span>
              <span class="nx">$module</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">transition</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">$module</span><span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">transition</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">$module</span><span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">duration</span><span class="p">);</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">refresh</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Refreshing constants (element width/height)&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">save</span><span class="p">.</span><span class="nx">position</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">checkVisibility</span><span class="p">();</span>
          <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onRefresh</span><span class="p">,</span> <span class="nx">element</span><span class="p">)();</span>
        <span class="p">},</span>

        <span class="nx">reset</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Reseting all cached values&#39;</span><span class="p">);</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">screen</span> <span class="o">=</span> <span class="p">{};</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">element</span> <span class="o">=</span> <span class="p">{};</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">checkVisibility</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Checking visibility of element&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">element</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">save</span><span class="p">.</span><span class="nx">scroll</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">save</span><span class="p">.</span><span class="nx">direction</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">save</span><span class="p">.</span><span class="nx">screenCalculations</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">save</span><span class="p">.</span><span class="nx">elementCalculations</span><span class="p">();</span></pre></div></td></tr><tr id="section-236"><td class="docs"><div class="pilwrap"><a href="#section-236" class="pilcrow">&#182;</a></div><p>percentage</p>
</td><td class="code"><div class="highlight"><pre>          <span class="nx">module</span><span class="p">.</span><span class="nx">passed</span><span class="p">();</span></pre></div></td></tr><tr id="section-237"><td class="docs"><div class="pilwrap"><a href="#section-237" class="pilcrow">&#182;</a></div><p>reverse (must be first)</p>
</td><td class="code"><div class="highlight"><pre>          <span class="nx">module</span><span class="p">.</span><span class="nx">passingReverse</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">topVisibleReverse</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">bottomVisibleReverse</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">topPassedReverse</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">bottomPassedReverse</span><span class="p">();</span></pre></div></td></tr><tr id="section-238"><td class="docs"><div class="pilwrap"><a href="#section-238" class="pilcrow">&#182;</a></div><p>one time</p>
</td><td class="code"><div class="highlight"><pre>          <span class="nx">module</span><span class="p">.</span><span class="nx">passing</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">topVisible</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">bottomVisible</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">topPassed</span><span class="p">();</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">bottomPassed</span><span class="p">();</span>
        <span class="p">},</span>

        <span class="nx">passed</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">amount</span><span class="p">,</span> <span class="nx">newCallback</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">calculations</span>   <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">elementCalculations</span><span class="p">(),</span>
            <span class="nx">amountInPixels</span>
          <span class="p">;</span></pre></div></td></tr><tr id="section-239"><td class="docs"><div class="pilwrap"><a href="#section-239" class="pilcrow">&#182;</a></div><p>assign callback</p>
</td><td class="code"><div class="highlight"><pre>          <span class="k">if</span><span class="p">(</span><span class="nx">amount</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">newCallback</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">settings</span><span class="p">.</span><span class="nx">onPassed</span><span class="p">[</span><span class="nx">amount</span><span class="p">]</span> <span class="o">=</span> <span class="nx">newCallback</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">amount</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">pixelsPassed</span><span class="p">(</span><span class="nx">amount</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nx">calculations</span><span class="p">.</span><span class="nx">pixelsPassed</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">calculations</span><span class="p">.</span><span class="nx">passing</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onPassed</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">amount</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">calculations</span><span class="p">.</span><span class="nx">bottomVisible</span> <span class="o">||</span> <span class="nx">calculations</span><span class="p">.</span><span class="nx">pixelsPassed</span> <span class="o">&gt;</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">pixelsPassed</span><span class="p">(</span><span class="nx">amount</span><span class="p">))</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">amount</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">settings</span><span class="p">.</span><span class="nx">once</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">occurred</span><span class="p">(</span><span class="nx">callback</span><span class="p">);</span>
              <span class="p">}</span>
            <span class="p">});</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">passing</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">newCallback</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">calculations</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">elementCalculations</span><span class="p">(),</span>
            <span class="nx">callback</span>     <span class="o">=</span> <span class="nx">newCallback</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">onPassing</span><span class="p">,</span>
            <span class="nx">callbackName</span> <span class="o">=</span> <span class="s1">&#39;passing&#39;</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">newCallback</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Adding callback for passing&#39;</span><span class="p">,</span> <span class="nx">newCallback</span><span class="p">);</span>
            <span class="nx">settings</span><span class="p">.</span><span class="nx">onPassing</span> <span class="o">=</span> <span class="nx">newCallback</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">calculations</span><span class="p">.</span><span class="nx">passing</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">callbackName</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">settings</span><span class="p">.</span><span class="nx">once</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">occurred</span><span class="p">(</span><span class="nx">callbackName</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">newCallback</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">calculations</span><span class="p">.</span><span class="nx">passing</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>


        <span class="nx">topVisible</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">newCallback</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">calculations</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">elementCalculations</span><span class="p">(),</span>
            <span class="nx">callback</span>     <span class="o">=</span> <span class="nx">newCallback</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">onTopVisible</span><span class="p">,</span>
            <span class="nx">callbackName</span> <span class="o">=</span> <span class="s1">&#39;topVisible&#39;</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">newCallback</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Adding callback for top visible&#39;</span><span class="p">,</span> <span class="nx">newCallback</span><span class="p">);</span>
            <span class="nx">settings</span><span class="p">.</span><span class="nx">onTopVisible</span> <span class="o">=</span> <span class="nx">newCallback</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">calculations</span><span class="p">.</span><span class="nx">topVisible</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">callbackName</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">settings</span><span class="p">.</span><span class="nx">once</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">occurred</span><span class="p">(</span><span class="nx">callbackName</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">newCallback</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">calculations</span><span class="p">.</span><span class="nx">topVisible</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">bottomVisible</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">newCallback</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">calculations</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">elementCalculations</span><span class="p">(),</span>
            <span class="nx">callback</span>     <span class="o">=</span> <span class="nx">newCallback</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">onBottomVisible</span><span class="p">,</span>
            <span class="nx">callbackName</span> <span class="o">=</span> <span class="s1">&#39;bottomVisible&#39;</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">newCallback</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Adding callback for bottom visible&#39;</span><span class="p">,</span> <span class="nx">newCallback</span><span class="p">);</span>
            <span class="nx">settings</span><span class="p">.</span><span class="nx">onBottomVisible</span> <span class="o">=</span> <span class="nx">newCallback</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">calculations</span><span class="p">.</span><span class="nx">bottomVisible</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">callbackName</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">settings</span><span class="p">.</span><span class="nx">once</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">occurred</span><span class="p">(</span><span class="nx">callbackName</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">newCallback</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">calculations</span><span class="p">.</span><span class="nx">bottomVisible</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">topPassed</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">newCallback</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">calculations</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">elementCalculations</span><span class="p">(),</span>
            <span class="nx">callback</span>     <span class="o">=</span> <span class="nx">newCallback</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">onTopPassed</span><span class="p">,</span>
            <span class="nx">callbackName</span> <span class="o">=</span> <span class="s1">&#39;topPassed&#39;</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">newCallback</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Adding callback for top passed&#39;</span><span class="p">,</span> <span class="nx">newCallback</span><span class="p">);</span>
            <span class="nx">settings</span><span class="p">.</span><span class="nx">onTopPassed</span> <span class="o">=</span> <span class="nx">newCallback</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">calculations</span><span class="p">.</span><span class="nx">topPassed</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">callbackName</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">settings</span><span class="p">.</span><span class="nx">once</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">occurred</span><span class="p">(</span><span class="nx">callbackName</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">newCallback</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">calculations</span><span class="p">.</span><span class="nx">onTopPassed</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">bottomPassed</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">newCallback</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">calculations</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">elementCalculations</span><span class="p">(),</span>
            <span class="nx">callback</span>     <span class="o">=</span> <span class="nx">newCallback</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">onBottomPassed</span><span class="p">,</span>
            <span class="nx">callbackName</span> <span class="o">=</span> <span class="s1">&#39;bottomPassed&#39;</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">newCallback</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Adding callback for bottom passed&#39;</span><span class="p">,</span> <span class="nx">newCallback</span><span class="p">);</span>
            <span class="nx">settings</span><span class="p">.</span><span class="nx">onBottomPassed</span> <span class="o">=</span> <span class="nx">newCallback</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">calculations</span><span class="p">.</span><span class="nx">bottomPassed</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">callbackName</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">settings</span><span class="p">.</span><span class="nx">once</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">occurred</span><span class="p">(</span><span class="nx">callbackName</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">newCallback</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">calculations</span><span class="p">.</span><span class="nx">bottomPassed</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">passingReverse</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">newCallback</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">calculations</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">elementCalculations</span><span class="p">(),</span>
            <span class="nx">callback</span>     <span class="o">=</span> <span class="nx">newCallback</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">onPassingReverse</span><span class="p">,</span>
            <span class="nx">callbackName</span> <span class="o">=</span> <span class="s1">&#39;passingReverse&#39;</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">newCallback</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Adding callback for passing reverse&#39;</span><span class="p">,</span> <span class="nx">newCallback</span><span class="p">);</span>
            <span class="nx">settings</span><span class="p">.</span><span class="nx">onPassingReverse</span> <span class="o">=</span> <span class="nx">newCallback</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">calculations</span><span class="p">.</span><span class="nx">passing</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">occurred</span><span class="p">(</span><span class="s1">&#39;passing&#39;</span><span class="p">))</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">callbackName</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">settings</span><span class="p">.</span><span class="nx">once</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">occurred</span><span class="p">(</span><span class="nx">callbackName</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">newCallback</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="o">!</span><span class="nx">calculations</span><span class="p">.</span><span class="nx">passing</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>


        <span class="nx">topVisibleReverse</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">newCallback</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">calculations</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">elementCalculations</span><span class="p">(),</span>
            <span class="nx">callback</span>     <span class="o">=</span> <span class="nx">newCallback</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">onTopVisibleReverse</span><span class="p">,</span>
            <span class="nx">callbackName</span> <span class="o">=</span> <span class="s1">&#39;topVisibleReverse&#39;</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">newCallback</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Adding callback for top visible reverse&#39;</span><span class="p">,</span> <span class="nx">newCallback</span><span class="p">);</span>
            <span class="nx">settings</span><span class="p">.</span><span class="nx">onTopVisibleReverse</span> <span class="o">=</span> <span class="nx">newCallback</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">calculations</span><span class="p">.</span><span class="nx">topVisible</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">occurred</span><span class="p">(</span><span class="s1">&#39;topVisible&#39;</span><span class="p">))</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">callbackName</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">settings</span><span class="p">.</span><span class="nx">once</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">occurred</span><span class="p">(</span><span class="nx">callbackName</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">newCallback</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="o">!</span><span class="nx">calculations</span><span class="p">.</span><span class="nx">topVisible</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">bottomVisibleReverse</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">newCallback</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">calculations</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">elementCalculations</span><span class="p">(),</span>
            <span class="nx">callback</span>     <span class="o">=</span> <span class="nx">newCallback</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">onBottomVisibleReverse</span><span class="p">,</span>
            <span class="nx">callbackName</span> <span class="o">=</span> <span class="s1">&#39;bottomVisibleReverse&#39;</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">newCallback</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Adding callback for bottom visible reverse&#39;</span><span class="p">,</span> <span class="nx">newCallback</span><span class="p">);</span>
            <span class="nx">settings</span><span class="p">.</span><span class="nx">onBottomVisibleReverse</span> <span class="o">=</span> <span class="nx">newCallback</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">calculations</span><span class="p">.</span><span class="nx">bottomVisible</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">occurred</span><span class="p">(</span><span class="s1">&#39;bottomVisible&#39;</span><span class="p">))</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">callbackName</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">settings</span><span class="p">.</span><span class="nx">once</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">occurred</span><span class="p">(</span><span class="nx">callbackName</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">newCallback</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="o">!</span><span class="nx">calculations</span><span class="p">.</span><span class="nx">bottomVisible</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">topPassedReverse</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">newCallback</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">calculations</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">elementCalculations</span><span class="p">(),</span>
            <span class="nx">callback</span>     <span class="o">=</span> <span class="nx">newCallback</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">onTopPassedReverse</span><span class="p">,</span>
            <span class="nx">callbackName</span> <span class="o">=</span> <span class="s1">&#39;topPassedReverse&#39;</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">newCallback</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Adding callback for top passed reverse&#39;</span><span class="p">,</span> <span class="nx">newCallback</span><span class="p">);</span>
            <span class="nx">settings</span><span class="p">.</span><span class="nx">onTopPassedReverse</span> <span class="o">=</span> <span class="nx">newCallback</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">calculations</span><span class="p">.</span><span class="nx">topPassed</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">occurred</span><span class="p">(</span><span class="s1">&#39;topPassed&#39;</span><span class="p">))</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">callbackName</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">settings</span><span class="p">.</span><span class="nx">once</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">occurred</span><span class="p">(</span><span class="nx">callbackName</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">newCallback</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="o">!</span><span class="nx">calculations</span><span class="p">.</span><span class="nx">onTopPassed</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">bottomPassedReverse</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">newCallback</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">calculations</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">elementCalculations</span><span class="p">(),</span>
            <span class="nx">callback</span>     <span class="o">=</span> <span class="nx">newCallback</span> <span class="o">||</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">onBottomPassedReverse</span><span class="p">,</span>
            <span class="nx">callbackName</span> <span class="o">=</span> <span class="s1">&#39;bottomPassedReverse&#39;</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">newCallback</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Adding callback for bottom passed reverse&#39;</span><span class="p">,</span> <span class="nx">newCallback</span><span class="p">);</span>
            <span class="nx">settings</span><span class="p">.</span><span class="nx">onBottomPassedReverse</span> <span class="o">=</span> <span class="nx">newCallback</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">calculations</span><span class="p">.</span><span class="nx">bottomPassed</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">occurred</span><span class="p">(</span><span class="s1">&#39;bottomPassed&#39;</span><span class="p">))</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">callbackName</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">settings</span><span class="p">.</span><span class="nx">once</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">occurred</span><span class="p">(</span><span class="nx">callbackName</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">newCallback</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="o">!</span><span class="nx">calculations</span><span class="p">.</span><span class="nx">bottomPassed</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">execute</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">callbackName</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">calculations</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">elementCalculations</span><span class="p">(),</span>
            <span class="nx">screen</span>       <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">screenCalculations</span><span class="p">()</span>
          <span class="p">;</span>
          <span class="nx">callback</span>     <span class="o">=</span> <span class="nx">callback</span> <span class="o">||</span> <span class="kc">false</span><span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">continuous</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Callback being called continuously&#39;</span><span class="p">,</span> <span class="nx">callbackName</span><span class="p">,</span> <span class="nx">calculations</span><span class="p">);</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">element</span><span class="p">)(</span><span class="nx">calculations</span><span class="p">,</span> <span class="nx">screen</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">occurred</span><span class="p">(</span><span class="nx">callbackName</span><span class="p">))</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Conditions met&#39;</span><span class="p">,</span> <span class="nx">callbackName</span><span class="p">,</span> <span class="nx">calculations</span><span class="p">);</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">element</span><span class="p">)(</span><span class="nx">calculations</span><span class="p">,</span> <span class="nx">screen</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">save</span><span class="p">.</span><span class="nx">occurred</span><span class="p">(</span><span class="nx">callbackName</span><span class="p">);</span>
        <span class="p">},</span>

        <span class="nx">remove</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">occurred</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">occurred</span><span class="p">[</span><span class="nx">callback</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">occurred</span><span class="p">[</span><span class="nx">callback</span><span class="p">]</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Callback can now be called again&#39;</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">occurred</span><span class="p">[</span><span class="nx">callback</span><span class="p">]</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">occurred</span> <span class="o">=</span> <span class="p">{};</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">save</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">occurred</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">occurred</span><span class="p">[</span><span class="nx">callback</span><span class="p">]</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">occurred</span><span class="p">[</span><span class="nx">callback</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">true</span><span class="p">))</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Saving callback occurred&#39;</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">occurred</span><span class="p">[</span><span class="nx">callback</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">scroll</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">scroll</span> <span class="o">=</span> <span class="nx">$context</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">()</span> <span class="o">+</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">offset</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">direction</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">scroll</span>     <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">scroll</span><span class="p">(),</span>
              <span class="nx">lastScroll</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">lastScroll</span><span class="p">(),</span>
              <span class="nx">direction</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">scroll</span> <span class="o">&gt;</span> <span class="nx">lastScroll</span> <span class="o">&amp;&amp;</span> <span class="nx">lastScroll</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">direction</span> <span class="o">=</span> <span class="s1">&#39;down&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">scroll</span> <span class="o">&lt;</span> <span class="nx">lastScroll</span> <span class="o">&amp;&amp;</span> <span class="nx">lastScroll</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">direction</span> <span class="o">=</span> <span class="s1">&#39;up&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">direction</span> <span class="o">=</span> <span class="s1">&#39;static&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">direction</span> <span class="o">=</span> <span class="nx">direction</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">direction</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">elementPosition</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">screen</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">screenSize</span><span class="p">()</span>
            <span class="p">;</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Saving element position&#39;</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">element</span><span class="p">,</span> <span class="p">{</span>
              <span class="nx">margin</span> <span class="o">:</span> <span class="p">{</span>
                <span class="nx">top</span>    <span class="o">:</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">$module</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;margin-top&#39;</span><span class="p">),</span> <span class="mi">10</span><span class="p">),</span>
                <span class="nx">bottom</span> <span class="o">:</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">$module</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;margin-bottom&#39;</span><span class="p">),</span> <span class="mi">10</span><span class="p">)</span>
              <span class="p">},</span>
              <span class="nx">fits</span>   <span class="o">:</span> <span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">height</span> <span class="o">&lt;</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">height</span><span class="p">),</span>
              <span class="nx">offset</span> <span class="o">:</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">offset</span><span class="p">(),</span>
              <span class="nx">width</span>  <span class="o">:</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">outerWidth</span><span class="p">(),</span>
              <span class="nx">height</span> <span class="o">:</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">outerHeight</span><span class="p">()</span>
            <span class="p">});</span>
            <span class="k">return</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">element</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">elementCalculations</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">screen</span>  <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">screenCalculations</span><span class="p">(),</span>
              <span class="nx">element</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">elementPosition</span><span class="p">()</span>
            <span class="p">;</span></pre></div></td></tr><tr id="section-240"><td class="docs"><div class="pilwrap"><a href="#section-240" class="pilcrow">&#182;</a></div><p>offset</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">includeMargin</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">element</span><span class="p">,</span> <span class="p">{</span>
                <span class="nx">top</span>    <span class="o">:</span> <span class="nx">element</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">top</span> <span class="o">-</span> <span class="nx">element</span><span class="p">.</span><span class="nx">margin</span><span class="p">.</span><span class="nx">top</span><span class="p">,</span>
                <span class="nx">bottom</span> <span class="o">:</span> <span class="nx">element</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">top</span> <span class="o">+</span> <span class="nx">element</span><span class="p">.</span><span class="nx">height</span> <span class="o">+</span> <span class="nx">element</span><span class="p">.</span><span class="nx">margin</span><span class="p">.</span><span class="nx">bottom</span>
              <span class="p">});</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">element</span><span class="p">,</span> <span class="p">{</span>
                <span class="nx">top</span>    <span class="o">:</span> <span class="nx">element</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">top</span><span class="p">,</span>
                <span class="nx">bottom</span> <span class="o">:</span> <span class="nx">element</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">top</span> <span class="o">+</span> <span class="nx">element</span><span class="p">.</span><span class="nx">height</span>
              <span class="p">});</span>
            <span class="p">}</span></pre></div></td></tr><tr id="section-241"><td class="docs"><div class="pilwrap"><a href="#section-241" class="pilcrow">&#182;</a></div><p>visibility</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">element</span><span class="p">,</span> <span class="p">{</span>
              <span class="nx">topVisible</span>       <span class="o">:</span> <span class="p">(</span><span class="nx">screen</span><span class="p">.</span><span class="nx">bottom</span> <span class="o">&gt;=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">top</span><span class="p">),</span>
              <span class="nx">topPassed</span>        <span class="o">:</span> <span class="p">(</span><span class="nx">screen</span><span class="p">.</span><span class="nx">top</span> <span class="o">&gt;=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">top</span><span class="p">),</span>
              <span class="nx">bottomVisible</span>    <span class="o">:</span> <span class="p">(</span><span class="nx">screen</span><span class="p">.</span><span class="nx">bottom</span> <span class="o">&gt;=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">bottom</span><span class="p">),</span>
              <span class="nx">bottomPassed</span>     <span class="o">:</span> <span class="p">(</span><span class="nx">screen</span><span class="p">.</span><span class="nx">top</span> <span class="o">&gt;=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">bottom</span><span class="p">),</span>
              <span class="nx">pixelsPassed</span>     <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
              <span class="nx">percentagePassed</span> <span class="o">:</span> <span class="mi">0</span>
            <span class="p">});</span></pre></div></td></tr><tr id="section-242"><td class="docs"><div class="pilwrap"><a href="#section-242" class="pilcrow">&#182;</a></div><p>meta calculations</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">element</span><span class="p">,</span> <span class="p">{</span>
              <span class="nx">visible</span> <span class="o">:</span> <span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">topVisible</span> <span class="o">||</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">bottomVisible</span><span class="p">),</span>
              <span class="nx">passing</span> <span class="o">:</span> <span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">topPassed</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">bottomPassed</span><span class="p">),</span>
              <span class="nx">hidden</span>  <span class="o">:</span> <span class="p">(</span><span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">topVisible</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">bottomVisible</span><span class="p">)</span>
            <span class="p">});</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">passing</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">pixelsPassed</span> <span class="o">=</span> <span class="p">(</span><span class="nx">screen</span><span class="p">.</span><span class="nx">top</span> <span class="o">-</span> <span class="nx">element</span><span class="p">.</span><span class="nx">top</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">percentagePassed</span> <span class="o">=</span> <span class="p">(</span><span class="nx">screen</span><span class="p">.</span><span class="nx">top</span> <span class="o">-</span> <span class="nx">element</span><span class="p">.</span><span class="nx">top</span><span class="p">)</span> <span class="o">/</span> <span class="nx">element</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Updated element calculations&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">element</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">screenCalculations</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">scroll</span> <span class="o">=</span> <span class="nx">$context</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">()</span> <span class="o">+</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">offset</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">scroll</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">scroll</span> <span class="o">=</span> <span class="nx">$context</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">()</span> <span class="o">+</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">offset</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">save</span><span class="p">.</span><span class="nx">direction</span><span class="p">();</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">screen</span><span class="p">,</span> <span class="p">{</span>
              <span class="nx">top</span>    <span class="o">:</span> <span class="nx">scroll</span><span class="p">,</span>
              <span class="nx">bottom</span> <span class="o">:</span> <span class="nx">scroll</span> <span class="o">+</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">screen</span><span class="p">.</span><span class="nx">height</span>
            <span class="p">});</span>
            <span class="k">return</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">screen</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">screenSize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Saving window position&#39;</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">screen</span> <span class="o">=</span> <span class="p">{</span>
              <span class="nx">height</span><span class="o">:</span> <span class="nx">$context</span><span class="p">.</span><span class="nx">height</span><span class="p">()</span>
            <span class="p">};</span>
          <span class="p">},</span>
          <span class="nx">position</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">save</span><span class="p">.</span><span class="nx">screenSize</span><span class="p">();</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">save</span><span class="p">.</span><span class="nx">elementPosition</span><span class="p">();</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">get</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">pixelsPassed</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">amount</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">element</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">elementCalculations</span><span class="p">()</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">amount</span><span class="p">.</span><span class="nx">search</span><span class="p">(</span><span class="s1">&#39;%&#39;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="p">(</span> <span class="nx">element</span><span class="p">.</span><span class="nx">height</span> <span class="o">*</span> <span class="p">(</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">amount</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)</span> <span class="p">);</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">amount</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">occurred</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">occurred</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
              <span class="o">?</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">occurred</span><span class="p">[</span><span class="nx">callback</span><span class="p">]</span> <span class="o">||</span> <span class="kc">false</span>
              <span class="o">:</span> <span class="kc">false</span>
            <span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">direction</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">direction</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">save</span><span class="p">.</span><span class="nx">direction</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">direction</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">elementPosition</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">element</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">save</span><span class="p">.</span><span class="nx">elementPosition</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">element</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">elementCalculations</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">element</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">save</span><span class="p">.</span><span class="nx">elementCalculations</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">element</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">screenCalculations</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">screen</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">save</span><span class="p">.</span><span class="nx">screenCalculations</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">screen</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">screenSize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">screen</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">save</span><span class="p">.</span><span class="nx">screenSize</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">screen</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">scroll</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">scroll</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">save</span><span class="p">.</span><span class="nx">scroll</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">scroll</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">lastScroll</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">screen</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;First scroll event, no last scroll could be found&#39;</span><span class="p">);</span>
              <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">module</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">screen</span><span class="p">.</span><span class="nx">top</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">setting</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">settings</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">internal</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">module</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">debug</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">verbose</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">&amp;&amp;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">performance</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">log</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">currentTime</span><span class="p">,</span>
              <span class="nx">executionTime</span><span class="p">,</span>
              <span class="nx">previousTime</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">currentTime</span>   <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>
              <span class="nx">previousTime</span>  <span class="o">=</span> <span class="nx">time</span> <span class="o">||</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">executionTime</span> <span class="o">=</span> <span class="nx">currentTime</span> <span class="o">-</span> <span class="nx">previousTime</span><span class="p">;</span>
              <span class="nx">time</span>          <span class="o">=</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">performance</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
                <span class="s1">&#39;Name&#39;</span>           <span class="o">:</span> <span class="nx">message</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="s1">&#39;Arguments&#39;</span>      <span class="o">:</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Element&#39;</span>        <span class="o">:</span> <span class="nx">element</span><span class="p">,</span>
                <span class="s1">&#39;Execution Time&#39;</span> <span class="o">:</span> <span class="nx">executionTime</span>
              <span class="p">});</span>
            <span class="p">}</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">display</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">title</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span>
              <span class="nx">totalTime</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="p">;</span>
            <span class="nx">time</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">totalTime</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">];</span>
            <span class="p">});</span>
            <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">totalTime</span> <span class="o">+</span> <span class="s1">&#39;ms&#39;</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">moduleSelector</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; \&#39;&#39;</span> <span class="o">+</span> <span class="nx">moduleSelector</span> <span class="o">+</span> <span class="s1">&#39;\&#39;&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span> <span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">group</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">console</span><span class="p">.</span><span class="nx">table</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">performance</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupCollapsed</span><span class="p">(</span><span class="nx">title</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">performance</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;ms&#39;</span><span class="p">);</span>
                <span class="p">});</span>
              <span class="p">}</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupEnd</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">performance</span> <span class="o">=</span> <span class="p">[];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">invoke</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">object</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">,</span>
            <span class="nx">maxDepth</span><span class="p">,</span>
            <span class="nx">found</span><span class="p">,</span>
            <span class="nx">response</span>
          <span class="p">;</span>
          <span class="nx">passedArguments</span> <span class="o">=</span> <span class="nx">passedArguments</span> <span class="o">||</span> <span class="nx">queryArguments</span><span class="p">;</span>
          <span class="nx">context</span>         <span class="o">=</span> <span class="nx">element</span>         <span class="o">||</span> <span class="nx">context</span><span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">object</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">query</span>    <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/[\. ]/</span><span class="p">);</span>
            <span class="nx">maxDepth</span> <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">depth</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span> <span class="nx">camelCaseValue</span> <span class="o">=</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">value</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="o">:</span> <span class="nx">query</span>
              <span class="p">;</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">});</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">found</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">found</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">returnedValue</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">returnedValue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="p">[</span><span class="nx">returnedValue</span><span class="p">,</span> <span class="nx">response</span><span class="p">];</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">response</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="nx">found</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>

      <span class="k">if</span><span class="p">(</span><span class="nx">methodInvoked</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="nx">query</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">})</span>
  <span class="p">;</span>

  <span class="k">return</span> <span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
    <span class="o">?</span> <span class="nx">returnedValue</span>
    <span class="o">:</span> <span class="k">this</span>
  <span class="p">;</span>
<span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">visibility</span><span class="p">.</span><span class="nx">settings</span> <span class="o">=</span> <span class="p">{</span>

  <span class="nx">name</span>                   <span class="o">:</span> <span class="s1">&#39;Visibility&#39;</span><span class="p">,</span>
  <span class="nx">namespace</span>              <span class="o">:</span> <span class="s1">&#39;visibility&#39;</span><span class="p">,</span>

  <span class="nx">className</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">fixed</span><span class="o">:</span> <span class="s1">&#39;fixed&#39;</span>
  <span class="p">},</span>

  <span class="nx">debug</span>                  <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">verbose</span>                <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">performance</span>            <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="nx">offset</span>                 <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="nx">includeMargin</span>          <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>

  <span class="nx">context</span>                <span class="o">:</span> <span class="nb">window</span><span class="p">,</span></pre></div></td></tr><tr id="section-243"><td class="docs"><div class="pilwrap"><a href="#section-243" class="pilcrow">&#182;</a></div><p>visibility check delay in ms (defaults to animationFrame)</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">throttle</span>               <span class="o">:</span> <span class="kc">false</span><span class="p">,</span></pre></div></td></tr><tr id="section-244"><td class="docs"><div class="pilwrap"><a href="#section-244" class="pilcrow">&#182;</a></div><p>special visibility type (image, fixed)</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">type</span>                   <span class="o">:</span> <span class="kc">false</span><span class="p">,</span></pre></div></td></tr><tr id="section-245"><td class="docs"><div class="pilwrap"><a href="#section-245" class="pilcrow">&#182;</a></div><p>image only settings</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">transition</span>             <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">duration</span>               <span class="o">:</span> <span class="mi">500</span><span class="p">,</span></pre></div></td></tr><tr id="section-246"><td class="docs"><div class="pilwrap"><a href="#section-246" class="pilcrow">&#182;</a></div><p>array of callbacks for percentage</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">onPassed</span>               <span class="o">:</span> <span class="p">{},</span></pre></div></td></tr><tr id="section-247"><td class="docs"><div class="pilwrap"><a href="#section-247" class="pilcrow">&#182;</a></div><p>standard callbacks</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">onPassing</span>              <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">onTopVisible</span>           <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">onBottomVisible</span>        <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">onTopPassed</span>            <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">onBottomPassed</span>         <span class="o">:</span> <span class="kc">false</span><span class="p">,</span></pre></div></td></tr><tr id="section-248"><td class="docs"><div class="pilwrap"><a href="#section-248" class="pilcrow">&#182;</a></div><p>reverse callbacks</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">onPassingReverse</span>       <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">onTopVisibleReverse</span>    <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">onBottomVisibleReverse</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">onTopPassedReverse</span>     <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">onBottomPassedReverse</span>  <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>

  <span class="nx">once</span>                   <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">continuous</span>             <span class="o">:</span> <span class="kc">false</span><span class="p">,</span></pre></div></td></tr><tr id="section-249"><td class="docs"><div class="pilwrap"><a href="#section-249" class="pilcrow">&#182;</a></div><p>utility callbacks</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nx">onRefresh</span>              <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>
  <span class="nx">onScroll</span>               <span class="o">:</span> <span class="kd">function</span><span class="p">(){},</span>

  <span class="nx">error</span> <span class="o">:</span> <span class="p">{</span>
    <span class="nx">method</span>   <span class="o">:</span> <span class="s1">&#39;The method you called is not defined.&#39;</span>
  <span class="p">}</span>

<span class="p">};</span>

<span class="p">})(</span> <span class="nx">jQuery</span><span class="p">,</span> <span class="nb">window</span> <span class="p">,</span> <span class="nb">document</span> <span class="p">);</span></pre></div></td></tr><tr id="section-250"><td class="docs"><div class="pilwrap"><a href="#section-250" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><h1>Semantic - Visit</h1>

<p><a href='http://github.com/semantic-org/semantic-ui/'>http://github.com/semantic-org/semantic-ui/</a></p></div><div class="body"><p>Copyright 2014 Contributor<br />Released under the MIT license<br /><a href='http://opensource.org/licenses/MIT'>http://opensource.org/licenses/MIT</a></p></div></div>
</td><td class="code"><div class="highlight"><pre><span class="p">;(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">$</span><span class="p">,</span> <span class="nb">window</span><span class="p">,</span> <span class="nb">document</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">visit</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">visit</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">parameters</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span>
    <span class="nx">$allModules</span>     <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
        <span class="o">?</span> <span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">)</span>
        <span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
    <span class="nx">moduleSelector</span>  <span class="o">=</span> <span class="nx">$allModules</span><span class="p">.</span><span class="nx">selector</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>

    <span class="nx">time</span>            <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">(),</span>
    <span class="nx">performance</span>     <span class="o">=</span> <span class="p">[],</span>

    <span class="nx">query</span>           <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="nx">methodInvoked</span>   <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">),</span>
    <span class="nx">queryArguments</span>  <span class="o">=</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="nx">returnedValue</span>
  <span class="p">;</span>
  <span class="nx">$allModules</span>
    <span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span>
        <span class="nx">settings</span>        <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">visit</span><span class="p">.</span><span class="nx">settings</span><span class="p">,</span> <span class="nx">parameters</span><span class="p">),</span>

        <span class="nx">error</span>           <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span>
        <span class="nx">namespace</span>       <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">namespace</span><span class="p">,</span>

        <span class="nx">eventNamespace</span>  <span class="o">=</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">namespace</span><span class="p">,</span>
        <span class="nx">moduleNamespace</span> <span class="o">=</span> <span class="nx">namespace</span> <span class="o">+</span> <span class="s1">&#39;-module&#39;</span><span class="p">,</span>

        <span class="nx">$module</span>         <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
        <span class="nx">$displays</span>       <span class="o">=</span> <span class="nx">$</span><span class="p">(),</span>

        <span class="nx">element</span>         <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
        <span class="nx">instance</span>        <span class="o">=</span> <span class="nx">$module</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">),</span>
        <span class="nx">module</span>
      <span class="p">;</span>
      <span class="nx">module</span> <span class="o">=</span> <span class="p">{</span>

        <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">count</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">store</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">key</span><span class="p">.</span><span class="nx">count</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">count</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">id</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">increment</span> <span class="o">&amp;&amp;</span> <span class="nx">methodInvoked</span> <span class="o">!==</span> <span class="s1">&#39;increment&#39;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">increment</span><span class="p">();</span>
          <span class="p">}</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">display</span><span class="p">(</span><span class="nx">$module</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">instantiate</span><span class="p">();</span>
        <span class="p">},</span>

        <span class="nx">instantiate</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Storing instance of visit module&#39;</span><span class="p">,</span> <span class="nx">module</span><span class="p">);</span>
          <span class="nx">instance</span> <span class="o">=</span> <span class="nx">module</span><span class="p">;</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">,</span> <span class="nx">module</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">destroy</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Destroying instance&#39;</span><span class="p">);</span>
          <span class="nx">$module</span>
            <span class="p">.</span><span class="nx">removeData</span><span class="p">(</span><span class="nx">moduleNamespace</span><span class="p">)</span>
          <span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">increment</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">currentValue</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">count</span><span class="p">(),</span>
            <span class="nx">newValue</span>     <span class="o">=</span> <span class="o">+</span><span class="p">(</span><span class="nx">currentValue</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">id</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">newValue</span> <span class="o">&gt;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">limit</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">settings</span><span class="p">.</span><span class="nx">surpass</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">newValue</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">limit</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Incrementing visits&#39;</span><span class="p">,</span> <span class="nx">newValue</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">store</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">key</span><span class="p">.</span><span class="nx">count</span><span class="p">,</span> <span class="nx">newValue</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">decrement</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">currentValue</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">count</span><span class="p">(),</span>
            <span class="nx">newValue</span>     <span class="o">=</span> <span class="o">+</span><span class="p">(</span><span class="nx">currentValue</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">id</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Removing visit&#39;</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">store</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">key</span><span class="p">.</span><span class="nx">count</span><span class="p">,</span> <span class="nx">newValue</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">get</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">count</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="o">+</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">retrieve</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">key</span><span class="p">.</span><span class="nx">count</span><span class="p">))</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">idCount</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ids</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">ids</span> <span class="o">=</span> <span class="nx">ids</span> <span class="o">||</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">ids</span><span class="p">();</span>
            <span class="k">return</span> <span class="nx">ids</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">ids</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">delimitedIDs</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">idArray</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="p">;</span>
            <span class="nx">delimitedIDs</span> <span class="o">=</span> <span class="nx">delimitedIDs</span> <span class="o">||</span> <span class="nx">module</span><span class="p">.</span><span class="nx">retrieve</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">key</span><span class="p">.</span><span class="nx">ids</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">delimitedIDs</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">idArray</span> <span class="o">=</span> <span class="nx">delimitedIDs</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">delimiter</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">(</span><span class="s1">&#39;Found visited ID list&#39;</span><span class="p">,</span> <span class="nx">idArray</span><span class="p">);</span>
            <span class="k">return</span> <span class="nx">idArray</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">storageOptions</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">options</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">expires</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">options</span><span class="p">.</span><span class="nx">expires</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">expires</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">domain</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">options</span><span class="p">.</span><span class="nx">domain</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">domain</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">path</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">options</span><span class="p">.</span><span class="nx">path</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">path</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">options</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">has</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">visited</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">ids</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">visited</span> <span class="o">=</span> <span class="kc">false</span>
            <span class="p">;</span>
            <span class="nx">ids</span> <span class="o">=</span> <span class="nx">ids</span> <span class="o">||</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">ids</span><span class="p">();</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">id</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">ids</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">ids</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">value</span><span class="p">){</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">==</span> <span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">visited</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                <span class="p">}</span>
              <span class="p">});</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">visited</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">set</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">count</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">store</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">key</span><span class="p">.</span><span class="nx">count</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">ids</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">store</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">key</span><span class="p">.</span><span class="nx">ids</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">reset</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">store</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">key</span><span class="p">.</span><span class="nx">count</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">store</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">key</span><span class="p">.</span><span class="nx">ids</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>
        <span class="p">},</span>

        <span class="nx">add</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">id</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">currentIDs</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">retrieve</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">key</span><span class="p">.</span><span class="nx">ids</span><span class="p">),</span>
              <span class="nx">newIDs</span> <span class="o">=</span> <span class="p">(</span><span class="nx">currentIDs</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">currentIDs</span> <span class="o">===</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">id</span>
                <span class="o">:</span> <span class="nx">currentIDs</span> <span class="o">+</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">delimiter</span> <span class="o">+</span> <span class="nx">id</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">has</span><span class="p">.</span><span class="nx">visited</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Unique content already visited, not adding visit&#39;</span><span class="p">,</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">currentIDs</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">id</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;ID is not defined&#39;</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Adding visit to unique content&#39;</span><span class="p">,</span> <span class="nx">id</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">store</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">key</span><span class="p">.</span><span class="nx">ids</span><span class="p">,</span> <span class="nx">newIDs</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">count</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">idCount</span><span class="p">()</span> <span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">display</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">selector</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">$element</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">selector</span><span class="p">)</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">$element</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">$</span><span class="p">.</span><span class="nx">isWindow</span><span class="p">(</span><span class="nx">$element</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Updating visit count for element&#39;</span><span class="p">,</span> <span class="nx">$element</span><span class="p">);</span>
              <span class="nx">$displays</span> <span class="o">=</span> <span class="p">(</span><span class="nx">$displays</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">$displays</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">$element</span><span class="p">)</span>
                <span class="o">:</span> <span class="nx">$element</span>
              <span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">remove</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">id</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">currentIDs</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">ids</span><span class="p">(),</span>
              <span class="nx">newIDs</span>     <span class="o">=</span> <span class="p">[]</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">id</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">currentIDs</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Removing visit to unique content&#39;</span><span class="p">,</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">currentIDs</span><span class="p">);</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">currentIDs</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">value</span><span class="p">){</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">newIDs</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
                <span class="p">}</span>
              <span class="p">});</span>
              <span class="nx">newIDs</span> <span class="o">=</span> <span class="nx">newIDs</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">delimiter</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">store</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">key</span><span class="p">.</span><span class="nx">ids</span><span class="p">,</span> <span class="nx">newIDs</span> <span class="p">);</span>
            <span class="p">}</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">count</span><span class="p">(</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">idCount</span><span class="p">()</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">check</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">limit</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">value</span> <span class="o">=</span> <span class="nx">value</span> <span class="o">||</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">count</span><span class="p">();</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">limit</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">&gt;=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">limit</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Pages viewed exceeded limit, firing callback&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">limit</span><span class="p">);</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onLimit</span><span class="p">,</span> <span class="k">this</span><span class="p">)(</span><span class="nx">value</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Limit not reached&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">limit</span><span class="p">);</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">onChange</span><span class="p">,</span> <span class="k">this</span><span class="p">)(</span><span class="nx">value</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">update</span><span class="p">.</span><span class="nx">display</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">update</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">display</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">value</span> <span class="o">=</span> <span class="nx">value</span> <span class="o">||</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">count</span><span class="p">();</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">$displays</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Updating displayed view count&#39;</span><span class="p">,</span> <span class="nx">$displays</span><span class="p">);</span>
              <span class="nx">$displays</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">store</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">options</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">storageOptions</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">storageMethod</span> <span class="o">==</span> <span class="s1">&#39;localstorage&#39;</span> <span class="o">&amp;&amp;</span> <span class="nb">window</span><span class="p">.</span><span class="nx">localStorage</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nb">window</span><span class="p">.</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Value stored using local storage&#39;</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">cookie</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">cookie</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Value stored using cookie&#39;</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">noCookieStorage</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">key</span> <span class="o">==</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">key</span><span class="p">.</span><span class="nx">count</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">check</span><span class="p">.</span><span class="nx">limit</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">retrieve</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">storedValue</span>
          <span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">storageMethod</span> <span class="o">==</span> <span class="s1">&#39;localstorage&#39;</span> <span class="o">&amp;&amp;</span> <span class="nb">window</span><span class="p">.</span><span class="nx">localStorage</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">storedValue</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
          <span class="p">}</span></pre></div></td></tr><tr id="section-251"><td class="docs"><div class="pilwrap"><a href="#section-251" class="pilcrow">&#182;</a></div><p>get by cookie</p>
</td><td class="code"><div class="highlight"><pre>          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">cookie</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">storedValue</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">cookie</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">noCookieStorage</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">storedValue</span> <span class="o">==</span> <span class="s1">&#39;undefined&#39;</span> <span class="o">||</span> <span class="nx">storedValue</span> <span class="o">==</span> <span class="s1">&#39;null&#39;</span> <span class="o">||</span> <span class="nx">storedValue</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">storedValue</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">storedValue</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="nx">storedValue</span><span class="p">;</span>
        <span class="p">},</span>

        <span class="nx">setting</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">settings</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">settings</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">internal</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;Changing internal&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="nx">module</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">module</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">debug</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">debug</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">verbose</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">&amp;&amp;</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
              <span class="nx">module</span><span class="p">.</span><span class="nx">verbose</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span> <span class="nx">console</span><span class="p">,</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">error</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">performance</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">log</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">currentTime</span><span class="p">,</span>
              <span class="nx">executionTime</span><span class="p">,</span>
              <span class="nx">previousTime</span>
            <span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">settings</span><span class="p">.</span><span class="nx">performance</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">currentTime</span>   <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>
              <span class="nx">previousTime</span>  <span class="o">=</span> <span class="nx">time</span> <span class="o">||</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">executionTime</span> <span class="o">=</span> <span class="nx">currentTime</span> <span class="o">-</span> <span class="nx">previousTime</span><span class="p">;</span>
              <span class="nx">time</span>          <span class="o">=</span> <span class="nx">currentTime</span><span class="p">;</span>
              <span class="nx">performance</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
                <span class="s1">&#39;Name&#39;</span>           <span class="o">:</span> <span class="nx">message</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="s1">&#39;Arguments&#39;</span>      <span class="o">:</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Element&#39;</span>        <span class="o">:</span> <span class="nx">element</span><span class="p">,</span>
                <span class="s1">&#39;Execution Time&#39;</span> <span class="o">:</span> <span class="nx">executionTime</span>
              <span class="p">});</span>
            <span class="p">}</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">display</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="nx">display</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span>
              <span class="nx">title</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span>
              <span class="nx">totalTime</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="p">;</span>
            <span class="nx">time</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">totalTime</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">];</span>
            <span class="p">});</span>
            <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">totalTime</span> <span class="o">+</span> <span class="s1">&#39;ms&#39;</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">moduleSelector</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; \&#39;&#39;</span> <span class="o">+</span> <span class="nx">moduleSelector</span> <span class="o">+</span> <span class="s1">&#39;\&#39;&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">$allModules</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">title</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="s1">&#39;(&#39;</span> <span class="o">+</span> <span class="nx">$allModules</span><span class="p">.</span><span class="nx">size</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span> <span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">group</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">console</span><span class="p">.</span><span class="nx">table</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">performance</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupCollapsed</span><span class="p">(</span><span class="nx">title</span><span class="p">);</span>
              <span class="k">if</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">performance</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">performance</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nx">data</span><span class="p">[</span><span class="s1">&#39;Execution Time&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;ms&#39;</span><span class="p">);</span>
                <span class="p">});</span>
              <span class="p">}</span>
              <span class="nx">console</span><span class="p">.</span><span class="nx">groupEnd</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">performance</span> <span class="o">=</span> <span class="p">[];</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">invoke</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span>
            <span class="nx">object</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">,</span>
            <span class="nx">maxDepth</span><span class="p">,</span>
            <span class="nx">found</span><span class="p">,</span>
            <span class="nx">response</span>
          <span class="p">;</span>
          <span class="nx">passedArguments</span> <span class="o">=</span> <span class="nx">passedArguments</span> <span class="o">||</span> <span class="nx">queryArguments</span><span class="p">;</span>
          <span class="nx">context</span>         <span class="o">=</span> <span class="nx">element</span>         <span class="o">||</span> <span class="nx">context</span><span class="p">;</span>
          <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">query</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">object</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">query</span>    <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/[\. ]/</span><span class="p">);</span>
            <span class="nx">maxDepth</span> <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">depth</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span> <span class="nx">camelCaseValue</span> <span class="o">=</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span>
                <span class="o">?</span> <span class="nx">value</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">query</span><span class="p">[</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="o">:</span> <span class="nx">query</span>
              <span class="p">;</span>
              <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">camelCaseValue</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">!=</span> <span class="nx">maxDepth</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">found</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">else</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">});</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">found</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">passedArguments</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">found</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">found</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">returnedValue</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">returnedValue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="p">[</span><span class="nx">returnedValue</span><span class="p">,</span> <span class="nx">response</span><span class="p">];</span>
          <span class="p">}</span>
          <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">response</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">returnedValue</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="nx">found</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">methodInvoked</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">invoke</span><span class="p">(</span><span class="nx">query</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">instance</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">module</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nx">module</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
      <span class="p">}</span>

    <span class="p">})</span>
  <span class="p">;</span>
  <span class="k">return</span> <span class="p">(</span><span class="nx">returnedValue</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span>
    <span class="o">?</span> <span class="nx">returnedValue</span>
    <span class="o">:</span> <span class="k">this</span>
  <span class="p">;</span>
<span class="p">};</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">visit</span><span class="p">.</span><span class="nx">settings</span> <span class="o">=</span> <span class="p">{</span>

  <span class="nx">name</span>          <span class="o">:</span> <span class="s1">&#39;Visit&#39;</span><span class="p">,</span>

  <span class="nx">debug</span>         <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">verbose</span>       <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">performance</span>   <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="nx">namespace</span>     <span class="o">:</span> <span class="s1">&#39;visit&#39;</span><span class="p">,</span>

  <span class="nx">increment</span>     <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">surpass</span>       <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">count</span>         <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">limit</span>         <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>

  <span class="nx">delimiter</span>     <span class="o">:</span> <span class="s1">&#39;&amp;&#39;</span><span class="p">,</span>
  <span class="nx">storageMethod</span> <span class="o">:</span> <span class="s1">&#39;localstorage&#39;</span><span class="p">,</span>

  <span class="nx">key</span>           <span class="o">:</span> <span class="p">{</span>
    <span class="nx">count</span> <span class="o">:</span> <span class="s1">&#39;visit-count&#39;</span><span class="p">,</span>
    <span class="nx">ids</span>   <span class="o">:</span> <span class="s1">&#39;visit-ids&#39;</span>
  <span class="p">},</span>

  <span class="nx">expires</span>       <span class="o">:</span> <span class="mi">30</span><span class="p">,</span>
  <span class="nx">domain</span>        <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">path</span>          <span class="o">:</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span>

  <span class="nx">onLimit</span>       <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{},</span>
  <span class="nx">onChange</span>      <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{},</span>

  <span class="nx">error</span>         <span class="o">:</span> <span class="p">{</span>
    <span class="nx">method</span>          <span class="o">:</span> <span class="s1">&#39;The method you called is not defined&#39;</span><span class="p">,</span>
    <span class="nx">missingPersist</span>  <span class="o">:</span> <span class="s1">&#39;Using the persist setting requires the inclusion of PersistJS&#39;</span><span class="p">,</span>
    <span class="nx">noCookieStorage</span> <span class="o">:</span> <span class="s1">&#39;The default storage cookie requires $.cookie to be included.&#39;</span>
  <span class="p">}</span>

<span class="p">};</span>

<span class="p">})(</span> <span class="nx">jQuery</span><span class="p">,</span> <span class="nb">window</span> <span class="p">,</span> <span class="nb">document</span> <span class="p">);</span>

</pre></div></td></tr></tbody></table><div id="generated">generated Mon Dec 08 2014 17:05:08 GMT-0800 (PST)  </div></div></body></html>